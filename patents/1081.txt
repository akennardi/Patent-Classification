    Title: METHOD AND APPARATUS FOR JUDGING AGE BRACKETS OF USERS
   Abstract:
 s Disclosed are a method and apparatus for judging age brackets of users. The method
   comprises: acquiring a plurality of consumption data of a plurality of users (303);
   modeling on the basis of the acquired plurality of consumption data to establish
   models satisfying specific conditions of predictive correct rates larger than or equal to
   a predetermined threshold, the modeling further comprising: dividing the
10 consumption data into training data and test data (305); calculating the number of the
   users of the training data in a plurality of predetermined age brackets (307),
   calculating the number of each three-hierarchy category of the training data in the
   plurality of predetermined age brackets (309), and calculating probabilities that each
   tuple of the test data belongs to each of the plurality of predetermined age brackets on
15 the basis of the number of the users and the number of the three-hierarchy categories
   (311); selecting the age bracket to which the maximum one of the probabilities
   belongs as the age bracket to which the user corresponding to the tuple belongs (313);
   comparing errors between the plurality of predetermined age brackets and the selected
   age bracket to obtain the predictive correct rates, and outputting the models with the
20 predictive correct rates larger than or equal to a predetermined threshold (315); and
   calculating the age brackets of the users by utilizing the output models (317).

     METHOD AND APPARATUS FOR JUDGING AGE BRACKETS OF USERS
   The present application is a Divisional of Australian Patent Application 2015246423,
 s filed on 19 October 2016 the content of which is hereby incorporated by reference in
   its entirety.
   TECHNICAL FIELD
10 The invention relates to the internet information analysis field, and specifically relates
   to a method and apparatus for judging age brackets of users.
   BACKGROUND ART
15 In recent years, the internet develops rapidly, which brings great conveniences and
   benefits to people, and the people can perform activities such as entertainment,
   shopping, and making friends via the network. Websites also provide users with more
   comfortable and highly targeted servers through registration information of the users,
   but due to the virtuality three-hierarchy of networks, many users are not willing to
20 reveal personal information too much.
   In order to improve the efficiency of the user registration time, age is not a required
   item, and even if very few persons fill in the information of this item, some persons
   handle with the item carelessly, so the information is not accurate, which results in a
25 severe lack of such important data in a database. The reason that the age is the
   important information of a user is that users with different ages are very different in
   terms of living habits, attitudes to life and personal values, and as regarding to
   e-commerce, they are very different in terms of shopping habits. Thus, target
   marketing can be performed with respect to the users as long as the ages of the users
30 are known well, thereby the adhesiveness of users are improved.
   Since there are limited precious user age information, and there are certain errors,
   some persons filter the ages of the users with internet industry data and experiences to
   thereby obtain relatively accurate age data. Such method can only obtain the ages of
35 part of the users, which are only the tip of the iceberg of a huge user group.
   Relevant technical staff of the Tencent Inc. estimate the ages of the users on the basis
   of massive data. The method comprises: acquiring basic age data of the users,
   assigning the basic age data with an initial weighted value; acquiring age weighted
40 values of the users in the different basic age data in accordance with the initial
   weighted value and age similarity of the users in the different basic age data;
   searching the age having the maximum age weight value in the basic age data, and
   using the age having the maximum age weight value as an initial estimated age of the
   users. Other prior arts relating to the invention mainly include: a Naive Bayes
                                                 1

   algorithm technique, a massive data processing technique, and a python programming
   technique.
   The prior solution is to segment the ages of the users, i.e., age brackets of all the users
 5 are finally obtained. The disadvantage of such solution is that the granularity is
   comparatively coarse, which cannot finely describe the ages of the users.
   Thus, a technical solution that can more accurately determine the ages of the users is
   needed.
10
   SUMMARY OF THE INVENTION
   The object of the invention is to more accurately determine age brackets of users by
   analyzing consumption data of the users, thereby target marketing in accordance with
15 characteristics of the age brackets is achieved.
   In accordance with one embodiment of the invention, a method for determining age
   brackets of users on the basis of consumption data of the users is provided, the
   method comprising: acquiring a plurality of consumption data of a plurality of users;
20 modeling on the basis of the acquired plurality of consumption data to establish
   models satisfying specific conditions of predictive correct rates larger than or equal to
   a predetermined threshold, the modeling further comprising: dividing the
   consumption data into training data and test data; calculating the number of the users
   of the training data in a plurality of predetermined age brackets, calculating the
25 number of each three-hierarchy category of the training data in the plurality of
   predetermined age brackets, and calculating probabilities that each tuple of the test
   data belongs to each of the plurality of predetermined age brackets on the basis of the
   number of the users and the number of the three-hierarchy categories; selecting the
   age bracket to which the maximum one of the probabilities belongs as the age bracket
30 to which the user corresponding to the tuple belongs; comparing errors between the
   plurality of predetermined age brackets and the selected age bracket to obtain the
   predictive correct rates, and outputting the models with the predictive correct rates
   larger than or equal to the predetermined threshold; and calculating the age brackets
   of the users by utilizing the output models.
35
   Preferably, the dividing the consumption data into training data and test data further
   comprises: segmenting the consumption data in accordance with the plurality of
   predetermined age brackets; and removing consumption data with the number of the
   three-hierarchy categories smaller than a predetermined number from the
40 consumption data.
   Preferably, the proportion of the training data to the test data is 7:3.
   Preferably, the predetermined threshold is 0.7.
                                                2

   Preferably, the method further comprises: selectively providing advertisements,
   recommendations, reports, notifications, messages, media or any combination thereof
   to the users on the basis of the selected age bracket.
 5
   According to another embodiment of the invention, an apparatus for determining age
   brackets of users on the basis of consumption data of the users is provided, the
   apparatus comprising: an input module for acquiring a plurality of consumption data
   of a plurality of users; a modeling module for modeling on the basis of the acquired
10 plurality of consumption data to establish models satisfying specific conditions of
   predictive correct rates larger than or equal to a predetermined threshold, the
   modeling module further comprising: a calculating module configured to divide the
   consumption data into training data and test data; calculate the number of the users of
   the training data in a plurality of predetermined age brackets; calculate the number of
15 each three-hierarchy category of the training data in the plurality of predetermined age
   brackets; and calculate probabilities that each tuple of the test data belongs to each of
   the plurality of predetermined age brackets on the basis of the number of the users and
   the number of the three-hierarchy categories; a selecting module configured to select
   the age bracket to which the maximum one of the probabilities belongs as the age
20 bracket to which the user corresponding to the tuple belongs; a comparing module
   configured to compare errors between the plurality of predetermined age brackets and
   the selected age bracket to obtain the predictive correct rates, and output the models
   with the predictive correct rates larger than or equal to the predetermined threshold;
   and an application module for calculating the age brackets of the users by utilizing the
25 output models.
   Preferably, the modeling module is further configured to: segment the consumption
   data in accordance with the plurality of predetermined age brackets; and remove
   consumption data with the number of the three-hierarchy categories smaller than a
30 predetermined number from the consumption data.
   Preferably, the proportion of the training data to the test data is 7:3.
   Preferably, the predetermined threshold is 0.7.
35
   Preferably, the apparatus further comprises: a presenting module for selectively
   providing advertisements, recommendations, reports, notifications, messages, media
   or any combination thereof to the users on the basis of the selected age bracket.
40 According to another embodiment of the invention, there is provided a method for
   determining age brackets of users on the basis of consumption data of the users,
   comprising: acquiring a plurality of consumption data of a plurality of users;
   modeling on the basis of the acquired plurality of consumption data to establish
   models satisfying specific conditions of predictive correct rates larger than or equal to
                                                3

   a predetermined threshold, the modeling further comprising: dividing the
   consumption data into training data and test data; calculating probabilities of each age
   bracket occurring with respect to a plurality of predetermined age brackets based on
   the number of the users in the training data belonging to each of the plurality of
 s predetermined age brackets, calculating the number of each three-hierarchy category
   of the training data in the plurality of predetermined age brackets, and calculating
   probabilities that a tuple of the test data belongs to each of the plurality of
   predetermined age brackets on the basis of the probabilities of each age bracket
   occurring with respect to a plurality of predetermined age brackets, and probabilities
10 that the number of the three-hierarchy categories in the tuple of the test data occurs
   with respect to the number of each three-hierarchy category of the training data in the
   plurality of predetermined age brackets; selecting the age bracket to which the
   maximum one of the probabilities belongs as the age bracket to which the user
   corresponding to the tuple belongs; comparing errors between the plurality of
15 predetermined age brackets and the selected age bracket to obtain the predictive
   correct rates, and outputting the models with the predictive correct rates larger than or
   equal to the predetermined threshold; and calculating the age brackets of the users by
   utilizing the output models.
20 According to another embodiment of the invention, there is provided an apparatus for
   determining age brackets of users on the basis of consumption data of the users,
   comprising: an input module for acquiring a plurality of consumption data of a
   plurality of users; a modeling module for modeling on the basis of the acquired
   plurality of consumption data to establish models satisfying specific conditions of
25 predictive correct rates larger than or equal to a predetermined threshold, the
   modeling module further comprising: a calculating module configured to divide the
   consumption data into training data and test data; calculate probabilities of each age
   bracket occurring with respect to a plurality of predetermined age brackets based on
   the number of the users in the training data belonging to each of the plurality of
30 predetermined age brackets; calculate the number of each three-hierarchy category of
   the training data in the plurality of predetermined age brackets; and calculate
   probabilities that a tuple of the test data belongs to each of the plurality of
   predetermined age brackets on the basis of the probabilities of each age bracket
   occurring with respect to a plurality of predetermined age brackets, and probabilities
35 that the number of the three-hierarchy categories in the tuple of the test data occurs
   with respect to the number of each three-hierarchy category of the training data in the
   plurality of predetermined age brackets; a selecting module configured to select the
   age bracket to which the maximum one of the probabilities belongs as the age bracket
   to which the user corresponding to the tuple belongs; a comparing module configured
40 to compare errors between the plurality of predetermined age brackets and the
   selected age bracket to obtain the predictive correct rates, and output the models with
   the predictive correct rates larger than or equal to the predetermined threshold; and an
   application module for calculating the age brackets of the users by utilizing the output
   models.
                                                4

   According to the solution of determining the age brackets of the users of the invention,
   the age brackets of the users can be exactly and automatically determined. In
   accordance with detailed descriptions of the disclosure and figures below, other
 5 objects, features and advantages will be obvious to those skilled in the art.
   BRIEF DESCRIPTION OF THE DRAWINGS
   Figures show embodiments of the invention, and are used for explaining the principle
   of the invention together with the Specification. In the figures:
10 FIG. 1 shows a view of an apparatus 100 for determining age brackets of users in
   accordance with the embodiment of the invention;
   FIG. 2 shows a schematic diagram of a solution 200 for determining the age brackets
   of the users in accordance with the invention; and
   FIG. 3 shows a flow chart of a method 300 for estimating the age brackets of the users
15 on the basis of consumption data of the users in accordance with the embodiment of
   the invention.
   DETAILED DESCRIPTION
20 In accordance with the embodiment of the invention, a method and apparatus for
   determining age brackets of users is disclosed. In the descriptions below, for the
   purpose of explanations, multiple specific details are illustrated to provide overall
   understanding of the embodiments of the invention. However, it is obvious to those
   skilled in the art that the embodiments of the invention can be achieved without these
25 specific details.
   As mentioned above, applications and services to be provided to the users often
   depend on ages of the users, which serve as an important factor for providing efficient
   services. That is to say, the users with different ages may be interested in different
30 services. For example, advertisements, contents, applications and the like are
   generally designed for audience with particular ages. For example, university students
   generally belong to a group of standard consumption, while adults generally belong to
   a group of household consumption. Thus, acquirement of age ranges of the users can
   facilitate the provision of customized services to the users. Moreover, relevant
35 advertisements, contents and applications can be pushed to the users in relation to the
   ages, so that a user device does not bear massive loads of other information irrelevant
   to the age ranges of the users. In addition, some services require that the users are in a
   certain age bracket, and product information with respect to children with different
   ages need to aim at consumers having children in the corresponding age bracket.
40
   The age bracket of the user can be determined by considering multiple aspects of the
   user. For example, the consumption data of the user during a specific time period can
   reflect the age bracket of the user. For example, a family having a child and a single
   person or a family not having a child have different consumption habits, and there are
                                                5

   also differences among families having a child in different age brackets. Thus, the age
   bracket of the user can be estimated by analyzing the consumption data of the user.
   For example, an analysis can be performed with respect to the consumption data of
 5 the user during a specific time period, for example the most recent year. The reason
   that the specific time period is selected as the most recent year is that the age of the
   user will increase as the passage of time, consumption characteristics in the most
   recent year reflect behavior habits in the current age, and the consumption habit of the
   user will correspondingly change along with the increasing of the age of the user, so
10 consumption behaviors and characteristics during this age period can be actually
   reflected by taking a year as a unit. Certainly, in order to more exactly reflect a trend
   or change of the consumption characteristics in a specific age bracket, other time units,
   e.g., three months and six months, can be also used.
15 For example, in accordance with characteristics of the user using internet and actual
   conditions of an e-commerce, the e-commerce can set a plurality of predetermined age
   brackets in a system, and each age bracket includes a specific age range. Alternatively,
   the age brackets can be also self-defined by the users. For example, the age brackets
   can be divided into the following five ones:
20  1 " bracket: 15-18 years old: a group without consumption capacity
   2 "dbracket: 19-25 years old: single, in a group of standard consumption
   3 rd bracket: 26-35 years old: a group of consumers having children in kindergartens
   4 th bracket: 36-45 years old: a group of consumers having children in primary schools,
   junior middle schools and high schools
25 5 th bracket: 46-55 years old: a group of consumers having children in universities
   FIG. 1 shows a view of an apparatus 100 for determining age brackets of users in
   accordance with the embodiment of the invention. In FIG. 1, the apparatus 100
   comprises an input module 101, a modeling module 103, an application module 105, a
30 presenting module 107 and a controller 109. Those skilled in the art should
   understand that the functions of these modules can be combined in one or more
   assemblies or executed by other assemblies having equivalent functions.
   In the embodiment, the input module 101 is used for inputting the consumption data
35 of the users during a specific time period. The modeling module 103 is used for
   modeling with respect to the consumption data to establish models satisfying specific
   conditions. The application module 105 is used for estimating the age brackets of the
   users on the basis of the models established in the modeling module 103. The
   presenting module 107 is used for selectively providing advertisements,
40 recommendations, reports, notifications, messages, media or any combination thereof
   to the users on the basis of the estimated age brackets. The controller 109 is used for
   monitoring tasks, including tasks executed by the input module 101, the modeling
   module 103, the application module 105 and the presenting module 107.
                                                6

   The modeling module 103 further comprises a calculating module 111, a selecting
   module 113 and a comparing module 115. The calculating module 111 can generate
   training data and test data on the basis of the input data, calculate the number of the
   users of the training data in a plurality of predetermined age brackets, and calculate
 5 the number of each three-hierarchy category of the training data in the plurality of
   predetermined age brackets. Then, the calculating module 111 calculates probabilities
   that each tuple of the test data belongs to each of the plurality of predetermined age
   brackets on the basis of the number of the users and the number of the three-hierarchy
   categories. The selecting module 113 selects the age bracket to which the maximum
10 one of the probabilities belongs as the age bracket to which the user corresponding to
   the tuple belongs. The comparing module 115 is used for comparing errors between
   the known age brackets and the selected age bracket in the test data to obtain a
   predictive correct rate. The modeling module 103 outputs the models with the
   predictive correct rates larger than or equal to a predetermined threshold, and
15 preferably outputs the models with the predictive correct rates larger than or equal to
   0.7.
   The application module 105 calculates the age brackets of the users by utilizing the
   models output from the modeling module 103, and presents a calculation result to the
20 presenting module 107.
   In accordance with the embodiment of the invention, the Naive Bayes algorithm is
   introduced when the modeling module 103 determines the age brackets of the users.
   The Naive Bayes algorithm is a probability categorization algorithm, which, with
25 respect to a given item to be categorized, solves probabilities of occurrence of
   respective categories in a case that the item occurs on the basis of a simple
   categorization idea, and the item to be categorized is considered to belong to the
   category having the maximum probability of occurrence. For example, if the
   probabilities of occurrence of the specific user in a plurality of age brackets set by the
30 e-commerce is determined, the age bracket in which the maximum probability occurs
   is the age bracket to which the specific user belongs.
   Specific explanations of the Naive Bayes algorithm are as follows:
35 (1) D is assumed to be a set of training tuples and associated category labels. As a rule,
   each tuple is expressed by one n-dimensional attribute vector X={xl, x2..., xn},
   which describes n measurements of the tuple by n attributes Al, A2,..., An.
   (2) It is assumed that there are m categories Cl, C2,...Cm. The tuple X is given, and a
40 categorization method will predict that X belongs to the category having the highest
   posterior probability (under the condition X). That is to say, the Naive Bayes
   categorization method predicts that X belongs to a category Ci, when and only when
        P(CilX)>P(CjlX) j>=l and j<=m, j!=i. According to the Naive Bayes theorem,
        P(CilX)=P(X|Ci)*P(Ci)/P(X).
                                                7

   (3) Since P(X) is a constant with respect to all the categories, it is satisfied as long as
   P(X|Ci)*P(Ci) is maximized.
 5 (4) P(Ci)=|Ci,DI/IDI, where Ci,DI is the number of the training tuples of the category Ci
   in D, and |DI is the number of all of the tuples in D.
   (5) P(X|Ci)  =                       = P(xllCi)*P(x2|Ci)*... *P(xn|Ci)c
10 Xk includes two circumstances, i.e., a categorization attribute and a continuous
   attribute, and it is the category attribute in this model, and if it is the category attribute,
   P(xk|Ci)=(the number of the tuples that the value of an attribute Ak is xk in Ci)/(the
   number of the tuples of Ci in D).
15 The categorization generally includes the following two steps: establishment of
   models and application of models.
   Firstly, a model is established with respect to a data set whose category has been
   determined. The data set for establishing the model is called a training set, and a
20 single tuple in the training set is called a training sample. Each tuple in the training set
   belongs to a determined category, and the category is expressed by a category label. A
   study model is provided in a form of a categorization rule or a mathematical formula.
   In practice, sample data whose category has been known is used as the training set,
   and a rule relating to the categorization is obtained by studying the training set,
25 thereby new data is categorized.
   Secondly, the established models are used to classify tuples whose categories are not
   known into one or several categories. The use of the models to perform the
   categorization requires the estimation of the predictive correct rate of the
30 categorization models. There are many estimating methods, and generally the
   established models are used to perform prediction in one test set, and compare the
   result with an actual value to obtain the predictive correct rate, wherein the test set
   being independent of the training set. The "test set" as used herein refers to an
   independent sample set for estimating abilities such as prediction of the models that
35 have not been used when designing an identification and categorization system so as
   to validate the models.
   For example, FIG. 2 shows a schematic diagram of a solution 200 for determining the
   age brackets of the users in accordance with the invention. The solution for
40 determining the age brackets of the users mainly includes two parts, i.e., model
   establishment and model application, wherein the model establishment includes:
   dividing modeling data into training data and test data (the proportion is 7:3), the
   training data generate a Bayes model through the Naive Bayes algorithm, the test data
                                                  8

   estimate the qualities of the models through the Bayes models, and comparatively
   good models are finally obtained by continuously adjusting features and
   categorization labels. The model application includes: for example, predicting all of
   the user data satisfying the model characteristics through the models to finally obtain
 5 massive data of the age brackets of the users. Finally determined data features are as
   follows: consumption data of three-hierarchy categories of the user in the most recent
   year, and the specific modeling data can be shown in Table 1 below:
   Use      Age     Three-hierarch Three-hierarch Three-hierarch Three-hierarch ...
    r id bracke       y category 1      y category 2      y category 3      y category 4
             t
                              Table 1 Modeling data of age models
10
   Specific implementation solution
   1. Input of data set
15 In one embodiment, methods and steps for inputting the data set are as follows:
   1) Convert the three-hierarchy categories of consumer goods of the same user into one
   row to adapt to an input format of the algorithm, as shown below:
20 The format of the input data is as shown in Table 2:
                 Field         User account           Birthday       Three-hierarchy
                                                                         category
                  eg:          fengguoying           1985-9-24              685
                               fengguoying           1985-9-24             4833
                           Table 2 Modeling source data of age models
   The format of the output data is as shown in Table 3:
      Field         User          Birthday     Three-hierarchy Three-hierarchy           ...
                  account                         category 1         category 2
        eg:     fengguoying       1985/9/24          4833                655             ...
     Table 3 Modeling data of age models (Put the three-hierarchy categories of the same
25                                     person in one row)
   2) The modeling data are segmented in accordance with the plurality of predetermined
   age brackets set by the e-commerce, and meanwhile user purchase data with the
   number of the three-hierarchy categories of the purchased goods smaller than a
30 specific number (4 in the embodiment) are removed to reduce an estimation error.
   The format of the input data is as shown in Table 4:
      Field         User          Birthday     Three-hierarchy    Three-hierarchy        ...
                  account                         category 1         category 2
                                                9

       eg:       fengguoying     1985/9/24          4833                 655
    Table 4 Modeling data of age models (Put the three-hierarchy categories of the same
                                       person in one line)
   The format of the output data is as shown in Table 5:
              Field    Age bracket      Three-hierarchy Three-hierarchy         ...
                                           category 1          category 2
               eg:           3                4883                 655          ...
 5      Table 5 Modeling data of age models (converting the birthday into the age, and
                              meanwhile performing the segment)
   2. Training set and test set
10 In the selected data set, the data are divided into the training data and the test data in
   the proportion of 7:3. Modeling is performed using the training data, and the models
   are estimated using the test data.
   3. Determination of age brackets
15
   In accordance with the embodiment of the invention, the age brackets of the users are
   estimated based on the training data and the test data in accordance with the following
   steps:
20 (1) Calculate the number of the users of the training data in the categories of the
   respective age brackets. Specifically, calculate the number of the users |Cil of DTrain
   in the respective age brackets.
   (2) Calculate the number of each three-hierarchy category of the training data in the
   respective categories. Specifically, calculate the number of each three-hierarchy
25 category xk/Cil of DTrain in the respective age brackets.
   (3) Calculate probabilities that each tuple of the test data belongs to the respective age
   brackets in accordance with the data obtained in the above two steps. Specifically,
   obtain probabilities that each person of DTest belongs to the respective age brackets
   in     accordance    with     prior    probabilities    in    the    above     two    steps
30 P(X|Ci)=P(x1|ICi)*P(x2|Ci)* ...  *P(xn|Ci).
   (4) Select the category of the age bracket having the maximum probability that a
   certain tuple in the test data belongs to the respective categories as the category to
   which the user of the tuple belongs. Specifically, select the age bracket corresponding
   to the maximum probability that each person in DTest belongs to the respective age
35 brackets as the age bracket to which the user belongs. X belongs to Cj, when and only
   when P(X/Cj)=max(P(X/Ci))i=1,2.. .6.
   (5) Compare errors between the known age brackets and the selected age bracket in
   the test data. Compare errors between each of the known age brackets and the selected
   age bracket in DTest to obtain the correctly predicted users DTestCorrect, and
40 obtain a predictive correct rate=|DTestCorrect|/IDTestl.
                                                10

   (6) Repeat the above steps to calculate the age brackets of all of the users. Specifically,
   if the correct rate>=0.7, the models are used to calculate the age brackets of the users,
   otherwise a stop is performed; the age brackets of all of the users DAll are calculated
   in accordance with the models, and the methods are the same as those in the steps in
 5 (3) and (4).
   In addition, the estimation of the models can be performed in accordance with the
   following standards: (1) predication accuracy rate; (2) establishment speed and use
   speed of the models; (3) robustness; (4) adaptability of the models to data having
10 noises or missing values; (5) scalability; (6) adaptability of the models when the data
   increase enormously; and (7) interpretability, i.e., a degree of understandability of the
   models. For example, in accordance with the technical solution of the invention, the
   predictive correct rate is 70% or higher; the algorithm is very efficient, and
   predictions of 30,000,000 users can be completed within 5 minutes.
15
   The e-commerce can selectively provide advertisements, recommendations, reports,
   notifications, messages, media or any combination thereof to the users on the basis of
   the calculated age brackets of the users.
20 FIG. 3 shows a flow chart of a method 300 for estimating the age brackets of the users
   on the basis of consumption data of the users in accordance with the embodiment of
   the invention.
   As shown in FIG. 3, the method 300 starts in the step 301. In the step 303, the input
25 module 101 acquires a plurality of consumption data of a plurality of users. In the step
   305, the calculating module 111 generates training data and test data. In the step 307,
   the calculating module 111 calculates the number of the users of the training data in a
   plurality of predetermined age brackets. In the step 309, the calculating module 105
   calculates the number of each three-hierarchy category of the training data in the
30 plurality of predetermined age brackets, then in the step 311, the calculating module
   105 calculates probabilities that each tuple of the test data belongs to each of the
   plurality of predetermined age brackets on the basis of the number of the users and the
   number of the three-hierarchy categories. In the step 313, the selecting module 113
   selects the age bracket to which the maximum one of the probabilities belongs as the
35 age bracket to which the user corresponding to the tuple belongs. In the step 315, the
   comparing module 115 compares errors between the known age brackets and the
   selected age bracket in the test data to obtain a predictive correct rate, and outputs the
   models with the predictive correct rates larger than a specific threshold. In the step
   317, the application module 105 calculates the age brackets of the users by utilizing
40 the models output from the modeling module 103, and outputs a calculation result to
   the presenting module 107. Thus, in the step 319, the presenting module 107
   selectively presents contents such as advertisements, recommendations, reports,
   notifications, messages, media or any combination thereof to the users on the basis of
   the selected age bracket. The method 300 ends in the step 321.
                                               11

   The technical solution for determining the age brackets of the users in accordance
   with the embodiment of the invention can make the e-commerce determine the age
   brackets of the registered users in a more accurate and simple manner, e.g., the
 5 predictive correct rate can reach 70%. Thus, the e-commerce such as JINGDONG Inc.
   make customized services, contents, communications (e.g., marketing and
   advertisements) and the like be associated with the users more effectively in
   accordance with the age brackets of the users to thereby enable target marketing,
   which provides a powerful support. Meanwhile, regarding the users accessing
10 websites of these e-commerce, the user experience is remarkably enhanced and
   convenient personalized services are provided.
   The above embodiments are only preferred embodiments of the invention, and are not
   used to limit the invention. It is obvious to those skilled in the art that various
15 amendments and changes can be made to the embodiments of the invention without
   departing from the spirit and scope of the invention. Thus, the invention is intended to
   cover all of amendments or transformations falling within the scope of the invention
   as defined in the claims.
20 DRAWINGS
   FIG. 1
   100
   101 Input module
25 103 Modeling module
   105 Application module
   107 Presenting module
   109 Controller
   111 Calculating module
30 113 Selecting module
   115 Comparing module
   FIG. 2
   200
35 Modeling data
   Training data
   Test data
   Application data
   Naive Bayes algorithm
40 Model
   Estimation result of the model
   Result set
   FIG. 3
                                              12

   300
   301 Start
   303 Acquiring a plurality of consumption data of a plurality of users
   305 Generating training data and test data
 5 307 Calculating the number of the users of the training data in a plurality of
   predetermined age brackets
   309 Calculating the number of each three-hierarchy category of the training data in
   the plurality of predetermined age brackets
   311 Calculating probabilities that each tuple of the test data belongs to each of the
10 plurality of predetermined age brackets on the basis of the number of the users and the
   number of the three-hierarchy categories
   313 Selecting the age bracket to which the maximum probability belongs as the age
   bracket to which the user corresponding to the tuple belongs
   315 Comparing errors between the known age brackets and the selected age bracket,
15 and outputting the models with the predictive correct rates larger than a specific
   threshold
   317 Calculating the age brackets of the users by utilizing the output models
   319 Selectively presenting and providing contents on the basis of the selected age
   bracket
20 321 End
   It will be understood that the term "comprise" and any of its derivatives (eg comprises,
   comprising) as used in this specification is to be taken to be inclusive of features to
   which it refers, and is not meant to exclude the presence of any additional features
25 unless otherwise stated or implied.
   The reference to any prior art in this specification is not, and should not be taken as,
   an acknowledgement of any form of suggestion that such prior art forms part of the
   common general knowledge.
30
                                              13

   CLAIMS
   1. A method for determining age brackets of users on the basis of consumption data of
   the users, comprising:
 5 acquiring a plurality of consumption data of a plurality of users;
   modeling on the basis of the acquired plurality of consumption data to establish
   models satisfying specific conditions of predictive correct rates larger than or equal to
   a predetermined threshold, the modeling further comprising:
        dividing the consumption data into training data and test data; calculating
10 probabilities of each age bracket occurring with respect to a plurality of
   predetermined age brackets based on the number of the users in the training data
   belonging to each of the a plurality of predetermined age brackets, calculating the
   number of each three-hierarchy category of the training data in the plurality of
   predetermined age brackets, and calculating probabilities that a tuple of the test data
15 belongs to each of the plurality of predetermined age brackets on the basis of the
   probabilities of each age bracket occurring with respect to a plurality of
   predetermined age brackets, and probabilities that the number of the three-hierarchy
   categories in the tuple of the test data occurs with respect to the number of each
   three-hierarchy category of the training data in the plurality of predetermined age
20 brackets;
        selecting the age bracket to which the maximum one of the probabilities belongs
   as the age bracket to which the user corresponding to the tuple belongs;
        comparing errors between the plurality of predetermined age brackets and the
   selected age bracket to obtain the predictive correct rates, and outputting the models
25 with the predictive correct rates larger than or equal to the predetermined threshold;
   and
   calculating the age brackets of the users by utilizing the output models.
   2. The method according to claim 1, wherein the dividing the consumption data into
30 training data and test data further comprises:
   segmenting the consumption data in accordance with the plurality of predetermined
   age brackets; and
   removing consumption data with the number of the three-hierarchy categories smaller
   than a predetermined number from the consumption data.
35
   3. The method according to claim 1 or 2, wherein a proportion of the training data to
   the test data is 7:3.
   4. The method according to claim 1, wherein the predetermined threshold is 0.7.
40
   5. The method according to claim 1, further comprising:
   selectively providing advertisements, recommendations, reports, notifications,
   messages, media or any combination thereof to the users on the basis of the selected
   age bracket.
                                               14

   6. An apparatus for determining age brackets of users on the basis of consumption
   data of the users, comprising:
   an input module for acquiring a plurality of consumption data of a plurality of users;
   a modeling module for modeling on the basis of the acquired plurality of consumption
 5 data to establish models satisfying specific conditions of predictive correct rates larger
   than or equal to a predetermined threshold, the modeling module further comprising:
   a calculating module configured to divide the consumption data into training data and
   test data; calculate probabilities of each age bracket occurring with respect to a
   plurality of predetermined age brackets based on the number of the users in the
10 training data belonging to each of the plurality of predetermined age brackets;
   calculate the number of each three-hierarchy category of the training data in the
   plurality of predetermined age brackets; and calculate probabilities that a tuple of the
   test data belongs to each of the plurality of predetermined age brackets on the basis of
   the probabilities of each age bracket occurring with respect to a plurality of
15 predetermined age brackets, and probabilities that the number of the three-hierarchy
   categories in the tuple of the test data occurs with respect to the number of each
   three-hierarchy category of the training data in the plurality of predetermined age
   brackets;
   a selecting module configured to select the age bracket to which the maximum one of
20 the probabilities belongs as the age bracket to which the user corresponding to the
   tuple belongs;
   a comparing module configured to compare errors between the plurality of
   predetermined age brackets and the selected age bracket to obtain the predictive
   correct rates, and output the models with the predictive correct rates larger than or
25 equal to the predetermined threshold; and
   an application module for calculating the age brackets of the users by utilizing the
   output models.
   7. The apparatus according to claim 6, wherein the calculating module is further
30 configured to:
   segment the consumption data in accordance with the plurality of predetermined age
   brackets; and
   remove consumption data with the number of the three-hierarchy categories smaller
   than a predetermined number from the consumption data.
35
   8. The apparatus according to claim 6 or 7, wherein a proportion of the training data
   to the test data is 7:3.
   9. The apparatus according to claim 6, wherein the predetermined threshold is 0.7.
40
   10. The apparatus according to claim 6, further comprising:
   a presenting module for selectively providing advertisements, recommendations,
   reports, notifications, messages, media or any combination thereof to the users on the
   basis of the selected age bracket.
                                               15

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
