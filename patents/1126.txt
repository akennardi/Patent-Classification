                                                  31
   GRAPHICAL USER INTERFACE FOR PROGRAMMING NEUROSTIMULATION
                                        PULSE PATTERNS
ABSTRACT
         An example of a neurostimulation system may include a storage device, a programming
control circuit, and a graphical user interface (GUI). The storage device may be configured to
store individually definable waveforms. The programming control circuit may be configured to
generate stimulation parameters controlling the delivery of the neurostimulation pulses according
to a pattern. The GUI may be configured to define the pattern using one or more waveforms
selected from the individually definable waveforms. The GUI may display waveform tags each
selectable for access to a waveform of the individually definable waveforms, and display a
waveform builder in response to selection of one of the waveform tags. The waveform builder
may present a graphical representation of the accessed waveform and allow for the accessed
waveform to be adjusted by editing the graphical representation of the accessed waveform on the
GUI.

                                                  1
   GRAPHICAL USER INTERFACE FOR PROGRAMMING NEUROSTIMULATION
                                       PULSE PATTERNS
                                      CLAIM OF PRIORITY
[0001] This application is a divisional application of Australian Patent Application No.
2015318142, filed September 14, 2015, the contents of which are hereby incorporated in its
entirety. This application claims the benefit of priority of U.S. Provisional Patent Application
Serial Number 62/050,505, filed on September 15, 2014, which is herein incorporated by
reference in its entirety.
                                       TECHNICAL FIELD
[0002] This document relates generally to neurostimulation and more particularly to a
programming method and apparatus using a graphical user interface that allows a user to
customize various patterns and waveforms of neurostimulation pulses.
                                         BACKGROUND
[0003] Neurostimulation, also referred to as neuromodulation, has been proposed as a therapy
for a number of conditions. Examples of neurostimulation include Spinal Cord Stimulation
(SCS), Deep Brain Stimulation (DBS), Peripheral Nerve Stimulation (PNS), and Functional
Electrical Stimulation (FES). Implantable neurostimulation system have been applied to deliver
such a therapy. An implantable neurostimulation system may include an implantable
neurostimulator, also referred to as an implantable pulse generator (IPG), and one or more
implantable leads each including one or more electrodes. The implantable neurostimulator
delivers neurostimulation energy through one or more electrodes placed on or near a target site
in the nervous system. An external programming device is used to program the implantable
neurostimulator with stimulation parameters controlling the delivery of the neurostimulation
energy.
[0004] In one example, the neurostimulation energy is delivered in the form of electrical
neurostimulation pulses. The delivery is controlled using stimulation parameters that specify
spatial (where to stimulate), temporal (when to stimulate), and informational (patterns of pulses
directing the nervous system to respond as desired) aspects of a pattern of neurostimulation
pulses. Many current neurostimulation systems are programmed to deliver periodic pulses with
one or a few uniform waveforms continuously or in bursts. However, the human nervous

                                                    2
systems use neural signals having much more sophisticated patterns to communicate various
types of information, including sensations of pain, pressure, temperature, etc. The nervous
system may interpret an artificial stimulation with a simple pattern of stimuli as an unnatural
phenomenon, and respond with an unintended and undesirable sensation and/or movement. For
example, some neurostimulation therapies are known to cause paresthesia and/or vibration of
non-targeted tissue or organ.
[0005] Recent research has shown that the efficacy and efficiency of certain neurostimulation
therapies can be improved, and their side-effects can be reduced, by using patterns of
neurostimulation pulses that emulate natural patterns of neural signals observed in the human
body. While modem electronics can accommodate the need for generating such sophisticated
pulse patterns, the capability of a neurostimulation system depends on its post-manufacturing
programmability to a great extent. For example, a sophisticated pulse pattern may only benefit a
patient when it is customized for that patient, and waveform patterns predetermined at the time
of manufacturing may substantially limit the potential for the customization. In various
applications, the customization may require pulse-by-pulse programmability and make the
programming of the complete pulse pattern a challenging task. As such a task may be performed
at least in part by a user such as a physician or other caregiver with the patient in a clinical
setting, there is a need for an intuitive, user-friendly method and system for programming the
neurostimulation pulse pattern.
                                              SUMMARY
[0005a] It is an object of the present invention to at least substantially satisfy the above need.
[0005b] According to one aspect of the present disclosure, there is provided a system for
controlling delivery of neurostimulation by a user, comprising: a storage device configured to
store individually definable waveforms; a programming control circuit configured to generate
stimulation parameters for programming a neurostimulation device to deliver the
neurostimulation pulses according to a pattern of neurostimulation pulses; and a user interface
coupled to the storage device and the programming control circuit and configured to allow the
user to define the pattern of the neurostimulation pulses by selecting one or more first
waveforms from the stored individually definable waveforms to be included in the pattern of the
neurostimulation pulses and selecting one or more second waveforms from the one or more first
waveforms to be each repeated for a specified number of times in the pattern of the
neurostimulation pulses.

                                                2a
[0005c] According to another aspect of the present disclosure, there is provided a method for
controlling neurostimulation, comprising: storing individually definable waveforms in a storage
device; receiving from a user a selection of one or more first waveforms from the stored
individually definable waveforms to be included in a pattern of neurostimulation pulses;
receiving from the user a selection of one or more second waveforms from the one or more first
waveforms to be each repeated for a specified number of times in the pattern of the
neurostimulation pulses; and generating stimulation parameters for programming a
neurostimulation device to deliver the neurostimulation according to the pattern of the
neurostimulation pulses.
[0006] An example (e.g. "Example 1") of a system for delivering neurostimulation pulses
through a plurality of electrodes may include a storage device, a programming control circuit,
and a graphical user interface (GUI). The storage device may be configured to store a plurality
of individually definable waveforms. The programming control circuit may be configured to
generate a plurality of stimulation parameters controlling the delivery of the neurostimulation
pulses according to a pattern of the neurostimulation pulses. The GUI is coupled to the storage
device and the control circuit, and may be configured to define the pattern of the
neurostimulation pulses using one or more

   waveforms selected from the plurality of individually definable waveforms. The
   GUI may be further configured to display waveform tags each selectable for
   access to a waveform of the plurality of individually definable waveforms, and
   display a waveform builder in response to selection of a waveform tag of the
 5 waveform tags. The waveform builder may be configured to present a graphical
   representation of the accessed waveform and allow for the accessed waveform to
   be adjusted by editing the graphical representation of the accessed waveform on
   the GUI.
   [0007]          In Example 2, the subject matter of Example 1 may optionally be
10 configured such that the waveform tags include one or more waveform addition
   tags each selectable for adding a new waveform to the plurality of individually
   definable waveforms, and the waveform builder displayed in response to
   selection of a waveform addition tag of the one or more waveform addition tags
   allows for creation and editing of a graphical representation of the new
15 waveform on the GUI.
   [0008]          In Example 3, the subject matter of any one or any combination
   of Examples 1 and 2 may optionally be configured such that the GUI is
   configured to display the graphical representation of the accessed waveform by
   visually indicating parameters defining the accessed waveform and allow user
20 modification of one or more parameters of the visually indicated parameters
   defining the accessed waveform.
   [0009]          In Example 4, the subject matter of any one or any combination
   of Examples 1-3 may optionally be configured such that the GUI includes a
   touchscreen and is configured to display the graphical representation of the
25 accessed waveform on the touchscreen and allow for the accessed waveform to
   be adjusted by editing the graphical representation on the touchscreen.
   [0010]          In Example 5, the subject matter of any one or any combination
   of Examples 1-4 may optionally be configured such that the GUI is configured to
   organize the stored plurality of individually definable waveforms into a
30 hierarchical structure including a plurality of levels, and allow each waveform of
   each level of the plurality of levels to include one or more waveforms of one or
   more lower levels.
   [0011]          In Example 6, the subject matter of Example 5 may optionally be
   configured such that the GUI is configured to organize the stored plurality of
                                              3

   individually definable waveforms into a nested hierarchical structure including a
   first level including one or more basic waveforms, a second level including one
   or more waveform groups each including one or more basic waveforms selected
   from the first level, and a third level including one or more groups of waveform
 5 groups each including one or more waveform groups selected from the second
   level.
   [0012]           In Example 7, the subject matter Example 6 may optionally be
   configured such that the one or more basic waveforms include one or more
   pulses of the neurostimulation pulses, the one or more pulses each being defined
10 by a set of pulse parameters.
   [0013]           In Example 8, the subject matter of any one or any combination
   of Examples 6 and 7 may optionally be configured such that the storage device is
   further configured to store a plurality of individually definable fields each
   defined by one or more electrodes of the plurality of electrodes through which
15 the pulse of a basic waveform of the one or more basic waveform is delivered.
   The GUI is further configured to display field tags each selectable for access to a
   field of the plurality of individually definable fields, and display a field builder
   in response to selection of a field tag of the field tags. The field builder is
   configured to present a graphical representation of the accessed field and allow
20 for the accessed field to be adjusted by editing the graphical representation of the
   accessed field on the GUI. The field tags include one or more field addition tags
   each selectable for adding a new field to the plurality of individually definable
   waveforms. The field builder is displayed in response to selection of a field
   addition tag of the one or more field addition tags to allow for creation and
25 editing of a graphical representation of the new field on the GUI.
   [0014]           In Example 9, the subject matter of any one or any combination
   of Examples 7 and 8 may optionally be configured such that the one or more
   waveform groups comprise one or more pulse groups (PGs) each being defined
   by a set of PG parameters specifying the one or more pulses selected from the
30 stored one or more pulses and the timing of each pulse of the specified one or
   more pulses.
   [0015]           In Example 10, the subject matter of Example 9 may optionally
   be configured such that the one or more groups of waveform groups include one
   or more groups of pulse groups (GPGs) each defined by a set of GPG parameters
                                               4

   specifying the one or more PGs selected from the stored one or more PGs and
   timing of each PG of the specified one or more PGs.
   [0016]          In Example 11, the subject matter of any one or any combination
   of Examples 5-10 may optionally be configured such that the GUI includes a
 5 plurality of display modes and a display mode input configured to receive
   selection of a display mode from the plurality of display modes, the display
   modes each specifying a level of detail to be displayed for each level of the
   hierarchical structure.
   [0017]          In Example 12, the subject matter of any one or any combination
10 of Examples 1-11 may optionally be configured to further include a programmer
   and an implantable neurostimulator. The programmer includes the storage
   device, the control circuit, and the GUI. The implantable neurostimulator may
   be configured to be coupled to the plurality of electrodes and communicatively
   coupled to the programmer. The implantable neurostimulator includes a
15 stimulation output circuit to produce and deliver each of the neurostimulation
   pulses through a set of electrodes selected from the plurality of electrodes and a
   stimulation control circuit to control the delivery of the neurostimulation pulses
   using the plurality of stimulation parameters specifying a pattern of the
   neurostimulation pulses.
20 [0018]          In Example 13, the subject matter of any one or any combination
   of Examples 1-12 may optionally be configured such that the programming
   control circuit is configured to check the plurality of stimulation parameters
   against constraints of safety rules.
   [0019]          In Example 14, the subject matter of any one or any combination
25 of Examples 1-13 may optionally be configured such that the GUI is configured
   to allow for export of a waveform of the plurality of individually definable
   waveforms from the system.
   [0020]          In Example 15, the subject matter of any one or any combination
   of Examples 1-14 may optionally be configured such that the GUI is configured
30 to allow for import of a waveform into the system to be added to the plurality of
   individually definable waveforms.
   [0021]          An example of a method (e.g., "Example 16") for delivering
   neurostimulation pulses through a plurality of electrodes is also provided. The
   method includes storing a plurality of individually definable waveforms;
                                             5

   defining a pattern of the neurostimulation pulses using a GUI, the pattern of the
   neurostimulation pulses including one or more waveforms selected from the
   stored plurality of individually definable waveforms; displaying waveform tags
   using the GUI, the waveform tags each selectable for access to a waveform of
 5 the plurality of individually definable waveforms; receiving from a user a
   selection of a waveform tag of the displayed waveform tags, the selected
   waveform tag associated with the accessed waveform; displaying a graphical
   representation of the accessed waveform using the GUI; and allowing for the
   accessed waveform to be adjusted by the user editing the graphical
10 representation of the accessed waveform on the GUI.
   [0022]           In Example 17, the subject matter of Example 16 may optionally
   further include exporting a waveform of the plurality of individually definable
   waveforms for sharing with one or more other users.
   [0023]           In Example 18, the subject matter of any one or any combination
15 of Examples 16 and 17 may optionally further include importing a waveform
   from another user to be added to the plurality of individually definable
   waveforms.
   [0024]           In Example 19, the subject matter of the waveform tags as found
   in any one or any combination of Examples 16-18 may optionally further include
20 one or more waveform addition tags each selectable for adding a new waveform
   to the plurality of individually definable waveforms, and the subject matter of
   any one or any combination of Examples 16-18 may further include allowing the
   user to create and edit a graphical representation of the new waveform on the
   GUI.
25 [0025]           In Example 20, the subject matter of displaying the graphical
   representation of the accessed waveform as found in any one or any combination
   of Examples 16-19 may optionally further include visually indicating parameters
   defining the accessed waveform on a touchscreen of the GUI, and the subject
   matter of allowing for the accessed waveform to be adjusted as found in any one
30 or any combination of Examples 16-19 may optionally further include allowing
   for adjustment of one or more parameters of the parameters defining the
   accessed waveform by the user using the touchscreen.
   [0026]           In Example 21, the subject matter of any one or any combination
   of Examples 16-20 may further include organizing the stored plurality of
                                             6

   individually definable waveforms into a hierarchical structure including a
   plurality of levels, and allowing each waveform of each level of the plurality of
   levels to include one or more waveforms of one or more lower levels.
   [0027]          In Example 22, the subject matter of storing the plurality of
 5 individually definable waveforms as found in Example 21 may optionally
   include storing one or more pulses of the neurostimulation pulses, the one or
   more pulses each being defined by a set of pulse parameters, storing one or more
   pulse groups (PGs) each being defined by a set of PG parameters specifying the
   one or more pulses selected from the stored one or more pulses and the timing of
10 each pulse of the specified one or more pulses, and storing one or more groups
   of pulse groups (GPGs) each defined by a set of GPG parameters specifying the
   one or more PGs selected from the stored one or more PGs and timing of each
   PG of the specified one or more PGs.
   [0028]          In example 23, the subject matter of any one or any combination
15 of Examples 16-22 may optionally further include storing a plurality of
   individually definable fields each defined by one or more electrodes selected
   from the plurality of electrodes and assigned to a pulse of the stored one or more
   pulses to be delivered through the one or more electrodes, displaying field tags
   using the GUI, the field tags each selectable for access to a field of the plurality
20 of individually definable fields, receiving from the user a selection of a field tag
   of the displayed field tags, the selected field tag associated with the accessed
   field, displaying a graphical representation of the accessed field using the GUI,
   and allowing for the accessed field to be adjusted by the user editing the
   graphical representation of the accessed field on the GUI.
25 [0029]          In Example 24, the subject matter of any one or any combination
   of Examples 16-23 may optionally further include transmitting the plurality of
   stimulation parameters to an implantable neurostimulator, delivering the
   neurostimulation pulses from the implantable neurostimulator, and controlling
   the delivery of the neurostimulation pulses using the plurality of stimulation
30 parameters transmitted to the implantable neurostimulator.
   [0030]          In Example 25, the subject matter of Example 24 may optionally
   further include checking the plurality of stimulation parameters against
   constraints of safety rules before transmitting the plurality of stimulation
   parameters to the implantable neurostimulator.
                                              7

   [00311          This Summary is an overview of some of the teachings of the
   present application and not intended to be an exclusive or exhaustive treatment
   of the present subject matter. Further details about the present subject matter are
   found in the detailed description and appended claims. Other aspects of the
 5 disclosure will be apparent to persons skilled in the art upon reading and
   understanding the following detailed description and viewing the drawings that
   form a part thereof, each of which are not to be taken in a limiting sense. The
   scope of the present disclosure is defined by the appended claims and their legal
   equivalents.
10
                     BRIEF DESCRIPTION OF THE DRAWINGS
   [0032]          The drawings illustrate generally, by way of example, various
   embodiments discussed in the present document. The drawings are for
   illustrative purposes only and may not be to scale.
15 [0033]          FIG. 1 illustrates an embodiment of a neurostimulation system.
   [0034]          FIG. 2 illustrates an embodiment of a stimulation device and a
   lead system, such as may be implemented in the neurostimulation system of FIG.
   1.
   [0035]          FIG. 3 illustrates an embodiment of a programming device, such
20 as may be implemented in the neurostimulation system of FIG. 1.
   [0036]          FIG. 4 illustrates an implantable neurostimulation system and
   portions of an environment in which the system may be used.
   [0037]          FIG. 5 illustrates an embodiment of an implantable stimulator and
   one or more leads of an implantable neurostimulation system, such as the
25 implantable system of FIG. 4.
   [0038]          FIG. 6 illustrates an embodiment of an external programmer of an
   implantable neurostimulation system, such as the external system of FIG. 4.
   [0039]          FIG. 7 is an illustration of an embodiment of waveforms of
   neurostimulation organized in a hierarchical structure.
30 [0040]          FIG. 8 illustrates a more specific embodiment of the waveforms
   of FIG. 7.
   [0041]          FIG. 9 illustrates an embodiment of a neurostimulation pulse.
   [0042]          FIG. 10 illustrates an embodiment of a pulse group (PG).
                                              8

   [0043]           FIGS. 11 A and 11 B each illustrate an embodiment of a group of
   pulse groups (GPG).
   [0044]           FIG. 12 illustrates an embodiment of a pattern of stimulation
   pulses.
 5 [0045]           FIG. 13 illustrates an embodiment of a method for controlling
   delivery of neurostimulation pulses.
   [0046]           FIG. 14 illustrates an embodiment of a method for waveform
   building.
   [0047]           FIG. 15 is an illustration of an embodiment of a screen of a
10 graphical user interface (GUI) for building a field.
   [0048]           FIG. 16 illustrates an embodiment of the screen for building a
   pulse.
   [0049]           FIG. 17 further illustrates the embodiment of the screen for
   building the pulse.
15 [0050]           FIG. 18 illustrates an embodiment of the screen for building a
   PG.
   [0051]           FIG. 19 further illustrates the embodiment of the screen for
   building the PG.
   [0052]           FIG. 20 illustrates embodiment of the screen for building a GPG.
20 [0053]           FIG. 21 illustrates an embodiment of a screen of a GUI allowing
   for access to pulses, PGs, and GPGs.
   [0054]           FIG. 22 illustrates an embodiment of a screen of a GUI allowing
   for access to pulses, PGs, and GPGs.
   [0055]           FIG. 23 illustrates an embodiment of a screen of a GUI allowing
25 for access to pulses, PGs, and GPGs.
                                DETAILED DESCRIPTION
   [0056]           In the following detailed description, reference is made to the
   accompanying drawings which form a part hereof, and in which is shown by
30 way of illustration specific embodiments in which the invention may be
   practiced. These embodiments are described in sufficient detail to enable those
   skilled in the art to practice the invention, and it is to be understood that the
   embodiments may be combined, or that other embodiments may be utilized and
   that structural, logical and electrical changes may be made without departing
                                               9

   from the spirit and scope of the present invention. References to "an", "one", or
   "various" embodiments in this disclosure are not necessarily to the same
   embodiment, and such references contemplate more than one embodiment. The
   following detailed description provides examples, and the scope of the present
 5 invention is defined by the appended claims and their legal equivalents.
   [0057]          This document discusses a method and system for programming
   neurostimulation pulse patterns using a graphical user interface (GUI).
   Advancements in neuroscience and neurostimulation research have led to a
   demand for using complex and/or individually optimized patterns of
10 neurostimulation pulses for various types of therapies. The capability of a
   neurostimulation system in treating various types of disorders will be limited by
   the programmability of such patterns of neurostimulation pulses. In various
   embodiments, the present system allows for custom definition of a pattern of
   neurostimulation pulses, which includes custom definition of waveforms being
15 the building blocks of the pattern Such custom definition is achieved by using a
   GUI that makes it possible for the user to perform the custom definition of
   potentially very complex patterns of neurostimulation pulses by creating and
   editing graphical representations of relatively simple individual building blocks
   for each of the patterns. In various embodiments, the individually definable
20 waveforms may include pulses, pulse groups each including different pulses
   each timed in a sequence with controllable duty cycle, and groups of pulse
   groups each including different pulse groups each timed in a sequence with
   controllable duty cycle. In various embodiments, the present system provides
   for patterns of neurostimulation pulses not limited to waveforms predefined at
25 the time of manufacturing, thereby accommodating need for customization of
   neurostimulation pulse patterns as well as need for new types of
   neurostimulation pulse patterns that may, for example, result from future
   research in neurostimulation. This may also facilitate design of a general
   purpose neurostimulation device that can be configured by a user for delivering
30 specific types of neurostimulation therapies by programming the device using
   the GUI.
   [0058]          FIG. 1 illustrates an embodiment of a neurostimulation system
   100. System 100 includes electrodes 106, a stimulation device 104, and a
   programming device 102. Electrodes 106 are configured to be placed on or near
                                            10

   one or more neural targets in a patient. Stimulation device 104 is configured to
   be electrically connected to electrodes 106 and deliver neurostimulation energy,
   such as in the form of electrical pulses, to the one or more neural targets though
   electrodes 106. The delivery of the neurostimulation is controlled by using a
 5 plurality of stimulation parameters, such as stimulation parameters specifying a
   pattern of the electrical pulses and a selection of electrodes through which each
   of the electrical pulses is delivered. In various embodiments, at least some
   parameters of the plurality of stimulation parameters are programmable by a
   user, such as a physician or other caregiver who treats the patient using system
10 100. Programming device 102 provides the user with accessibility to the user
   programmable parameters. In various embodiments, programming device 102 is
   configured to be communicatively coupled to stimulation device via a wired or
   wireless link.
   [0059]           In various embodiments, programming device 102 includes a
15 graphical user interface (GUI) that allows the user to set and/or adjust values of
   the user-programmable parameters by creating and/or editing graphical
   representations of various waveforms. Such waveforms may include, for
   example, the waveform of a pattern of neurostimulation pulses to be delivered to
   the patient as well as individual waveforms that are used as building blocks of
20 the pattern of neurostimulation pulses. Examples of such individual waveforms
   include pulses, pulse groups, and groups of pulse groups, as further discussed
   below. The user may also be allowed to define an electrode selection specific to
   each individually defined waveform.
   [0060]           FIG. 2 illustrates an embodiment of a stimulation device 204 and
25 a lead system 208, such as may be implemented in neurostimulation system 100.
   Stimulation device 204 represents an embodiment of stimulation device 104 and
   includes a stimulation output circuit 212 and a stimulation control circuit 214.
   Stimulation output circuit 212 produces and delivers neurostimulation pulses.
   Stimulation control circuit 214 controls the delivery of the neurostimulation
30 pulses using the plurality of stimulation parameters, which specifies a pattern of
   the neurostimulation pulses. Lead system 208 includes one or more leads each
   configured to be electrically connected to stimulation device 204 and a plurality
   of electrodes 206 distributed in the one or more leads. The plurality of
   electrodes 206 includes electrode 206-1, electrode 206-2, ... electrode 206-N,
                                             11

   each a single electrically conductive contact providing for an electrical interface
   between stimulation output circuit 212 and tissue of the patient, where N > 2.
   The neurostimulation pulses are each delivered from stimulation output circuit
   212 through a set of electrodes selected from electrodes 206. In various
 5 embodiments, the neurostimulation pulses may include one or more individually
   defined pulses, and the set of electrodes may be individually definable by the
   user for each of the individually defined pulses.
   [0061]          In various embodiments, the number of leads and the number of
   electrodes on each lead depend on, for example, the distribution of target(s) of
10 the neurostimulation and the need for controlling the distribution of electric field
   at each target. In various embodiments, which are illustrated in each of FIGS.
   15-23 as examples for discussion of programming though the GUI, lead system
   includes 2 leads each having 8 electrodes.
   [0062]          FIG. 3 illustrates an embodiment of a programming device 302,
15 such as may be implemented in neurostimulation system 100. Programming
   device 302 represents an embodiment of programming device 102 and includes a
   storage device 318, a programming control circuit 316, and a GUI 310. Storage
   device 318 stores a plurality of individually definable waveforms. Programming
   control circuit 3 16 generates the plurality of stimulation parameters that controls
20 the delivery of the neurostimulation pulses according to the pattern of the
   neurostimulation pulses. GUI 310 represents an embodiment of GUI 110 and
   allows the user to define the pattern of the neurostimulation pulses using one or
   more waveforms selected from the plurality of individually definable
   waveforms. In various embodiments, GUI 310 is configured to display
25 waveform tags each selectable for access to a waveform of the plurality of
   individually definable waveforms, and configured to display a waveform builder
   in response to selection of a waveform tag of the waveform tags. The waveform
   builder is configured to present a graphical representation of the accessed
   waveform and allow for the accessed waveform to be adjusted by editing the
30 graphical representation of the accessed waveform using GUI 310.
   [0063]          In the illustrated embodiment, GUI 310 includes a touchscreen
   320 to allow the user to edit the graphical representation of the accessed
   waveform using a finger or stylet. In various embodiments, GUI 310 includes
   any type of presentation device, such as interactive or non-interactive screens,
                                              12

   and any type of user input devices that allow the user to edit the graphical
   representation of the accessed waveform, such as touchscreen, keyboard,
   keypad, touchpad, trackball, joystick, and mouse. In one embodiment, GUI 310
   displays the graphical representation of the accessed waveform by visually
 5 indicating parameters defining the accessed waveform on touchscreen 320 and
   allows the user to modify one or more parameters of the visually indicated
   parameters using touchscreen 320, such as by dragging one or more segments of
   the accessed waveform.
   [0064]          In various embodiments, circuits of neurostimulation 100,
10 including its various embodiments discussed in this document, may be
   implemented using a combination of hardware and software. For example, the
   circuit of GUI 100, stimulation control circuit 214, and programming control
   circuit 315, including their various embodiments discussed in this document,
   may be implemented using an application-specific circuit constructed to perform
15 one or more particular functions or a general-purpose circuit programmed to
   perform such function(s). Such a general-purpose circuit includes, but is not
   limited to, a microprocessor or a portion thereof, a microcontroller or portions
   thereof, and a programmable logic circuit or a portion thereof.
   [0065]          FIG. 4 illustrates an implantable neurostimulation system 400 and
20 portions of an environment in which system 400 may be used. System 400
   includes an implantable system 422, an external system 402, and a telemetry link
   426 providing for wireless communication between implantable system 422 and
   external system 402. Implantable system 422 is illustrated in FIG. 4 as being
   implanted in the patient's body 499.
25 [0066]          Implantable system 422 includes an implantable stimulator (also
   referred to as an implantable pulse generator, or IPG) 404, a lead system 424,
   and electrodes 406, which represent an embodiment of stimulation device 204,
   lead system 208, and electrodes 206, respectively. External system 402
   represents an embodiment of programming device 302. In various
30 embodiments, external system 402 includes one or more external (non
   implantable) devices each allowing the user and/or the patient to communicate
   with implantable system 422. In some embodiments, external 402 includes a
   programming device intended for the user to initialize and adjust settings for
   implantable stimulator 404 and a remote control device intended for use by the
                                            13

   patient. For example, the remote control device may allow the patient to turn
   implantable stimulator 404 on and off and/or adjust certain patient
   programmable parameters of the plurality of stimulation parameters.
   [0067]          FIG. 5 illustrates an embodiment of implantable stimulator 404
 5 and one or more leads 424 of an implantable neurostimulation system, such as
   implantable system 422. Implantable stimulator 404 may include a sensing
   circuit 530 that is optional and required only when the stimulator has a sensing
   capability, stimulation output circuit 212, a stimulation control circuit 514, an
   implant storage device 532, an implant telemetry circuit 534, and a power source
10 536. Sensing circuit 530, when included and needed, senses one or more
   physiological signals for purposes of patient monitoring and/or feedback control
   of the neurostimulation. Examples of the one or more physiological signals
   includes neural and other signals each indicative of a condition of the patient that
   is treated by the neurostimulation and/or a response of the patient to the delivery
15 of the neurostimulation. Stimulation output circuit 212 is electrically connected
   to electrodes 406 through lead 424, and delivers each of the neurostimulation
   pulses through a set of electrodes selected from electrodes 406. Stimulation
   control circuit 514 represents an embodiment of stimulation control circuit 214
   and controls the delivery of the neurostimulation pulses using the plurality of
20 stimulation parameters specifying the pattern of the neurostimulation pulses. In
   one embodiment, stimulation control circuit 514 controls the delivery of the
   neurostimulation pulses using the one or more sensed physiological signals.
   Implant telemetry circuit 534 provides implantable stimulator 404 with wireless
   communication with another device such as a device of external system 402,
25 including receiving values of the plurality of stimulation parameters from
   external system 402. Implant storage device 532 stores values of the plurality of
   stimulation parameters. Power source 536 provides implantable stimulator 404
   with energy for its operation. In one embodiment, power source 536 includes a
   battery. In one embodiment, power source 536 includes a rechargeable battery
30 and a battery charging circuit for charging the rechargeable battery. Implant
   telemetry circuit 534 may also function as a power receiver that receives power
   transmitted from external system 402 through an inductive couple.
   [0068]          In various embodiments, sensing circuit 530 (if included),
   stimulation output circuit 212, stimulation control circuit 514, implant telemetry
                                            14

   circuit 534, implant storage device 532, and power source 536 are encapsulated
   in a hermetically sealed implantable housing. In various embodiments, lead(s)
   424 are implanted such that electrodes 406 are places on and/or around one or
   more targets to which the neurostimulation pulses are to be delivered, while
 5 implantable stimulator 404 is subcutaneously implanted and connected to lead(s)
   424 at the time of implantation.
   [0069]          FIG. 6 illustrates an embodiment of an external programmer 602
   of an implantable neurostimulation system, such as external system 402.
   External programmer 602 represents an embodiment of programming device
10 302, and includes an external telemetry circuit 640, an external storage device
   618, a programming control circuit 616, and a GUI 610.
   [0070]          External telemetry circuit 640 provides external programmer 602
   with wireless communication with another device such as implantable stimulator
   404 via telemetry link 426, including transmitting the plurality of stimulation
15 parameters to implantable stimulator 404. In one embodiment, external
   telemetry circuit 640 also transmits power to implantable stimulator 404 through
   the inductive couple.
   [0071]          External storage device 618 stores a plurality of individually
   definable waveforms each selectable for use as a portion of the pattern of the
20 neurostimulation pulses. In various embodiments, each waveform of the
   plurality of individually definable waveforms includes one or more pulses of the
   neurostimulation pulses, and may include one or more other waveforms of the
   plurality of individually definable waveforms. Examples of the waveforms are
   discussed below with reference to FIGS. 7 and 8. External storage device 618
25 also stores a plurality of individually definable fields. Each waveform of the
   plurality of individually definable waveforms is associated with one or more
   fields of the plurality of individually definable fields. Each field of the plurality
   of individually definable fields is defined by one or more electrodes of the
   plurality of electrodes through which a pulse of the neurostimulation pulses is
30 delivered and a current distribution of the pulse over the one or more electrodes.
   [0072]          Programming control circuit 616 represents an embodiment of
   programming control circuit 316 and generates the plurality of stimulation
   parameters, which is to be transmitted to implantable stimulator 404, based on
   the pattern of the neurostimulation pulses. The pattern is defined using one or
                                             15

   more waveforms selected from the plurality of individually definable waveforms
   stored in external storage device 618. In various embodiment, programming
   control circuit 616 checks values of the plurality of stimulation parameters
   against safety rules to limit these values within constraints of the safety rules. In
 5 one embodiment, the safety rules are heuristic rules.
   [00731          GUI 610 represents an embodiment of GUI 310 and allows the
   user to define the pattern of the neurostimulation pulses using the one or more
   waveforms selected from the plurality of individually definable waveforms
   stored in external storage device 618, add new waveforms to the stored plurality
10 of individually definable waveforms, and modify waveforms of the stored
   plurality of individually definable waveforms. In the illustrated embodiment,
   GUI 610 includes a touchscreen 620 to allow the user to edit graphical
   representations of the pattern of the neurostimulation pulses and the waveforms
   on the screen. In various embodiments, GUI 610 includes any types of
15 presentation and user input devices that are suitable for used by the user to
   define and modify the pattern of the neurostimulation pulses and the waveforms.
   [0074]          In various embodiments, GUI 610 displays waveform tags each
   selectable for adding a new waveform to the plurality of individually definable
   waveforms stored in external storage device 618 or for adjusting a waveform of
20 the plurality of individually definable waveforms stored in external storage
   device 618. The waveform tags may each be presented as a button, a tab, or
   another symbol identifying a waveform. In response to a waveform tag of the
   waveform tags being selected, GUI 610 displays a waveform builder. The
   waveform builder includes a graphical representation of a waveform that is
25 adjustable by editing the graphical representation. The adjustable waveform is
   the new waveform to be added or the stored waveform to be adjusted. The
   editing may include, for example, modifying, deleting, copying, and repeating a
   portion of the graphical representation. In various embodiments, GUI 610
   allows the user to edit the graphical representation of the waveform using textual
30 and/or graphical commands. In various embodiments, GUI 610 allows the user
   to edit the graphical representation of the waveform by directly manipulating the
   graphical representation, such as on touchscreen 620. In various embodiments,
   the graphical representation of the waveform visually indicates parameters
   defining the waveform, including amplitude and timing parameters. In one
                                             16

   embodiment, all the parameters defining the waveform are adjustable by the user
   using GUI 610. In various embodiments, the parameters defining the waveform
   include a field parameter specifying a field assigned to the waveform. The field
   parameter specifies one or more electrodes and a current distribution over the
 5 one or more electrodes.
   [0075]           In various embodiments, GUI 610 displays field tags each
   selectable for adding a new field to the plurality of individually definable fields
   stored in external storage device 618 or adjusting a field of the plurality of
   individually definable fields stored in external storage device 618. The field tags
10 may each be presented as a button, a tab, or other symbol identifying a field. In
   response to a field tag of the waveform tags being selected, GUI 610 displays a
   field builder. The field builder includes a graphical representation of a field that
   is adjustable by editing the graphical representation. The adjustable field is
   represented by one or more electrodes selected from the plurality of electrodes
15 406 and the current distribution over the selected one or more electrodes. The
   adjustable field is the new field to be added or the stored field to be adjusted.
   The current distribution may be specified by a percentage associated with each
   electrode of the selected one or more electrodes. In various embodiments, each
   field of the stored plurality of individually definable fields may be assigned to a
20 waveform of the stored plurality of individually definable waveforms or a
   portion of that waveform. In various embodiments, visual tags, such as various
   colors and/or text, are applied to associate a field with a waveform or a portion
   of the waveform to which the field is assigned to.
   [0076]           In various embodiments, GUI 610 allows for export of a
25 waveform of the plurality of individually definable waveforms stored in external
   storage device 618 from external programmer 602. In various embodiments,
   GUI 610 allows for import of a waveform into external programmer 602 to be
   added to the plurality of individually definable waveforms stored in external
   storage device 618. In various embodiments, GUI 610 allows for export of a
30 field of the plurality of individually definable fields stored in external storage
   device 618 from external programmer 602. In various embodiments, GUI 610
   allows for import of a field into external programmer 602 to be added to the
   plurality of individually definable fields stored in external storage device 618. In
   one embodiment, such import and export are performed via the Internet or cloud,
                                              17

   in a forum for sharing waveforms. Such imports and exports enable the user to
   share waveforms and/or fields with other users in a community of users that use
   the same or similar neurostimulation systems to treat patients.
   [0077]          FIG. 7 is an illustration of an embodiment of waveforms of
 5 neurostimulation organized in a hierarchical structure. The waveforms may
   include, for example, the waveform of a pattern of neurostimulation pulses to be
   delivered to the patient as well as individual waveforms that are used as building
   blocks of the pattern of neurostimulation pulses. In one embodiment, waveforms
   of the plurality of individually definable waveforms stored in external storage
10 device 618 are organized into such a hierarchical structure, which includes a
   plurality of levels (layers). A waveform of each level includes one or more
   waveforms of one or more lower levels.
   [0078]          In the illustrated embodiment, the waveforms of the plurality of
   individually definable waveforms stored in external storage device 618 are
15 organized into a nested hierarchical structure with N levels, where N > 2. Level
   1 includes one or more waveforms (waveform 1-1, waveform 1-2, ... waveform
   1-J, where J > 1). Level 2 includes one or more waveforms (waveform 2-1,
   waveform 2-2, ... waveform 2-K, where K > 1) each including one or more of
   waveforms selected from Level 1. Level 3 includes one or more waveforms
20 (waveform 3-1, waveform 3-2, ... waveform 3-L, where L > 1) each including
   one or more of waveforms selected from Level 2. In general, Level N includes
   one or more waveforms (waveform N-1, waveform N-2, ... waveform 2-M,
   where M > 1) each including one or more of waveforms selected from Level N
   1. The one or more waveforms of Level N - 1 may be selected multiple times
25 for inclusion in a waveform of Level N.
   [0079]          In one example, the waveforms of the plurality of individually
   definable waveforms stored in external storage device 618 are organized into a
   nested hierarchical structure with three levels (N = 3). Level 1 includes one or
   more basic waveforms. Level 2 includes one or more waveform groups each
30 including one or more basic waveforms selected from Level 1. Level 3 includes
   one or more groups of waveform groups each including one or more waveform
   groups selected from Level 2. In one embodiment, the pattern of
   neurostimulation pulses includes one or more waveforms selected from the one
   or more groups of waveform groups of Level 3. In various embodiments, the
                                              18

   pattern of neurostimulation pulses may include any combination of waveforms
   from any one, two, or three levels as determined by the user.
   [0080]           FIG. 8 illustrates a more specific embodiment of the waveforms
   of FIG. 7. In the illustrated embodiment, the waveforms of the plurality of
 5 individually definable waveforms stored in external storage device 618 are
   organized into a nested hierarchical structure with three levels (N = 3).
   [0081]           Level 1 includes one or more pulses (P1, P2, ... PJ, where J > 1)
   each being independently defined by a set of pulse parameters. The set of pulse
   parameters specify a field of the stored plurality of individually definable fields,
10 amplitude, shape, and timing of each pulse of the one or more pulses. FIG. 9
   illustrates an embodiment of a neurostimulation pulse being a monophasic pulse
   having an amplitude (A) and a pulse width (PW). The monophasic pulse is used
   for easy illustration of waveforms of higher level, while the one or more pulses
   of Level 1 may each include any pulse waveform that is suitable for
15 neurostimulation. In various embodiments, the neurostimulation pulses may
   each have a square, rectangular, or other waveforms including those with
   arbitrary shapes as defined by the user.
   [0082]           Level 2 includes one or more pulse groups (PG 1, PG2, ... PGK,
   where K > 1) each being independently defined by a set of PG parameters. The
20 one or more PGs each include one or more pulses selected from the one or more
   pulses of Level 1. The set of PG parameters specifies the one or more pulses and
   the timing of each pulse of the one or more pulses. FIG. 10 illustrates an
   embodiment of a PG. In the illustrated embodiment, timing of each pulse is
   specified using an inter-pulse interval (IPI), which is the time interval between
25 two adjacent pulses.
   [0083]           Level 3 includes one or more groups of pulse groups (GPG1,
   GPG2, ... GPGL, where L > 1) each independently defined by a set of GPG
   parameters. The one or more GPGs each include one or more PGs selected from
   the one or more PGs of Level 2. The set of GPG parameters specifies the one or
30 more PGs and timing of each PG of the one or more PGs. FIGS. 11 A and 11 B
   each illustrate an embodiment of a GPG. Timing of each PG is specified using
   an offset, which is the time interval between the beginning of that PG and the
   beginning of the GPG (or the beginning of the first PG in the GPG). In the
   embodiment illustrated in FIG. 11 A, the PGs are delivered in series from one or
                                             19

   more stimulation output channels, with the offset being set to avoid overlapping
   of pulses in time. In the embodiment illustrated in FIG. 1 IB, the PGs may be
   delivered in parallel from a plurality of stimulation output channels, and the
   offset can be set to as short as zero for a simultaneous delivery of the PGs.
 5 [0084]          In one embodiment, the pattern of neurostimulation pulses
   includes one or more waveforms selected from the one or more GPGs of Level
   3. That is, the pattern of neurostimulation pulses includes one or more GPGs
   selected from the stored one or more GPGs, the stored one or more GPSs each
   includes one or more PGs selected from the stored one or more PGs, and the
10 stored one or more PGs each including one or more pulses selected from the
   stored one or more pulses. FIG. 12 illustrates an embodiment of a pattern of
   stimulation pulses that includes a GPG repeated periodically with an OFF period
   during which no neurostimulation pulse is delivered. In various embodiments,
   the pattern of neurostimulation pulses may include any combination of pulses,
15 PGs, and GPGs as determined by the user.
   [0085]          In various embodiments, GUI 610 can operate in a plurality of
   display modes each specifying one or more waveforms of the plurality of
   individually definable waveforms to be displayed. In one embodiment, GUI 610
   may display a mode input to receive selection of a display mode from the user.
20 For example, only a waveform selected by the user is displayed in detail
   according to one of the display modes, and one or more waveforms of a level in
   the hierarchical structure selected by the user may be displayed in detail
   according to another one of the display modes.
   [00861          In various embodiments, GUI 610 can be configured to allow for
25 scaling the amplitude and time dimensions of a PG (where all pulses within the
   PG are scaled). Scaling of amplitude can be done incrementally, so that the user
   can experience it in an incrementally increasing way. Scaling of time can also
   be done incrementally. In one embodiment, scaling of time can be done while
   holding the pulse shape constant (i.e., only inter-pulse intervals are
30 increased/decreased).
   [0087]          In various embodiments, GUI 610 can be configured to allow for
   saving, loading, exporting, and importing PGs and GPGs. This allows sharing of
   useful waveforms and patterns of the neurostimulation with other users in a
   community of users.
                                             20

   [0088]          In various embodiments, GUI 610 can be configured to allow for
   programming a duty cycle for each level in the hierarchical structure. In various
   embodiments, GUI 610 can be configured to allow for testing of a given pulse
   design in a "tonic" mode that allows the user to adjust amplitude and otherwise
 5 characterize the pulse. Similarly, GUI 610 can be configured to support testing
   of a PG or GPG in a tonic mode. In various embodiments, the pulse, PG, or
   GPG are continuously delivered, without the OFF period.
   [0089]          FIG. 13 illustrates an embodiment of a method 1300 for
   controlling delivery of neurostimulation pulses through a plurality of electrodes.
10 In one embodiment, method 1300 is performed using system 100, including the
   various embodiments of its elements as discussed in this document. In various
   embodiments, programming device 102, programming device 302, and external
   programmer 602 may each be programmed to perform method 1300.
   [0090]          At 1302, a plurality of individually definable waveforms is
15 stored. In various embodiments, the stored plurality of individually definable
   waveforms is organized into a hierarchical structure including a plurality of
   levels. Each waveform of each level of the plurality of levels can include one or
   more waveforms of one or more lower levels. In various embodiments, the
   stored plurality of individually definable waveforms may include one or more
20 pulses of the neurostimulation pulses, one or more pulse groups (PGs), and one
   or more groups of pulse groups (GPGs). The one or more pulses are each
   defined by a set of pulse parameters. The one or more PGs are each defined by a
   set of PG parameters specifying the one or more pulses selected from the stored
   one or more pulses and the timing of each pulse of the specified one or more
25 pulses. The one or more GPGs are each defined by a set of GPG parameters
   specifying the one or more PGs selected from the stored one or more PGs and
   timing of each PG of the specified one or more PGs. In various embodiments, a
   plurality of individually definable fields is also stored. The fields are each
   defined by one or more electrodes selected from the plurality of electrodes and a
30 current distribution over the selected one or more electrodes, and assigned to a
   pulse of the stored one or more pulses to be delivered through the selected one or
   more electrodes.
   [0091]          At 1304, waveform tags are displayed using a GUI. The
   waveform tags are each selectable for access to a waveform of the plurality of
                                             21

   individually definable waveforms. At 1306, a selection of a waveform tag from
   the displayed waveform tags is received from a user such as a physician or other
   caregiver. The selected waveform tag is associated with the accessed waveform.
   At 1308, a graphical representation of the accessed waveform is displayed using
 5 the GUI. At 1310, the user is allowed to adjust the accessed waveform by
   editing the graphical representation of the accessed waveform using the GUI.
   [0092]           In various embodiments, the waveform tags include one or more
   waveform addition tags each selectable for adding a new waveform to the
   plurality of individually definable waveforms. By selecting a waveform addition
10 tag, the user is allowed user to create and edit a graphical representation of the
   new waveform on the GUI. In various embodiments, the graphical
   representation of the accessed waveform is displayed, with parameters defining
   the accessed waveform visually indicated, using the GUI, such as on a
   touchscreen of the GUI. The user is allowed to adjust one or more parameters
15 of the parameters defining the accessed waveform, such as by using the
   touchscreen.
   [00931           In various embodiments, field tags are displayed using the GUI.
   The field tags are each selectable for access to a field of the plurality of
   individually definable fields. A selection of a field tag of the displayed field tags
20 is received from the user. The selected field tag is associated with the accessed
   field. A graphical representation of the accessed field is displayed using the
   GUI. The user can adjust the accessed field by editing the graphical
   representation of the accessed field on the GUI.
   [0094]           At 1312, a pattern of neurostimulation pulses is defined by using
25 the GUI. The pattern of neurostimulation pulses includes one or more
   waveforms selected from the stored plurality of individually definable
   waveforms. At 1314, a plurality of stimulation parameters controlling the
   delivery of the neurostimulation pulses is generated according to the pattern of
   the neurostimulation pulses. The plurality of stimulation parameters is
30 transmitted to a stimulation device such as an implantable stimulator for
   controlling the delivery of the neurostimulation pulses from the stimulation
   device. In various embodiments, values of the plurality of stimulation
   parameters are checked against constraints of safety rules before the plurality of
   stimulation parameters is transmitted to the stimulation device.
                                             22

   [00951          FIG. 14 illustrates an embodiment of a method 1400 for
   waveform building. In one embodiment, method 1400 is performed using
   system 100, including the various embodiments of its elements discussed in this
   document. In various embodiments, programming device 102, programming
 5 device 302, and external programmer 602 may each be programmed to perform
   method 1400. FIGS. 15-23 illustrate examples of a screen, such as a
   touchscreen, of the GUI configured for performing method 1400. Examples of
   the GUI include any GUI discussed in this document, including GUI 110, 310,
   and 610. For the purpose of illustration, a first lead 1524A including electrodes
10 El-E8, a second lead 1524B including electrodes E9-E16, and a case 1507 are
   shown as part of an implantable system being programmed using the GUI. Case
   1507 includes at least a portion of an implantable housing used as an electrode.
   Electrode E2 is selected as a cathode to which 100% of the cathodic current is
   allocated. Electrode El is selected as an anode to which 25% of the anodic
15 current has is allocated. Electrode E3 is selected as another anode to which 75%
   of the anodic current is allocated. Electrode E15 is selected to allow the user to
   subsequently allocate the polarity and fractionalized electrical current to it. The
   specific numbers, the features of the GUI, and the system being programmed are
   shown in 15-23 by way of example, and not by way of restriction, for the
20 purpose of illustrating the functions of the GUIs as discussed in this document.
   [0096]          At 1402, one or more fields are defined. Each field of the one or
   more fields is defined by one or more electrodes through which a pulse of the
   neurostimulation pulses is delivered and a current distribution of the pulse over
   the one or more electrodes. FIG. 15 is an illustration of an embodiment of the
25 screen for building a field. The screen displays field tags F 1-F5 indicating that 5
   fields are stored and a new field tag "+" allowing the user to define a new field
   and add it to the stored fields. In the example as illustrated, in response to the
   field tag F2 being selected, the GUI displays a field builder that includes a
   graphical representation of the field F2. The user is allowed to modify electrode
30 selection and allocation of current to each of the selected electrodes. The GUI
   provides a command menu providing the user with field editing options.
   Examples of the commands, as illustrated in FIG. 15, include "Copy" (which
   allows the user to copy a defined field and paste to another field as a template,
   for example), "Invert" (which allows the user to change the polarity of the
                                             23

   waveform, i.e., swap the anode(s) and cathode(s)), and "Delete" (which allows
   the user to delete a defined field, i.e., remove it from the stored fields).
   [0097]          At 1404, one or more pulses are defined. FIGS. 16 and 17
   illustrate an embodiment of the screen for building a pulse. The screen displays
 5 pulse tags P1-P3 indicating that 3 pulses are stored and a new pulse tag "+"
   allowing the user to define a new pulse and add it to the stored pulses. In the
   example as illustrated in FIGS. 16 and 17, in response to the pulse tag P1 being
   selected, the GUI displays the field (F2) assigned to the pulse P1 and the pulse
   width (PW) of the pulse P1, as shown in FIG. 16. The user may select the field
10 and/or the pulse width to make modification(s) and/or select an advanced pulse
   editing ("Adv Pulse") option. In response to the advanced pulse editing option
   being selected, the GUI displays a graphical representation of the pulse P1, as
   shown in FIG. 17. The user is then allowed to modify the pulse P1 by editing
   the graphical representation, such as by dragging a horizontal segment of the
15 displayed waveform to change the amplitude associated with that segment and/or
   a vertical segment of the of the displayed waveform to change the timing
   associated with that segment. Under the advanced pulse editing option, the GUI
   provides a command menu providing the user with pulse editing options.
   Examples of the commands, as illustrated in FIG. 17, include "Open" (which
20 allows the user to open another stored waveform for use as a template, for
   example) and "Save" (which allows the user to save a newly defined or modified
   pulse).
   [0098]          At 1406, one or more PGs are defined. FIGS. 18 and 19 illustrate
   an embodiment of the screen for building a PG. The screen displays PG tags
25 PGl-PG3 indicating that 3 PGs are stored and a new PG tag "+" allowing the
   user to define a new PG and add it to the stored PGs. In the example as
   illustrated in FIGS. 18 and 19, in response to the tag PG3 being selected, the
   GUI displays the rate (delivery frequency) assigned to the PG1, as shown in FIG.
   18. The user may select the rate to change the frequency of PG delivery and/or
30 select an advanced PG editing ("Adv Pulse Group") option. In response to the
   advanced PG editing option being selected, the GUI displays a graphical
   representation of the PG3, as shown in FIG. 19. The user is then allowed to
   modify the pulse group PG3 by editing its graphical representation. In the
   illustrated embodiment, the PG is defined by specifying pulses, which may be
                                               24

   repeated, and inter-pulse intervals between adjacent pulses. For example, as
   illustrated in FIG. 19, the PG being adjusted includes a first pulse P1 (to which
   field F1 is assigned) that starts after an offset of 4.5 seconds, a second pulse P3
   (to which field F2 is assigned) that starts after an inter-pulse interval of 400
 5 milliseconds (which starts at the end of the first pulse P1, a third pulse P2 (to
   which field F 1 is assigned) that starts after an inter-pulse interval of 640
   milliseconds (which starts at the end of the first pulse P1, and then 10 pulses
   being the pulse P4 (to which field F3 is assigned) is repeated 10 times after an
   inter-pulse interval of 930 milliseconds (which starts at the end of the third pulse
10 P2. At the end of the 10 repeated pulses P4, a "(+)" sign allows the user to add
   more pulses and inter-pulse intervals to the pulse group PG3. "Cycle ON(s)"
   and "Cycle OFF (s)" allow the user to specify periods during which delivery of
   the pulses from the PG is turned on (and repeating when necessary) and off,
   respectively. Under the advanced PG editing option, the GUI provides a
15 command menu providing the user with PG editing options. Examples of the
   commands, as illustrated in FIG. 17, include "Open" (which allows the user to
   open another stored waveform for use as a template, for example) and "Save"
   (which allows the user to save a newly defined or modified pulse).
   [0099]          At 1408, one or more GPGs are defined. FIG. 20 illustrates
20 embodiment of the screen for building a GPG. The screen displays GPG tags
   GPG1 and GPG2 indicating that 2 PGs are stored and a new GPG tag "+"
   allowing the user to define a new GPG and add it to the stored GPGs. In the
   example as illustrated in FIG. 20, in response to the tag GPG1 being selected, the
   GUI displays the PGs included in GPG1 (showing PG1 and PG3 being included
25 as an example) and the duty cycle at which GPG1 is to be delivered. The user
   may modify the selection of the PGs as well as the ON and OFF durations of the
   duty cycle.
   [00100]         At 1410, a pattern of neurostimulation pulses is defined. In one
   embodiment, the pattern includes the GPG1 that includes PG1 and PG3 and is
30 repeatedly delivered at an ON-period of 60 minutes followed by an OFF-period
   of 360 minutes. In other words, the neurostimulation includes delivery of GPG1
   repeated for an hour on a 7-hour periodic basis. In various embodiments, the
   pattern of neurostimulation pulses can be defined in any combination of stored
   GPGs, inter-GPG timing parameters, and therapy session timing parameters. In
                                              25

   various other embodiments, the pattern of neurostimulation pulses can be
   defined in any combination of stored pulses, PGs, GPGs, and various timing
   parameters controlling relative timing of the selected pulses, PGs, and/or GPGs
   as well as timing of therapy session.
 5 [001011         FIGS. 21-23 illustrate various embodiments of a screen of the
   GUI that allows for access to pulses, PGs, and GPGs. The screen combines the
   programming functions of the screens illustrated in FIGS. 15-20 but allows the
   user to access to any of the stored pulses, PGs, and GPGs, as well as allowing
   the user to add new pulses, PGs, and GPGs, on one single screen.
10 [00102]         FIG. 21 illustrates an embodiment of the screen allowing for
   access to pulses, PGs, and GPGs. In the illustrated embodiment, the waveform
   tags (including pulse tags P1-P7 and new pulse tag "(+)", PG tag PG1 and new
   PG tag "(+)", and GPG tags GPGl-GPG4 and new GPG tag "(+)") are each
   displayed as a tab for a folder that opens into a corresponding waveform builder.
15 The "Load" command displayed with the pulse builder allows the user to open
   another stored pulse for use as a pulse template, for example, and the "Save"
   displayed with the pulse builder allows the user to save a newly defined or
   modified pulse. The "Load" command displayed with the PG builder allows the
   user to open another stored PG for use as a pulse template, for example, and the
20 "Save" displayed with the PG builder allows the user to save a newly defined or
   modified PG.
   [001031         FIGS. 22 and 23 each illustrate another embodiment of the screen
   allowing for access to pulses, PGs, and GPGs. The screens of FIGS. 22 and 23
   each include all the functions and visual features illustrated in FIGS. 15-2 1, with
25 the difference being designs of the layout of the features. In various
   embodiments, the layout of the features may be designed for selection based on
   the user's visual preference. Several additional command buttons are illustrated
   in FIGS. 22 and 23 as further examples of user commands that may be provided
   in the GUI. The "Save As" command allows the user to modify a pulse or PG
30 and save (add to the stored waveforms) as a new pulse or PG, respectively. The
   "Apply" button applies a selected GPG with duty cycle parameters as the pattern
   of neurostimulation pulses for programming the stimulation device. The "Test"
   button allows the stimulation device to deliver only the accessed waveform (such
   as a selected pulse or PG) in a "tonic" mode for testing purposes.
                                            26

   [00104]         In the illustrated embodiment, the pulse builder allows the user to
   modify the pulse waveform by visually editing its graphical representation. The
   arrows on the pulse waveform indicate how each segment can be modified by
   dragging. In one embodiment, the entire pulse waveform may be selected for
 5 scaling.
   [00105]         It is to be understood that the above detailed description is
   intended to be illustrative, and not restrictive. Other embodiments will be
   apparent to those of skill in the art upon reading and understanding the above
   description. The scope of the invention should, therefore, be determined with
10 reference to the appended claims, along with the full scope of equivalents to
   which such claims are entitled.
                                              27

                                                  28
CLAIMS
1.     A system for controlling delivery of neurostimulation by a user, comprising:
       a storage device configured to store individually definable waveforms;
       a programming control circuit configured to generate stimulation parameters for
programming a neurostimulation device to deliver the neurostimulation pulses according to a
pattern of neurostimulation pulses; and
       a user interface coupled to the storage device and the programming control circuit and
configured to allow the user to define the pattern of the neurostimulation pulses by selecting one
or more first waveforms from the stored individually definable waveforms to be included in the
pattern of the neurostimulation pulses and selecting one or more second waveforms from the one
or more first waveforms to be each repeated for a specified number of times in the pattern of the
neurostimulation pulses.
2.     The system according to claim 1, wherein the stored individually definable waveforms
comprise stored pulses, and the user interface is configured to allow the user to define each pulse
in the pattern of the neurostimulation pulses by selecting a pulse from the stored pulses or
repeating a defined pulse.
3.     The system according to claim 2, wherein the user interface is configured to allow the user
to create one or more new pulses to be added to the stored pulses.
4.     The system according to any of claims 2 and 3, wherein the user interface is configured to
allow the user to edit each pulse of the stored pulses.
5.     The system according to any one of claims 2 to 4, wherein the user interface is configured
to allow the user to define timing of each pulse in the pattern of the neurostimulation pulses.
6.     The system according to any one of claims 2 to 5, wherein the stored individually definable
waveforms further comprise one or more pulse groups (PGs) each including one or more pulses
selected from the stored pulses, and the user interface is configured to allow the user to define
each PG by selecting one or more first pulses from the stored pulses to be included in the each
PG and selecting one or more second pulses from the one or more first pulses to be each repeated
for a specified number of times in the each PG.

                                                  29
7.     The system according to claim 6, wherein the stored individually definable waveforms
further comprise one or more groups of pulse groups (GPGs) each including one or more PGs
selected from the stored one or more PGs, and the user interface is configured to allow the user
to define each GPG by selecting one or more PGs to be included in the each GPG.
8.     The system according to claim 1, wherein the user interface is configured to allow the user
to create one or more waveforms to be added to the stored individually definable waveforms and
to allow the user to edit each waveform of the stored individually definable waveforms.
9.     The system according to any of the preceding claims, wherein the user interface is
configured to allow for export of a waveform selected from the stored individually definable
waveforms from the system and import of a waveform into the system to be added to the stored
individually definable waveforms.
10.    The system according to any of the preceding claims, wherein the user interface comprises
a graphical user interface (GUI) configured to display a graphical representation of a waveform
selected from the stored plurality of individually definable waveforms and allow the user to
adjust the selected waveform by graphically editing the displayed graphical representation.
11.    A method for controlling neurostimulation, comprising:
       storing individually definable waveforms in a storage device;
         receiving from a user a selection of one or more first waveforms from the stored
individually definable waveforms to be included in a pattern of neurostimulation pulses;
         receiving from the user a selection of one or more second waveforms from the one or
more first waveforms to be each repeated for a specified number of times in the pattern of the
neurostimulation pulses; and
         generating stimulation parameters for programming a neurostimulation device to deliver
the neurostimulation according to the pattern of the neurostimulation pulses.
12.    The method according to claim 11, further comprising programming an implantable
neurostimulation device using the generated stimulation parameters.
13.    The method according to any one of claims 11 and 12, wherein the stored individually
definable waveforms comprise one or more stored pulses.

                                                  30
14.    The method according to any one of claims 11 to 13, comprising:
        organizing the stored individually definable waveforms into a hierarchical structure
including a plurality of levels; and
        allowing the user to define each waveform of each level of the plurality of levels using
one or more waveforms of one or more lower levels.
15.    The method according to claim 14, wherein the stored individually definable waveforms
further comprise one or more pulse groups (PGs) each including one or more pulses selected
from the stored pulses.
16.    The method according to claim 15, wherein the stored individually definable waveforms
further comprise one or more groups of pulse groups (GPGs) each including one or more PGs
selected from the stored one or more PGs.
17.    The method according to any one of claims 11 to 16, further comprising:
        allowing the user to graphically create a new waveform using a graphical user interface
(GUI); and
        adding the new waveform to the stored plurality of individually definable waveforms.
18.    The method according to claim 17, further comprising:
        receiving from the user a selection of a waveform from the stored individually definable
waveforms; and
        allowing the user to graphically edit the selected waveform using the GUI.
19.    The method according to any one of claims 11 to 18, further comprising exporting a
waveform selected from the stored individually definable waveforms for sharing with one or
more other users.
20.    The method according to any one of claims 11 to 19, further comprising importing a
waveform from another user to be added to the stored individually definable waveforms.
                        Boston Scientific Neuromodulation Corporation
                     Patent Attorneys for the Applicant/Nominated Person
                                     SPRUSON & FERGUSON

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
