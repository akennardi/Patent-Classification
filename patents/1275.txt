                                   ABSTRACT
        A device or system, including:
        a control component and a controlled non-lighting component, wherein the
control component is operatively coupled to the controlled component to control
the operation thereof;
        wherein the control component includes:
                (i) a wireless receiver for receiving wireless signals representing
        occupancy data indicative of real-time occupancies of locations and
        respective distances to said locations;
                (ii) a control interface to output at least one control signal or power
        to the controlled component; and
                (iii) a controller configured to process said occupancy data to
        selectively output the control signal or to control the supply of power to the
        controlled component in order to control the controlled component on the
        basis of said occupancy data.

                 4/6
        000
0
            no--      --D
0
    C),
                          * -
 0
 C)
 0C
 C)
                     no

                A DEVICE CONTROL NODE, AN INTERFACE NODE
                          AND A HYBRID CONTROL SYSTEM
TECHNICAL FIELD
The present invention relates to a device control node and an interface node.
BACKGROUND
Devices and building services systems are typically installed to serve the building
occupants. These devices and systems can benefit from controlling their operation
automatically, based on knowledge of the presence of humans (i.e., occupancy) in their
vicinity, including the density of occupancy and its time dependence. State of the art
energy efficient lighting systems typically utilise occupancy sensors to allow a common or
centralised control system to moderate or control their operation. A particular challenge for
these systems is the requirement of creating and maintaining a virtual map of the sensors
and the devices and systems, and transposing the map from one network to another.
Addressability is the concept at the core of most distributed engineering systems. Quite
simply, it enables the centralised control system to discriminate a device from other
devices on a network, typically for control and/or interrogation purposes. Addressability
can be achieved in several ways, at various levels of abstraction, including the following:
        (i)     it can be hardwired by referring to a particular wire (e.g., a light switch
                connected to a particular light fitting, or a motion sensor with an integrated
                switch controlling a bank of four lights);
        (ii)    it can be hardwired using a two wire interface to a device to deliver status
                a common way for a smoke detector to deliver an alarm message by closing
                a switch which a central processing unit senses;
        (iii)   it can be similar to an IP address on a computer; or
        (iv)    it can be set by a DIP switch, and be on a daisy chained network.

                                                -2
Generally speaking, the more sophisticated systems require communications protocols, and
a common or centralised          microprocessor-based     control system that needs      to be
programmed with specific details of each of the devices on the network, including, inter
alia:
        (i)     the physical location of the device, generally mapped out on building plans,
                or at least the special relationships between different devices on the
                network, for instance the light fittings that should be switched based on the
                output of a particular sensor;
        (ii)    the make and model of the device;
        (iii)   the communications protocol used to communicate with the device;
        (iv)    the firmware version of the device; and
        (v)     the command set of the device.
A good example of an addressable system is a commercial air conditioning system. This
would typically consist of large centralised items of equipment, including a chiller to
provide chilled water, a boiler to provide hot water, a system of pumps, valves, and a
piping system to deliver the water to distributed fan coil units that each have a fan (and that
has its own centrally controlled system of fans, dampers, ducts etc.). There are typically
several or even dozens of fan coil units per floor, and a thermostat for each fan coil unit. A
building management system (BMS) collects information from each of a multitude of
sensors throughout the system, and controls each of the devices according to the demand of
the system to provide the required amount of hot or cold water and air flow to each of the
terminal units. Each of the devices has an address on the system - the system needs to
know which fan coil unit has to respond to which thermostat reading, and which valve to
control to deliver the required amount of the hot or chilled water to that unit. Then the
chiller and boiler have to respond to the combined demand of the building, and they need
different control signals from the pumps, and so on.
Clearly, such a system requires significant infrastructure around the communications and
control processes, and indeed such a system demands addressability - the chiller simply
needs to know if a message is meant for it rather than the boiler. Similarly, fire systems

                                                -3
need to discriminate between different smoke detectors within a building - they simply
have to know how each device relates to each other.
Hence these systems require a detailed map of the devices on the network, which needs to
be programmed into the system - no easy task, particularly with protocol conversions
between different types of devices, and many other complexities. Accordingly, such
systems are complex and expensive to specify, design, install, configure, and maintain.
It is desired to provide a device or system, an interface node, a hybrid control system, or a
device control node, that alleviates one or more difficulties of the prior art, or to at least
provide a useful alternative.
SUMMARY
In accordance with some embodiments of the present invention, there is provided a device
or system, including:
                 a control component and a controlled non-lighting component, wherein the
         control component is operatively coupled to the controlled component to control
         the operation thereof;
                 wherein the control component includes:
                         (i) a wireless receiver for receiving wireless signals representing
                 occupancy data indicative of real-time occupancies of locations and
                 respective distances to said locations;
                         (ii) a control interface to output at least one control signal or power
                 to the controlled component; and
                         (iii) a controller configured to process said occupancy data to
                 selectively output the control signal or to control the supply of power to the
                 controlled component in order to control the controlled component on the
                 basis of said occupancy data.

                                              -4
In some embodiments, the controller is configured to process said occupancy data to
selectively output said control signal or to control the supply of power to said controlled
component in order to control the controlled component on the basis of said occupancy
data and respective elapsed times for said occupancies.
In some embodiments, the device or system is a power board, and the control component
controls the supply of electrical power to a least one device coupled to the power board.
In some embodiments, the controller is configured to control the consumption of power by
the controlled component on the basis of said occupancy data.
In some embodiments, the control of the controlled component includes turning off the
controlled component.
In some embodiments, the control of the controlled component includes placing the
controlled component in a low power state.
In accordance with some embodiments of the present invention, there is provided an
interface node, including:
                a first communications interface for communications with a common or
                centrally controlled system within a building configured to control the
                operation of a plurality of addressable devices and/or systems distributed
                within a building;
                a second communications interface for communications with a wireless
        peer-to-peer network of sensor nodes, the second communications             interface
        including a wireless receiver for receiving wireless signals representing occupancy
        data indicative of real-time occupancies of respective locations and respective
        distances to said locations;
                a device control interface for outputting a control signal or power to a
        device coupled thereto; and

                                               -5
                 a controller configured to process said occupancy data to selectively output
             said control signal or to control the supply of power to said device in order to
             control the device on the basis of said occupancy data.
In accordance with some embodiments of the present invention, there is provided an
interface node, including:
                 a wireless receiver for receiving wireless signals from at least one node of a
        wireless peer-to-peer network, the wireless signals representing occupancy data
        indicative of occupancies of respective locations and respective distances to said
        locations;
                 a communications      interface for communications      with a common or
        centrally controlled system; and
                 a controller configured to process said occupancy data to generate
        corresponding data for the addressable system and to send the corresponding data
        to the addressable system via the addressable interface.
In some embodiments, the common or centrally controlled system includes a building
management system, an air conditioning system, or an alarm system.
In some embodiments, the interface node further includes a thermostat, wherein the
addressable interface is coupled to an air conditioning system to enable local control of air
conditioning on the basis of temperature and occupancy.
In some embodiments, the nodes of the wireless network include one or more smoke
detectors, and the addressable interface is coupled to a fire alarm system to be triggered on
the basis of wireless signals received by the interface node and representing smoke
detection.
In some embodiments, the interface node further includes a wireless transmitter to transmit
wireless signals to at least one node of the wireless peer-to-peer network on the basis of

                                              -6
data received from the common or centrally controlled system via the corresponding
communications interface.
In some embodiments, the wireless peer-to-peer network includes sensor nodes configured
to control respective light sources, and the controller of the interface node is configured to
be responsive to receipt of a trigger signal received from the common or centrally
controlled system to cause the wireless transmitter to transmit wireless signals to at least
one of the sensor nodes to cause the sensor nodes to control their respective light sources
in a corresponding manner.
In some embodiments, the trigger signal represents an alarm signal, and the sensor nodes
control their respective light sources to indicate said alarm to occupants.
In some embodiments, the sensor nodes control their respective light sources to selectively
illuminate one or more exit paths to guide occupants to corresponding exits.
In some embodiments, the wireless peer-to-peer network includes sensor nodes configured
to generate said occupancy data, and the controller of the interface node is configured to be
responsive to receipt of a mode change signal received from the common or centrally
controlled system to cause the wireless transmitter to transmit wireless signals to at least
one of the sensor nodes to cause the sensor nodes to enter a corresponding operating mode.
In some embodiments, the operating mode includes a security mode wherein the sensor
nodes forward occupancy data to the interface node so that the presence of an intruder can
be detected and forwarded to the common or centrally controlled system.
In accordance with some embodiments of the present invention, there is provided a hybrid
control system, including:
                at least one wireless peer-to-peer network of sensor nodes;
                a common or centralised control component configured for communication
                with corresponding addressable components; and

                                                -7
                 an addressable interface node for communications between the centralised
                 control component and the sensor nodes of the wireless peer-to-peer
                 network.
    In accordance with some embodiments of the present invention, there is provided a
    device control node, including:
                 a wireless receiver for receiving wireless signals representing occupancy
        data indicative of real-time occupancies of respective locations and respective
        distances to said locations;
                 a wireless transmitter for transmitting wireless signals;
                 an interface for outputting a control signal or power to a device coupled
        thereto;
                 at least one of an air quality sensor, a smoke detector, and a thermostat; and
                 a controller configured to process said occupancy data to selectively output
             said control signal or to control the supply of power to said device in order to
             control the device or system on the basis of said occupancy data, and to cause
             the wireless transmitter to transmit wireless signals indicative of an output of
             the air quality sensor, a smoke detector, and/or thermostat.
In accordance with some embodiments of the present invention, there is provided in a
device control node having a wireless receiver for receiving wireless signals representing
occupancy data indicative of real-time occupancies of respective locations and respective
distances to said locations; an interface for outputting a control signal or power to at least
one device coupled thereto; and a controller configured to process said occupancy data to
selectively output said control signal or to control the supply of power to said device in
order to control the device on the basis of said occupancy data, a device control process,
including:
                 receiving, at said node, wireless signals representing a device control
        command and a device identifier;
                 determining whether the device identifier corresponds to the device coupled
        to the device control node; and

                only if the device identifier corresponds to the device coupled to the device
        control node, controlling the device coupled to the device control node in
        accordance with the device control command.
In some embodiments, the device identifier identifies a type of said device.
In some embodiments, the device identifier uniquely identifies said device.
In some embodiments, said controlling of the device includes powering off the device or
placing the device in a low power state.
In some embodiments, the device control process includes forwarding the device control
command and device identifier via a wireless transmitter of the device control node to
allow other device control nodes to control their associated devices.
Also described herein is a device control node, including:
                a wireless receiver for receiving wireless signals representing occupancy
        data indicative of real-time occupancies of respective locations and respective
        distances to said locations;
                an interface for outputting a control signal or power to a device coupled
        thereto; and
                a controller configured to process said occupancy data to selectively output
            said control signal or to control the supply of power to said device in order to
            control the device on the basis of said occupancies and respective distances.
The controller may be configured to process said occupancy data to selectively output said
control signal or to control the supply of power to said device in order to control the device
on the basis of said occupancies, said respective distances, and respective elapsed times for
said occupancies.

The device control node may be a component of the device being controlled.
The device control node may be coupled to the device via a control or power interface.
The device control node may be a component of a power board.
The controller may be configured to control the consumption of power by the device on the
basis of said occupancies and respective distances.
The control of the device may include turning off the device.
The control of the device may include placing the device in a low power state.
The device control node may include an addressable interface to couple the device control
node to an addressable system.
The addressable system may be a building management system, an air conditioning
system, or an alarm system.
Also described herein is an interface node, including:
    a wireless receiver for receiving wireless signals from at least one node of a wireless
    peer-to-peer network, the wireless signals representing occupancy data indicative of
    occupancies of respective locations and respective distances to said locations;
    an addressable interface for communications with an addressable system; and
    a controller configured to process said occupancy data to generate corresponding data
    for the addressable system and to send the corresponding data to the addressable
    system via the addressable interface.
The addressable system may include a building management system, an air conditioning
system, or an alarm system.

                                             - 10
The interface node may further include a thermostat, wherein the addressable interface is
coupled to an air conditioning system to enable local control of air conditioning on the
basis of temperature and occupancy.
The nodes of the wireless network may include one or more smoke detectors, and the
addressable interface is coupled to a fire alarm system to be triggered on the basis of
wireless signals received by the interface node and representing smoke detection.
The interface node may further include a wireless transmitter to transmit wireless signals to
at least one node of the wireless peer-to-peer network on the basis of data received from
the addressable system via the addressable interface.
The wireless peer-to-peer network may include sensor nodes configured to control
respective light sources, and the controller of the interface node may be configured to be
responsive to receipt of a trigger signal received from the addressable system to cause the
wireless transmitter to transmit wireless signals to at least one of the sensor nodes to cause
the sensor nodes to control their respective light sources in a corresponding manner.
The trigger signal may represent an alarm signal, and the sensor nodes may control their
respective light sources to indicate said alarm to occupants.
The sensor nodes may control their respective light sources to selectively illuminate one or
more exit paths to guide occupants to corresponding exits.
The wireless peer-to-peer network may include sensor nodes configured to generate said
occupancy data, and the controller of the interface node may be configured to be
responsive to receipt of a mode change signal received from the addressable system to
cause the wireless transmitter to transmit wireless signals to at least one of the sensor
nodes to cause the sensor nodes to enter a corresponding operating mode.

                                               - 11
The operating mode may include a security mode wherein the sensor nodes forward
occupancy data to the interface node so that the presence of an intruder can be detected and
forwarded to the addressable system.
Also described herein is a hybrid control system, including:
     at least one wireless peer-to-peer network of sensor nodes;
     a centralised control component configured for communication with corresponding
     addressable components; and
     an addressable interface node for communications between the centralised control
     component and the sensor nodes.
The described nodes and systems allow any device that consumes energy, or responds to
occupancy, to have location or geographic specific, access to real time occupancy
information in its environment. The prior art in the market utilises occupancy sensors or
timers predicting occupancy to moderate the behaviour of devices in an area. The motion
sensors are typically hard-wired and switched via a relay, or part of a network. The
architecture of such a prior art network requires a virtual mapping of its sensors, and their
proximity to the devices utilising this occupancy information. The present invention
extends      the   invention     described    in    International Patent    Application   No.
PCT/AU2011/000459, entitled Illumination Apparatus Methods and Systems (hereinafter
referred to as "the p2p patent application") to any device or system in the vicinity of the
occupancy information cloud created by the system in the p2p patent application to extend
the benefits of the technology to provide full building integration via the network described
in the p2p patent application.
Also described herein is a lift (i.e., elevator) control system that controls the location of
one or more lifts (i.e., elevators) in a building based on occupancy information received via
a peer-to-peer wireless network so as to reduce the lift waiting time for occupants. against
energy consumption of the lifts. The lift (i.e., elevator) control system may be configured
to balance the lift waiting time for occupants requiring a lift against energy consumption of
the lifts.

                                                -  12
Also described herein is a lift (i.e., elevator) control process, including:
        receiving real time occupancy information via a peer-to-peer wireless network, the
occupancy information representing temporal changes in occupancies                 at respective
distances from at least one lift shaft (i.e., lift well) on a floor of a building;
        processing the received occupancy information to determine whether the received
occupancy information represents the approach of one or more persons on the floor of the
building towards the lift shaft; and
         only if said processing determines that the received occupancy information
represents the approach of one or more persons towards the lift shaft, then requesting a lift
to the floor of the building.
The process may include and cancelling the request on the basis of further real time
occupancy information indicating that the one or more persons are not located at the the lift
shaft and are no longer approaching it.
BRIEF DESCRIPTION OF THE DRAWINGS
Some embodiments of the present invention are hereinafter described, by way of example
only, with reference to the accompanying drawings, wherein:
         Figure 1 is a schematic diagram showing one dimension of a two-dimensional array
of sensor nodes with occupancy sensors and the relaying of message therebetween;
         Figure 2 is a schematic diagram showing one dimension of a two-dimensional array
of sensor nodes with CO2 sensors and the relaying of message therebetween to control the
air conditioning based on air quality;
         Figure 3 is a schematic diagram illustrating the use of a 'kill switch' function to
switch off all devices coupled to a wireless peer-to-peer network by device control nodes
of the network;

                                             - 13
         Figure 4 is a schematic diagram illustrating the use of a wall switch to selectively
switch off all devices of a corresponding type that are coupled to the wireless peer-to-peer
network by device control nodes; and
         Figures 5 and 6 are a schematic diagram and a flow diagram, respectively,
illustrating the automatic generation of unique identifiers and locations of respective sensor
nodes, allowing locations to be associated with sensor data.
DETAILED DESCRIPTION
International    Patent   Application   No.    PCT/AU2011/000459,       entitled Illunination
Apparatus Methods and Systems (hereinafter referred to as "the p2p patent application"),
the entirety of which is hereby expressly incorporated herein by reference, describes a
lighting system and architecture in which sensor nodes communicate with each other using
peer-to-peer multi-hop wireless networking. Each sensor node (which is typically situated
within or adjacent to its controlled light source) includes a wireless transmitter for
transmitting wireless signals to other sensor nodes, a wireless receiver for receiving
wireless signals from other sensor nodes, at least one sensing component configured to
sense at least one characteristic of a corresponding sensing region and to generate a
corresponding     output,  and   an intelligent controller    for controlling     at least one
corresponding light source.
The controller of each sensor node is configured to control its corresponding light
source(s) based on: (i) the output of the sensing component, or (ii) wireless signals
received from one or more other sensor nodes, or (iii) data stored in memory within or
associated with the controller, or (iv) any combination of (i), (ii) and (iii). The controller is
also configured to cause the node's wireless transmitter to transmit wireless signals for use
by other sensor nodes to control their own light sources.
This system of peer-to-peer nodes provides many advantages over prior art lighting
systems, some of which are described in the p2p patent application.

                                              - 14
The sensor nodes of the lighting system can be regarded as a platform, since the node
controllers can be configured and re-configured to change the behaviour of the sensor
nodes as desired, either as part of the manufacturing process, during installation, or in the
field, or indeed at any time after installation. This ability to reconfigure the nodes as
desired allows the system as a whole to provide enhanced functionality and to support new
configurations and applications as the need arises. In particular, the sensor node controllers
can be programmed not only to modify the processes or algorithms that each node uses to
control its own light source(s), but also how the nodes exchange data with one another and
what data is exchanged, whether related to lighting or otherwise. Processes for configuring
the sensor nodes are described in Australian Patent Application No. 2012903471 ("the p2p
configuration patent application"), the entirety of which is hereby expressly incorporated
herein by reference.
Each sensor node can be attached to or mounted within a light fitting or luminaire, either as
part of the manufacturing process or during installation, or alternatively can be retro-fitted
to an existing light fitting or luminaire.
In the described embodiments, each sensor node includes at least one sensing component
configured to generate an output indicative of human presence or absence in a
corresponding sensing region. The output is thus indicative of (human) occupancy of that
sensing region, and for convenience of description such a sensing component is also
referred to herein as an 'occupancy sensor' (which, as described in the p2p patent
application, may or may not be or include a motion detector). The sensor nodes are
typically (but not necessarily) installed in or on the ceiling of an office or other installation
type, with their occupancy sensors, wireless transmitters and wireless receivers generally
directed downwards towards the floor, and portions of the wireless signals transmitted
generally downwards from the sensor nodes (in the form of a generally conical, divergent
beam) are then reflected or scattered back towards the ceiling for detection by the wireless
receivers of other nearby sensor nodes. In the described embodiments, the wireless signals
are short range (e.g., infrared optical) signals that are received only by the few nearest
nodes, and in some embodiments only the very nearest nodes such that each node only

                                            - 15
receives wireless signals from its immediate neighbouring nodes and not from nodes that
are two or more nodes away. This latter configuration is assumed in the following
description.
As will be appreciated by those skilled in the art, when such an arrangement is described in
terms of a node only "receiving" signals from its immediate neighbouring nodes, it should
be understood that this arrangement may include arrangements where signals from other
nodes at larger separations are literally "received" by the wireless receiver, but are
discriminated and not processed further in a substantive manner by the receiving node. For
example, the node's wireless receiver may be configured to ignore signals whose intensity
is below a threshold intensity, and/or the controller may be configured to drop or ignore
signals or corresponding data received from such nodes based on intensity (where
available to the controller) or one or more other criteria that can be used to assess whether
the signal was or was not received from an immediate neighbouring node, as described
below.
As shown schematically in Figure 1, upon detecting an occupant 102, a (first') sensor node
 104 transmits wireless signals (referred to herein as 'level 1' messages 106) to its
immediately neighboring or adjacent sensor nodes (referred to for convenience of
description as 'second' sensor nodes) 108 to inform those second nodes 108 that one of
their immediate neighbour sensor nodes has detected occupancy in its corresponding
sensing region. In response, each of the second sensor nodes 108 then transmits a further
message (referred to herein as 'level 2' message 110) to its own immediate neighbour
sensor nodes (referred to for convenience of description as 'third' sensor nodes 112, but
which will actually also include some of the second sensor nodes and also the first sensor
node) to inform each of those third sensor nodes 112 that one of its second neighbours has
detected occupancy. Each of these third sensor nodes 112 then transmits further wireless
signals (representing 'level 3' messages 114) to its own immediate neighbour ('fourth')
sensor nodes to inform them that one of their third neighbours has detected occupancy, and
so on.

                                             - 16
Although technically each sensor node transmits a different message to the one it received,
it will be apparent that this process can be conveniently described as a message relaying or
forwarding process, but where each message includes occupancy data that can be used by
each node to determine or estimate its spatial separation from the node that detected the
occupancy. In the described embodiments, this occupancy data includes a hop count or
similar value representing the number of peer-to-peer communication hops, or equivalently
the number of times that the message has been relayed or forwarded from peer to peer.
However, it will be apparent to those skilled in the art that the occupancy data could take
other forms,     including   spatial location   data determined by GPS sensors         and/or
triangulation and the like, for example. This effective relaying and incrementing/updating
of occupancy information can continue indefinitely until all sensor nodes have been
informed of the occupancy, or each node can be programmed not to relay such messages
when a predefined maximum hop count (or distance) is reached.
The result of this arrangement is that any given location within the installation space or
environment of the sensor nodes will generally include (assuming occupants are present)
short range wireless signals representing the occupancy of that location (if occupied) and
the occupancy of other locations (if occupied). Moreover, the wireless signals in a given
location representing occupancy in one or more other locations also include information
indicative of the respective distances from the given location to those one or more other
locations. In the described embodiments, this information takes the form of a hop count
representing the number of wireless communication hops from the sensor node that
detected the occupancy. However, as indicated above, it will be apparent to those skilled in
the art that other metrics could be used in other embodiments.
It will be apparent from the above description that each sensor node will receive multiple
occupancy messages purporting to represent occupancy detection at different hop counts or
effective distances     from that node,      whether those   messages    represent  different
occupancies, or indeed the same occupancy. (For example, a node having transmitted an
occupancy message to an immediate neighbour node will then receive effectively the same
occupancy message back from that neighbour node, but with an incremented hop count).

                                            -17
Typically, a    sensor node receiving      occupancy    information representing    multiple
occupancies at different distances or hop counts will discard or ignore those messages with
hop counts greater than the lowest hop count value in the received messages (or
equivalently with distances great than the smallest distance), although this depends upon
how the node's controller is configured. Alternatively, each newly generated occupancy
message can include a nominally unique identifier (e.g., a random number) that is included
in the relayed messages, so that messages representing the same occupancy event can be
ignored if an occupancy message representing that same occupancy event has been
previously received. Similarly, a sensor node detecting occupancy will typically be
configured to ignore received occupancy messages. Typically (but not necessarily), any
closer occupancy detection overrides occupancy at more remote locations.
In some embodiments, a sensor node can be configured to retain and relay information
relating to occupancy at other sensor nodes that are not necessarily the closest.        For
example, a sensor node may have recently received a message representing occupancy
only one hop count away.       Immediately following receipt, it then receives a message
representing occupancy three hops away. The receiving sensor node can be configured to
store and relay this occupancy information so that it can be used to create a more detailed
picture of the occupancy within a space. This means that rather than each sensor node
simply knowing how close the closest occupant to it is, it could understand the occupancy
throughout the entire space.
When configured in this manner, the occupancy information available (in the form of
wireless signals) at a given location (i.e., sensor node) represents real-time information
about how close an occupant is to that location, and/or an occupancy profile of how
recently occupancy was detected at a separation of at least one given distance or number of
hops away from that location/node. What this means is that a sensor node receiving
occupancy messages effectively knows how close someone is to it at any given time (in
terms of integer-valued quantised separations (i.e., number of nodes), or alternatively
within the resolution of the spacing distances between sensor nodes if assessed as
(continuous) distance).

                                            - 18
A system or array of sensor nodes requires only multiple instances of one identical device,
the sensor node, as many as required to provide coverage over the desired area. The sensor
nodes can be identical and do not require unique addresses, although, as described in
Australian Patent Application No. 2012903471, the sensor nodes can be configured with
respective addresses, and even to self-generate unique addresses if desired. Once installed,
each sensor node communicates with its one or more neighbouring sensor nodes to
effectively form an ad hoc peer-to-peer wireless network. The system architecture is
perfectly scalable, simplifying manufacturing, and in general obviating any need for site
specific design or programming, and unlike prior art systems there is no requirement for
external infrastructure to bind the system together. A typical installation includes one or
more rectangular arrays of sensor nodes mounted with or within light fittings, which may
be existing light fittings, such as are found in most offices. However, in some
embodiments the sensor nodes can form their own array completely independent of the
array of light fittings. Additionally, in some installations a relatively small number of
sensor nodes that do not have associated light sources can be useful to bridge gaps in the
lighting grid by interconnecting (by way of the wireless signals) otherwise isolated lights
and/or lighting zones.
Typically, each sensor node is mounted within the housing of a corresponding luminaire or
other form of light fitting, with the sensor node configured to control the lights in the
luminaire/fitting according to occupancy information available to it from its own
occupancy sensor(s) and occupancy messages received from neighbouring sensor nodes,
and, in the case of sensor nodes including light sensors, information on the ambient light
levels, both to provide daylight dimming and to monitor the light output from the
luminaires. In comparison with existing centralised lighting control systems, the lights
simply respond in a pre-configured way (although this behaviour can be modified if
desired, as described in the p2p configuration patent application, for example), depending
on how close someone is to the light fitting.

                                           - 19
For example, in one typical sensor node configuration, when a sensor node senses someone
beneath it (or, more accurately, in its sensing region), it applies 100% of the available
illumination power (although this can be modified or 'trimmed' by a single press of a
remote control), the immediately adjacent lights around the occupant are set to 50%
illumination intensity, and then beyond them the other lights on the whole floor are set to
20% illumination intensity. In this manner, a region of relatively high illumination follows
each occupant as they change locations, thereby reducing power consumption by reducing
the illumination in unoccupied areas while maintaining a region of relatively high
illumination around each occupant. Further to this, each sensor node can be selectively
configured to operate in accordance with a selected one of a plurality of pre-defined or
user-defined 'moods' that determine how it operates. For example, an open office light
might behave as described above, whereas all of the lights along a corridor or a driveway
through a car park might be configured to light up in front of an occupant on entry.
Similarly, the nodes/lights located along a path to an emergency exit can be configured to
remain at 100% illumination intensity whenever there is at least one occupant on that floor.
This can all be configured by sending the corresponding configuration commands/data to
the sensor nodes, using a wireless remote control for example, as described in the p2p
configuration patent application.
The wireless signals representing occupancy information as described above can be
considered to constitute an 'occupancy information cloud' 202, as shown in Figure 2, that
can be received by any device or system having a corresponding type of wireless receiver,
and used as desired by that device or system to control its own operation. That is, the
occupancy information (representing occupancy detection and distance) used by the sensor
nodes of the lighting system to control their respective light sources can also be used by
other systems and/or devices to inform their own decision making about how to operate,
including commonly or centrally controlled addressable devices and systems (where
"addressable" in this context refers to components having a hard-wired connection to the
common control system or a network address on a wired or wireless network that is neither
ad hoc nor peer-to-peer and are controlled by a common control system. These other
devices and systems can be controlled using the sensor nodes of the lighting system and/or

                                             - 20
further sensor nodes of the same type as described above, and/or other types of nodes or
control devices having wireless receivers configured to receive the wireless signals from
the sensor nodes (and/or other nodes/devices) and to output control signals and/or power
on the basis of the received wireless signals, either alone or in combination with other
information/data. Additionally, the ad hoc network formed by the sensor nodes can be used
to forward messages to and/or from other devices having wireless interfaces, and the ad
hoc wireless network can be one network of a larger network of networks.
In particular, the controller of a sensor node as described above and in the p2p patent
application and/or the p2p configuration patent application can be used to control a device
other than a light source. Such sensor nodes can be provided in addition to the ceiling
mounted sensor nodes, and thus need not be located on the ceiling. Moreover, for some
applications there may be no need for the sensor, or no need for the transmitter, or no need
for either of these components. Thus in some embodiments a receiver node requires only
the wireless receiver and the controller, the controller being configurable to control a
corresponding device based on the wireless signals received from one or more of the
sensor nodes.
As with the control of lighting, the ability to control other types of devices and/or systems
based on occupancy can be used to reduce power consumption by turning off those devices
and/or systems, or by placing them in a low-power state - for example, when the area
around these devices has been vacated for a predetermined period of time. This form of
control can be implemented as a stand-alone device connected to and/or providing power
to the consumer device, or can be a component integrated within a consumer device.
For example, a plasma television with such a control device can be configured to switch
itself off or into a low power state whenever someone is further than 15m away for ten
minutes or more, and to turn back on again only when manually switched back on (e.g., by
the television's remote-control), or automatically when someone is within, say, 5m. This
form of device requires only a wireless (e.g., infrared) receiver and a controller; i.e., there
is no need for a wireless transmitter. Some devices (including televisions) already include

                                             -21
suitable hardware components (e.g.,        a wireless receiver and microprocessor control
components), and only need to be configured as described herein. In any case, as with the
sensor nodes, such a device can be configured as desired to respond to the occupancy
information it receives.
Many types of devices could benefit from this form of control including, for example:
    (i)     soldering irons, and other industrial equipment;
    (ii)    general consumer equipment: irons, sandwich makers, etc.
    (iii)   televisions, computer monitors;
    (iv)    ceiling fans, stand alone air conditioners, heaters; and
    (v)     photocopiers.
As noted above, such a node or control device can be either integrated into any of the
above, and/or can be configured to provide control signals and/or to control the supply of
power to the device. For example, a node/control device as described above can be
integrated as part of a power socket, power board, or other form of power interface that
selectively provides mains power to one or more devices connected to it, whereby the
integrated device selectively switches on or off mains power to any devices connected to it,
depending on received occupancy information. In another form, the node/control device is
part of an IR blaster device that is configured to send IR remote control signals to nearby
devices in order to control those devices based on occupancy. In another form, the
node/control device is configured to send at least one other form of wireless signals, such
as WiFi, Zigbee, Bluetooth and the like, to nearby devices in order to control those devices
based on occupancy.
The forms of node or control device described above are referred to herein as 'passive'
nodes or control devices in that they simply receive wireless signals representing
occupancy messages and do not transmit their own signals or messages to other nodes. In
contrast to these passive nodes/control devices, other forms of node/control device include
a wireless transmitter to transmit messages to other nodes.

                                             - 22
Air conditioningsystems
Air conditioning systems are typically configured as multiple independently controlled
zones on the order of 10-200m2 in area. Prior art systems have used motion sensors to save
energy by not conditioning unoccupied areas. This has, however, previously required
dedicated motion sensors for the air conditioning system, transposing the maps of the
physical locations and the addresses of the motion sensors from a different system (for
example an addressable lighting system to the air conditioning thermostats and/or terminal
units. Also, due to the expense of addressable motion sensors, and the incremental cost of
the infrastructure, there are typically relatively few motion sensors in a conventional
system, and the layout is often less grid-like, making this mapping process time
consuming, prone to errors, and likely to require re-programming if the office layout
changes.
These problems and complexities are overcome by providing thermostats or terminal units
that use the occupancy information transmitted by the sensor nodes. As with the
nodes/control devices described above, each of the thermostats or terminal units includes a
wireless receiver and a controller/microprocessor, and is configured with information on
the size of its corresponding air conditioning zone. They are programmed to make their
own decisions on how to respond to received occupancy information           (and the absence
thereof), typically by either switching off the corresponding air conditioning ducts or units
after a pre-configured period of vacancy, or alternatively retreating to a heating or cooling
setback temperature.
In addition to their use of peer-to-peer wireless communications, the nodes can also be
provided with an addressable interface to allow them to send and/or receive commands
and/or data to and/or from addressable systems such as those described above.
Common or Centrally Controlled Lighting Control Systems.
Existing commonly or centrally controlled lighting control systems provide a large range
of functionality, but for at least the reasons described above, the uptake of these systems

                                             - 23
has been limited to the absolute top end of the market due to the associated cost and
complexity which cannot be justified in the broader market for lighting. Existing
commonly or centrally controlled lighting control systems have at least each sensor, light
fitting, and control panel on an addressable network (along with a large range of "behind
the scenes" equipment) which together constitute an expensive and complex system.
An addressable interface node allows a network of sensor nodes as described herein to
interface with an addressable system such as an addressable lighting system. The
addressable interface node includes not only a wireless receiver (and typically, but not
necessarily, a wireless transmitter) constituting a communications interface to the wireless
ad hoc network, but also an addressable (second) interface compatible with the addressable
network of the commonly or centrally controlled system. Depending on requirements, only
one addressable interface node might be required per floor. The addressable interface node
thus integrates the addressable centrally controlled system and the distributed peer-to-peer
sensor node network(s) to form a hybrid central control/distributed control system that
abstracts a large amount of the complexity to the ad hoc wireless network that in general
requires no site specific design, programming, commissioning or maintenance. Some other
examples of such hybrid control systems are described below.
Commonly or centrally controlled addressable systems often also collect diagnostic
information (e.g., from the ballast in a lighting system) such as, for example, lamp burning
hours, failed lamps, ballast life, etc. This information can easily be collected from the
ballast and either communicated to the user/maintainer directly by the sensor node (for
example via a visual indicator, either automatically, or in response to an interrogation
command), or communicated across the wireless peer-to-peer network to a centrally
controlled system that then raises the appropriate alarms/messages.
Mapping Occupancy and other Information
Currently within the office marketplace there is a drive towards more efficient use of office
space. One example of this is the growing desire to implement "hot desking", whereby
multiple workers use a single physical workstation or work surface during different time

                                             - 24
periods. Hot desking is particularly useful for specific types of office workers that have
sporadic use of the office, for example sales teams.
However, planning and optimising hot desking requirements is complex, and relies on
collecting occupancy data. The real time occupancy information provided by the sensor
nodes described herein can be collected and logged by a system (for example a BMS,
addressable lighting control system, or other dedicated system).
Running a hot desking office organisation system efficiently also requires access to real
time occupancy data, so that people can be directed to vacant areas in an office, which may
entail the use of the conference rooms, breakout areas etc. This can be a complex process
particularly taking into consideration the requirement for certain teams to co-exist within a
specific area. The system or component that collects the data for logging and maintenance
of the system receives and processes the wireless signals transmitted by the sensor nodes to
gain access to the occupancy information without having to install dedicated occupancy
sensors or systems.
In one example, at least three addressable interface nodes are installed at known mutually
spaced locations in office space on a floor of an office building, as shown schematically in
Figure 5. The known 'locations' of the nodes may be absolute or relative, and may be
determined either manually by measuring their absolute locations or their relative spatial
separations, or automatically by GPS and/or triangulation, to each other and/or to wireless
network transceivers in communication with the sensor nodes. In addition to the at least
three addressable interface nodes, the office space also includes mutually spaced sensor
nodes, each having a corresponding wireless transmitter and receiver (typically, in the
form of a wireless transceiver component).
As shown in the flow diagram of Figure 6, following installation, a command is issued to
the sensor nodes (as generally described in the p2p configuration patent application) to
cause each sensor node to generate a corresponding nominally unique identifier, and to
then generate a message containing that identifier of the node, and to send that message via

                                            - 25
its wireless transmitter to neighbouring sensor nodes. Nodes receiving these messages are
(possibly temporarily) configured to forward these received messages in turn to their own
neighbouring nodes (even when the hop count is larger than a similar message received at
essentially the   same time,     i.e., messages   that are usually dropped under these
circumstances), as generally described in the p2p patent application and the p2p
configuration patent application, incrementing a hop count (or equivalent) also contained
in each message. Eventually, these forwarded or relayed messages are received by the at
least three addressable interface nodes whose locations are known. These addressable
interface nodes are coupled to a common processor of the common control system, via the
addressable network. Each of the addressable interface nodes forwards the received
message payloads (i.e., the received node identifers and their respective hop counts) to the
common processor, which processes that information, together with the known locations of
the addressable interface nodes, to determine approximate locations of the sensor nodes.
In this manner, the common control system determines the spatial locations of the sensor
nodes in the office space, and can generate a physical map showing the locations of those
nodes. This information and map is then used in conjunction with occupancy information
generated at subsequent times to determine which locations in the office space are
occupied and which are unoccupied.
Similarly, the method can be used on demand or periodically to determine the spatial
locations of nodes (and their associated items, typically devices or systems in the case of a
sensor node) whose locations are not fixed. This can be used, for example, to determine the
real-time location of items such as products being manufactured or assembled, mobile
robots, inventory, personnel, etc.)
Security/Alarm Systems
In addition to power saving applications, the sensor nodes can be used for other purposes.
For example, the occupancy information generated by the sensor nodes can be used to
provide office or building security. In some embodiments, a hybrid security system
combines the autonomous (or at least quasi-autonomous) wireless peer-to-peer sensor

                                            -26
nodes described herein with commonly or centrally controlled addressable security
components. The hybrid security system thus has access to the occupancy information,
which means it does not need additional motion sensors. The sensor nodes can be armed or
placed in a security mode by a transmitter of an addressable interface node transmitting an
instruction to nearby sensor nodes to enter the security mode, with each sensor node
relaying the message to other nearby sensor nodes until every sensor node in the
corresponding peer-to-peer network (e.g., office or floor) is in the security mode, as
described in the p2p configuration patent application. Once in the security mode,
occupancy information is relayed by the sensor nodes to one or more addressable interface
nodes, so that the detection of occupancy can be sent to a centralised security component
of the system, together with the address of the corresponding addressable receiver, thereby
indicating an approximate location of an occupant within the office or building. The
addressable interface nodes can be distributed as desired; for example, there may be only
one such addressable interface node per office or floor, or there may be multiple
addressable interface nodes per office or floor. It is not necessary that every one of the
addressable interface nodes includes a wireless transmitter.
Additionally, the hybrid security system can use the sensor nodes to control the lights in
response to such detection, for example, using the lights as a visual alarm indicator in a
strobing fashion by transmitting and relaying a strobe command signal along the wireless
peer-to-peer network. It will be apparent to those skilled in the art that the lights could be
controlled in many possible different ways in response to the detection of an intruder. For
example, detection of an intruder on one floor of a building could cause lights on one or
more other floors to flash or otherwise be controlled to indicate intruder detection and
approximate location to observers outside the building (e.g., security or police) without
alerting the intruder to that detection.
Similarly, if an area is to be evacuated (e.g., due to an event such as a fire alarm, bomb
threat, earthquake warning, or the like), the security system can instruct one or more
addressable interface nodes to enter an evacuation state. In response, each addressable
interface node with a transmitter transmits wireless signals to nearby sensor nodes,

                                            - 27
instructing them to enter an alarm state. As with the security mode described above, each
sensor node relays these messages to other sensor nodes, so that all sensor nodes in the
array enter the evacuation state. In addition to forwarding the evacuation messages, each
sensor node also responds in accordance with its configuration/programming. For example,
sensor nodes located along emergency exit paths can be configured to provide 100%
illumination intensity, whereas other lights can be operated at lower power in order to help
people find their way to the exits.
Air Quality Control in a Building Management Systems (BMS)
A core function of a BMS is to control the mixture of heating and cooling to achieve the
desired room temperature, and to control the amount of outside air to provide adequate
exhausting of the CO 2 emitted by occupants. The most energy efficient way to control this
is via CO2 sensors to provide demand-controlled ventilation. However, installing and
connecting all the air quality sensors to a BMS is expensive, and consequently most
systems rely on set minimum levels of fresh air, with the consequences that too much
energy is consumed if the fresh air levels are set higher than required for the actual
occupancy, and insufficient fresh air is provided at times when the maximum number of
occupants is present and the most fresh air is required.
As shown in Figure 2, in order to address these shortcomings, CO 2 sensors are included in
some or all of the sensor nodes 204, and the CO 2 level information generated by those CO 2
sensors is relayed from sensor node to sensor node until it is received by one or more
addressable interface nodes connected to the BMS 205, thereby constituting a hybrid
addressable/non-addressable BMS. Thus in Figure 2, a single occupant 206 is present in
one region, and the air quality in that regions is sensed by the CO2 sensor of the nearby
sensor node(s) 208, and corresponding signals are sent to the BMS 205 in order to control
the nearby air duct(s) 210 to provide a relatively low air flow into that region. In contrast,
the regions around a relatively large group of occupants 212 have much higher levels of
C0 2 , as detected by the CO 2 sensors of the nearby sensor nodes 204, which relay

                                             - 28
corresponding signals to cause the BMS 205 to provide a relatively high air flow from the
nearby ducts 214.
Similarly, smoke detectors can be included in at least some of the sensor nodes, and when
a sensor node determines that a fire may be present, a fire alarm signal sent through the
network to an addressable interface node in the same manner to trigger a centralised fire
alarm.
Kill-Switch
There are times when occupants forget to switch off some devices on leaving the premises,
and the devices can be unintentionally left on until the next morning or longer. Leaving
devices on poses several disadvantages, including wasting electricity, and over-heating
certain devices that may shorten device life or cause damage, as well as the unnecessary
risk of fire when a fault develops in a device or wiring.
As shown in Figure 3, a Kill-Switch function allows a user 302 to switch off all devices
controlled by sensor nodes and/or other nodes of the network by a single press of a wall
plate switch or remote control button 304. The resulting kill or shutdown message is
transmitted in the form of wireless signals 306 originating from the remote control to at
least one sensor node, and subsequently relayed throughout the sensor node network as
described in the p2p configuration patent application. On receiving this command, the
controller of each node 308 controls its associated light sources           310 or other
devices/system 312, 314, 316 to shut them down or at the least enter a low-power state
after a short delay (e.g., 20 seconds), depending on how the node has been configured.
Additionally, the sensor nodes can optionally be programmed to ignore or cancel the kill or
shutdown message occupancy is detected within a second short period (e.g., 5 seconds)
from the end of the delay period in order to provide an opportunity for an undetected
occupant to effectively cancel the kill command.

                                            - 29
Internet Gateway/Wall Plate Switch
Communication with the wireless peer-to-peer network formed by the sensor nodes and
any other nodes of the network can be provided by including either a relatively simple
remote control (for one-way communication), or a more complex interface node that can
be addressable and/or can support two-way communication. As shown in Figure 4, the
interface node can be wall mounted 402 or in the form of a hand-held portable device. It
includes a wireless transmitter and optionally also a wireless receiver to support two-way
communication, so that the interface node can transmit commands to the sensor node
network (and devices/systems connected thereto), and optionally can receive status and
other information from the sensor node network.
Commands such as switch-off lights, switch-off air-conditioning, switch-off TVs and
switch off everything (as in the case of the kill switch described above) can be
programmed into the interface node 402, and these messages transmitted through the peer
to-peer network of sensor nodes to the devices concerned, creating a wireless user interface
for lighting, air-conditioning and televisions. This is achieved by configuring each device
control node with device data identifying the type of device that the node is controlling.
When the node receives a 'switch-off command, the command includes a corresponding
identifier of the type of device to be turned off (or alternatively a device type-specific
command may be received), it determines whether its associated device is of the
corresponding type, and only if it is does the node turn its associated device off (or on, or
otherwise controlled in accordance with the corresponding command).
In some cases, it may be desirable to retrieve status, or control devices/systems from a
remote location. For example, heating can be switched on before a person arrives at the
premises. These functions can be provided by the interface node 402 where the interface
node includes a second network interface, typically a wired or wireless IP network
interface. For example, as shown in the embodiment of Figure 4, the interface node 402
includes an infrared (IR) wireless interface for communication with the peer-to-peer
wireless network and a second (e.g.,WiFi) interface to a local internet protocol (IP)

                                               - 30
network having a gateway (typically a modem/router 404) to a wide area communications
network (WAN) 406 such as the Internet. This allows commands (including status
requests) to be sent by a remote user (via a computer 408 or handheld device 410) to the
interface node 402, allowing devices/systems such as the air conditioning system 316 to be
controlled remotely.
In one example, an interface node receives messages from a utility provider (or, more
generally, the smart grid) to send demand response (or load shedding) messages to force
one or more devices (or one or more types of devices) controlled by wireless sensor nodes
of the associated peer-to-peer wireless network into a low power state in order to manage
peak loads on the electricity grid or a local power system such as a battery bank or diesel
generator.
Lift Control
Lifts and lift shafts consume significant floor space of a building, and their performance,
particularly in high rise buildings, has a significant effect on occupant comfort in terms of
how quickly a lift can arrive in response to a request from an occupant. Many high end lift
control systems keep the lift motors in a state of "stasis" when on standby in order to
improve the responsiveness of the lift to a call from an occupant. However, this stasis state
consumes a lot of energy as the lift motors and associated control systems are essentially
always being powered.
In order to alleviate these difficulties, at least one interface node can be placed in each lift
lobby and in communication with other nodes of the peer-to-peer wireless network,
thereby enabling detailed occupancy information to be provided to the lift control system,
which can result in significant improvements in energy efficiency and lift responsiveness,
and may result in fewer lifts being required. The interface node can do more than detect the
presence of an occupant in the lift lobby as a standard motion sensor would do: it can
effectively 'see' an occupant approaching the lift lobby when the peer-to-peer occupancy
messages indicate a decreasing separation of the receiving node from the occupant,

                                              - 31
indicating that someone is approaching. For example, the interface node may receive
messages indicating node separations of, say, 7,6,5,4,3,2, and 1, and then directly detect
occupancy itself when an occupant enters the lift lobby. In one implementation, the
interface node may therefore call the lift when it receives a 'level 4' message (indicating a
separation of 4 node spacings), but cancel the lift request if the further messages are not
received within a predetermined time period.
Moreover, standard learning algorithms known to those skilled in the art can be used to
optimise the performance of the lifts based on experience, and may be specific to each
installation. For example, the received messages representing the progression of decreasing
 'levels' (i.e., separations) described above would usually culminate in a button press to call
the lift. However, some such 'progressions' of messages may not result in a button press.
By storing data on each 'event' of message progressions and button presses (or absence of
a button press), including the time of day and the delays between received messages (and
button presses), detailed statistics can be generated for each specific lift, including the
probability of a given message progression to result in a button press. Floors and lift
lobbies can even be designed around this capability, in particular to discourage or prevent
the lift lobby from being used as a thoroughfare within the same floor, in order to optimise
when a lift should be summoned based on the received occupancy data.
Many modifications will be apparent to those skilled in the art without departing from the
scope of the present invention.

-mka\Imerwven                            1.
               \N0RPor D)CC\MKA\16021656_ do-17/1,U2017
                                                               - 32
CLAIMS:
       1. A device or system, including:
                           a control component and a controlled non-lighting component, wherein the
              control component is operatively coupled to the controlled component to control
              the operation thereof;
                           wherein the control component includes:
                                        (i) a wireless receiver for receiving wireless signals representing
                           occupancy data indicative of real-time occupancies of locations and
                           respective distances to said locations;
                                        (ii) a control interface to output at least one control signal or power
                           to the controlled component; and
                                        (iii) a controller configured to process said occupancy data to
                           selectively output the control signal or to control the supply of power to the
                           controlled component in order to control the controlled component on the
                           basis of said occupancy data.
       2. The device or system of claim 1, wherein the controller is configured to process
              said occupancy data to selectively output said control signal or to control the supply
              of power to said controlled component in order to control the controlled component
              on the basis of said occupancy data and respective elapsed times for said
              occupancies.
       3. The device or system of claim 1 or 2, wherein the device or system is a power
              board, and the control component controls the supply of electrical power to a least
              one device coupled to the power board.
       4. The device control node of any one of claims 1 to 3, wherein the controller is
              configured to control the consumption of power by the controlled component on
              the basis of said occupancy data.

-mka\Imerwven                            1.
               \N0RPor D)CC\MKA\16021656_ do-17/1,U2017
                                                        - 33
       5. The device control node of claim 4, wherein the control of the controlled
              component includes turning off the controlled component.
       6. The device control node of claim 4, wherein the control of the controlled
              component includes placing the controlled component in a low power state.
       7. An interface node, including:
                           a first communications interface for communications with a common or
                           centrally controlled system within a building configured to control the
                           operation of a plurality of addressable devices and/or systems distributed
                           within a building;
                           a second communications interface for communications with a wireless
              peer-to-peer network of sensor nodes, the second communications                    interface
              including a wireless receiver for receiving wireless signals representing occupancy
              data indicative of real-time occupancies of respective locations and respective
              distances to said locations;
                           a device control interface for outputting a control signal or power to a
              device coupled thereto; and
                           a controller configured to process said occupancy data to selectively output
                    said control signal or to control the supply of power to said device in order to
                    control the device on the basis of said occupancy data.
       8.     An interface node, including:
                           a wireless receiver for receiving wireless signals from at least one node of a
              wireless peer-to-peer network, the wireless signals representing occupancy data
              indicative of occupancies of respective locations and respective distances to said
              locations;
                           a communications interface for communications           with a common or
              centrally controlled system; and

-mka\Imerwven                            1.
               \N0RPor D)CC\MKA\16021656_ do-17/1,U2017
                                                        - 34
       a controller configured to process said occupancy data to generate corresponding data
       for the addressable system and to send the corresponding data to the addressable
       system via the addressable interface.
       9. The interface node of claim 7 or 8, wherein the common or centrally controlled
              system includes a building management system, an air conditioning system, or an
              alarm system.
       10. The interface node of any one of claims 7 to 9, further including a thermostat,
              wherein the addressable interface is coupled to an air conditioning system to enable
              local control of air conditioning on the basis of temperature and occupancy.
       11. The interface node of any one of claims 7 to 10, wherein the nodes of the wireless
              network include one or more smoke detectors, and the addressable interface is
              coupled to a fire alarm system to be triggered on the basis of wireless signals
              received by the interface node and representing smoke detection.
       12. The interface node of any one of claims 7 to 11, further including a wireless
              transmitter to transmit wireless signals to at least one node of the wireless peer-to
              peer network on the basis of data received from the common or centrally controlled
              system via the corresponding communications interface.
       13. The interface node of claim 12, wherein the wireless peer-to-peer network includes
              sensor nodes configured to control respective light sources, and the controller of the
              interface node is configured to be responsive to receipt of a trigger signal received
              from the common or centrally controlled system to cause the wireless transmitter to
              transmit wireless signals to at least one of the sensor nodes to cause the sensor
              nodes to control their respective light sources in a corresponding manner.

-mka\Imerwven                            1.
               \N0RPor D)CC\MKA\16021656_ do-17/1,U2017
                                                        - 35
       14. The interface node of claim 13, wherein the trigger signal represents an alarm
              signal, and the sensor nodes control their respective light sources to indicate said
              alarn to occupants.
       15. The interface node of claim 14, wherein the sensor nodes control their respective
              light sources to selectively illuminate one or more exit paths to guide occupants to
              corresponding exits.
       16. The interface node of any one of claims 7 to 15, wherein the wireless peer-to-peer
              network includes sensor nodes configured to generate said occupancy data, and the
              controller of the interface node is configured to be responsive to receipt of a mode
              change signal received from the common or centrally controlled system to cause
              the wireless transmitter to transmit wireless signals to at least one of the sensor
              nodes to cause the sensor nodes to enter a corresponding operating mode.
       17. The interface node of claim 16, wherein the operating mode includes a security
              mode wherein the sensor nodes forward occupancy data to the interface node so
              that the presence of an intruder can be detected and forwarded to the common or
              centrally controlled system.
       18. A hybrid control system, including:
                           at least one wireless peer-to-peer network of sensor nodes;
                           a common or centralised control component configured for communication
                           with corresponding addressable components; and
                           an addressable interface node for communications between the centralised
                           control component and the sensor nodes of the wireless peer-to-peer
                           network.

-mka\Imerwven                            1.
               \N0RPor D)CC\MKA\16021656_ do-17/1,U2017
                                                          - 36
       19. A device control node, including:
                           a wireless receiver for receiving wireless signals representing occupancy
              data indicative of real-time occupancies of respective locations and respective
              distances to said locations;
                           a wireless transmitter for transmitting wireless signals;
                           an interface for outputting a control signal or power to a device coupled
              thereto;
                           at least one of an air quality sensor, a smoke detector, and a thermostat; and
                           a controller configured to process said occupancy data to selectively output
                    said control signal or to control the supply of power to said device in order to
                    control the device or system on the basis of said occupancy data, and to cause
                    the wireless transmitter to transmit wireless signals indicative of an output of
                    the air quality sensor, a smoke detector, and/or thermostat.
       20. In a device control node having a wireless receiver for receiving wireless signals
              representing occupancy data indicative of real-time occupancies of respective
              locations and respective distances to said locations; an interface for outputting a
              control signal or power to at least one device coupled thereto; and a controller
              configured to process said occupancy data to selectively output said control signal
              or to control the supply of power to said device in order to control the device on the
              basis of said occupancy data, a device control process, including:
                           receiving, at said node, wireless signals representing a device control
              command and a device identifier;
                           determining whether the device identifier corresponds to the device coupled
              to the device control node; and
                           only if the device identifier corresponds to the device coupled to the device
              control node, controlling the device coupled to the device control node in
              accordance with the device control command.

                                        1.
E:mka\merwven\N, RPor D)CC\MKA\16021656_ do-17/1,U2017
                                                       - 37
       21. The device control process of claim 20, wherein the device identifier identifies a
             type of said device.
       22. The device control process of claim 20 or 21, wherein the device identifier
             uniquely identifies said device.
       23. The device control process of any one of claims 20 to 22, wherein said controlling
             of the device includes powering off the device or placing the device in a low power
             state.
       24. The device control process of any one of claims 20 to 23, including forwarding the
             device control command and device identifier via a wireless transmitter of the
             device control node to allow other device control nodes to control their associated
             devices.

                                  <removed-apn>    <removed-date>
    104               108           108           104
6           106             110           106
                                                              1/6
          102
                                                        102
           Figure 1

                        <removed-apn>       <removed-date>
                      205
04
                             210   208
                                            202
14
     212
                                                  2/6
                                     206
           Figure 2

                             <removed-apn>    <removed-date>
310        308         308    310    308
                                    316
                                                   3/6
                 314
      Figure 3

                           <removed-apn>        <removed-date>
310         308     308   310   308
                                               408
                                       316
                                                 406   4/6
              314
                                 404
                                         410
 Figure 4

<removed-apn> <removed-date>
<removed-apn> <removed-date>
