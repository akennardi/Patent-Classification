ABSTRACT
An image predictive decoding device and method are disclosed. In one aspect, the image
predictive decoding device comprises: input means for accepting input of compressed picture data
and encoded information, the compressed picture data containing a residual signal generated by
dividing a picture into a plurality of blocks and performing predictive encoding of a target block, and
the encoded information about a prediction mode indicative of a generation method of a predicted
signal of the target block; restoration means for extracting the residual signal of the target block from
the compressed picture data to restore a reproduced residual signal; prediction mode decoding means
for restoring the encoded information about the prediction mode to generate the prediction mode;
predicted signal generation means for generating the predicted signal of the target block based on the
prediction mode; picture restoration means for adding the predicted signal to the reproduced residual
signal to restore a pixel signal of the target block; and storage means for storing the restored pixel
signal as a reproduced pixel signal, wherein the prediction mode decoding means generates a
candidate prediction mode list containing elements of prediction modes of a plurality of previously
reproduced blocks neighboring the target block, and decodes a flag that indicates whether the
candidate prediction mode list contains an element corresponding to the prediction mode; when the
flag indicates that the corresponding element is present in the candidate prediction mode list, the
prediction mode decoding means further decodes an index indexing the candidate prediction mode list
to obtain an element indicated by the index as the prediction mode; when the flag indicates that no
corresponding element is present in the candidate prediction mode list, the prediction mode decoding
means further decodes a value of a REM (remaining) mode to restore the value of the REM mode as a
numerical value of a fixed-length code, and remaps the restored value of the REM mode to an
identification number of the prediction mode to obtain the intra-frame prediction mode of the target
block; wherein, when the prediction mode decoding means remaps the restored value of the REM
mode, the prediction mode decoding means sets a variable for the intra-frame prediction mode of the
target block equal to a decoded value of the REM mode, and repeatedly performs, for every element
in the candidate prediction list, a step of comparing the variable with a smallest element among
elements on the candidate prediction list which are not yet used in comparison, and a step of adding 1
to a value of the variable when the variable is larger than or equal to the element, to obtain the final
value of the variable as the intra-frame prediction mode of the target block.

                                                1
IMAGE PREDICT CODING METHOD, IMAGE PREDICT CODING
DEVICE, IMAGE PREDICT CODING PROGRAM, IMAGE PREDICT
DECODING METHOD, IMAGE PREDICT DECODING DEVICE, AND
IMAGE PREDICT DECODING PROGRAM
RELATED APPLICATIONS
The present application is a divisional of Australian Patent Application No. <removed-apn> filed
on 19 April, 2016, the content of which is incorporated herein by reference in its entirety.
Australian Patent Application No. <removed-apn> is a divisional of Australian Patent
Application No. 2015202844, filed 26 May, 2015, the content of which is incorporated by
reference in its entirety. Australian Patent Application No. 2015202844 is a divisional of
Australian Patent Application No. 2011354861 filed on 15 December, 2011, the content of
which is incorporated herein by reference in its entirety.
TECHNICAL FIELD
[0001] Aspects of the present disclosure relate to image predictive encoding and decoding
methods, devices, and programs and, more particularly, to methods, devices, and programs
for predictive encoding and decoding using a signal in a frame.
BACKGROUND
[0002] The compression encoding technologies are used for efficient transmission and
storage of still pictures and video data. The systems of MPEG 1 to MPEG4 and H.261 to
H.264 are commonly used for video data.
[0003] In these encoding systems, a picture as an encoding target is divided into a plurality of
blocks and then an encoding/decoding process thereof is carried out. In MPEG4 and H.264,
to further increase encoding efficiency, intra-frame predictive encoding is carried out in such
a manner that a predicted signal is generated using a neighbouring previously-reproduced
pixel signal (restored signal of compressed picture data) present in the same frame as a target
block, and then a difference signal obtained by subtracting the predicted signal from a signal

                                                2
of the target block is encoded. In inter-frame predictive encoding, compensation for motion is
made with reference to another previously-reproduced picture signal present in a frame
different from that of a target block to generate a predicted signal, and a difference signal
obtained by subtracting the generated predicted signal from a signal of the target block is
encoded.
[0004] Specifically, the intra-frame predictive encoding of H.264 adopts a method of
extrapolating previously-reproduced pixel values neighbouring a block as an encoding target,
in predetermined directions to generate the predicted signal. Fig. 13 is a schematic diagram
for explaining the intra-frame prediction method used in H.264. In Fig. 13(A), a block 1302
is a target block and a pixel group consisting of pixels A-M (1301) neighbouring a boundary
of the target block is a neighbouring region, which is a picture signal previously reproduced
in past processing. In this case, the predicted signal is generated by downwardly duplicating
the neighbouring pixels (A-D) located immediately above the target block 1302. In Fig. 13
(B), the predicted signal Is generated by rightwardly duplicating previously-reproduced
pixels (1-L) located to the left of target block 1304. The specific methods for generation of
the predicted signal are described, for example, in Patent Literature 1. A difference is
calculated between each of nine predicted signals generated by the methods shown in Fig. 13
(A) to (I) in this manner, and the pixel signal of the target block, and a method to provide the
smallest difference is defined as an optimum prediction method. These extrapolation methods
can be brought together as shown in Fig. 14. In Fig. 14, arrows indicate extending directions
of previously-reproduced pixels and numbers for the respective directions are identification
numbers of the respective prediction modes. An identification number for prediction by an
average of surrounding previously-reproduced pixels is 2 and is denoted by DC in Fig. 14.
These identification numbers are also referred to as identification information about the intra
frame prediction method, or as mode information, or simply as prediction modes.
[0005] The prediction mode of a block undergoing the intra-frame prediction needs to be sent
to the transmission side. On that occasion, the intra-frame prediction mode of the target block
is encoded with reference to the intra-frame prediction modes of an upper neighbouring block
and a left neighbouring block for the target block. Namely, a comparison is made between the
intra-frame prediction modes of the upper neighbouring block and the left neighbouring block
and the block with a smaller value is determined as reference mode information (most

                                                3
probable mode). The intra-frame prediction mode of the target block is encoded based on this
reference mode information.
[0006] Specifically, a symbol to indicate whether the intra-frame prediction mode of the
target block is identical to the reference mode information is encoded. When the symbol is 1,
the intra-frame prediction mode of the target block is the same as the reference mode
information. When the symbol is 0, information about the intra-frame prediction mode of the
target block is encoded. However, if a number indicative of the intra-frame prediction mode
of the target block is larger than a number of the reference mode information, encoding is
performed after subtracting one from the number indicative of the intra-frame prediction
mode of the target block.
[0007] On the reproduction side, the symbol is first decoded in the intra-frame predicted
target block. When the symbol is 1, it is meant thereby that the intra-frame prediction mode
of the target block is the same as the reference mode information. When the symbol is 0, the
information about the intra-frame prediction mode is further decoded. However, if the
number of the decoded prediction mode is equal to or larger than the reference mode
information, the intra-frame prediction mode of the target block is determined by adding one.
Citation List
Patent Literature
[0008] Patent Literature 1: U.S. Patent No. 6, 765,964
SUMMARY
[0009] Incidentally, it is known that the accuracy of the intra-frame prediction is improved by
providing more intra-frame prediction modes than in the conventional technology. Namely, it
is effective to provide options of extrapolation for the predicted signal from intermediate
angles (directions), in addition to the nine modes shown in Fig. 14.

                                                4
[0010] However, the increase of prediction methods leads to a problem of reduction in
encoding efficiency of the identification information (prediction mode) to specify the intra
frame prediction method when using the conventional technology.
[0011] A reason for the encoding efficiency is that the increase in the number of intra-frame
prediction modes results in statistical reduction in probability of correlation between the
prediction mode of the target block and the reference mode information (most probable
mode). In addition, the encoding of the prediction mode itself, in the case of disagreement
with the reference mode information, requires a larger bit count because the number of intra
frame prediction modes is increased.
[0012] An object of the present disclosure is to solve the above problem, thereby providing a
method, device, and program for efficient encoding of the mode information to identify the
intra-frame prediction method of the target block even in the case where a larger number of
prediction modes are provided in the method of generation of intra-frame predicted signals. A
further object of the present disclosure is to provide a method, device, and program for
efficient decoding of encoded mode information.
[0013] In a first aspect, the present disclosure provides an image predictive encoding device
comprising: region division means for dividing an input picture into a plurality of blocks;
predicted signal generation means for determining, from a plurality of prediction modes, a
prediction mode with a smallest difference for a pixel signal in a target block, the target block
being a processing target from among the plurality of blocks, and for generating a predicted
signal in accordance with the determined prediction mode; residual signal generation means
for generating a residual signal representing a difference between the pixel signal of the target
block and the predicted signal; signal encoding means for encoding the residual signal to
generate a compressed signal; prediction mode encoding means for encoding the determined
prediction mode; and storage means for restoring the compressed signal and storing a
restored signal as a reproduced pixel signal, wherein the prediction mode encoding means
generates a candidate prediction mode list containing elements of prediction modes of a
plurality of previously-reproduced blocks neighboring the target block, and encodes a flag to
indicate whether the candidate prediction mode list contains an element corresponding to the
prediction mode; when the corresponding element is present in the candidate prediction list,

                                                5
the prediction mode encoding means further encodes an index to said element present in the
candidate prediction mode list; when there is no corresponding element present in the
candidate prediction list, the prediction mode encoding means encodes the prediction mode
with a number corresponding to its revised position, after each element in the candidate
prediction mode list is removed from the plurality of prediction modes and the remaining
prediction modes are ordered from the smallest element to the largest element.
[0014]   In a second aspect, the present disclosure provides an image predictive encoding
method comprising: a region division step of dividing an input picture into a plurality of
blocks; a predicted signal generation step of determining, from a plurality of prediction
methods, a prediction mode with the smallest difference for a pixel signal in a target block,
and generating a predicted signal in accordance with the determined prediction mode, the
target block being a processing target from among the plurality of blocks; a residual signal
generation step of generating a residual signal representative of a difference between the
pixel signal of the target block and the predicted signal; a signal encoding step of encoding
the residual signal to generate a compressed signal; a prediction mode encoding step        of
encoding the determined prediction mode; and a storage step of restoring the compressed
signal and storing a restored signal as a reproduced pixel signal, wherein the prediction mode
encoding step comprises: generating a candidate prediction mode list containing elements of
prediction modes of a plurality of previously-reproduced blocks neighboring the target block;
encoding a flag to indicate whether the candidate prediction mode list contains an element
corresponding to the prediction mode; when the corresponding element is present in the
candidate prediction list, further encoding an index to said element present in the candidate
prediction mode list; when there is no corresponding element present in the candidate
prediction list, encoding the prediction mode with a number corresponding to its revised
position, after each element in the candidate prediction mode list is removed from the
plurality of prediction modes and the remaining prediction modes are ordered from the
smallest element to the largest element.
[0014a]   In a third aspect, the present disclosure provides an image predictive encoding
device comprising: region division means for dividing an input picture into a plurality of
blocks; predicted signal generation means for determining, from a plurality of prediction
modes, an optimum prediction mode with a smallest difference for a pixel signal in a block,

                                               6
the block being a processing target from among the plurality of blocks, and the predicted
signal generation means being for generating a predicted signal in accordance with the
determined optimum prediction mode; residual signal generation means for generating a
residual signal representing a difference between the pixel signal of the block and the
predicted signal; signal encoding means for encoding the residual signal to generate a
compressed signal; prediction mode encoding means for encoding the optimum prediction
mode; and storage means for restoring the compressed signal and storing a restored signal as
a reproduced pixel signal, wherein the prediction mode encoding means generates a candidate
prediction mode list by adding, as elements, optimum prediction modes of a plurality of
previously-reproduced blocks neighboring the block, the candidate prediction mode list
containing no duplicate prediction modes as the elements, and wherein the prediction mode
encoding means encodes a flag to indicate whether the candidate prediction mode list
contains an element corresponding to the optimum prediction mode.
[0014b] In a fourth aspect, the present disclosure provides an image predictive encoding
method executed by an image predictive encoding device, the image predictive encoding
method comprising: a region division step of dividing an input picture into a plurality of
blocks; a predicted signal generation step of determining, from a plurality of prediction
methods, an optimum prediction mode with the smallest difference for a pixel signal in a
block, and generating a predicted signal in accordance with the optimum prediction mode, the
block being a processing target from among the plurality of blocks; a residual signal
generation step of generating a residual signal representative of a difference between the
pixel signal of the block and the predicted signal; a signal encoding step of encoding the
residual signal to generate a compressed signal; a prediction mode encoding step of encoding
the optimum prediction mode; and a storage step of restoring the compressed signal and
storing a restored signal as a reproduced pixel signal, wherein the prediction mode encoding
step comprises: generating a candidate prediction mode list by adding, as elements, optimum
prediction modes of a plurality of previously-reproduced blocks neighboring the block, the
candidate prediction mode list containing no duplicate prediction modes as the elements, and
encoding a flag to indicate whether the candidate prediction mode list contains an element
corresponding to the optimum prediction mode.
[0014c]    In a fifth aspect, the present disclosure provides an image predictive decoding

                                                7
device comprising: input means for accepting input of compressed picture data containing a
residual signal and encoded information about a prediction mode, the residual signal being
generated by dividing a picture into a plurality of blocks and performing predictive encoding
of a block, and the encoded information about the prediction mode being indicative of a
generation method of a predicted signal of the block; restoration means for extracting the
residual signal of the block from the compressed picture data to restore a reproduced residual
signal; prediction mode decoding means for restoring the encoded information about the
prediction mode to generate an optimum prediction mode; predicted signal generation means
for generating the predicted signal of the block based on the optimum prediction mode;
picture restoration means for adding the predicted signal to the reproduced residual signal to
restore a pixel signal of the block; and storage means for storing the restored pixel signal as a
reproduced pixel signal, wherein the prediction mode decoding means generates a candidate
prediction mode list by adding, as elements, optimum prediction modes of a plurality of
previously-reproduced blocks neighboring the block, the candidate prediction mode list
containing no duplicate prediction modes as the elements, and wherein the prediction mode
decoding means decodes a flag that indicates whether or not the candidate prediction mode
list contains an element corresponding to the optimum prediction mode.
[0014d]    In a sixth aspect, the present disclosure provides an image predictive decoding
method executed by an image predictive decoding device, the image predictive decoding
method comprising: an input step of accepting input of compressed picture data containing a
residual signal and encoded information about a prediction mode, the residual signal being
generated by dividing a picture into a plurality of blocks and performing predictive encoding
of a block, and the encoded information about the prediction mode being indicative of a
generation method of a predicted signal of the block; a restoration step of extracting the
residual signal of the block from the compressed picture data to restore a reproduced residual
signal; a prediction mode decoding step of restoring the encoded information about the
prediction mode to generate an optimum prediction mode; a predicted signal generation step
of generating the predicted signal of the block based on the optimum prediction mode; a
picture restoration step of adding the predicted signal to the reproduced residual signal to
restore a pixel signal of the block; and a storage step of storing the restored pixel signal as a
reproduced pixel signal, wherein the prediction mode decoding step comprises:        generating
a candidate prediction mode list by adding, as elements, optimum prediction modes of a

                                                 8
plurality of previously-reproduced blocks neighboring the block, the candidate prediction
mode list containing no duplicate prediction modes as the elements; and        decoding     a   flag
that indicates whether or not the candidate prediction mode list contains an element
corresponding to the optimum prediction mode.
[0015] According to aspects of the present disclosure, when the prediction mode information
of the target block is encoded in the image predictive encoding method by performing intra
frame prediction using more intra-frame prediction modes than in the conventional
technology, since the candidate prediction mode list consisting of a plurality of prediction
modes is prepared, and an identifier of an element coincident with the prediction mode of the
target block from the prepared candidate prediction mode list is encoded; the probability that
the element is coincident with the prediction mode of the target block becomes higher, and
thus the prediction mode information can be encoded by a smaller bit count. In other words,
there is only one "most probable mode" in the conventional technology, whereas a plurality
of "most probable modes" are prepared in the present invention; therefore, aspects of the
present disclosure provides an effect of increasing the probability of occurrence of a "most
probable mode" coincident with the prediction mode of the target block.
[0016] If the prediction mode of the target block is absent in the candidate prediction mode
list, the prediction mode of the target block itself is encoded but, in that case, since a plurality
of prediction modes in the candidate prediction mode list are excluded and new identification
numbers are assigned to the remaining prediction modes, the prediction mode of the target
block can be expressed by a smaller number, allowing encoding with a smaller bit length.
[0017] Namely, aspects of the present disclosure provides an effect of enabling more efficient
encoding of the information about the prediction mode in the case where the intra-frame
prediction is carried out by more intra-frame prediction modes than in the conventional
technology.
BRIEF DESCRIPTION OF THE DRAWINGS
[0018] Fig. 1 is a block diagram showing an image predictive encoding device according to
an aspect of the present disclosure.

                                               9
         Fig. 2 is a schematic diagram showing pixel extrapolation directions corresponding to
intra-frame prediction modes used in the image predictive encoding device according to an
aspect of the present disclosure.
         Fig. 3 is a flowchart showing processing of an intra-frame prediction mode encoder
according to an aspect of the present disclosure.
         Fig. 4 is a schematic diagram showing an example for explaining an encoding process
of an intra-frame prediction mode according to an aspect of the present disclosure.
         Fig. 5 is a flowchart showing a generation process of REM mode number (step 360)
in the processing of the intra-frame prediction mode encoder (Fig. 3) according to an aspect
of the present disclosure.
         Fig. 6 is a schematic diagram for explaining the generation process of REM mode
number in the processing of the intra-frame prediction mode encoder (Fig. 3) according to an
aspect of the present disclosure.
         Fig. 7 is a block diagram showing an image predictive decoding device according to
an aspect of the present disclosure.
         Fig. 8 is a flowchart showing processing of an intra-frame prediction mode decoder
according to an aspect of the present disclosure.
         Fig. 9 is a flowchart showing a generation process of a prediction mode of a target
block (step 860) in the processing of the intra-frame prediction mode decoder (Fig. 8)
according to an aspect of the present disclosure.
         Fig. 10 is a schematic diagram describing process of an intra-frame prediction mode
encoding method using two candidate prediction modes, according to an aspect of the present
disclosure.
         Fig. 11 is a drawing showing a hardware configuration of a computer for executing a
program recorded in a recording medium.

                                               10
        Fig. 12 is a perspective view of a computer for executing a program stored in a
recording medium.
        Fig. 13 is a schematic diagram showing methods of generating a predicted signal of a
target block by the conventional technology.
        Fig. 14 is a schematic diagram in which a plurality of methods for generation of the
predicted signal of the target block by the conventional technology are brought together in a
view.
        Fig. 15 is a block diagram showing modules of an image predictive encoding
program.
        Fig. 16 is a block diagram showing modules of an image predictive decoding
program.
DETAILED DESCRIPTION
[0019] Aspects of the present disclosure will be described below using Figs. I to 12.
[0020] Fig. 1 is a block diagram showing an image predictive encoding device according to
an aspect of the present disclosure. The image predictive encoding device is provided with
input terminal 101, block divider 102, inter-frame predicted signal generation method
determiner 103, inter-frame predicted signal generator 104, intra-frame predicted signal
generation method determiner 105, intra-frame predicted signal generator 106, changeover
switch 109, subtracter 110, transformer 111, quantizer 112, de-quantizer 113, inverse
transformer 114, adder 115, frame memory 116, intra-frame prediction mode encoder 117,
entropy encoder 118, and output terminal 119.
[0021] Below is a description of the operation of the image predictive encoding device
configured as described above. A signal of a video sequence consisting of a plurality of
pictures is fed into the input terminal 101. A picture as an encoding target is divided into a
plurality of regions by the block divider 1 02. In the aspect according to the present
disclosure, each picture is divided into blocks, where each block consists of 8x8 pixels, but

                                                11
each picture may be divided into blocks of any other size or shape. Then a predicted signal is
generated for a region as an encoding target (hereinafter referred to as "target block"). The
predicted signal is generated using two types of prediction methods, the inter-frame
prediction and intra-frame prediction.
[0022] In the inter-frame prediction, a reproduced picture having a different display time than
that of a target picture, and which has been encoded and then restored in the past, is used as a
reference picture, and motion information which provides a predicted signal with the smallest
error from the target block is determined from the reference picture. Depending upon the
situation, it is also possible to adopt a method of subdividing the target block into small
regions and determining the inter-frame prediction method for each subdivided small region.
In this case, the most efficient division method from among a variety of division methods,
and corresponding motion information are determined for the entire target block. In this
aspect, the processing is carried out by the inter-frame predicted signal generation method
determiner 103, the target block is fed via line L102, and the reference picture is fed via
LI 19. With regard to the reference picture, a plurality of pictures that have been encoded and
restored in the past are used as reference pictures. The details are the same as in any one of
the methods of MPEG-2, 4 and H.264, which are the conventional technologies. The motion
information and small region division method determined as described above are fed via line
L 104 to the inter-frame predicted signal generator 104. These pieces of information are also
fed via line L103 to the entropy encoder 118 and are encoded thereby, and the encoded data
is output from the output terminal 119. The inter-frame predicted signal generator 104
acquires reference signals from the frame memory 116 (via line L 119), based on the small
region division method and the motion information corresponding to each small region, and
generates a predicted signal for each small region. The inter-frame predicted signal generated
in this manner is sent via terminal 107 to the next process block.
[0023] In the intra-frame prediction, an intra-frame predicted signal is generated using
previously-reproduced pixel values neighbouring a target block in the same frame. A
generation method of the intra-frame predicted signal is determined by the intra-frame
predicted signal generation method determiner 105. The processing of the intra-frame
predicted signal generation method determiner 105 will be described later. Information
(prediction mode) about the intra-frame prediction method determined in this manner is sent

                                                 12
via line L106 to the intra-frame predicted signal generator 106. The information (prediction
mode) about the intra-frame prediction method is also sent via line L105 to the intra-frame
prediction mode encoder 117. The processing of the intra-frame prediction mode encoder 117
will be described later. The results of the processing are sent to the entropy encoder 118 to be
encoded thereby, and the encoded data is sent from the output terminal 119. The intra-frame
predicted signal generator 106 acquires neighbouring previously-reproduced pixel signals in
the same frame from the frame memory 116 (via line L 116), based on the information about
the prediction method, and generates a predicted signal by a predetermined method. The
intra-frame predicted signal generated in this manner is sent via terminal 108 to the next
process block.
[0024] From the inter-frame and intra-frame predicted signals obtained as described above,
the changeover switch 109 selects the predicted signal with the smallest error and sends it to
the subtracter 110. However, since there is no past picture for the first picture, all target
blocks are at first processed by the intra-frame prediction. In this case, the switch 109 is
always connected to the terminal 108 during processing of the picture. The intra-frame
prediction method and intra-frame prediction mode encoding method described below are
also applicable to encoding and decoding of still pictures.
[0025] The subtracter 110 subtracts the predicted signal (fed via line L109) from the signal of
the target block (fed via line L102) to generate a residual signal. This residual signal is
transformed by a discrete cosine transform by the transformer Ill and coefficients thereof are
quantized by quantizer 112. Finally, the entropy encoder 118 encodes the quantized transform
coefficients and sends the encoded data along with the information about the prediction
method (prediction mode) and other information from the output terminal 119.
[0026] For the intra-frame prediction or the inter-frame prediction of a subsequent target
block, it is necessary to perform inverse processing and restoration of the compressed signal
of the target block. Namely, the de-quantizer 113 performs de-quantization of the quantized
transform coefficients and the inverse-transformer 114 performs an inverse discrete cosine
transform of the transform coefficients, thereby restoring a residual signal. The adder 115
adds the restored residual signal to the predicted signal fed through line L109, to reproduce a
picture signal of the target block, which is stored into the frame memory 116.

                                                13
[0027] The following will describe the intra-frame predicted signal generation method
determiner 105 used in aspects of the present disclosure. Fig. 2 is a schematic diagram
showing pixel extrapolation methods corresponding to intra-frame prediction modes used in
an aspect of the present disclosure. In the present embodiment, intra-frame predicted signals
are generated by a total of sixteen methods. Numbers in Fig. 2 are identification numbers to
identify the respective intra-frame prediction methods and are referred to as prediction mode
information or unit prediction modes. In the respective prediction modes (from number 0 to
number 15), previously-reproduced pixel signals neighbouring a target block are extrapolated
in directions indicated by respective arrows in Fig. 2, to generate the intra-frame predicted
signals. Specific extrapolation methods about the prediction modes 0 to 8 are shown in Fig.
13 and the calculation methods thereof are described in Patent Literature 1. In each of the
prediction modes 9 to 15, similarly, the intra-frame predicted signal is also generated by
linear interpolation from surrounding previously-reproduced pixel signals to duplicate
interpolated values in a direction of a corresponding arrow. The present embodiment employs
the sixteen intra-frame prediction methods, but it should be noted that the encoding and
decoding methods of prediction mode can also be applied to cases using the other numbers of
prediction modes and other generation methods of predicted signal.
[0028] The intra-frame predicted signal generation method determiner 105 generates sixteen
intra-frame predicted signals, based on these sixteen prediction modes, and, for each signal,
calculates a difference thereof from the pixel signal of the target block sent via line L102. It
determines a prediction mode which provides the smallest difference, as an intra-frame
prediction mode of the target block.
[0029] As described above, either the intra-frame prediction or the inter-frame prediction is
selected for the target block (by switch 109) and, when the intra-frame prediction is selected,
the intra-frame prediction mode encoder 117 processes the intra-frame prediction mode of the
target block. In the encoding method of the intra-frame prediction mode, the intra-frame
prediction modes (identification numbers) of previously-encoded blocks are used, and
therefore the intra-frame prediction mode encoder 117 is provided with a storage memory
(not shown), for storage of the intra-frame prediction modes (identification numbers) of
previously-encoded blocks.

                                               14
[0030] Fig. 3 is a flowchart showing the processing of the intra-frame prediction mode
encoder 117 according to an aspect of the present disclosure. Step 310 is first to generate a
list of candidate prediction modes. Elements in this list are prediction modes of a plurality of
previously-reproduced blocks located around the target block. In the present embodiment,
prediction modes possessed by surrounding previously-reproduced blocks 410-450, which are
neighbouring target block 400 shown in Fig. 4 are defined as elements in the candidate
prediction mode list. Fig. 6(A) is an example of the candidate prediction mode list and
numerical values in respective boxes represent identification numbers of the prediction
modes corresponding to the respective surrounding blocks (410 to 450). In this example, the
surrounding blocks (410 to 450) have respective prediction modes that are different from
each other, but if the same prediction mode appears in multiple of the elements, it can be
handled as one element. For example, if blocks 410 and 420 have the same prediction mode,
the number of elements in the candidate prediction mode list is not 5 but 4. Namely, the
number of elements in the candidate prediction mode list can be at most 5 and at least 1.
Particularly, if the surrounding blocks neighbouring the target block are "inter-frame"
predicted ones, there is no intra-frame prediction mode. In the present embodiment, mode 2
(DC prediction) is the only element in the candidate prediction mode list. Fig. 6(A) shows an
arrangement of the values of the elements in the candidate prediction mode list in increasing
order, but the candidate prediction mode list may be configured in decreasing order. In order
to construct the candidate prediction mode list for encoding of the prediction mode of the
subsequent block, the intra-frame prediction mode encoder 117 stores the prediction mode of
the current target block into the aforementioned storage memory.
[0031] Next, step 320 is to compare the intra-frame prediction mode of the target block with
each of the elements in the candidate prediction mode list to check whether there is a
coincident element.
[0032] When the intra-frame prediction mode of the target block is found in the candidate
prediction mode list, the processing proceeds to step 330. In this step, "1" is encoded. This
"1" indicates that the intra-frame prediction mode of the target block is included in the
candidate prediction mode list. The next step is to encode an identifier (index) to the element
in the candidate prediction mode list coincident with the prediction mode of the target block
(step 340). In the present embodiment, 0, 1, 2, 3, and 4 are assigned to respective indices of

                                                 15
the boxes from the left in Fig. 6(A) and, in the case where the prediction mode of the target
block is "8", 2 is encoded as an index. These indices are encoded by base-1 codes (unary
codes). Namely, codes of (0, 01, 001, 0001, 00001) are assigned to (0, 1, 2, 3, 4),
respectively. The last bit in the code of the maximum index may be discarded. Namely, the
code "00001" for "4" can be "0000". Another applicable method is to encode the indices by
fixed-length codes. In that case, the code length of fixed codes may be varied depending upon
the size of the candidate prediction mode list (the number of elements). For example, in the
case where the size of the candidate prediction mode list is 4, the indices are encoded by two
bits, and in the case where the size is 2, the indices are encoded by one bit. Efficient coding is
coding of indices based on the size of the candidate prediction mode list (the number of
elements).
[0033] When it is determined in step 320 that the intra-frame prediction mode of the target
block is absent in the candidate prediction mode list, the processing proceeds to step 350. In
this step, "0" is encoded. This "0" indicates that the intra-frame prediction mode of the target
block is not included in the candidate prediction mode list. In this case, it is necessary to
encode the prediction mode of the target block. In the present embodiment the prediction
mode of the target block is encoded as "REM mode". Since it is known that the prediction
mode of the target block is absent in the candidate prediction mode list, an identification
number to be encoded herein is not the original identification number of the prediction mode,
but is instead one of identification numbers reassigned to the remaining prediction modes
after exclusion of the elements in the candidate prediction mode list. This will be described
using Fig. 6. Fig. 6(A) shows the elements in the candidate prediction mode list, which does
not include an element corresponding to the prediction mode of the target block. Therefore,
the remaining prediction modes after exclusion of these prediction modes are shown in Fig. 6
(B). The result of reassignment of 0, 1, 2, 3, 4 ... to the respective boxes from the left in this
Fig. 6 (B) is shown in Fig. 6 (C). For example, in the case where the prediction mode of the
target block is "9", "9" is not encoded, but "6" is encoded as REM mode because "6" in Fig. 6
(C) is reassigned to "9" in Fig. 6 (B). Namely, the same prediction mode of the target block
can be encoded by a smaller numerical value, or a smaller bit count. The reassignment of the
identification number of the prediction mode in this manner is carried out in step 360 in Fig.
3.

                                               16
[0034] Another execution method of step 360 is shown in Fig. 5. In step 510 the
identification number of the intra-frame prediction mode for the determined target block is
used as the REM mode. In step 520, the largest element among elements in the candidate
prediction list which are not yet used in comparison is defined as X. Step 530 is to compare
the REM mode with X. When the REM mode is larger than X, step 540 is carried out to
subtract 1 from the value of the REM mode. Step 550 is to check whether there is a not-yet
compared element in the candidate prediction list; if yes, the processing returns to step 520; if
no, the processing is terminated.
[0035] As a modification of the processing of Fig. 5, step 520 is configured to define the
smallest element as X and step 530 is changed to "intra-frame prediction mode of target block
< X?", with the same result. In this case, when the answer of "intra-frame prediction mode of
target block < X?" is no, the processing is immediately terminated.
[0036] The value of the REM mode generated in this manner is encoded in step 370. In the
present embodiment the value of the REM mode is encoded by a fixed-length code, but it is
also possible to encode the value of the REM mode by a variable-length code. The code
length of these values of the REM mode may be based on the number of elements in a
complementary set of the candidate prediction mode list.
[0037] The present embodiment describes the case where the size S of the candidate
prediction mode list (the number of elements) was at most 5, but S may be an arbitrary
number. It is, however, noted that the encoding device and decoding device need to generate
this list by the same method. In the case where the candidate prediction mode list is generated
from the prediction modes of the upper block (420) and the left block (440) with respect to
the target block 400 in Fig. 4, S=2. In this case, there are two types of candidate prediction
mode lists. When the two surrounding blocks both are intra-frame predicted ones, the list
contains two elements; when only one of the surrounding blocks is an intra-frame predicted
one, the list contains one element. The case of one list element is shown in Fig. 10(A) and the
case of two list elements is shown in Fig. 10(B).
[0038] Node 80 in Fig. 10 (A) indicates whether the candidate prediction mode list contains
an element coincident with the prediction mode of the target block. When there is no
coincident element, the REM mode is encoded (82). When there is a coincident element (81),

                                               17
there is no need for encoding of an index because the list contains only one element. In Fig.
10 (B), similarly, the REM mode is encoded when there is no coincident element in the list
(94). When there is a coincident element (91), there are two elements and therefore an index
to indicate which is coincident between the first and second candidates is encoded.
[0039] Next, an image predictive decoding method will be described. Fig. 7 is a block
diagram showing an image predictive decoding device according to an aspect of the present
disclosure. The image predictive decoding device is provided with input terminal 700, data
analyzer 701, de-quantizer 702, inverse-transformer 703, adder 704, predicted signal
generator 705, frame memory 706, intra-frame prediction mode restoration unit 707, and
output terminal 708.
[0040] Describe below is the operation of the Image predictive decoding device configured as
described above. Compressed data resulting from the compression encoding by the foregoing
method is input through the input terminal 700. This compressed data contains the residual
signal resulting from the prediction and encoding of the target block obtained by division of a
picture into a plurality of blocks, and the mode information about the prediction method. The
data analyzer 701 analyses the compressed data to extract the residual signal of the target
block, the information about the prediction method, the quantization parameter, and the
motion information in the case of the inter-frame prediction, or encoded information about
the aforementioned intra-frame prediction mode for an intra-frame predicted block. The
residual signal and quantization parameter of the target block are sent (via line L701) to the
de-quantizer 702, to be subjected to de-quantization. The result is transformed by an inverse
discrete cosine transform by the inverse-transformer 703.
[0041] When the data analyzer 701 determines that the target block is an inter-frame
predicted one, the motion information is fed via line L709 to the predicted signal generator
705. The predicted signal generator 705 acquires a predicted signal from previously
reproduced pictures in the frame memory 706, based on the motion information. On the other
hand, when the data analyzer 701 determines that the target block is an intra-frame predicted
one, the mode information about the intra-frame prediction is sent via line L710 to the intra
frame prediction mode restoration unit 707 and the intra-frame prediction mode is restored
and sent to the predicted signal generator 705. The predicted signal generator 705 acquires

                                                  18
previously-reproduced pixel signals in the same frame from the frame memory 706, based on
the intra-frame prediction mode, to generate a predicted signal. Specific generation methods
of intra-frame predicted signals were described above with reference to Fig. 2. The details of
the intra-frame prediction mode restoration unit 707 will be described later.
[0042] The predicted signal generated by the predicted signal generator 705 is sent via line
L705 to the adder 704, and the adder 704 adds the restored residual signal to the predicted
signal to reproduce a pixel signal of the target block. The reproduced picture is output via line
L704 and, at the same time, is stored via line 708 into the frame memory706.
[0043] Next, the processing of the intra-frame prediction mode restoration unit 707 according
to the present embodiment will be described. The output from the intra-frame prediction
mode restoration unit 707 is an identification number of the intra-frame prediction mode of
the target block and is output via line L707 and, at the same time, is stored into a memory
(not shown) in the intra-frame prediction mode restoration unit 707 because it is necessary for
restoration of the prediction mode of the subsequent block.
[0044] Fig. 8 is a flowchart showing the processing of the intra-frame prediction mode
decoder. Step 810 is first to generate a list of candidate prediction modes. Elements in this list
are prediction modes of a plurality of previously-reproduced blocks (410 to 450) located
around the target block 400 shown in Fig. 4. The specific description is the same as that of
step 301 in Fig. 3. The encoding device and decoding device need to generate this candidate
prediction mode list by the same method.
 [0045] Next step 820 is to decode one bit. When this one bit is transmitted via line L 710
from the data analyzer 701, actual decoding processing is carried out by the data analyzer
701. This one bit indicates whether the intra-frame prediction mode of the target block is
included in the candidate prediction mode list. Then, step 830 is to perform a comparison to
determine whether this one bit is "1". If the one bit is "1", the processing proceeds to step
840. Otherwise, the processing proceeds to step 850.
[0046] Since the intra-frame prediction mode of the target block is included in the candidate
prediction mode list, step 840 is configured to further decode the identifier (index) indicating
which element in the candidate prediction mode list coincides with the intra-frame prediction

                                                19
mode of the target block. The element in the candidate prediction mode list indicated by the
index is the prediction mode of the target block. For example, when the index is "2", the
mode identification number "8" in the third box from the left in Fig. 6(A) is the prediction
mode of the target block. In the present embodiment, this index is decoded as a base-1 code
(unary code). As another method, where the encoding method used is one in which the bit
length of the index is determined based on the size of the candidate prediction mode list (the
number of elements), the size of the candidate prediction mode list (the number of elements)
needs to be sent to the data analyzer 701 (line L71 1).
[0047] Since the intra-frame prediction mode of the target block is not included in the
candidate prediction mode list, step 850 is configured to decode the value of the REM mode.
In the present embodiment it is restored as a numerical value of a fixed-length code. The
value of the REM mode is different from the actual identification number of the prediction
mode (as described with reference to Fig. 5) and therefore, step 860 is to remap the value to
the actual identification number to obtain the intra-frame prediction mode of the target block.
[0048] Fig. 9 shows an execution method for returning the REM mode to the actual
identification number of the prediction mode. Step 910 is to substitute the decoded value of
REM mode into a PRED mode. This PRED mode is a variable for the intra-frame prediction
mode of the target block.
[0049] Step 920 is to define an element as X, which is the smallest number among elements
not used in comparison yet in the candidate prediction mode list. Step 930 is to compare the
PRED mode with X. When the PRED mode is larger than or equal to X, step 940 is carried
out to add 1 to the value of the PRED mode. Step 950 is to check whether there is a not-yet
compared element in the candidate prediction list; if yes, the processing returns to step 920; if
no, the processing is terminated. The PRED mode after completion of this processing
provides the actual identification number of the prediction mode of the target block.
[0050] Instead of the processing of Fig. 9, it is also possible to adopt a method of creating the
complementary set of Fig. 6 (A) as shown in Fig. 6 (B) and defining the (N+ 1)th (N         = the
value of REM mode) element from the left, as the prediction mode of the target block.

                                                20
[0051] The intra-frame prediction mode restoration unit 707 is depicted as an independent
function block in Fig. 7, but it may be incorporated into the data analyzer 701. In this case,
the line L710 is connected directly to the predicted signal generator 705 and the intra-frame
prediction mode is sent via the line L7 10 to the predicted signal generator 705.
[0052] The above embodiment describes the encoding of the prediction mode information
about the intra-frame prediction, but the same encoding and decoding methods can also be
applied to the inter-frame prediction case. The information about the prediction mode in the
inter-frame prediction case may also be encoded and decoded using the candidate prediction
mode list. In this case, the candidate prediction mode list contains elements of information of
inter-frame prediction modes of surrounding previously-reproduced blocks. Furthermore, the
motion information in the inter-frame prediction case can also be similarly encoded and
decoded. In this case, the candidate prediction mode list contains elements of motion
information of surrounding previously-reproduced blocks.
[0053] An image predictive encoding program for letting a computer execute the image
predictive encoding method is provided as stored in a recording medium. Furthermore, an
image predictive decoding program for letting a computer execute the image predictive
decoding method is also provided as stored in a recording medium. Examples of recording
media include recording media such as flexible disks, CD-ROMs, DVDs, or ROMs, or
semiconductor memories, or the like.
[0054] Fig. 15 is a block diagram showing modules of the image predictive encoding
program capable of executing the image predictive encoding method. The image predictive
encoding program P100 is provided with region division module P101, predicted signal
generation module P102, residual signal generation module P103, signal encoding module
P104, prediction mode encoding module P105, and storage module P106. Functions
implemented upon execution of the above respective modules by a computer are the same as
the functions of the above-described image predictive encoding device. Fig. 16 is a block
diagram showing modules of the image predictive decoding program capable of executing the
image predictive decoding method. The image predictive decoding program P200 is provided
with input module P20 1, restoration module P202, prediction mode decoding module P203,
predicted signal generation module P204, picture restoration module P205, and storage

                                               21
module P206. Functions implemented upon execution of the above respective modules by a
computer are the same as the functions of the above-described image predictive decoding
device. The image predictive encoding program P100 and the image predictive decoding
program P200 configured as described above are stored in a recording medium and executed
by a computer described below.
[0055] Fig. 11 is a drawing showing a hardware configuration of a computer for executing a
program recorded in a recording medium and Fig. 12 a perspective view of a computer for
executing a program stored in a recording medium. The computer embraces a DVD player, a
set-top box, a cell phone, etc. provided with a CPU and configured to perform processing and
control based on software.
[0056] As shown in Fig. 11, computer 30 is provided with a reading device 12 such as a
flexible disk drive unit, a CD-ROM drive unit, or a DVD drive unit, a working memory
(RAM) 14 in which an operating system is resident, a memory 16 storing programs stored in
the recording medium 10, a monitor device 18 such as a display, a mouse 20 and a keyboard
22 as input devices, a communication device 24 for transmission and reception of data and
others, and a CPU 26 to control execution of the programs. When the recording medium 10
storing the program P100 is put into the reading device 12, the computer 30 becomes
accessible to the image predictive encoding program P100 stored in the recording medium
10, through the reading device 12, and becomes able to operate as the image predictive
encoding device, based on the image predictive encoding program P100. When the recording
medium 10 storing the image predictive decoding program P200 is put into the reading
device 12, the computer 30 becomes accessible to the image predictive decoding program
P200 stored in the recording medium 10, through the reading device 12, and becomes able to
operate as the image predictive decoding device, based on the image predictive decoding
program P200.
List of Reference Signs
[0057] 101: input terminal; 102: block divider; 103: inter-frame predicted signal generation
method determiner; 104: inter-frame predicted signal generator; 105: intra-frame predicted
signal generation method determiner; 106: intra-frame predicted signal generator; 109:
changeover switch; 110: subtracter; 111: transformer; 112: quantizer; 113: de-quantizer; 114:

                                              22
inverse-transformer; 115: adder; 116: frame 5 memory; 117: intra-frame prediction mode
encoder; 118: entropy encoder; 119: output terminal; 700: input terminal; 701: data analyzer;
702: de-quantizer; 703: inverse-transformer; 704: adder; 705: predicted signal generator; 706:
frame memory; 707: intra-frame prediction mode restoration unit; 708: output terminal.

                                                  23
CLAIMS
1.    An image predictive decoding device comprising:
       input means for accepting input of compressed picture data and encoded information,
the compressed picture data containing a residual signal generated by dividing a picture into a
plurality of blocks and performing predictive encoding of a target block, and the encoded
information about a prediction mode indicative of a generation method of a predicted signal
of the target block;
       restoration means for extracting the residual signal of the target block from the
compressed picture data to restore a reproduced residual signal;
      prediction mode decoding means for restoring the encoded information about the
prediction mode to generate the prediction mode;
      predicted signal generation means for generating the predicted signal of the target block
based on the prediction mode;
      picture restoration means for adding the predicted signal to the reproduced residual
signal to restore a pixel signal of the target block; and
       storage means for storing the restored pixel signal as a reproduced pixel signal,
       wherein the prediction mode decoding means generates a candidate prediction mode list
containing elements of prediction modes of a plurality of previously-reproduced blocks
neighboring the target block, and decodes a flag that indicates whether the candidate
prediction mode list contains an element corresponding to the prediction mode;
       when the flag indicates that the corresponding element is present in the candidate
prediction mode list, the prediction mode decoding means further decodes an index indexing
the candidate prediction mode list to obtain an element indicated by the index as the
prediction mode;
       when the flag indicates that no corresponding element is present in the candidate
prediction mode list, the prediction mode decoding means further decodes a value of a REM
(remaining) mode to restore the value of the REM mode as a numerical value of a fixed
length code, and remaps the restored value of the REM mode to an identification number of
the prediction mode to obtain the intra-frame prediction mode of the target block;
       wherein, when the prediction mode decoding means remaps the restored value of the
REM mode, the prediction mode decoding means
                 sets a variable for the intra-frame prediction mode of the target block equal to
       a decoded value of the REM mode, and

                                                  24
                 repeatedly performs, for every element in the candidate prediction list, a step
       of comparing the variable with a smallest element among elements on the candidate
      prediction list which are not yet used in comparison, and a step of adding 1 to a value of
       the variable when the variable is larger than or equal to the element, to obtain the final
       value of the variable as the intra-frame prediction mode of the target block.
2.    An image predictive decoding method comprising:
       an input step of accepting input of compressed picture data containing a residual signal
and encoded information, the residual signal generated by dividing a picture into a plurality
of blocks and performing predictive encoding of a target block, and the encoded information
about a prediction mode indicative of a generation method of a predicted signal of the target
block;
       a restoration step of extracting the residual signal of the target block from the
compressed picture data to restore a reproduced residual signal;
       a prediction mode decoding step of restoring the encoded information about the
prediction mode to generate the prediction mode;
       a predicted signal generation step of generating the predicted signal of the target block
based on the prediction mode;
       a picture restoration step of adding the predicted signal to the reproduced residual
signal to restore a pixel signal of the target block; and
       a storage step of storing the restored pixel signal as a reproduced pixel signal,
       wherein the prediction mode decoding step comprises:
       generating a candidate prediction mode list containing elements of prediction modes of
a plurality of previously-reproduced blocks neighboring the target block;
       decoding a flag that indicates whether the candidate prediction mode list contains an
element corresponding to the prediction mode;
       when the flag indicates that the corresponding element is present in the candidate
prediction mode list, further decoding an index indexing the candidate prediction mode list to
obtain an element indicated by the index as the prediction mode;
       when the flag indicates that no corresponding element is present in the candidate
prediction mode list, further decoding a value of a REM (remaining) mode to restore the
value of the REM mode as a numerical value of a fixed-length code, and remapping the
restored value of the REM mode to an identification number of the prediction mode to obtain

                                                  25
the intra-frame prediction mode of the target block; and
       wherein the remapping of the restored value of the REM mode comprises:
                 setting a variable for the intra-frame prediction mode of the target block equal
       to a decoded value of the REM mode, and
                 repeatedly performing, for every element in the candidate prediction list, a
       step of comparing the variable with a smallest element among elements on the
       candidate prediction list which are not yet used in comparison, and a step of adding 1 to
       a value of the variable when the variable is larger than or equal to the element, to obtain
       the final value of the variable as the intra-frame prediction mode of the target block.
                                        NTT DOCOMO, INC.
                         PATENT ATTORNEYS FOR THE APPLICANT
                                     SPRUSON & FERGUSON

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
