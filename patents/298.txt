1002043087
                                            ABSTRACT
            Systems and processes for application integration with a digital assistant are provided.
In accordance with one example, a method includes receiving an audio input including a natural
language user input and identifying an intent object of a set of intent objects. The intent object
may be derived from the natural-language user input. The method further includes identifying a
software application associated with the intent object of the set of intent objects, providing the
intent object to the software application to cause the software application to perform a task
associated with the intent object, receiving a result response indicating whether the task was
successfully performed, and providing an output indicating whether the task was performed.

                                        1 of 24
                                                5I    ccI      0 co
           D).
                                         C1
       CD                                                            0
ccoc
          co             0                                           (
                                         0.)
                     060
               -n              0.
                               u
                               a)                  0.
               a)) 0
   0.)                         0
                                                                    i5
                                                      CN
                     oa)  0I
                                                                 I0
                       _  _ __    __ __                   _ ~<

1002043087
              APPLICATION INTEGRATION WITH A DIGITAL ASSISTANT
                                                 FIELD
[0001]       The present disclosure relates generally to interfacing with applications, and more
specifically to techniques for application integration with a digital assistant.
                                           BACKGROUND
[0002]       Digital assistants can help a user perform various functions on a user device. For
example, digital assistants can set alarms, provide weather updates, and perform searches both
locally and on the Internet, all while providing a natural-language interface to a user. Existing
digital assistants, however, cannot effectively integrate with applications, such as those locally
stored on the user device, and in particular, third-party applications. Accordingly, existing
digital assistants cannot provide a natural-language interface with such applications.
[0003]       Reference to any prior art or background information in this specification is not an
acknowledgment or suggestion that this prior art or background information forms part of the
common general knowledge in any jurisdiction or that this prior art could reasonably be expected
to be understood, regarded as relevant, and/or combined with other prior art by a skilled person
in the art.
                                         BRIEF SUMMARY
[0004]       In one aspect, the present invention provides a method, comprising: at an electronic
device having one or more processors and a touch-sensitive display: identifying an intent object
of a set of intent objects, wherein the intent object is derived from a natural-language user input;
identifying a software application associated with the intent object of the set of intent objects;
receiving, from a second electronic device, a task flow associated with the software application;
providing the intent object to the software application to cause the software application to
perform a task associated with the intent object; receiving a request from the software
application; determining a query based on the request, wherein the query is determined in
accordance with the task flow; providing the query using the touch-sensitive display; after
                                                    1

1002043087
providing the query, receiving a second user input indicative of a query response; and providing
the query response to the software application.
[0005]       Further example methods are disclosed herein. An example method includes, at an
electronic device having one or more processors and a touch-sensitive display, receiving an
audio input including a natural-language user input, identifying an intent object of a set of intent
objects, wherein the intent object is derived from the natural-language user input, identifying a
software application associated with the intent object of the set of intent objects, providing the
intent object to the software application to cause the software application to perform a task
associated with the intent object, receiving, from the software application, a result response
indicating whether the task was successfully performed, and providing an output indicating
whether the task was performed.
[0006]       An example method includes, at one or more electronic devices, each having one or
more processors, receiving an audio input including a natural-language user input, obtaining a
text string from the natural-language user input; determining an intent object of a set of intent
objects based on the text string, determining a software application associated with the intent
object of the set of intent objects, providing the intent object to the software application to cause
the software application to perform a task associated with the intent object, receiving, from the
software application, a result response indicating whether the task was successfully performed,
and providing an output indicating whether the task was performed.
[0007]       An example method includes, at an electronic device having one or more processors,
receiving a natural-language user input, identifying a software application associated with the
intent object of the set of intent objects, receiving, from a second electronic device, a task flow
associated with the software application, providing the intent object to the software application to
cause the software application to perform a task associated with the intent object, receiving a
request from the software application, determining a query based on the request, wherein the
query is determined in accordance with the task flow, providing the query using the touch
sensitive display, after providing the query, receiving a second user input indicative of a query
response, and providing the query response to the software application.
                                                    2

1002043087
[00081      An example method includes, at one or more electronic devices, each having one or
more processors, determining an intent object of a set of intent objects, identifying a software
application associated with the intent object of the set of intent objects, determining a task flow
associated with the software application, providing the intent object to the software application to
cause the software application to perform a task associated with the intent object, receiving a
request from the software application, determining a query based on the request, wherein the
query is determined in accordance with the task flow, providing the query using the touch
sensitive display, after providing the query, receiving a second user input indicative of a query
response, and providing the query response to the software application.
[0009]      Example non-transitory computer-readable media are disclosed herein. An example
non-transitory computer-readable storage medium stores one or more programs. The one or
more programs comprise instructions, which when executed by one or more processors of an
electronic device, cause the electronic device to receive an audio input including a natural
language user input, identify an intent object of a set of intent objects, wherein the intent object
is derived from the natural-language user input, identify a software application associated with
the intent object of the set of intent objects, provide the intent object to the software application
to cause the software application to perform a task associated with the intent object, receive,
from the software application, a result response indicating whether the task was successfully
performed, and provide an output indicating whether the task was performed.
[0010]      An example non-transitory computer-readable storage medium stores one or more
programs. The one or more programs comprise instructions, which when executed by one or
more processors of an electronic device, cause the electronic device to receive an audio input
including a natural-language user input, obtain a text string from the natural-language user input;
determine an intent object of a set of intent objects based on the text string, determine a software
application associated with the intent object of the set of intent objects, provide the intent object
to the software application to cause the software application to perform a task associated with the
intent object, receive, from the software application, a result response indicating whether the task
was successfully performed, and provide an output indicating whether the task was performed.
                                                    3

1002043087
[00111      Example non-transitory computer-readable storage media store one or more
programs. The one or more programs comprise instructions, which when executed by one or
more processors of one or more electronic devices, cause the one or more electronic devices to
receive a natural-language user input, identify a software application associated with the intent
object of the set of intent objects, receive, from a second electronic device, a task flow associated
with the software application, provide the intent object to the software application to cause the
software application to perform a task associated with the intent object, receive a request from
the software application, determine a query based on the request, wherein the query is
determined in accordance with the task flow, provide the query using the touch-sensitive display,
after providing the query, receive a second user input indicative of a query response, and provide
the query response to the software application.
[0012]      Example non-transitory computer-readable storage media store one or more
programs. The one or more programs comprise instructions, which when executed by one or
more processors of one or more electronic devices, cause the one or more electronic devices to
determine an intent object of a set of intent objects, identify a software application associated
with the intent object of the set of intent objects, determine a task flow associated with the
software application, provide the intent object to the software application to cause the software
application to perform a task associated with the intent object, receive a request from the
software application, determine a query based on the request, wherein the query is determined in
accordance with the task flow, provide the query using the touch-sensitive display, after
providing the query, receive a second user input indicative of a query response, and provide the
query response to the software application.
[0013]      Example electronic devices and systems are disclosed herein. An example electronic
device comprises one or more processors; a memory; and one or more programs, where the one
or more programs are stored in the memory and configured to be executed by the one or more
processors, the one or more programs including instructions for receiving an audio input
including a natural-language user input, identifying an intent object of a set of intent objects,
wherein the intent object is derived from the natural-language user input, identifying a software
application associated with the intent object of the set of intent objects, providing the intent
object to the software application to cause the software application to perform a task associated
                                                    4

1002043087
with the intent object, receiving, from the software application, a result response indicating
whether the task was successfully performed, and providing an output indicating whether the
task was performed.
[0014]       An example system includes one or more processors of one or more electronic
devices; one or more memories of the one or more electronic devices; and one or more programs,
where the one or more programs are stored in the one or more memories and configured to be
executed by the one or more processors, the one or more programs including instructions for
receiving an audio input including a natural-language user input, obtaining a text string from the
natural-language user input; determining an intent object of a set of intent objects based on the
text string, determining a software application associated with the intent object of the set of
intent objects, providing the intent object to the software application to cause the software
application to perform a task associated with the intent object, receiving, from the software
application, a result response indicating whether the task was successfully performed, and
providing an output indicating whether the task was performed.
[0015]       An example electronic device comprises one or more processors; a memory; and one
or more programs, where the one or more programs are stored in the memory and configured to
be executed by the one or more processors, the one or more programs including instructions for
receiving a natural-language user input, identifying a software application associated with the
intent object of the set of intent objects, receiving, from a second electronic device, a task flow
associated with the software application, providing the intent object to the software application to
cause the software application to perform a task associated with the intent object, receiving a
request from the software application, determining a query based on the request, wherein the
query is determined in accordance with the task flow, providing the query using the touch
sensitive display, after providing the query, receiving a second user input indicative of a query
response, and providing the query response to the software application.
[0016]       An example system includes one or more processors of one or more electronic
devices; one or more memories of the one or more electronic devices; and one or more programs,
where the one or more programs are stored in the one or more memories and configured to be
executed by the one or more processors, the one or more programs including instructions for
                                                    5

1002043087
determining an intent object of a set of intent objects, identifying a software application
associated with the intent object of the set of intent objects, determining a task flow associated
with the software application, providing the intent object to the software application to cause the
software application to perform a task associated with the intent object, receiving a request from
the software application, determining a query based on the request, wherein the query is
determined in accordance with the task flow, providing the query using the touch-sensitive
display, after providing the query, receiving a second user input indicative of a query response,
and providing the query response to the software application.
[0017]      An example electronic device comprises means for receiving an audio input including
a natural-language user input, means for identifying an intent object of a set of intent objects,
wherein the intent object is derived from the natural-language user input, means for identifying a
software application associated with the intent object of the set of intent objects, means for
providing the intent object to the software application to cause the software application to
perform a task associated with the intent object, means for receiving, from the software
application, a result response indicating whether the task was successfully performed, and means
for providing an output indicating whether the task was performed.
[00181      An example system comprises means for receiving an audio input including a natural
language user input, means for obtaining a text string from the natural-language user input;
means for determining an intent object of a set of intent objects based on the text string, means
for determining a software application associated with the intent object of the set of intent
objects, means for providing the intent object to the software application to cause the software
application to perform a task associated with the intent object, means for receiving, from the
software application, a result response indicating whether the task was successfully performed,
and means for providing an output indicating whether the task was performed.
[0019]      An example electronic device comprises means for receiving a natural-language user
input, means for identifying a software application associated with the intent object of the set of
intent objects, means for receiving, from a second electronic device, a task flow associated with
the software application, means for providing the intent object to the software application to
cause the software application to perform a task associated with the intent object, means for
                                                   6

1002043087
receiving a request from the software application, means for determining a query based on the
request, wherein the query is determined in accordance with the task flow, means for providing
the query using the touch-sensitive display, means for, after providing the query, receiving a
second user input indicative of a query response, and means for providing the query response to
the software application.
[0020]       An example system comprises means for determining an intent object of a set of
intent objects, means for identifying a software application associated with the intent object of
the set of intent objects, means for determining a task flow associated with the software
application, means for providing the intent object to the software application to cause the
software application to perform a task associated with the intent object, means for receiving a
request from the software application, means for determining a query based on the request,
wherein the query is determined in accordance with the task flow, means for providing the query
using the touch-sensitive display, means for, after providing the query, receiving a second user
input indicative of a query response, and means for providing the query response to the software
application.
                            BRIEF DESCRIPTION OF THE FIGURES
[0021]       For a better understanding of the various described embodiments, reference should be
made to the Detailed Description below, in conjunction with the following drawings in which
like reference numerals refer to corresponding parts throughout the figures.
[0022]       FIG. 1 is a block diagram illustrating a system and environment for implementing a
digital assistant according to various examples.
[0023]       FIG. 2A is a block diagram illustrating a portable multifunction device implementing
the client-side portion of a digital assistant in accordance with some embodiments.
[0024]       FIG. 2B is a block diagram illustrating exemplary components for event handling
according to various examples.
[0025]       FIG. 3 illustrates a portable multifunction device implementing the client-side portion
of a digital assistant according to various examples.
                                                    7

1002043087
[0026]      FIG. 4 is a block diagram of an exemplary multifunction device with a display and a
touch-sensitive surface according to various examples.
[0027]      FIG. 5A illustrates an exemplary user interface for a menu of applications on a
portable multifunction device according to various examples.
[0028]      FIG. 5B illustrates an exemplary user interface for a multifunction device with a
touch-sensitive surface that is separate from the display according to various examples.
[0029]      FIG. 6A illustrates a personal electronic device according to various examples.
[0030]      FIG. 6B is a block diagram illustrating a personal electronic device according to
various examples.
[0031]      FIG. 7A is a block diagram illustrating a digital assistant system or a server portion
thereof according to various examples.
[0032]      FIG. 7B illustrates the functions of the digital assistant shown in FIG. 7A according
to various examples.
[0033]      FIG. 7C illustrates a portion of an ontology according to various examples.
[0034]      FIG. 8 illustrates a flow diagram of a process for operating a digital assistant in
accordance with some embodiments.
[0035]      FIG. 9 illustrates a flow diagram of a process for operating a digital assistant in
accordance with some embodiments.
[0036]      FIGS. 10A-C illustrate exemplary user interfaces of an electronic device in
accordance with some embodiments.
[0037]      FIGS. 1OD-E illustrate exemplary data flows of a digital assistant system in
accordance with some embodiments.
[0038]      FIG. 11 illustrates a flow diagram of a process for operating a digital assistant in
accordance with some embodiments.
                                                   8

1002043087
[0039]      FIG. 12 illustrates a flow diagram of a process for operating a digital assistant in
accordance with some embodiments.
[0040]      FIGS. 13A-B illustrate exemplary user interfaces of an electronic device in
accordance with some embodiments.
[0041]      FIGS. 14-17 illustrate functional block diagram of electronic devices in accordance
with some embodiments.
                                    DETAILED DESCRIPTION
[0042]      In the following description of the disclosure and embodiments, reference is made to
the accompanying drawings in which it is shown by way of illustration of specific embodiments
that can be practiced. It is to be understood that other embodiments and examples can be
practiced and changes can be made without departing from the scope of the disclosure.
[0043]      Although the following description uses terms "first," "second," etc. to describe
various elements, these elements should not be limited by the terms. These terms are only used
to distinguish one element from another. For example, a first input could be termed a second
input, and, similarly, a second input could be termed a first input, without departing from the
scope of the various described examples. The first input and the second input can both be
outputs and, in some cases, can be separate and different inputs.
[0044]      The terminology used in the description of the various described examples herein is
for the purpose of describing particular examples only and is not intended to be limiting. As
used in the description of the various described examples and the appended claims, the singular
forms a,     an," and "the" are intended to include the plural forms as well, unless the context
clearly indicates otherwise. It will also be understood that the term "and/or" as used herein
refers to and encompasses any and all possible combinations of one or more of the associated
listed items. It will be further understood that the terms "includes," "including," "comprises,"
and/or "comprising," when used in this specification, specify the presence of stated features,
integers, steps, operations, elements, and/or components, but do not preclude the presence or
addition of one or more other features, integers, steps, operations, elements, components, and/or
groups thereof.
                                                   9

1002043087
[0045]       The term "if' may be construed to mean "when" or "upon" or "in response to
determining" or "in response to detecting," depending on the context. Similarly, the phrase "if it
is determined" or "if [a stated condition or event] is detected" may be construed to mean "upon
determining" or "in response to determining" or "upon detecting [the stated condition or event]"
or "in response to detecting [the stated condition or event]," depending on the context.
1.           System and Environment
[0046]       FIG. 1 illustrates a block diagram of system 100 according to various examples. In
some examples, system 100 can implement a digital assistant. The terms "digital assistant,"
"virtual assistant," "intelligent automated assistant," or "automatic digital assistant" can refer to
any information processing system that interprets natural language input in spoken and/or textual
form to infer user intent, and performs actions (e.g., tasks) based on the inferred user intent. For
example, to act on an inferred user intent, the system can perform one or more of the following:
identifying a task flow with steps and parameters designed to accomplish the inferred user intent,
inputting specific requirements from the inferred user intent into the task flow; executing the task
flow by invoking programs, methods, services, APIs, or the like; and generating output responses
to the user in an audible (e.g., speech) and/or visual form.
[0047]       Specifically, a digital assistant can be capable of accepting a user request at least
partially in the form of a natural language command, request, statement, narrative, and/or
inquiry. Typically, the user request can seek either an informational answer or performance of a
task by the digital assistant. A satisfactory response to the user request can be a provision of the
requested informational answer, a performance of the requested task, or a combination of the
two. For example, a user can ask the digital assistant a question, such as "Where am I right
now?" Based on the user's current location, the digital assistant can answer, "You are in Central
Park near the west gate." The user can also request the performance of a task, for example,
"Please invite my friends to my girlfriend's birthday party next week." In response, the digital
assistant can acknowledge the request by saying "Yes, right away," and then send a suitable
calendar invite on behalf of the user to each of the user's friends listed in the user's electronic
address book. During performance of a requested task, the digital assistant can sometimes
interact with the user in a continuous dialogue involving multiple exchanges of information over
                                                    10

1002043087
an extended period of time. There are numerous other ways of interacting with a digital assistant
to request information or performance of various tasks. In addition to providing verbal responses
and taking programmed actions, the digital assistant can also provide responses in other visual or
audio forms, e.g., as text, alerts, music, videos, animations, etc.
[0048]       As shown in FIG. 1, in some examples, a digital assistant can be implemented
according to a client-server model. The digital assistant can include client-side portion 102
(hereafter "DA client 102") executed on user device 104 and server-side portion 106 (hereafter
"DA server 106") executed on server system 108. DA client 102 can communicate with DA
server 106 through one or more networks 110. DA client 102 can provide client-side
functionalities such as user-facing input and output processing and communication with DA
server 106. DA server 106 can provide server-side functionalities for any number of DA clients
102 each residing on a respective user device 104.
[0049]       In some examples, DA server 106 can include client-facing 1/0 interface 112, one or
more processing modules 114, data and models 116, and I/O interface to external services 118.
The client-facing I/O interface 112 can facilitate the client-facing input and output processing for
DA server 106. One or more processing modules 114 can utilize data and models 116 to process
speech input and determine the user's intent based on natural language input. Further, one or
more processing modules 114 perform task execution based on inferred user intent. In some
examples, DA server 106 can communicate with external services 120 through network(s) 110
for task completion or information acquisition. 1/0 interface to external services 118 can
facilitate such communications.
[0050]       User device 104 can be any suitable electronic device. For example, user devices can
be a portable multifunctional device (e.g., device 200, described below with reference to FIG.
2A), a multifunctional device (e.g., device 400, described below with reference to FIG. 4), or a
personal electronic device (e.g., device 600, described below with reference to FIG. 6A-B.) A
portable multifunctional device can be, for example, a mobile telephone that also contains other
functions, such as PDA and/or music player functions. Specific examples of portable
multifunction devices can include the iPhone@, iPod Touch®, and iPad@ devices from Apple
Inc. of Cupertino, California. Other examples of portable multifunction devices can include,
                                                   11

1002043087
without limitation, laptop or tablet computers. Further, in some examples, user device 104 can
be a non-portable multifunctional device. In particular, user device 104 can be a desktop
computer, a game console, a television, or a television set-top box. In some examples, user
device 104 can include a touch-sensitive surface (e.g., touch screen displays and/or touchpads).
Further, user device 104 can optionally include one or more other physical user-interface
devices, such as a physical keyboard, a mouse, and/or a joystick. Various examples of electronic
devices, such as multifunctional devices, are described below in greater detail.
[0051]      Examples of communication network(s) 110 can include local area networks (LAN)
and wide area networks (WAN), e.g., the Internet. Communication network(s) 110 can be
implemented using any known network protocol, including various wired or wireless protocols,
such as, for example, Ethernet, Universal Serial Bus (USB), FIREWIRE, Global System for
Mobile Communications (GSM), Enhanced Data GSM Environment (EDGE), code division
multiple access (CDMA), time division multiple access (TDMA), Bluetooth, Wi-Fi, voice over
Internet Protocol (VoIP), Wi-MAX, or any other suitable communication protocol.
[0052]      Server system 108 can be implemented on one or more standalone data processing
apparatus or a distributed network of computers. In some examples, server system 108 can also
employ various virtual devices and/or services of third-party service providers (e.g., third-party
cloud service providers) to provide the underlying computing resources and/or infrastructure
resources of server system 108.
[0053]      In some examples, user device 104 can communicate with DA server 106 via second
user device 122. Second user device 122 can be similar or identical to user device 104. For
example, second user device 122 can be similar to devices 200, 400, or 600 described below with
reference to FIGs. 2A, 4, and 6A-B. User device 104 can be configured to communicatively
couple to second user device 122 via a direct communication connection, such as Bluetooth,
NFC, BTLE, or the like, or via a wired or wireless network, such as a local Wi-Fi network. In
some examples, second user device 122 can be configured to act as a proxy between user device
104 and DA server 106. For example, DA client 102 of user device 104 can be configured to
transmit information (e.g., a user request received at user device 104) to DA server 106 via
                                                 12

1002043087
second user device 122. DA server 106 can process the information and return relevant data
(e.g., data content responsive to the user request) to user device 104 via second user device 122.
[0054]       In some examples, user device 104 can be configured to communicate abbreviated
requests for data to second user device 122 to reduce the amount of information transmitted from
user device 104. Second user device 122 can be configured to determine supplemental
information to add to the abbreviated request to generate a complete request to transmit to DA
server 106. This system architecture can advantageously allow user device 104 having limited
communication capabilities and/or limited battery power (e.g., a watch or a similar compact
electronic device) to access services provided by DA server 106 by using second user device
122, having greater communication capabilities and/or battery power (e.g., a mobile phone,
laptop computer, tablet computer, or the like), as a proxy to DA server 106. While only two user
devices 104 and 122 are shown in FIG. 1, it should be appreciated that system 100 can include
any number and type of user devices configured in this proxy configuration to communicate with
DA server system 106.
[0055]       Although the digital assistant shown in FIG. 1 can include both a client-side portion
(e.g., DA client 102) and a server-side portion (e.g., DA server 106), in some examples, the
functions of a digital assistant can be implemented as a standalone application installed on a user
device. In addition, the divisions of functionalities between the client and server portions of the
digital assistant can vary in different implementations. For instance, in some examples, the DA
client can be a thin-client that provides only user-facing input and output processing functions,
and delegates all other functionalities of the digital assistant to a backend server.
2.       Electronic Devices
[0056]       Attention is now directed toward embodiments of electronic devices for
implementing the client-side portion of a digital assistant. FIG. 2A is a block diagram
illustrating portable multifunction device 200 with touch-sensitive display system 212 in
accordance with some embodiments. Touch-sensitive display 212 is sometimes called a "touch
screen" for convenience and is sometimes known as or called a "touch-sensitive display system."
Device 200 includes memory 202 (which optionally includes one or more computer-readable
storage mediums), memory controller 222, one or more processing units (CPUs) 220, peripherals
                                                  13

1002043087
interface 218, RF circuitry 208, audio circuitry 210, speaker 211, microphone 213, input/output
(1/0) subsystem 206, other input control devices 216, and external port 224. Device 200
optionally includes one or more optical sensors 264. Device 200 optionally includes one or more
contact intensity sensors 265 for detecting intensity of contacts on device 200 (e.g., a touch
sensitive surface such as touch-sensitive display system 212 of device 200). Device 200
optionally includes one or more tactile output generators 267 for generating tactile outputs on
device 200 (e.g., generating tactile outputs on a touch-sensitive surface such as touch-sensitive
display system 212 of device 200 or touchpad 455 of device 400). These components optionally
communicate over one or more communication buses or signal lines 203.
[0057]      As used in the specification and claims, the term "intensity" of a contact on a touch
sensitive surface refers to the force or pressure (force per unit area) of a contact (e.g., a finger
contact) on the touch-sensitive surface, or to a substitute (proxy) for the force or pressure of a
contact on the touch-sensitive surface. The intensity of a contact has a range of values that
includes at least four distinct values and more typically includes hundreds of distinct values (e.g.,
at least 256). Intensity of a contact is, optionally, determined (or measured) using various
approaches and various sensors or combinations of sensors. For example, one or more force
sensors underneath or adjacent to the touch-sensitive surface are, optionally, used to measure
force at various points on the touch-sensitive surface. In some implementations, force
measurements from multiple force sensors are combined (e.g., a weighted average) to determine
an estimated force of a contact. Similarly, a pressure-sensitive tip of a stylus is, optionally, used
to determine a pressure of the stylus on the touch-sensitive surface. Alternatively, the size of the
contact area detected on the touch-sensitive surface and/or changes thereto, the capacitance of
the touch-sensitive surface proximate to the contact and/or changes thereto, and/or the resistance
of the touch-sensitive surface proximate to the contact and/or changes thereto are, optionally,
used as a substitute for the force or pressure of the contact on the touch-sensitive surface. In
some implementations, the substitute measurements for contact force or pressure are used
directly to determine whether an intensity threshold has been exceeded (e.g., the intensity
threshold is described in units corresponding to the substitute measurements). In some
implementations, the substitute measurements for contact force or pressure are converted to an
estimated force or pressure, and the estimated force or pressure is used to determine whether an
intensity threshold has been exceeded (e.g., the intensity threshold is a pressure threshold
                                                   14

1002043087
measured in units of pressure). Using the intensity of a contact as an attribute of a user input
allows for user access to additional device functionality that may otherwise not be accessible by
the user on a reduced-size device with limited real estate for displaying affordances (e.g., on a
touch-sensitive display) and/or receiving user input (e.g., via a touch-sensitive display, a touch
sensitive surface, or a physical/mechanical control such as a knob or a button).
[0058]       As used in the specification and claims, the term "tactile output" refers to physical
displacement of a device relative to a previous position of the device, physical displacement of a
component (e.g., a touch-sensitive surface) of a device relative to another component (e.g.,
housing) of the device, or displacement of the component relative to a center of mass of the
device that will be detected by a user with the user's sense of touch. For example, in situations
where the device or the component of the device is in contact with a surface of a user that is
sensitive to touch (e.g., a finger, palm, or other part of a user's hand), the tactile output generated
by the physical displacement will be interpreted by the user as a tactile sensation corresponding
to a perceived change in physical characteristics of the device or the component of the device.
For example, movement of a touch-sensitive surface (e.g., a touch-sensitive display or trackpad)
is, optionally, interpreted by the user as a "down click" or "up click" of a physical actuator
button. In some cases, a user will feel a tactile sensation such as an "down click" or "up click"
even when there is no movement of a physical actuator button associated with the touch-sensitive
surface that is physically pressed (e.g., displaced) by the user's movements. As another
example, movement of the touch-sensitive surface is, optionally, interpreted or sensed by the
user as "roughness" of the touch-sensitive surface, even when there is no change in smoothness
of the touch-sensitive surface. While such interpretations of touch by a user will be subject to
the individualized sensory perceptions of the user, there are many sensory perceptions of touch
that are common to a large majority of users. Thus, when a tactile output is described as
corresponding to a particular sensory perception of a user (e.g., an "up click," a "down click,"
"roughness"), unless otherwise stated, the generated tactile output corresponds to physical
displacement of the device or a component thereof that will generate the described sensory
perception for a typical (or average) user.
[0059]       It should be appreciated that device 200 is only one example of a portable
multifunction device, and that device 200 optionally has more or fewer components than shown,
                                                   15

1002043087
optionally combines two or more components, or optionally has a different configuration or
arrangement of the components. The various components shown in FIG. 2A are implemented in
hardware, software, or a combination of both hardware and software, including one or more
signal processing and/or application-specific integrated circuits.
[0060]      Memory 202 may include one or more computer-readable storage mediums. The
computer-readable storage mediums may be tangible and non-transitory. Memory 202 may
include high-speed random access memory and may also include non-volatile memory, such as
one or more magnetic disk storage devices, flash memory devices, or other non-volatile solid
state memory devices. Memory controller 222 may control access to memory 202 by other
components of device 200.
[0061]      In some examples, a non-transitory computer-readable storage medium of memory
202 can be used to store instructions (e.g., for performing aspects of process 1100, described
below) for use by or in connection with an instruction execution system, apparatus, or device,
such as a computer-based system, processor-containing system, or other system that can fetch the
instructions from the instruction execution system, apparatus, or device and execute the
instructions. In other examples, the instructions (e.g., for performing aspects of process 1100,
described below) can be stored on a non-transitory computer-readable storage medium (not
shown) of the server system 108 or can be divided between the non-transitory computer-readable
storage medium of memory 202 and the non-transitory computer-readable storage medium of
server system 108. In the context of this document, a "non-transitory computer-readable storage
medium" can be any medium that can contain or store the program for use by or in connection
with the instruction execution system, apparatus, or device.
[0062]      Peripherals interface 218 can be used to couple input and output peripherals of the
device to CPU 220 and memory 202. The one or more processors 220 run or execute various
software programs and/or sets of instructions stored in memory 202 to perform various functions
for device 200 and to process data. In some embodiments, peripherals interface 218, CPU 220,
and memory controller 222 may be implemented on a single chip, such as chip 204. In some
other embodiments, they may be implemented on separate chips.
                                                  16

1002043087
[0063]      RF (radio frequency) circuitry 208 receives and sends RF signals, also called
electromagnetic signals. RF circuitry 208 converts electrical signals to/from electromagnetic
signals and communicates with communications networks and other communications devices via
the electromagnetic signals. RF circuitry 208 optionally includes well-known circuitry for
performing these functions, including but not limited to an antenna system, an RF transceiver,
one or more amplifiers, a tuner, one or more oscillators, a digital signal processor, a CODEC
chipset, a subscriber identity module (SIM) card, memory, and so forth. RF circuitry 208
optionally communicates with networks, such as the Internet, also referred to as the World Wide
Web (WWW), an intranet and/or a wireless network, such as a cellular telephone network, a
wireless local area network (LAN) and/or a metropolitan area network (MAN), and other devices
by wireless communication. The RF circuitry 208 optionally includes well-known circuitry for
detecting near field communication (NFC) fields, such as by a short-range communication radio.
The wireless communication optionally uses any of a plurality of communications standards,
protocols, and technologies, including but not limited to Global System for Mobile
Communications (GSM), Enhanced Data GSM Environment (EDGE), high-speed downlink
packet access (HSDPA), high-speed uplink packet access (HSUPA), Evolution, Data-Only (EV
DO), HSPA, HSPA+, Dual-Cell HSPA (DC-HSPDA), long term evolution (LTE), near field
communication (NFC), wideband code division multiple access (W-CDMA), code division
multiple access (CDMA), time division multiple access (TDMA), Bluetooth, Bluetooth Low
Energy (BTLE), Wireless Fidelity (Wi-Fi) (e.g., IEEE 802.11a, IEEE 802.1lb, IEEE 802.11g,
IEEE 802.11n, and/or IEEE 802.11ac), voice over Internet Protocol (VoIP), Wi-MAX, a protocol
for e mail (e.g., Internet message access protocol (IMAP) and/or post office protocol (POP)),
instant messaging (e.g., extensible messaging and presence protocol (XMPP), Session Initiation
Protocol for Instant Messaging and Presence Leveraging Extensions (SIMPLE), Instant
Messaging and Presence Service (IMPS)), and/or Short Message Service (SMS), or any other
suitable communication protocol, including communication protocols not yet developed as of the
filing date of this document.
[0064]      Audio circuitry 210, speaker 211, and microphone 213 provide an audio interface
between a user and device 200. Audio circuitry 210 receives audio data from peripherals
interface 218, converts the audio data to an electrical signal, and transmits the electrical signal to
speaker 211. Speaker 211 converts the electrical signal to human-audible sound waves. Audio
                                                 17

1002043087
circuitry 210 also receives electrical signals converted by microphone 213 from sound waves.
Audio circuitry 210 converts the electrical signal to audio data and transmits the audio data to
peripherals interface 218 for processing. Audio data may be retrieved from and/or transmitted to
memory 202 and/or RF circuitry 208 by peripherals interface 218. In some embodiments, audio
circuitry 210 also includes a headset jack (e.g., 312, FIG. 3). The headset jack provides an
interface between audio circuitry 210 and removable audio input/output peripherals, such as
output-only headphones or a headset with both output (e.g., a headphone for one or both ears)
and input (e.g., a microphone).
[0065]       I/O subsystem 206 couples input/output peripherals on device 200, such as touch
screen 212 and other input control devices 216, to peripherals interface 218. I/O subsystem 206
optionally includes display controller 256, optical sensor controller 258, intensity sensor
controller 259, haptic feedback controller 261, and one or more input controllers 260 for other
input or control devices. The one or more input controllers 260 receive/send electrical signals
from/to other input control devices 216. The other input control devices 216 optionally include
physical buttons (e.g., push buttons, rocker buttons, etc.), dials, slider switches, joysticks, click
wheels, and so forth. In some alternate embodiments, input controller(s) 260 are, optionally,
coupled to any (or none) of the following: a keyboard, an infrared port, a USB port, and a pointer
device such as a mouse. The one or more buttons (e.g., 308, FIG. 3) optionally include an
up/down button for volume control of speaker 211 and/or microphone 213. The one or more
buttons optionally include a push button (e.g., 306, FIG. 3).
[0066]       A quick press of the push button may disengage a lock of touch screen 212 or begin a
process that uses gestures on the touch screen to unlock the device, as described in U.S. Patent
Application 11/322,549, "Unlocking a Device by Performing Gestures on an Unlock Image,"
filed December 23, 2005, U.S. Pat. No. 7,657,849, which is hereby incorporated by reference in
its entirety. A longer press of the push button (e.g., 306) may turn power to device 200 on or off.
The user may be able to customize a functionality of one or more of the buttons. Touch screen
212 is used to implement virtual or soft buttons and one or more soft keyboards.
[0067]       Touch-sensitive display 212 provides an input interface and an output interface
between the device and a user. Display controller 256 receives and/or sends electrical signals
                                                  18

1002043087
from/to touch screen 212. Touch screen 212 displays visual output to the user. The visual
output may include graphics, text, icons, video, and any combination thereof (collectively termed
"graphics"). In some embodiments, some or all of the visual output may correspond to user
interface objects.
[0068]      Touch screen 212 has a touch-sensitive surface, sensor, or set of sensors that accepts
input from the user based on haptic and/or tactile contact. Touch screen 212 and display
controller 256 (along with any associated modules and/or sets of instructions in memory 202)
detect contact (and any movement or breaking of the contact) on touch screen 212 and convert
the detected contact into interaction with user-interface objects (e.g., one or more soft keys,
icons, web pages, or images) that are displayed on touch screen 212. In an exemplary
embodiment, a point of contact between touch screen 212 and the user corresponds to a finger of
the user.
[0069]      Touch screen 212 may use LCD (liquid crystal display) technology, LPD (light
emitting polymer display) technology, or LED (light emitting diode) technology, although other
display technologies may be used in other embodiments. Touch screen 212 and display
controller 256 may detect contact and any movement or breaking thereof using any of a plurality
of touch sensing technologies now known or later developed, including but not limited to
capacitive, resistive, infrared, and surface acoustic wave technologies, as well as other proximity
sensor arrays or other elements for determining one or more points of contact with touch screen
212. In an exemplary embodiment, projected mutual capacitance sensing technology is used,
such as that found in the iPhone@ and iPod Touch® from Apple Inc. of Cupertino, California.
[0070]      A touch-sensitive display in some embodiments of touch screen 212 may be
analogous to the multi-touch sensitive touchpads described in the following U.S. Patents:
6,323,846 (Westerman et al.), 6,570,557 (Westerman et al.), and/or 6,677,932 (Westerman),
and/or U.S. Patent Publication 2002/0015024A1, each of which is hereby incorporated by
reference in its entirety. However, touch screen 212 displays visual output from device 200,
whereas touch-sensitive touchpads do not provide visual output.
[0071]      A touch-sensitive display in some embodiments of touch screen 212 may be as
described in the following applications: (1) U.S. Patent Application No. 11/381,3 13, "Multipoint
                                                  19

1002043087
Touch Surface Controller," filed May 2, 2006; (2) U.S. Patent Application No. 10/840,862,
"Multipoint Touchscreen," filed May 6, 2004; (3) U.S. Patent Application No. 10/903,964,
"Gestures For Touch Sensitive Input Devices," filed July 30, 2004; (4) U.S. Patent Application
No. 11/048,264, "Gestures For Touch Sensitive Input Devices," filed January 31, 2005; (5) U.S.
Patent Application No. 11/038,590, "Mode-Based Graphical User Interfaces For Touch Sensitive
Input Devices," filed January 18, 2005; (6) U.S. Patent Application No. 11/228,758, "Virtual
Input Device Placement On A Touch Screen User Interface," filed September 16, 2005; (7) U.S.
Patent Application No. 11/228,700, "Operation Of A Computer With A Touch Screen Interface,"
filed September 16, 2005; (8) U.S. Patent Application No. 11/228,737, "Activating Virtual Keys
Of A Touch-Screen Virtual Keyboard," filed September 16, 2005; and (9) U.S. Patent
Application No. 11/367,749, "Multi-Functional Hand-Held Device," filed March 3, 2006. All of
these applications are incorporated by reference herein in their entirety.
[0072]       Touch screen 212 may have a video resolution in excess of 100 dpi. In some
embodiments, the touch screen has a video resolution of approximately 160 dpi. The user may
make contact with touch screen 212 using any suitable object or appendage, such as a stylus, a
finger, and so forth. In some embodiments, the user interface is designed to work primarily with
finger-based contacts and gestures, which can be less precise than stylus-based input due to the
larger area of contact of a finger on the touch screen. In some embodiments, the device
translates the rough finger-based input into a precise pointer/cursor position or command for
performing the actions desired by the user.
[0073]       In some embodiments, in addition to the touch screen, device 200 may include a
touchpad (not shown) for activating or deactivating particular functions. In some embodiments,
the touchpad is a touch-sensitive area of the device that, unlike the touch screen, does not display
visual output. The touchpad may be a touch-sensitive surface that is separate from touch screen
212 or an extension of the touch-sensitive surface formed by the touch screen.
[0074]       Device 200 also includes power system 262 for powering the various components.
Power system 262 may include a power management system, one or more power sources (e.g.,
battery, alternating current (AC)), a recharging system, a power failure detection circuit, a power
converter or inverter, a power status indicator (e.g., a light-emitting diode (LED)) and any other
                                                  20

1002043087
components associated with the generation, management and distribution of power in portable
devices.
[0075]       Device 200 may also include one or more optical sensors 264. FIG. 2A shows an
optical sensor coupled to optical sensor controller 258 in I/O subsystem 206. Optical sensor 264
may include charge-coupled device (CCD) or complementary metal-oxide semiconductor
(CMOS) phototransistors. Optical sensor 264 receives light from the environment, projected
through one or more lenses, and converts the light to data representing an image. In conjunction
with imaging module 243 (also called a camera module), optical sensor 264 may capture still
images or video. In some embodiments, an optical sensor is located on the back of device 200,
opposite touch screen display 212 on the front of the device so that the touch screen display may
be used as a viewfinder for still and/or video image acquisition. In some embodiments, an
optical sensor is located on the front of the device so that the user's image may be obtained for
video conferencing while the user views the other video conference participants on the touch
screen display. In some embodiments, the position of optical sensor 264 can be changed by the
user (e.g., by rotating the lens and the sensor in the device housing) so that a single optical sensor
264 may be used along with the touch screen display for both video conferencing and still and/or
video image acquisition.
[0076]       Device 200 optionally also includes one or more contact intensity sensors 265. FIG.
2A shows a contact intensity sensor coupled to intensity sensor controller 259 in I/O subsystem
206. Contact intensity sensor 265 optionally includes one or more piezoresistive strain gauges,
capacitive force sensors, electric force sensors, piezoelectric force sensors, optical force sensors,
capacitive touch-sensitive surfaces, or other intensity sensors (e.g., sensors used to measure the
force (or pressure) of a contact on a touch-sensitive surface). Contact intensity sensor 265
receives contact intensity information (e.g., pressure information or a proxy for pressure
information) from the environment. In some embodiments, at least one contact intensity sensor
is collocated with, or proximate to, a touch-sensitive surface (e.g., touch-sensitive display system
212). In some embodiments, at least one contact intensity sensor is located on the back of device
200, opposite touch screen display 212, which is located on the front of device 200.
                                                   21

1002043087
[0077]       Device 200 may also include one or more proximity sensors 266. FIG. 2A shows
proximity sensor 266 coupled to peripherals interface 218. Alternately, proximity sensor 266
may be coupled to input controller 260 in I/O subsystem 206. Proximity sensor 266 may
perform as described in U.S. Patent Application Nos. 11/241,839, "Proximity Detector In
Handheld Device"; 11/240,788, "Proximity Detector In Handheld Device"; 11/620,702, "Using
Ambient Light Sensor To Augment Proximity Sensor Output"; 11/586,862, "Automated
Response To And Sensing Of User Activity In Portable Devices"; and 11/638,251, "Methods
And Systems For Automatic Configuration Of Peripherals," which are hereby incorporated by
reference in their entirety. In some embodiments, the proximity sensor turns off and disables
touch screen 212 when the multifunction device is placed near the user's ear (e.g., when the user
is making a phone call).
[0078]       Device 200 optionally also includes one or more tactile output generators 267. FIG.
2A shows a tactile output generator coupled to haptic feedback controller 261 in 1/0 subsystem
206. Tactile output generator 267 optionally includes one or more electroacoustic devices such
as speakers or other audio components and/or electromechanical devices that convert energy into
linear motion such as a motor, solenoid, electroactive polymer, piezoelectric actuator,
electrostatic actuator, or other tactile output generating component (e.g., a component that
converts electrical signals into tactile outputs on the device). Contact intensity sensor 265
receives tactile feedback generation instructions from haptic feedback module 233 and generates
tactile outputs on device 200 that are capable of being sensed by a user of device 200. In some
embodiments, at least one tactile output generator is collocated with, or proximate to, a touch
sensitive surface (e.g., touch-sensitive display system 212) and, optionally, generates a tactile
output by moving the touch-sensitive surface vertically (e.g., in/out of a surface of device 200) or
laterally (e.g., back and forth in the same plane as a surface of device 200). In some
embodiments, at least one tactile output generator sensor is located on the back of device 200,
opposite touch screen display 212, which is located on the front of device 200.
[0079]       Device 200 may also include one or more accelerometers 268. FIG. 2A shows
accelerometer 268 coupled to peripherals interface 218. Alternately, accelerometer 268 may be
coupled to an input controller 260 in 1/0 subsystem 206. Accelerometer 268 may perform as
described in U.S. Patent Publication No. 20050190059, "Acceleration-based Theft Detection
                                                   22

1002043087
System for Portable Electronic Devices," and U.S. Patent Publication No. 20060017692,
"Methods And Apparatuses For Operating A Portable Device Based On An Accelerometer,"
both of which are incorporated by reference herein in their entirety. In some embodiments,
information is displayed on the touch screen display in a portrait view or a landscape view based
on an analysis of data received from the one or more accelerometers. Device 200 optionally
includes, in addition to accelerometer(s) 268, a magnetometer (not shown) and a GPS (or
GLONASS or other global navigation system) receiver (not shown) for obtaining information
concerning the location and orientation (e.g., portrait or landscape) of device 200.
[0080]      In some embodiments, the software components stored in memory 202 include
operating system 226, communication module (or set of instructions) 228, contact/motion
module (or set of instructions) 230, graphics module (or set of instructions) 232, text input
module (or set of instructions) 234, Global Positioning System (GPS) module (or set of
instructions) 235, Digital Assistant Client Module 229, and applications (or sets of instructions)
236. Further, memory 202 can store data and models, such as user data and models 231.
Furthermore, in some embodiments, memory 202 (FIG. 2A) or 470 (FIG. 4) stores device/global
internal state 257, as shown in FIGS. 2A and 4. Device/global internal state 257 includes one or
more of: active application state, indicating which applications, if any, are currently active;
display state, indicating what applications, views or other information occupy various regions of
touch screen display 212; sensor state, including information obtained from the device's various
sensors and input control devices 216; and location information concerning the device's location
and/or attitude.
[0081]      Operating system 226 (e.g., Darwin, RTXC, LINUX, UNIX, OS X, iOS,
WINDOWS, or an embedded operating system such as VxWorks) includes various software
components and/or drivers for controlling and managing general system tasks (e.g., memory
management, storage device control, power management, etc.) and facilitates communication
between various hardware and software components.
[0082]      Communication module 228 facilitates communication with other devices over one or
more external ports 224 and also includes various software components for handling data
received by RF circuitry 208 and/or external port 224. External port 224 (e.g., Universal Serial
                                                 23

1002043087
Bus (USB), FIREWIRE, etc.) is adapted for coupling directly to other devices or indirectly over
a network (e.g., the Internet, wireless LAN, etc.). In some embodiments, the external port is a
multi-pin (e.g., 30-pin) connector that is the same as, or similar to and/or compatible with, the
30-pin connector used on iPod@ (trademark of Apple Inc.) devices.
[0083]      Contact/motion module 230 optionally detects contact with touch screen 212 (in
conjunction with display controller 256) and other touch-sensitive devices (e.g., a touchpad or
physical click wheel). Contact/motion module 230 includes various software components for
performing various operations related to detection of contact, such as determining if contact has
occurred (e.g., detecting a finger-down event), determining an intensity of the contact (e.g., the
force or pressure of the contact or a substitute for the force or pressure of the contact),
determining if there is movement of the contact and tracking the movement across the touch
sensitive surface (e.g., detecting one or more finger-dragging events), and determining if the
contact has ceased (e.g., detecting a finger-up event or a break in contact). Contact/motion
module 230 receives contact data from the touch-sensitive surface. Determining movement of
the point of contact, which is represented by a series of contact data, optionally includes
determining speed (magnitude), velocity (magnitude and direction), and/or an acceleration (a
change in magnitude and/or direction) of the point of contact. These operations are, optionally,
applied to single contacts (e.g., one finger contacts) or to multiple simultaneous contacts (e.g.,
"multitouch"/multiple finger contacts). In some embodiments, contact/motion module 230 and
display controller 256 detect contact on a touchpad.
[0084]      In some embodiments, contact/motion module 230 uses a set of one or more intensity
thresholds to determine whether an operation has been performed by a user (e.g., to determine
whether a user has "clicked" on an icon). In some embodiments, at least a subset of the intensity
thresholds are determined in accordance with software parameters (e.g., the intensity thresholds
are not determined by the activation thresholds of particular physical actuators and can be
adjusted without changing the physical hardware of device 200). For example, a mouse "click"
threshold of a trackpad or touch screen display can be set to any of a large range of predefined
threshold values without changing the trackpad or touch screen display hardware. Additionally,
in some implementations, a user of the device is provided with software settings for adjusting
one or more of the set of intensity thresholds (e.g., by adjusting individual intensity thresholds
                                                  24

1002043087
and/or by adjusting a plurality of intensity thresholds at once with a system-level click
"intensity" parameter).
[0085]      Contact/motion module 230 optionally detects a gesture input by a user. Different
gestures on the touch-sensitive surface have different contact patterns (e.g., different motions,
timings, and/or intensities of detected contacts). Thus, a gesture is, optionally, detected by
detecting a particular contact pattern. For example, detecting a finger tap gesture includes
detecting a finger-down event followed by detecting a finger-up (liftoff) event at the same
position (or substantially the same position) as the finger-down event (e.g., at the position of an
icon). As another example, detecting a finger swipe gesture on the touch-sensitive surface
includes detecting a finger-down event followed by detecting one or more finger-dragging
events, and subsequently followed by detecting a finger-up (liftoff) event.
[0086]      Graphics module 232 includes various known software components for rendering and
displaying graphics on touch screen 212 or other display, including components for changing the
visual impact (e.g., brightness, transparency, saturation, contrast, or other visual property) of
graphics that are displayed. As used herein, the term "graphics" includes any object that can be
displayed to a user, including ,without limitation, text, web pages, icons (such as user-interface
objects including soft keys), digital images, videos, animations, and the like.
[0087]      In some embodiments, graphics module 232 stores data representing graphics to be
used. Each graphic is, optionally, assigned a corresponding code. Graphics module 232
receives, from applications etc., one or more codes specifying graphics to be displayed along
with, if necessary, coordinate data and other graphic property data, and then generates screen
image data to output to display controller 256.
[0088]      Haptic feedback module 233 includes various software components for generating
instructions used by tactile output generator(s) 267 to produce tactile outputs at one or more
locations on device 200 in response to user interactions with device 200.
[0089]      Text input module 234, which may be a component of graphics module 232, provides
soft keyboards for entering text in various applications (e.g., contacts 237, e mail 240, IM 241,
browser 247, and any other application that needs text input).
                                                  25

1002043087
[0090]       GPS module 235 determines the location of the device and provides this information
for use in various applications (e.g., to telephone 238 for use in location-based dialing; to camera
243 as picture/video metadata; and to applications that provide location-based services such as
weather widgets, local yellow page widgets, and map/navigation widgets).
[0091]       Digital assistant client module 229 can include various client-side digital assistant
instructions to provide the client-side functionalities of the digital assistant. For example, digital
assistant client module 229 can be capable of accepting voice input (e.g., speech input), text
input, touch input, and/or gestural input through various user interfaces (e.g., microphone 213,
accelerometer(s) 268, touch-sensitive display system 212, optical sensor(s) 229, other input
control devices 216, etc.) of portable multifunction device 200. Digital assistant client module
229 can also be capable of providing output in audio (e.g., speech output), visual, and/or tactile
forms through various output interfaces (e.g., speaker 211, touch-sensitive display system 212,
tactile output generator(s) 267, etc.) of portable multifunction device 200. For example, output
can be provided as voice, sound, alerts, text messages, menus, graphics, videos, animations,
vibrations, and/or combinations of two or more of the above. During operation, digital assistant
client module 229 can communicate with DA server 106 using RF circuitry 208.
[0092]       User data and models 231 can include various data associated with the user (e.g.,
user-specific vocabulary data, user preference data, user-specified name pronunciations, data
from the user's electronic address book, to-do lists, shopping lists, etc.) to provide the client-side
functionalities of the digital assistant. Further, user data and models 231 can includes various
models (e.g., speech recognition models, statistical language models, natural language
processing models, ontology, task flow models, service models, etc.) for processing user input
and determining user intent.
[0093]       In some examples, digital assistant client module 229 can utilize the various sensors,
subsystems, and peripheral devices of portable multifunction device 200 to gather additional
information from the surrounding environment of the portable multifunction device 200 to
establish a context associated with a user, the current user interaction, and/or the current user
input. In some examples, digital assistant client module 229 can provide the contextual
information or a subset thereof with the user input to DA server 106 to help infer the user's
                                                   26

1002043087
intent. In some examples, the digital assistant can also use the contextual information to
determine how to prepare and deliver outputs to the user. Contextual information can be referred
to as context data.
[0094]       In some examples, the contextual information that accompanies the user input can
include sensor information, e.g., lighting, ambient noise, ambient temperature, images or videos
of the surrounding environment, etc. In some examples, the contextual information can also
include the physical state of the device, e.g., device orientation, device location, device
temperature, power level, speed, acceleration, motion patterns, cellular signals strength, etc. In
some examples, information related to the software state of DA server 106, e.g., running
processes, installed programs, past and present network activities, background services, error
logs, resources usage, etc., and of portable multifunction device 200 can be provided to DA
server 106 as contextual information associated with a user input.
[0095]       In some examples, the digital assistant client module 229 can selectively provide
information (e.g., user data 231) stored on the portable multifunction device 200 in response to
requests from DA server 106. In some examples, digital assistant client module 229 can also
elicit additional input from the user via a natural language dialogue or other user interfaces upon
request by DA server 106. Digital assistant client module 229 can pass the additional input to
DA server 106 to help DA server 106 in intent deduction and/or fulfillment of the user's intent
expressed in the user request.
[0096]       A more detailed description of a digital assistant is described below with reference to
FIGs. 7A-C. It should be recognized that digital assistant client module 229 can include any
number of the sub-modules of digital assistant module 726 described below.
[0097]       Applications 236 may include the following modules (or sets of instructions), or a
subset or superset thereof:
    *    Contacts module 237 (sometimes called an address book or contact list);
    *    Telephone module 238;
    *    Video conference module 239;
                                                  27

1002043087
    e    Email client module 240;
    *    Instant messaging (IM) module 241;
    *    Workout support module 242;
     " Camera module 243 for still and/or video images;
    *    Image management module 244;
    *    Video player module;
    *    Music player module;
    *    Browser module 247;
     " Calendar module 248;
    *    Widget modules 249, which may include one or more of: weather widget 249-1, stocks
         widget 249-2, calculator widget 249-3, alarm clock widget 249-4, dictionary widget 249
         5, and other widgets obtained by the user, as well as user-created widgets 249-6;
     *   Widget creator module 250 for making user-created widgets 249-6;
    *     Search module 251;
    *    Video and music player module 252, which merges video player module and music
         player module;
    *    Notes module 253;
    *    Map module 254; and/or
    "    Online video module 255.
[0098]       Examples of other applications 236 that may be stored in memory 202 include other
word processing applications, other image editing applications, drawing applications,
                                                 28

1002043087
presentation applications, JAVA-enabled applications, encryption, digital rights management,
voice recognition, and voice replication.
[0099]       In conjunction with touch screen 212, display controller 256, contact/motion module
230, graphics module 232, and text input module 234, contacts module 237 may be used to
manage an address book or contact list (e.g., stored in application internal state 292 of contacts
module 237 in memory 202 or memory 470), including: adding name(s) to the address book;
deleting name(s) from the address book; associating telephone number(s), email address(es),
physical address(es) or other information with a name; associating an image with a name;
categorizing and sorting names; providing telephone numbers or email addresses to initiate
and/or facilitate communications by telephone 238, video conference module 239, email 240, or
IM 241; and so forth.
[0100]       In conjunction with RF circuitry 208, audio circuitry 210, speaker 211, microphone
213, touch screen 212, display controller 256, contact/motion module 230, graphics module 232,
and text input module 234, telephone module 238 may be used to enter a sequence of characters
corresponding to a telephone number, access one or more telephone numbers in contacts module
237, modify a telephone number that has been entered, dial a respective telephone number,
conduct a conversation, and disconnect or hang up when the conversation is completed. As
noted above, the wireless communication may use any of a plurality of communications
standards, protocols, and technologies.
[0101]       In conjunction with RF circuitry 208, audio circuitry 210, speaker 211, microphone
213, touch screen 212, display controller 256, optical sensor 264, optical sensor controller 258,
contact/motion module 230, graphics module 232, text input module 234, contacts module 237,
and telephone module 238, video conference module 239 includes executable instructions to
initiate, conduct, and terminate a video conference between a user and one or more other
participants in accordance with user instructions.
[0102]       In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, and text input module 234, email client
module 240 includes executable instructions to create, send, receive, and manage email in
response to user instructions. In conjunction with image management module 244, email client
                                                 29

1002043087
module 240 makes it very easy to create and send emails with still or video images taken with
camera module 243.
[0103]      In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, and text input module 234, the instant
messaging module 241 includes executable instructions to enter a sequence of characters
corresponding to an instant message, to modify previously entered characters, to transmit a
respective instant message (for example, using a Short Message Service (SMS) or Multimedia
Message Service (MMS) protocol for telephony-based instant messages or using XMPP,
SIMPLE, or IMPS for Intemet-based instant messages), to receive instant messages, and to view
received instant messages. In some embodiments, transmitted and/or received instant messages
may include graphics, photos, audio files, video files and/or other attachments as are supported
in an MMS and/or an Enhanced Messaging Service (EMS). As used herein, "instant messaging"
refers to both telephony-based messages (e.g., messages sent using SMS or MMS) and Internet
based messages (e.g., messages sent using XMPP, SIMPLE, or IMPS).
[0104]      In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, text input module 234, GPS module 235, map
module 254, and music player module, workout support module 242 includes executable
instructions to create workouts (e.g., with time, distance, and/or calorie burning goals);
communicate with workout sensors (sports devices); receive workout sensor data; calibrate
sensors used to monitor a workout; select and play music for a workout; and display, store, and
transmit workout data.
[0105]      In conjunction with touch screen 212, display controller 256, optical sensor(s) 264,
optical sensor controller 258, contact/motion module 230, graphics module 232, and image
management module 244, camera module 243 includes executable instructions to capture still
images or video (including a video stream) and store them into memory 202, modify
characteristics of a still image or video, or delete a still image or video from memory 202.
[0106]      In conjunction with touch screen 212, display controller 256, contact/motion module
230, graphics module 232, text input module 234, and camera module 243, image management
module 244 includes executable instructions to arrange, modify (e.g., edit), or otherwise
                                                   30

1002043087
manipulate, label, delete, present (e.g., in a digital slide show or album), and store still and/or
video images.
[0107]       In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, and text input module 234, browser module
247 includes executable instructions to browse the Internet in accordance with user instructions,
including searching, linking to, receiving, and displaying web pages or portions thereof, as well
as attachments and other files linked to web pages.
[0108]       In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, text input module 234, email client module
240, and browser module 247, calendar module 248 includes executable instructions to create,
display, modify, and store calendars and data associated with calendars (e.g., calendar entries, to
do lists, etc.) in accordance with user instructions.
[0109]       In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, text input module 234, and browser module
247, widget modules 249 are mini-applications that may be downloaded and used by a user (e.g.,
weather widget 249-1, stocks widget 249-2, calculator widget 249-3, alarm clock widget 249-4,
and dictionary widget 249-5) or created by the user (e.g., user-created widget 249-6). In some
embodiments, a widget includes an HTML (Hypertext Markup Language) file, a CSS (Cascading
Style Sheets) file, and a JavaScript file. In some embodiments, a widget includes an XML
(Extensible Markup Language) file and a JavaScript file (e.g., Yahoo! Widgets).
[0110]       In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, text input module 234, and browser module
247, the widget creator module 250 may be used by a user to create widgets (e.g., turning a user
specified portion of a web page into a widget).
[0111]       In conjunction with touch screen 212, display controller 256, contact/motion module
230, graphics module 232, and text input module 234, search module 251 includes executable
instructions to search for text, music, sound, image, video, and/or other files in memory 202 that
                                                   31

1002043087
match one or more search criteria (e.g., one or more user-specified search terms) in accordance
with user instructions.
[0112]      In conjunction with touch screen 212, display controller 256, contact/motion module
230, graphics module 232, audio circuitry 210, speaker 211, RF circuitry 208, and browser
module 247, video and music player module 252 includes executable instructions that allow the
user to download and play back recorded music and other sound files stored in one or more file
formats, such as MP3 or AAC files, and executable instructions to display, present, or otherwise
play back videos (e.g., on touch screen 212 or on an external, connected display via external port
224). In some embodiments, device 200 optionally includes the functionality of an MP3 player,
such as an iPod (trademark of Apple Inc.).
[0113]      In conjunction with touch screen 212, display controller 256, contact/motion module
230, graphics module 232, and text input module 234, notes module 253 includes executable
instructions to create and manage notes, to-do lists, and the like in accordance with user
instructions.
[0114]      In conjunction with RF circuitry 208, touch screen 212, display controller 256,
contact/motion module 230, graphics module 232, text input module 234, GPS module 235, and
browser module 247, map module 254 may be used to receive, display, modify, and store maps
and data associated with maps (e.g., driving directions, data on stores and other points of interest
at or near a particular location, and other location-based data) in accordance with user
instructions.
[0115]      In conjunction with touch screen 212, display controller 256, contact/motion module
230, graphics module 232, audio circuitry 210, speaker 211, RF circuitry 208, text input module
234, email client module 240, and browser module 247, online video module 255 includes
instructions that allow the user to access, browse, receive (e.g., by streaming and/or download),
play back (e.g., on the touch screen or on an external, connected display via external port 224),
send an email with a link to a particular online video, and otherwise manage online videos in one
or more file formats, such as H.264. In some embodiments, instant messaging module 241,
rather than email client module 240, is used to send a link to a particular online video.
Additional description of the online video application can be found in U.S. Provisional Patent
                                                   32

1002043087
Application No. 60/936,562, "Portable Multifunction Device, Method, and Graphical User
Interface for Playing Online Videos," filed June 20, 2007, and U.S. Patent Application No.
11/968,067, "Portable Multifunction Device, Method, and Graphical User Interface for Playing
Online Videos," filed December 31, 2007, the contents of which are hereby incorporated by
reference in their entirety.
[0116]      Each of the above-identified modules and applications corresponds to a set of
executable instructions for performing one or more functions described above and the methods
described in this application (e.g., the computer-implemented methods and other information
processing methods described herein). These modules (e.g., sets of instructions) need not be
implemented as separate software programs, procedures, or modules, and thus various subsets of
these modules may be combined or otherwise rearranged in various embodiments. For example,
video player module may be combined with music player module into a single module (e.g.,
video and music player module 252, FIG. 2A). In some embodiments, memory 202 may store a
subset of the modules and data structures identified above. Furthermore, memory 202 may store
additional modules and data structures not described above.
[0117]      In some embodiments, device 200 is a device where operation of a predefined set of
functions on the device is performed exclusively through a touch screen and/or a touchpad. By
using a touch screen and/or a touchpad as the primary input control device for operation of
device 200, the number of physical input control devices (such as push buttons, dials, and the
like) on device 200 may be reduced.
[0118]      The predefined set of functions that are performed exclusively through a touch screen
and/or a touchpad optionally include navigation between user interfaces. In some embodiments,
the touchpad, when touched by the user, navigates device 200 to a main, home, or root menu
from any user interface that is displayed on device 200. In such embodiments, a "menu button"
is implemented using a touchpad. In some other embodiments, the menu button is a physical
push button or other physical input control device instead of a touchpad.
[0119]      FIG. 2B is a block diagram illustrating exemplary components for event handling in
accordance with some embodiments. In some embodiments, memory 202 (FIG. 2A) or 470
                                                 33

1002043087
(FIG. 4) includes event sorter 270 (e.g., in operating system 226) and a respective application
236-1 (e.g., any of the aforementioned applications 237-251, 255, 480-490).
[0120]      Event sorter 270 receives event information and determines the application 236-1 and
application view 291 of application 236-1 to which to deliver the event information. Event sorter
270 includes event monitor 271 and event dispatcher module 274. In some embodiments,
application 236-1 includes application internal state 292, which indicates the current application
view(s) displayed on touch-sensitive display 212 when the application is active or executing. In
some embodiments, device/global internal state 257 is used by event sorter 270 to determine
which application(s) is (are) currently active, and application internal state 292 is used by event
sorter 270 to determine application views 291 to which to deliver event information.
[0121]      In some embodiments, application internal state 292 includes additional information,
such as one or more of: resume information to be used when application 236-1 resumes
execution, user interface state information that indicates information being displayed or that is
ready for display by application 236-1, a state queue for enabling the user to go back to a prior
state or view of application 236-1, and a redo/undo queue of previous actions taken by the user.
[0122]      Event monitor 271 receives event information from peripherals interface 218. Event
information includes information about a sub-event (e.g., a user touch on touch-sensitive display
212, as part of a multi-touch gesture). Peripherals interface 218 transmits information it receives
from 1/0 subsystem 206 or a sensor, such as proximity sensor 266, accelerometer(s) 268, and/or
microphone 213 (through audio circuitry 210). Information that peripherals interface 218
receives from I/O subsystem 206 includes information from touch-sensitive display 212 or a
touch-sensitive surface.
[0123]      In some embodiments, event monitor 271 sends requests to the peripherals interface
218 at predetermined intervals. In response, peripherals interface 218 transmits event
information. In other embodiments, peripherals interface 218 transmits event information only
when there is a significant event (e.g., receiving an input above a predetermined noise threshold
and/or for more than a predetermined duration).
                                                  34

1002043087
[0124]      In some embodiments, event sorter 270 also includes a hit view determination module
272 and/or an active event recognizer determination module 273.
[0125]      Hit view determination module 272 provides software procedures for determining
where a sub-event has taken place within one or more views when touch-sensitive display 212
displays more than one view. Views are made up of controls and other elements that a user can
see on the display.
[0126]      Another aspect of the user interface associated with an application is a set of views,
sometimes herein called application views or user interface windows, in which information is
displayed and touch-based gestures occur. The application views (of a respective application) in
which a touch is detected may correspond to programmatic levels within a programmatic or view
hierarchy of the application. For example, the lowest level view in which a touch is detected
may be called the hit view, and the set of events that are recognized as proper inputs may be
determined based, at least in part, on the hit view of the initial touch that begins a touch-based
gesture.
[0127]      Hit view determination module 272 receives information related to sub events of a
touch-based gesture. When an application has multiple views organized in a hierarchy, hit view
determination module 272 identifies a hit view as the lowest view in the hierarchy which should
handle the sub-event. In most circumstances, the hit view is the lowest level view in which an
initiating sub-event occurs (e.g., the first sub-event in the sequence of sub-events that form an
event or potential event). Once the hit view is identified by the hit view determination module
272, the hit view typically receives all sub-events related to the same touch or input source for
which it was identified as the hit view.
[0128]      Active event recognizer determination module 273 determines which view or views
within a view hierarchy should receive a particular sequence of sub-events. In some
embodiments, active event recognizer determination module 273 determines that only the hit
view should receive a particular sequence of sub-events. In other embodiments, active event
recognizer determination module 273 determines that all views that include the physical location
of a sub-event are actively involved views, and therefore determines that all actively involved
views should receive a particular sequence of sub-events. In other embodiments, even if touch
                                                   35

1002043087
sub-events were entirely confined to the area associated with one particular view, views higher in
the hierarchy would still remain as actively involved views.
[0129]      Event dispatcher module 274 dispatches the event information to an event recognizer
(e.g., event recognizer 280). In embodiments including active event recognizer determination
module 273, event dispatcher module 274 delivers the event information to an event recognizer
determined by active event recognizer determination module 273. In some embodiments, event
dispatcher module 274 stores in an event queue the event information, which is retrieved by a
respective event receiver 282.
[0130]      In some embodiments, operating system 226 includes event sorter 270. Alternatively,
application 236-1 includes event sorter 270. In yet other embodiments, event sorter 270 is a
stand-alone module, or a part of another module stored in memory 202, such as contact/motion
module 230.
[0131]      In some embodiments, application 236-1 includes a plurality of event handlers 290
and one or more application views 291, each of which includes instructions for handling touch
events that occur within a respective view of the application's user interface. Each application
view 291 of the application 236-1 includes one or more event recognizers 280. Typically, a
respective application view 291 includes a plurality of event recognizers 280. In other
embodiments, one or more of event recognizers 280 are part of a separate module, such as a user
interface kit (not shown) or a higher level object from which application 236-1 inherits methods
and other properties. In some embodiments, a respective event handler 290 includes one or more
of: data updater 276, object updater 277, GUI updater 278, and/or event data 279 received from
event sorter 270. Event handler 290 may utilize or call data updater 276, object updater 277, or
GUI updater 278 to update the application internal state 292. Alternatively, one or more of the
application views 291 include one or more respective event handlers 290. Also, in some
embodiments, one or more of data updater 276, object updater 277, and GUI updater 278 are
included in a respective application view 291.
[0132]      A respective event recognizer 280 receives event information (e.g., event data 279)
from event sorter 270 and identifies an event from the event information. Event recognizer 280
includes event receiver 282 and event comparator 284. In some embodiments, event recognizer
                                                 36

1002043087
280 also includes at least a subset of: metadata 283, and event delivery instructions 288 (which
may include sub-event delivery instructions).
[0133]       Event receiver 282 receives event information from event sorter 270. The event
information includes information about a sub-event, for example, a touch or a touch movement.
Depending on the sub-event, the event information also includes additional information, such as
location of the sub-event. When the sub-event concerns motion of a touch, the event information
may also include speed and direction of the sub-event. In some embodiments, events include
rotation of the device from one orientation to another (e.g., from a portrait orientation to a
landscape orientation, or vice versa), and the event information includes corresponding
information about the current orientation (also called device attitude) of the device.
[0134]       Event comparator 284 compares the event information to predefined event or sub
event definitions and, based on the comparison, determines an event or sub event, or determines
or updates the state of an event or sub-event. In some embodiments, event comparator 284
includes event definitions 286. Event definitions 286 contain definitions of events (e.g.,
predefined sequences of sub-events), for example, event 1 (287-1), event 2 (287-2), and others.
In some embodiments, sub-events in an event (287) include, for example, touch begin, touch
end, touch movement, touch cancellation, and multiple touching. In one example, the definition
for event 1 (287-1) is a double tap on a displayed object. The double tap, for example, comprises
a first touch (touch begin) on the displayed object for a predetermined phase, a first liftoff (touch
end) for a predetermined phase, a second touch (touch begin) on the displayed object for a
predetermined phase, and a second liftoff (touch end) for a predetermined phase. In another
example, the definition for event 2 (287-2) is a dragging on a displayed object. The dragging, for
example, comprises a touch (or contact) on the displayed object for a predetermined phase, a
movement of the touch across touch-sensitive display 212, and liftoff of the touch (touch end).
In some embodiments, the event also includes information for one or more associated event
handlers 290.
[0135]       In some embodiments, event definition 287 includes a definition of an event for a
respective user-interface object. In some embodiments, event comparator 284 performs a hit test
to determine which user-interface object is associated with a sub-event. For example, in an
                                                 37

1002043087
application view in which three user-interface objects are displayed on touch-sensitive display
212, when a touch is detected on touch-sensitive display 212, event comparator 284 performs a
hit test to determine which of the three user-interface objects is associated with the touch (sub
event). If each displayed object is associated with a respective event handler 290, the event
comparator uses the result of the hit test to determine which event handler 290 should be
activated. For example, event comparator 284 selects an event handler associated with the sub
event and the object triggering the hit test.
[0136]       In some embodiments, the definition for a respective event (287) also includes
delayed actions that delay delivery of the event information until after it has been determined
whether the sequence of sub-events does or does not correspond to the event recognizer's event
type.
[0137]       When a respective event recognizer 280 determines that the series of sub-events do
not match any of the events in event definitions 286, the respective event recognizer 280 enters
an event impossible, event failed, or event ended state, after which it disregards subsequent sub
events of the touch-based gesture. In this situation, other event recognizers, if any, that remain
active for the hit view continue to track and process sub-events of an ongoing touch-based
gesture.
[0138]       In some embodiments, a respective event recognizer 280 includes metadata 283 with
configurable properties, flags, and/or lists that indicate how the event delivery system should
perform sub-event delivery to actively involved event recognizers. In some embodiments,
metadata 283 includes configurable properties, flags, and/or lists that indicate how event
recognizers may interact, or are enabled to interact, with one another. In some embodiments,
metadata 283 includes configurable properties, flags, and/or lists that indicate whether sub
events are delivered to varying levels in the view or programmatic hierarchy.
[0139]       In some embodiments, a respective event recognizer 280 activates event handler 290
associated with an event when one or more particular sub-events of an event are recognized. In
some embodiments, a respective event recognizer 280 delivers event information associated with
the event to event handler 290. Activating an event handler 290 is distinct from sending (and
deferred sending) sub-events to a respective hit view. In some embodiments, event recognizer
                                                   38

1002043087
280 throws a flag associated with the recognized event, and event handler 290 associated with
the flag catches the flag and performs a predefined process.
[0140]      In some embodiments, event delivery instructions 288 include sub-event delivery
instructions that deliver event information about a sub-event without activating an event handler.
Instead, the sub-event delivery instructions deliver event information to event handlers
associated with the series of sub-events or to actively involved views. Event handlers associated
with the series of sub-events or with actively involved views receive the event information and
perform a predetermined process.
[0141]      In some embodiments, data updater 276 creates and updates data used in application
236-1. For example, data updater 276 updates the telephone number used in contacts module
237, or stores a video file used in video player module. In some embodiments, object updater
277 creates and updates objects used in application 236-1. For example, object updater 277
creates a new user-interface object or updates the position of a user-interface object. GUI
updater 278 updates the GUI. For example, GUI updater 278 prepares display information and
sends it to graphics module 232 for display on a touch-sensitive display.
[0142]      In some embodiments, event handler(s) 290 includes or has access to data updater
276, object updater 277, and GUI updater 278. In some embodiments, data updater 276, object
updater 277, and GUI updater 278 are included in a single module of a respective application
236-1 or application view 291. In other embodiments, they are included in two or more software
modules.
[0143]      It shall be understood that the foregoing discussion regarding event handling of user
touches on touch-sensitive displays also applies to other forms of user inputs to operate
multifunction devices 200 with input devices, not all of which are initiated on touch screens. For
example, mouse movement and mouse button presses, optionally coordinated with single or
multiple keyboard presses or holds; contact movements such as taps, drags, scrolls, etc. on
touchpads; pen stylus inputs; movement of the device; oral instructions; detected eye
movements; biometric inputs; and/or any combination thereof are optionally utilized as inputs
corresponding to sub-events which define an event to be recognized.
                                                  39

1002043087
[0144]      FIG. 3 illustrates a portable multifunction device 200 having a touch screen 212 in
accordance with some embodiments. The touch screen optionally displays one or more graphics
within user interface (UI) 300. In this embodiment, as well as others described below, a user is
enabled to select one or more of the graphics by making a gesture on the graphics, for example,
with one or more fingers 302 (not drawn to scale in the figure) or one or more styluses 303 (not
drawn to scale in the figure). In some embodiments, selection of one or more graphics occurs
when the user breaks contact with the one or more graphics. In some embodiments, the gesture
optionally includes one or more taps, one or more swipes (from left to right, right to left, upward
and/or downward), and/or a rolling of a finger (from right to left, left to right, upward and/or
downward) that has made contact with device 200. In some implementations or circumstances,
inadvertent contact with a graphic does not select the graphic. For example, a swipe gesture that
sweeps over an application icon optionally does not select the corresponding application when
the gesture corresponding to selection is a tap.
[0145]      Device 200 may also include one or more physical buttons, such as "home" or menu
button 304. As described previously, menu button 304 may be used to navigate to any
application 236 in a set of applications that may be executed on device 200. Alternatively, in
some embodiments, the menu button is implemented as a soft key in a GUI displayed on touch
screen 212.
[0146]      In one embodiment, device 200 includes touch screen 212, menu button 304, push
button 306 for powering the device on/off and locking the device, volume adjustment button(s)
308, subscriber identity module (SIM) card slot 310, headset jack 312, and docking/charging
external port 224. Push button 306 is, optionally, used to turn the power on/off on the device by
depressing the button and holding the button in the depressed state for a predefined time interval;
to lock the device by depressing the button and releasing the button before the predefined time
interval has elapsed; and/or to unlock the device or initiate an unlock process. In an alternative
embodiment, device 200 also accepts verbal input for activation or deactivation of some
functions through microphone 213. Device 200 also, optionally, includes one or more contact
intensity sensors 265 for detecting intensity of contacts on touch screen 212 and/or one or more
tactile output generators 267 for generating tactile outputs for a user of device 200.
                                                  40

1002043087
[0147]       FIG. 4 is a block diagram of an exemplary multifunction device with a display and a
touch-sensitive surface in accordance with some embodiments. Device 400 need not be portable.
In some embodiments, device 400 is a laptop computer, a desktop computer, a tablet computer, a
multimedia player device, a navigation device, an educational device (such as a child's learning
toy), a gaming system, or a control device (e.g., a home or industrial controller). Device 400
typically includes one or more processing units (CPUs) 410, one or more network or other
communications interfaces 460, memory 470, and one or more communication buses 420 for
interconnecting these components. Communication buses 420 optionally include circuitry
(sometimes called a chipset) that interconnects and controls communications between system
components. Device 400 includes input/output (1/0) interface 430 comprising display 440,
which is typically a touch screen display. I/O interface 430 also optionally includes a keyboard
and/or mouse (or other pointing device) 450 and touchpad 455, tactile output generator 457 for
generating tactile outputs on device 400 (e.g., similar to tactile output generator(s) 267 described
above with reference to FIG. 2A), sensors 459 (e.g., optical, acceleration, proximity, touch
sensitive, and/or contact intensity sensors similar to contact intensity sensor(s) 265 described
above with reference to FIG. 2A). Memory 470 includes high-speed random access memory,
such as DRAM, SRAM, DDR RAM, or other random access solid state memory devices; and
optionally includes non-volatile memory, such as one or more magnetic disk storage devices,
optical disk storage devices, flash memory devices, or other non-volatile solid state storage
devices. Memory 470 optionally includes one or more storage devices remotely located from
CPU(s) 410. In some embodiments, memory 470 stores programs, modules, and data structures
analogous to the programs, modules, and data structures stored in memory 202 of portable
multifunction device 200 (FIG. 2A), or a subset thereof. Furthermore, memory 470 optionally
stores additional programs, modules, and data structures not present in memory 202 of portable
multifunction device 200. For example, memory 470 of device 400 optionally stores drawing
module 480, presentation module 482, word processing module 484, website creation module
486, disk authoring module 488, and/or spreadsheet module 490, while memory 202 of portable
multifunction device 200 (FIG. 2A) optionally does not store these modules.
[0148]       Each of the above-identified elements in FIG. 4 may be stored in one or more of the
previously mentioned memory devices. Each of the above-identified modules corresponds to a
set of instructions for performing a function described above. The above-identified modules or
                                                 41

1002043087
programs (e.g., sets of instructions) need not be implemented as separate software programs,
procedures, or modules, and thus various subsets of these modules may be combined or
otherwise rearranged in various embodiments. In some embodiments, memory 470 may store a
subset of the modules and data structures identified above. Furthermore, memory 470 may store
additional modules and data structures not described above.
[0149]       Attention is now directed towards embodiments of user interfaces that may be
implemented on, for example, portable multifunction device 200.
[0150]       FIG. 5A illustrates an exemplary user interface for a menu of applications on portable
multifunction device 200 in accordance with some embodiments. Similar user interfaces may be
implemented on device 400. In some embodiments, user interface 500 includes the following
elements, or a subset or superset thereof:
    *     Signal strength indicator(s) 502 for wireless communication(s), such as cellular and Wi
         Fi signals;
    *    Time 504;
    *    Bluetooth indicator 505;
    *    Battery status indicator 506;
    *    Tray 508 with icons for frequently used applications, such as:
              o  Icon 516 for telephone module 238, labeled "Phone," which optionally includes
                 an indicator 514 of the number of missed calls or voicemail messages;
              o  Icon 518 for email client module 240, labeled "Mail," which optionally includes
                 an indicator 510 of the number of unread emails;
              o  Icon 520 for browser module 247, labeled "Browser;" and
              o  Icon 522 for video and music player module 252, also referred to as iPod
                 (trademark of Apple Inc.) module 252, labeled "iPod;" and
                                                   42

1002043087
    e    Icons for other applications, such as:
             o   Icon 524 for IM module 241, labeled "Messages;"
             o   Icon 526 for calendar module 248, labeled "Calendar;"
             o   Icon 528 for image management module 244, labeled "Photos;"
             o   Icon 530 for camera module 243, labeled "Camera;"
             o   Icon 532 for online video module 255, labeled "Online Video;"
             o   Icon 534 for stocks widget 249-2, labeled "Stocks;"
             o   Icon 536 for map module 254, labeled "Maps;"
             o   Icon 538 for weather widget 249-1, labeled "Weather;"
             o   Icon 540 for alarm clock widget 249-4, labeled "Clock;"
             o   Icon 542 for workout support module 242, labeled "Workout Support;"
             o   Icon 544 for notes module 253, labeled "Notes;" and
             o   Icon 546 for a settings application or module, labeled "Settings," which provides
                 access to settings for device 200 and its various applications 236.
[0151]       It should be noted that the icon labels illustrated in FIG. 5A are merely exemplary.
For example, icon 522 for video and music player module 252 may optionally be labeled
"Music" or "Music Player." Other labels are, optionally, used for various application icons. In
some embodiments, a label for a respective application icon includes a name of an application
corresponding to the respective application icon. In some embodiments, a label for a particular
application icon is distinct from a name of an application corresponding to the particular
application icon.
[0152]       FIG. 5B illustrates an exemplary user interface on a device (e.g., device 400, FIG. 4)
with a touch-sensitive surface 551 (e.g., a tablet or touchpad 455, FIG. 4) that is separate from
                                                   43

1002043087
the display 550 (e.g., touch screen display 212). Device 400 also, optionally, includes one or
more contact intensity sensors (e.g., one or more of sensors 457) for detecting intensity of
contacts on touch-sensitive surface 551 and/or one or more tactile output generators 459 for
generating tactile outputs for a user of device 400.
[0153]      Although some of the examples which follow will be given with reference to inputs
on touch screen display 212 (where the touch-sensitive surface and the display are combined), in
some embodiments, the device detects inputs on a touch-sensitive surface that is separate from
the display, as shown in FIG. 5B. In some embodiments, the touch-sensitive surface (e.g., 551 in
FIG. 5B) has a primary axis (e.g., 552 in FIG. 5B) that corresponds to a primary axis (e.g., 553 in
FIG. 5B) on the display (e.g., 550). In accordance with these embodiments, the device detects
contacts (e.g., 560 and 562 in FIG. 5B) with the touch-sensitive surface 551 at locations that
correspond to respective locations on the display (e.g., in FIG. 5B, 560 corresponds to 568 and
562 corresponds to 570). In this way, user inputs (e.g., contacts 560 and 562, and movements
thereof) detected by the device on the touch-sensitive surface (e.g., 551 in FIG. 5B) are used by
the device to manipulate the user interface on the display (e.g., 550 in FIG. 5B) of the
multifunction device when the touch-sensitive surface is separate from the display. It should be
understood that similar methods are, optionally, used for other user interfaces described herein.
[0154]      Additionally, while the following examples are given primarily with reference to
finger inputs (e.g., finger contacts, finger tap gestures, finger swipe gestures), it should be
understood that, in some embodiments, one or more of the finger inputs are replaced with input
from another input device (e.g., a mouse-based input or stylus input). For example, a swipe
gesture is, optionally, replaced with a mouse click (e.g., instead of a contact) followed by
movement of the cursor along the path of the swipe (e.g., instead of movement of the contact).
As another example, a tap gesture is, optionally, replaced with a mouse click while the cursor is
located over the location of the tap gesture (e.g., instead of detection of the contact followed by
ceasing to detect the contact). Similarly, when multiple user inputs are simultaneously detected,
it should be understood that multiple computer mice are, optionally, used simultaneously, or a
mouse and finger contacts are, optionally, used simultaneously.
                                                   44

1002043087
[0155]      FIG. 6A illustrates exemplary personal electronic device 600. Device 600 includes
body 602. In some embodiments, device 600 can include some or all of the features described
with respect to devices 200 and 400 (e.g., FIGS. 2A-4B). In some embodiments, device 600 has
touch-sensitive display screen 604, hereafter touch screen 604. Alternatively, or in addition to
touch screen 604, device 600 has a display and a touch-sensitive surface. As with devices 200
and 400, in some embodiments, touch screen 604 (or the touch-sensitive surface) may have one
or more intensity sensors for detecting intensity of contacts (e.g., touches) being applied. The
one or more intensity sensors of touch screen 604 (or the touch-sensitive surface) can provide
output data that represents the intensity of touches. The user interface of device 600 can respond
to touches based on their intensity, meaning that touches of different intensities can invoke
different user interface operations on device 600.
[0156]      Techniques for detecting and processing touch intensity may be found, for example,
in related applications: International Patent Application Serial No. PCT/US2013/040061, titled
"Device, Method, and Graphical User Interface for Displaying User Interface Objects
Corresponding to an Application," filed May 8, 2013, and International Patent Application Serial
No. PCT/US2013/069483, titled "Device, Method, and Graphical User Interface for
Transitioning Between Touch Input to Display Output Relationships," filed November 11, 2013,
each of which is hereby incorporated by reference in their entirety.
[0157]      In some embodiments, device 600 has one or more input mechanisms 606 and 608.
Input mechanisms 606 and 608, if included, can be physical. Examples of physical input
mechanisms include push buttons and rotatable mechanisms. In some embodiments, device 600
has one or more attachment mechanisms. Such attachment mechanisms, if included, can permit
attachment of device 600 with, for example, hats, eyewear, earrings, necklaces, shirts, jackets,
bracelets, watch straps, chains, trousers, belts, shoes, purses, backpacks, and so forth. These
attachment mechanisms may permit device 600 to be worn by a user.
[0158]      FIG. 6B depicts exemplary personal electronic device 600. In some embodiments,
device 600 can include some or all of the components described with respect to FIGS. 2A, 2B,
and 4. Device 600 has bus 612 that operatively couples 1/0 section 614 with one or more
computer processors 616 and memory 618. I/O section 614 can be connected to display 604,
                                                   45

1002043087
which can have touch-sensitive component 622 and, optionally, touch-intensity sensitive
component 624. In addition, I/O section 614 can be connected with communication unit 630 for
receiving application and operating system data, using Wi-Fi, Bluetooth, near field
communication (NFC), cellular, and/or other wireless communication techniques. Device 600
can include input mechanisms 606 and/or 608. Input mechanism 606 may be a rotatable input
device or a depressible and rotatable input device, for example. Input mechanism 608 may be a
button, in some examples.
[0159]      Input mechanism 608 may be a microphone, in some examples. Personal electronic
device 600 can include various sensors, such as GPS sensor 632, accelerometer 634, directional
sensor 640 (e.g., compass), gyroscope 636, motion sensor 638, and/or a combination thereof, all
of which can be operatively connected to I/O section 614.
[0160]      Memory 618 of personal electronic device 600 can be a non-transitory computer
readable storage medium, for storing computer-executable instructions, which, when executed by
one or more computer processors 616, for example, can cause the computer processors to
perform the techniques described below, including processes 800-900 (FIGS. 8-9). The
computer-executable instructions can also be stored and/or transported within any non-transitory
computer-readable storage medium for use by or in connection with an instruction execution
system, apparatus, or device, such as a computer-based system, processor-containing system, or
other system that can fetch the instructions from the instruction execution system, apparatus, or
device and execute the instructions. Personal electronic device 600 is not limited to the
components and configuration of FIG. 6B, but can include other or additional components in
multiple configurations.
[0161]      As used here, the term "affordance" refers to a user-interactive graphical user
interface object that may be displayed on the display screen of devices 200, 400, and/or 600
(FIGS. 2, 4, and 6). For example, an image (e.g., icon), a button, and text (e.g., link) may each
constitute an affordance.
[0162]      As used herein, the term "focus selector" refers to an input element that indicates a
current part of a user interface with which a user is interacting. In some implementations that
include a cursor or other location marker, the cursor acts as a "focus selector" so that when an
                                                 46

1002043087
input (e.g., a press input) is detected on a touch-sensitive surface (e.g., touchpad 455 in FIG. 4 or
touch-sensitive surface 551 in FIG. 5B) while the cursor is over a particular user interface
element (e.g., a button, window, slider or other user interface element), the particular user
interface element is adjusted in accordance with the detected input. In some implementations
that include a touch screen display (e.g., touch-sensitive display system 212 in FIG. 2A or touch
screen 212 in FIG. 5A) that enables direct interaction with user interface elements on the touch
screen display, a detected contact on the touch screen acts as a "focus selector" so that when an
input (e.g., a press input by the contact) is detected on the touch screen display at a location of a
particular user interface element (e.g., a button, window, slider, or other user interface element),
the particular user interface element is adjusted in accordance with the detected input. In some
implementations, focus is moved from one region of a user interface to another region of the user
interface without corresponding movement of a cursor or movement of a contact on a touch
screen display (e.g., by using a tab key or arrow keys to move focus from one button to another
button); in these implementations, the focus selector moves in accordance with movement of
focus between different regions of the user interface. Without regard to the specific form taken
by the focus selector, the focus selector is generally the user interface element (or contact on a
touch screen display) that is controlled by the user so as to communicate the user's intended
interaction with the user interface (e.g., by indicating, to the device, the element of the user
interface with which the user is intending to interact). For example, the location of a focus
selector (e.g., a cursor, a contact, or a selection box) over a respective button while a press input
is detected on the touch-sensitive surface (e.g., a touchpad or touch screen) will indicate that the
user is intending to activate the respective button (as opposed to other user interface elements
shown on a display of the device).
[0163]       As used in the specification and claims, the term "characteristic intensity" of a contact
refers to a characteristic of the contact based on one or more intensities of the contact. In some
embodiments, the characteristic intensity is based on multiple intensity samples. The
characteristic intensity is, optionally, based on a predefined number of intensity samples, or a set
of intensity samples collected during a predetermined time period (e.g., 0.05, 0.1, 0.2, 0.5, 1, 2,
5, 10 seconds) relative to a predefined event (e.g., after detecting the contact, prior to detecting
liftoff of the contact, before or after detecting a start of movement of the contact, prior to
detecting an end of the contact, before or after detecting an increase in intensity of the contact,
                                                    47

1002043087
and/or before or after detecting a decrease in intensity of the contact). A characteristic intensity
of a contact is, optionally based on one or more of: a maximum value of the intensities of the
contact, a mean value of the intensities of the contact, an average value of the intensities of the
contact, a top 10 percentile value of the intensities of the contact, a value at the half maximum of
the intensities of the contact, a value at the 90 percent maximum of the intensities of the contact,
or the like. In some embodiments, the duration of the contact is used in determining the
characteristic intensity (e.g., when the characteristic intensity is an average of the intensity of the
contact over time). In some embodiments, the characteristic intensity is compared to a set of one
or more intensity thresholds to determine whether an operation has been performed by a user.
For example, the set of one or more intensity thresholds may include a first intensity threshold
and a second intensity threshold. In this example, a contact with a characteristic intensity that
does not exceed the first threshold results in a first operation, a contact with a characteristic
intensity that exceeds the first intensity threshold and does not exceed the second intensity
threshold results in a second operation, and a contact with a characteristic intensity that exceeds
the second threshold results in a third operation. In some embodiments, a comparison between
the characteristic intensity and one or more thresholds is used to determine whether or not to
perform one or more operations (e.g., whether to perform a respective operation or forgo
performing the respective operation) rather than being used to determine whether to perform a
first operation or a second operation.
[0164]       In some embodiments, a portion of a gesture is identified for purposes of determining
a characteristic intensity. For example, a touch-sensitive surface may receive a continuous swipe
contact transitioning from a start location and reaching an end location, at which point the
intensity of the contact increases. In this example, the characteristic intensity of the contact at
the end location may be based on only a portion of the continuous swipe contact, and not the
entire swipe contact (e.g., only the portion of the swipe contact at the end location). In some
embodiments, a smoothing algorithm may be applied to the intensities of the swipe contact prior
to determining the characteristic intensity of the contact. For example, the smoothing algorithm
optionally includes one or more of: an unweighted sliding-average smoothing algorithm, a
triangular smoothing algorithm, a median filter smoothing algorithm, and/or an exponential
smoothing algorithm. In some circumstances, these smoothing algorithms eliminate narrow
                                                   48

1002043087
spikes or dips in the intensities of the swipe contact for purposes of determining a characteristic
intensity.
[0165]      The intensity of a contact on the touch-sensitive surface may be characterized relative
to one or more intensity thresholds, such as a contact-detection intensity threshold, a light press
intensity threshold, a deep press intensity threshold, and/or one or more other intensity
thresholds. In some embodiments, the light press intensity threshold corresponds to an intensity
at which the device will perform operations typically associated with clicking a button of a
physical mouse or a trackpad. In some embodiments, the deep press intensity threshold
corresponds to an intensity at which the device will perform operations that are different from
operations typically associated with clicking a button of a physical mouse or a trackpad. In some
embodiments, when a contact is detected with a characteristic intensity below the light press
intensity threshold (e.g., and above a nominal contact-detection intensity threshold below which
the contact is no longer detected), the device will move a focus selector in accordance with
movement of the contact on the touch-sensitive surface without performing an operation
associated with the light press intensity threshold or the deep press intensity threshold.
Generally, unless otherwise stated, these intensity thresholds are consistent between different
sets of user interface figures.
[0166]      An increase of characteristic intensity of the contact from an intensity below the light
press intensity threshold to an intensity between the light press intensity threshold and the deep
press intensity threshold is sometimes referred to as a "light press" input. An increase of
characteristic intensity of the contact from an intensity below the deep press intensity threshold
to an intensity above the deep press intensity threshold is sometimes referred to as a "deep press"
input. An increase of characteristic intensity of the contact from an intensity below the contact
detection intensity threshold to an intensity between the contact-detection intensity threshold and
the light press intensity threshold is sometimes referred to as detecting the contact on the touch
surface. A decrease of characteristic intensity of the contact from an intensity above the contact
detection intensity threshold to an intensity below the contact-detection intensity threshold is
sometimes referred to as detecting liftoff of the contact from the touch-surface. In some
embodiments, the contact-detection intensity threshold is zero. In some embodiments, the
contact-detection intensity threshold is greater than zero.
                                                  49

1002043087
[0167]      In some embodiments described herein, one or more operations are performed in
response to detecting a gesture that includes a respective press input or in response to detecting
the respective press input performed with a respective contact (or a plurality of contacts), where
the respective press input is detected based at least in part on detecting an increase in intensity of
the contact (or plurality of contacts) above a press-input intensity threshold. In some
embodiments, the respective operation is performed in response to detecting the increase in
intensity of the respective contact above the press-input intensity threshold (e.g., a "down stroke"
of the respective press input). In some embodiments, the press input includes an increase in
intensity of the respective contact above the press-input intensity threshold and a subsequent
decrease in intensity of the contact below the press-input intensity threshold, and the respective
operation is performed in response to detecting the subsequent decrease in intensity of the
respective contact below the press-input threshold (e.g., an "up stroke" of the respective press
input).
[0168]      In some embodiments, the device employs intensity hysteresis to avoid accidental
inputs sometimes termed "jitter," where the device defines or selects a hysteresis intensity
threshold with a predefined relationship to the press-input intensity threshold (e.g., the hysteresis
intensity threshold is X intensity units lower than the press-input intensity threshold or the
hysteresis intensity threshold is 75%, 90%, or some reasonable proportion of the press-input
intensity threshold). Thus, in some embodiments, the press input includes an increase in
intensity of the respective contact above the press-input intensity threshold and a subsequent
decrease in intensity of the contact below the hysteresis intensity threshold that corresponds to
the press-input intensity threshold, and the respective operation is performed in response to
detecting the subsequent decrease in intensity of the respective contact below the hysteresis
intensity threshold (e.g., an "up stroke" of the respective press input). Similarly, in some
embodiments, the press input is detected only when the device detects an increase in intensity of
the contact from an intensity at or below the hysteresis intensity threshold to an intensity at or
above the press-input intensity threshold and, optionally, a subsequent decrease in intensity of
the contact to an intensity at or below the hysteresis intensity, and the respective operation is
performed in response to detecting the press input (e.g., the increase in intensity of the contact or
the decrease in intensity of the contact, depending on the circumstances).
                                                  50

1002043087
[0169]      For ease of explanation, the descriptions of operations performed in response to a
press input associated with a press-input intensity threshold or in response to a gesture including
the press input are, optionally, triggered in response to detecting either: an increase in intensity
of a contact above the press-input intensity threshold, an increase in intensity of a contact from
an intensity below the hysteresis intensity threshold to an intensity above the press-input
intensity threshold, a decrease in intensity of the contact below the press-input intensity
threshold, and/or a decrease in intensity of the contact below the hysteresis intensity threshold
corresponding to the press-input intensity threshold. Additionally, in examples where an
operation is described as being performed in response to detecting a decrease in intensity of a
contact below the press-input intensity threshold, the operation is, optionally, performed in
response to detecting a decrease in intensity of the contact below a hysteresis intensity threshold
corresponding to, and lower than, the press-input intensity threshold.
3.          Digital Assistant System
[0170]      FIG. 7A illustrates a block diagram of digital assistant system 700 in accordance with
various examples. In some examples, digital assistant system 700 can be implemented on a
standalone computer system. In some examples, digital assistant system 700 can be distributed
across multiple computers. In some examples, some of the modules and functions of the digital
assistant can be divided into a server portion and a client portion, where the client portion resides
on one or more user devices (e.g., devices 104, 122, 200, 400, or 600) and communicates with
the server portion (e.g., server system 108) through one or more networks, e.g., as shown in FIG.
1. In some examples, digital assistant system 700 can be an implementation of server system
108 (and/or DA server 106) shown in FIG. 1. It should be noted that digital assistant system 700
is only one example of a digital assistant system, and that digital assistant system 700 can have
more or fewer components than shown, may combine two or more components, or may have a
different configuration or arrangement of the components. The various components shown in
FIG. 7A can be implemented in hardware, software instructions for execution by one or more
processors, firmware, including one or more signal processing and/or application specific
integrated circuits, or a combination thereof.
                                                  51

1002043087
[0171]       Digital assistant system 700 can include memory 702, one or more processors 704,
input/output (1/0) interface 706, and network communications interface 708. These components
can communicate with one another over one or more communication buses or signal lines 710.
[0172]       In some examples, memory 702 can include a non-transitory computer-readable
medium, such as high-speed random access memory and/or a non-volatile computer-readable
storage medium (e.g., one or more magnetic disk storage devices, flash memory devices, or other
non-volatile solid-state memory devices).
[0173]       In some examples, 11O interface 706 can couple input/output devices 716 of digital
assistant system 700, such as displays, keyboards, touch screens, and microphones, to user
interface module 722. I/O interface 706, in conjunction with user interface module 722, can
receive user inputs (e.g., voice input, keyboard inputs, touch inputs, etc.) and processes them
accordingly. In some examples, e.g., when the digital assistant is implemented on a standalone
user device, digital assistant system 700 can include any of the components and I/O
communication interfaces described with respect to devices 200, 400, or 600 in FIGs. 2A, 4, 6A
B, respectively. In some examples, digital assistant system 700 can represent the server portion
of a digital assistant implementation, and can interact with the user through a client-side portion
residing on a user device (e.g., devices 104, 200, 400, or 600).
[0174]       In some examples, the network communications interface 708 can include wired
communication port(s) 712 and/or wireless transmission and reception circuitry 714. The wired
communication port(s) can receive and send communication signals via one or more wired
interfaces, e.g., Ethernet, Universal Serial Bus (USB), FIREWIRE, etc. The wireless circuitry
714 can receive and send RF signals and/or optical signals from/to communications networks
and other communications devices. The wireless communications can use any of a plurality of
communications standards, protocols, and technologies, such as GSM, EDGE, CDMA, TDMA,
Bluetooth, Wi-Fi, VoIP, Wi-MAX, or any other suitable communication protocol. Network
communications interface 708 can enable communication between digital assistant system 700
with networks, such as the Internet, an intranet, and/or a wireless network, such as a cellular
telephone network, a wireless local area network (LAN), and/or a metropolitan area network
(MAN), and other devices.
                                                  52

1002043087
[0175]      In some examples, memory 702, or the computer-readable storage media of memory
702, can store programs, modules, instructions, and data structures including all or a subset of:
operating system 718, communications module 720, user interface module 722, one or more
applications 724, and digital assistant module 726. In particular, memory 702, or the computer
readable storage media of memory 702, can store instructions for performing processes 800, 900,
described below. One or more processors 704 can execute these programs, modules, and
instructions, and reads/writes from/to the data structures.
[0176]      Operating system 718 (e.g., Darwin, RTXC, LINUX, UNIX, iOS, OS X,
WINDOWS, or an embedded operating system such as VxWorks) can include various software
components and/or drivers for controlling and managing general system tasks (e.g., memory
management, storage device control, power management, etc.) and facilitates communications
between various hardware, firmware, and software components.
[0177]      Communications module 720 can facilitate communications between digital assistant
system 700 with other devices over network communications interface 708. For example,
communications module 720 can communicate with RF circuitry 208 of electronic devices such
as devices 200, 400, and 600 shown in FIG. 2A, 4, 6A-B, respectively. Communications module
720 can also include various components for handling data received by wireless circuitry 714
and/or wired communications port 712.
[0178]      User interface module 722 can receive commands and/or inputs from a user via 1/0
interface 706 (e.g., from a keyboard, touch screen, pointing device, controller, and/or
microphone), and generate user interface objects on a display. User interface module 722 can
also prepare and deliver outputs (e.g., speech, sound, animation, text, icons, vibrations, haptic
feedback, light, etc.) to the user via the 1/0 interface 706 (e.g., through displays, audio channels,
speakers, touch-pads, etc.).
[0179]      Applications 724 can include programs and/or modules that are configured to be
executed by one or more processors 704. For example, if the digital assistant system is
implemented on a standalone user device, applications 724 can include user applications, such as
games, a calendar application, a navigation application, or an email application. If digital
                                                   53

1002043087
assistant system 700 is implemented on a server, applications 724 can include resource
management applications, diagnostic applications, or scheduling applications, for example.
[0180]       Memory 702 can also store digital assistant module 726 (or the server portion of a
digital assistant). In some examples, digital assistant module 726 can include the following sub
modules, or a subset or superset thereof: input/output processing module 728, speech-to-text
(STT) processing module 730, natural language processing module 732, dialogue flow
processing module 734, task flow processing module 736, service processing module 738, and
speech synthesis module 740. Each of these modules can have access to one or more of the
following systems or data and models of the digital assistant module 726, or a subset or superset
thereof: ontology 760, vocabulary index 744, user data 748, task flow models 754, service
models 756, and ASR systems.
[0181]       In some examples, using the processing modules, data, and models implemented in
digital assistant module 726, the digital assistant can perform at least some of the following:
converting speech input into text; identifying a user's intent expressed in a natural language input
received from the user; actively eliciting and obtaining information needed to fully infer the
user's intent (e.g., by disambiguating words, games, intentions, etc.); determining the task flow
for fulfilling the inferred intent; and executing the task flow to fulfill the inferred intent.
[0182]       In some examples, as shown in FIG. 7B, I/O processing module 728 can interact with
the user through I/O devices 716 in FIG. 7A or with a user device (e.g., devices 104, 200, 400, or
600) through network communications interface 708 in FIG. 7A to obtain user input (e.g., a
speech input) and to provide responses (e.g., as speech outputs) to the user input. 1/0 processing
module 728 can optionally obtain contextual information associated with the user input from the
user device, along with or shortly after the receipt of the user input. The contextual information
can include user-specific data, vocabulary, and/or preferences relevant to the user input. In some
examples, the contextual information also includes software and hardware states of the user
device at the time the user request is received, and/or information related to the surrounding
environment of the user at the time that the user request was received. In some examples, 1/0
processing module 728 can also send follow-up questions to, and receive answers from, the user
regarding the user request. When a user request is received by I/O processing module 728 and
                                                   54

1002043087
the user request can include speech input, I/O processing module 728 can forward the speech
input to STT processing module 730 (or speech recognizer) for speech-to-text conversions.
[0183]       STT processing module 730 can include one or more ASR systems. The one or more
ASR systems can process the speech input that is received through I/O processing module 728 to
produce a recognition result. Each ASR system can include a front-end speech pre-processor.
The front-end speech pre-processor can extract representative features from the speech input.
For example, the front-end speech pre-processor can perform a Fourier transform on the speech
input to extract spectral features that characterize the speech input as a sequence of
representative multi-dimensional vectors. Further, each ASR system can include one or more
speech recognition models (e.g., acoustic models and/or language models) and can implement
one or more speech recognition engines. Examples of speech recognition models can include
Hidden Markov Models, Gaussian-Mixture Models, Deep Neural Network Models, n-gram
language models, and other statistical models. Examples of speech recognition engines can
include the dynamic time warping based engines and weighted finite-state transducers (WFST)
based engines. The one or more speech recognition models and the one or more speech
recognition engines can be used to process the extracted representative features of the front-end
speech pre-processor to produce intermediate recognitions results (e.g., phonemes, phonemic
strings, and sub-words), and ultimately, text recognition results (e.g., words, word strings, or
sequence of tokens). In some examples, the speech input can be processed at least partially by a
third-party service or on the user's device (e.g., device 104, 200, 400, or 600) to produce the
recognition result. Once STT processing module 730 produces recognition results containing a
text string (e.g., words, or sequence of words, or sequence of tokens), the recognition result can
be passed to natural language processing module 732 for intent deduction.
[0184]       More details on the speech-to-text processing are described in U.S. Utility
Application Serial No. 13/236,942 for "Consolidating Speech Recognition Results," filed on
September 20, 2011, the entire disclosure of which is incorporated herein by reference.
[0185]       In some examples, STT processing module 730 can include and/or access a
vocabulary of recognizable words via phonetic alphabet conversion module 731. Each
vocabulary word can be associated with one or more candidate pronunciations of the word
                                                   55

1002043087
represented in a speech recognition phonetic alphabet. In particular, the vocabulary of
recognizable words can include a word that is associated with a plurality of candidate
pronunciations. For example, the vocabulary may include the word "tomato" that is associated
with the candidate pronunciations of /tmeifoo/ and /to'matoo/. Further, vocabulary words can
be associated with custom candidate pronunciations that are based on previous speech inputs
from the user. Such custom candidate pronunciations can be stored in STT processing module
730 and can be associated with a particular user via the user's profile on the device. In some
examples, the candidate pronunciations for words can be determined based on the spelling of the
word and one or more linguistic and/or phonetic rules. In some examples, the candidate
pronunciations can be manually generated, e.g., based on known canonical pronunciations.
[0186]      In some examples, the candidate pronunciations can be ranked based on the
commonness of the candidate pronunciation. For example, the candidate pronunciation
/ta'meifoo/ can be ranked higher than /to'matoo/, because the former is a more commonly used
pronunciation (e.g., among all users, for users in a particular geographical region, or for any
other appropriate subset of users). In some examples, candidate pronunciations can be ranked
based on whether the candidate pronunciation is a custom candidate pronunciation associated
with the user. For example, custom candidate pronunciations can be ranked higher than
canonical candidate pronunciations. This can be useful for recognizing proper nouns having a
unique pronunciation that deviates from canonical pronunciation. In some examples, candidate
pronunciations can be associated with one or more speech characteristics, such as geographic
origin, nationality, or ethnicity. For example, the candidate pronunciation /to'meifoo/ can be
associated with the United States, whereas the candidate pronunciation /to'matoo/ can be
associated with Great Britain. Further, the rank of the candidate pronunciation can be based on
one or more characteristics (e.g., geographic origin, nationality, ethnicity, etc.) of the user stored
in the user's profile on the device. For example, it can be determined from the user's profile that
the user is associated with the United States. Based on the user being associated with the United
States, the candidate pronunciation /to'meifoo/ (associated with the United States) can be ranked
higher than the candidate pronunciation /ta'mcatoo/ (associated with Great Britain). In some
examples, one of the ranked candidate pronunciations can be selected as a predicted
pronunciation (e.g., the most likely pronunciation).
                                                 56

1002043087
[0187]       When a speech input is received, STT processing module 730 can be used to
determine the phonemes corresponding to the speech input (e.g., using an acoustic model), and
then attempt to determine words that match the phonemes (e.g., using a language model). For
example, if STT processing module 730 can first identify the sequence of phonemes /to'meifoo/
corresponding to a portion of the speech input, it can then determine, based on vocabulary index
744, that this sequence corresponds to the word "tomato."
[0188]       In some examples, STT processing module 730 can use approximate matching
techniques to determine words in an utterance. Thus, for example, the STT processing module
730 can determine that the sequence of phonemes /to'meifoo/ corresponds to the word "tomato,"
even if that particular sequence of phonemes is not one of the candidate sequence of phonemes
for that word.
[0189]       Natural language processing module 732 ("natural language processor") of the digital
assistant can take the sequence of words or tokens ("token sequence") generated by STT
processing module 730, and attempt to associate the token sequence with one or more
"actionable intents" recognized by the digital assistant. An "actionable intent" can represent a
task that can be performed by the digital assistant, and can have an associated task flow
implemented in task flow models 754. The associated task flow can be a series of programmed
actions and steps that the digital assistant takes in order to perform the task. The scope of a
digital assistant's capabilities can be dependent on the number and variety of task flows that have
been implemented and stored in task flow models 754, or in other words, on the number and
variety of "actionable intents" that the digital assistant recognizes. The effectiveness of the
digital assistant, however, can also be dependent on the assistant's ability to infer the correct
"actionable intent(s)" from the user request expressed in natural language.
[0190]       In some examples, in addition to the sequence of words or tokens obtained from STT
processing module 730, natural language processing module 732 can also receive contextual
information associated with the user request, e.g., from 1/0 processing module 728. The natural
language processing module 732 can optionally use the contextual information to clarify,
supplement, and/or further define the information contained in the token sequence received from
STT processing module 730. The contextual information can include, for example, user
                                                   57

1002043087
preferences, hardware, and/or software states of the user device, sensor information collected
before, during, or shortly after the user request, prior interactions (e.g., dialogue) between the
digital assistant and the user, and the like. As described herein, contextual information can be
dynamic, and can change with time, location, content of the dialogue, and other factors.
[0191]       In some examples, the natural language processing can be based on, e.g., ontology
760. Ontology 760 can be a hierarchical structure containing many nodes, each node
representing either an "actionable intent" or a "property" relevant to one or more of the
"actionable intents" or other "properties." As noted above, an "actionable intent" can represent a
task that the digital assistant is capable of performing, i.e., it is "actionable" or can be acted on.
A "property" can represent a parameter associated with an actionable intent or a sub-aspect of
another property. A linkage between an actionable intent node and a property node in ontology
760 can define how a parameter represented by the property node pertains to the task represented
by the actionable intent node.
[0192]       In some examples, ontology 760 can be made up of actionable intent nodes and
property nodes. Within ontology 760, each actionable intent node can be linked to one or more
property nodes either directly or through one or more intermediate property nodes. Similarly,
each property node can be linked to one or more actionable intent nodes either directly or
through one or more intermediate property nodes. For example, as shown in FIG. 7C, ontology
760 can include a "restaurant reservation" node (i.e., an actionable intent node). Property nodes
"restaurant," "date/time" (for the reservation), and "party size" can each be directly linked to the
actionable intent node (i.e., the "restaurant reservation" node).
[0193]       In addition, property nodes "cuisine," "price range," "phone number," and "location"
can be sub-nodes of the property node "restaurant," and can each be linked to the "restaurant
reservation" node (i.e., the actionable intent node) through the intermediate property node
"restaurant." For another example, as shown in FIG. 7C, ontology 760 can also include a "set
reminder" node (i.e., another actionable intent node). Property nodes "date/time" (for setting the
reminder) and "subject" (for the reminder) can each be linked to the "set reminder" node. Since
the property "date/time" can be relevant to both the task of making a restaurant reservation and
                                                   58

1002043087
the task of setting a reminder, the property node "date/time" can be linked to both the "restaurant
reservation" node and the "set reminder" node in ontology 760.
[0194]       An actionable intent node, along with its linked concept nodes, can be described as a
"domain." In the present discussion, each domain can be associated with a respective actionable
intent, and refers to the group of nodes (and the relationships there between) associated with the
particular actionable intent. For example, ontology 760 shown in FIG. 7C can include an
example of restaurant reservation domain 762 and an example of reminder domain 764 within
ontology 760. The restaurant reservation domain includes the actionable intent node "restaurant
reservation," property nodes "restaurant," "date/time," and "party size," and sub-property nodes
"'cuisine," "price range," "phone number," and "location." Reminder domain 764 can include
the actionable intent node "set reminder," and property nodes "subject" and "date/time." In some
examples, ontology 760 can be made up of many domains. Each domain can share one or more
property nodes with one or more other domains. For example, the "date/time" property node can
be associated with many different domains (e.g., a scheduling domain, a travel reservation
domain, a movie ticket domain, etc.), in addition to restaurant reservation domain 762 and
reminder domain 764.
[0195]       While FIG. 7C illustrates two example domains within ontology 760, other domains
can include, for example, "find a movie," "initiate a phone call," "find directions," "schedule a
meeting," "send a message," and "provide an answer to a question," "read a list," "providing
navigation instructions," "provide instructions for a task" and so on. A "send a message"
domain can be associated with a "send a message" actionable intent node, and may further
include property nodes such as "recipient(s)," "message type," and "message body." The
property node "recipient" can be further defined, for example, by the sub-property nodes such as
''recipient name" and "message address."
[0196]       In some examples, ontology 760 can include all the domains (and hence actionable
intents) that the digital assistant is capable of understanding and acting upon. In some examples,
ontology 760 can be modified, such as by adding or removing entire domains or nodes, or by
modifying relationships between the nodes within the ontology 760.
                                                    59

1002043087
[0197]       In some examples, nodes associated with multiple related actionable intents can be
clustered under a "super domain" in ontology 760. For example, a "travel" super-domain can
include a cluster of property nodes and actionable intent nodes related to travel. The actionable
intent nodes related to travel can include "airline reservation," "hotel reservation," "car rental,"
"get directions," "find points of interest," and so on. The actionable intent nodes under the same
super domain (e.g., the "travel" super domain) can have many property nodes in common. For
example, the actionable intent nodes for "airline reservation," "hotel reservation," "car rental,"
"get directions," and "find points of interest" can share one or more of the property nodes "start
location," "destination," "departure date/time," "arrival date/time," and "party size."
[0198]       In some examples, each node in ontology 760 can be associated with a set of words
and/or phrases that are relevant to the property or actionable intent represented by the node. The
respective set of words and/or phrases associated with each node can be the so-called
"vocabulary" associated with the node. The respective set of words and/or phrases associated
with each node can be stored in vocabulary index 744 in association with the property or
actionable intent represented by the node. For example, returning to FIG. 7B, the vocabulary
associated with the node for the property of "restaurant" can include words such as "food,"
"drinks," "cuisine," "hungry," "eat," "pizza," "fast food," "meal," and so on. For another
example, the vocabulary associated with the node for the actionable intent of "initiate a phone
call" can include words and phrases such as "call," "phone," "dial," "ring," "call this number,"
"make a call to," and so on. The vocabulary index 744 can optionally include words and phrases
in different languages.
[0199]       Natural language processing module 732 can receive the token sequence (e.g., a text
string) from STT processing module 730, and determine what nodes are implicated by the words
in the token sequence. In some examples, if a word or phrase in the token sequence is found to
be associated with one or more nodes in ontology 760 (via vocabulary index 744), the word or
phrase can "trigger" or "activate" those nodes. Based on the quantity and/or relative importance
of the activated nodes, natural language processing module 732 can select one of the actionable
intents as the task that the user intended the digital assistant to perform. In some examples, the
domain that has the most "triggered" nodes can be selected. In some examples, the domain
having the highest confidence value (e.g., based on the relative importance of its various
                                                  60

1002043087
triggered nodes) can be selected. In some examples, the domain can be selected based on a
combination of the number and the importance of the triggered nodes. In some examples,
additional factors are considered in selecting the node as well, such as whether the digital
assistant has previously correctly interpreted a similar request from a user.
[0200]      User data 748 can include user-specific information, such as user-specific vocabulary,
user preferences, user address, user's default and secondary languages, user's contact list, and
other short-term or long-term information for each user. In some examples, natural language
processing module 732 can use the user-specific information to supplement the information
contained in the user input to further define the user intent. For example, for a user request
"invite my friends to my birthday party," natural language processing module 732 can be able to
access user data 748 to determine who the "friends" are and when and where the "birthday party"
would be held, rather than requiring the user to provide such information explicitly in his/her
request.
[0201]      Other details of searching an ontology based on a token string is described in U.S.
Utility Application Serial No. 12/341,743 for "Method and Apparatus for Searching Using An
Active Ontology," filed December 22, 2008, the entire disclosure of which is incorporated herein
by reference.
[0202]      In some examples, once natural language processing module 732 identifies an
actionable intent (or domain) based on the user request, natural language processing module 732
can generate a structured query to represent the identified actionable intent. In some examples,
the structured query can include parameters for one or more nodes within the domain for the
actionable intent, and at least some of the parameters are populated with the specific information
and requirements specified in the user request. For example, the user may say "Make me a
dinner reservation at a sushi place at 7." In this case, natural language processing module 732
can be able to correctly identify the actionable intent to be "restaurant reservation" based on the
user input. According to the ontology, a structured query for a "restaurant reservation" domain
may include parameters such as {Cuisine}, {Time}, {Date}, {Party Size}, and the like. In some
examples, based on the speech input and the text derived from the speech input using STT
processing module 730, natural language processing module 732 can generate a partial structured
                                                  61

1002043087
query for the restaurant reservation domain, where the partial structured query includes the
parameters {Cuisine = "Sushi"} and {Time = "7pm"}. However, in this example, the user's
utterance contains insufficient information to complete the structured query associated with the
domain. Therefore, other necessary parameters such as {Party Size} and {Date} may not be
specified in the structured query based on the information currently available. In some
examples, natural language processing module 732 can populate some parameters of the
structured query with received contextual information. For example, in some examples, if the
user requested a sushi restaurant "near me," natural language processing module 732 can
populate a {location} parameter in the structured query with GPS coordinates from the user
device.
[0203]      In some examples, natural language processing module 732 can pass the generated
structured query (including any completed parameters) to task flow processing module 736
("task flow processor"). Task flow processing module 736 can be configured to receive the
structured query from natural language processing module 732, complete the structured query, if
necessary, and perform the actions required to "complete" the user's ultimate request. In some
examples, the various procedures necessary to complete these tasks can be provided in task flow
models 754. In some examples, task flow models 754 can include procedures for obtaining
additional information from the user and task flows for performing actions associated with the
actionable intent.
[0204]      As described above, in order to complete a structured query, task flow processing
module 736 may need to initiate additional dialogue with the user in order to obtain additional
information, and/or disambiguate potentially ambiguous utterances. When such interactions are
necessary, task flow processing module 736 can invoke dialogue flow processing module 734 to
engage in a dialogue with the user. In some examples, dialogue flow processing module 734 can
determine how (and/or when) to ask the user for the additional information and receives and
processes the user responses. The questions can be provided to and answers can be received
from the users through I/O processing module 728. In some examples, dialogue flow processing
module 734 can present dialogue output to the user via audio and/or visual output, and receives
input from the user via spoken or physical (e.g., clicking) responses. Continuing with the
example above, when task flow processing module 736 invokes dialogue flow processing
                                                 62

1002043087
module 734 to determine the "party size" and "date" information for the structured query
associated with the domain "restaurant reservation," dialogue flow processing module 734 can
generate questions such as "For how many people?" and "On which day?" to pass to the user.
Once answers are received from the user, dialogue flow processing module 734 can then
populate the structured query with the missing information, or pass the information to task flow
processing module 736 to complete the missing information from the structured query.
[0205]       Once task flow processing module 736 has completed the structured query for an
actionable intent, task flow processing module 736 can proceed to perform the ultimate task
associated with the actionable intent. Accordingly, task flow processing module 736 can execute
the steps and instructions in the task flow model according to the specific parameters contained
in the structured query. For example, the task flow model for the actionable intent of "restaurant
reservation" can include steps and instructions for contacting a restaurant and actually requesting
a reservation for a particular party size at a particular time. For example, using a structured
query such as: {restaurant reservation, restaurant = ABC Caf6, date = 3/12/2012, time = 7pm,
party size  = 5}, task flow processing module 736 can perform the steps of: (1) logging onto a
server of the ABC Caf6 or a restaurant reservation system such as OPENTABLE@, (2) entering
the date, time, and party size information in a form on the website, (3) submitting the form, and
(4) making a calendar entry for the reservation in the user's calendar.
[0206]       In some examples, task flow processing module 736 can employ the assistance of
service processing module 738 ("service processing module") to complete a task requested in the
user input or to provide an informational answer requested in the user input. For example,
service processing module 738 can act on behalf of task flow processing module 736 to make a
phone call, set a calendar entry, invoke a map search, invoke or interact with other user
applications installed on the user device, and invoke or interact with third-party services (e.g., a
restaurant reservation portal, a social networking website, a banking portal, etc.). In some
examples, the protocols and application programming interfaces (API) required by each service
can be specified by a respective service model among service models 756. Service processing
module 738 can access the appropriate service model for a service and generate requests for the
service in accordance with the protocols and APIs required by the service according to the
service model.
                                                    63

1002043087
[0207]       For example, if a restaurant has enabled an online reservation service, the restaurant
can submit a service model specifying the necessary parameters for making a reservation and the
APIs for communicating the values of the necessary parameter to the online reservation service.
When requested by task flow processing module 736, service processing module 738 can
establish a network connection with the online reservation service using the web address stored
in the service model, and send the necessary parameters of the reservation (e.g., time, date, party
size) to the online reservation interface in a format according to the API of the online reservation
service.
[0208]       In some examples, natural language processing module 732, dialogue flow processing
module 734, and task flow processing module 736 can be used collectively and iteratively to
infer and define the user's intent, obtain information to further clarify and refine the user intent,
and finally generate a response (i.e., an output to the user, or the completion of a task) to fulfill
the user's intent. The generated response can be a dialogue response to the speech input that at
least partially fulfills the user's intent. Further, in some examples, the generated response can be
output as a speech output. In these examples, the generated response can be sent to speech
synthesis module 740 (e.g., speech synthesizer) where it can be processed to synthesize the
dialogue response in speech form. In yet other examples, the generated response can be data
content relevant to satisfying a user request in the speech input.
[0209]       Speech synthesis module 740 can be configured to synthesize speech outputs for
presentation to the user. Speech synthesis module 740 synthesizes speech outputs based on text
provided by the digital assistant. For example, the generated dialogue response can be in the
form of a text string. Speech synthesis module 740 can convert the text string to an audible
speech output. Speech synthesis module 740 can use any appropriate speech synthesis technique
in order to generate speech outputs from text, including, but not limited, to concatenative
synthesis, unit selection synthesis, diphone synthesis, domain-specific synthesis, formant
synthesis, articulatory synthesis, hidden Markov model (HMM) based synthesis, and sinewave
synthesis. In some examples, speech synthesis module 740 can be configured to synthesize
individual words based on phonemic strings corresponding to the words. For example, a
phonemic string can be associated with a word in the generated dialogue response. The
phonemic string can be stored in metadata associated with the word. Speech synthesis model
                                                    64

1002043087
740 can be configured to directly process the phonemic string in the metadata to synthesize the
word in speech form.
[0210]      In some examples, instead of (or in addition to) using speech synthesis module 740,
speech synthesis can be performed on a remote device (e.g., the server system 108), and the
synthesized speech can be sent to the user device for output to the user. For example, this can
occur in some implementations where outputs for a digital assistant are generated at a server
system. And because server systems generally have more processing power or resources than a
user device, it can be possible to obtain higher quality speech outputs than would be practical
with client-side synthesis.
[0211]      Additional details on digital assistants can be found in the U.S. Utility Application
No. 12/987,982, entitled "Intelligent Automated Assistant," filed January 10, 2011, and U.S.
Utility Application No. 13/251,088, entitled "Generating and Processing Task Items That
Represent Tasks to Perform," filed September 30, 2011, the entire disclosures of which are
incorporated herein by reference.
4.          Processes for operating a digital assistant
[0212]      FIG. 8 illustrates a flow diagram of a process 800 for operating a digital assistant in
accordance with some embodiments. Process 800 is performed, for example, using one or more
electronic devices (e.g., devices 104, 108, 200, 400, or 600) implementing a digital assistant. In
some examples, the process 800 is performed using a client-server system (e.g., system 100), and
the blocks of the process 800 can be divided up in any manner between the server (e.g., DA
server 106) and a client device. In other examples, the process 800 can be divided up between
the server and multiple client devices (e.g., a mobile phone and a smart watch). Thus, while
portions of the process 800 are described herein as being performed by particular devices of a
client-server system, it will be appreciated that the process 800 is not so limited. In other
examples, the process 800 is performed using only a client device (e.g., user device 104) or only
multiple client devices. In process 800, some blocks are, optionally, combined, the order of
some blocks is, optionally, changed, and some blocks are, optionally, omitted. In some
examples, additional steps may be performed in combination with the process 800.
                                                  65

1002043087
[0213]       At block 805, a natural-language user input is received by a user device, such as the
user device 104 of FIG. 1. The natural-language user input is a speech input, for instance,
included in an audio input, or a text input. In some examples, the natural-language user input
may include a request for the user device, and/or another device, to perform a task. For instance,
in the example "Send a car to 1200 Main Street," the natural-language user input may include a
request for a user device to reserve a car using a ride-booking service. In some examples, the
natural-language user input may further specify one or more parameters for the requested task.
"1200 Main Street", for instance, specifies a pick-up location for the car reservation. In the
example, "Order my usual from Domino's," the natural-language user input may include a
request for a user device to order food from the pizza chain Domino's. "my usual" may further
specify, contextually, what food is to be ordered.
[0214]       At block 810, an intent, and optionally, one or more parameters associated with the
intent, are identified. The intent and parameters may be derived from the natural-language user
input, for example. In some examples, a text string is obtained from the natural-language user
input and the intent and parameters are derived from the text string. Text strings may be
obtained using any known speech-to-text methodologies.
[0215]       As described, intents may correspond to tasks requested by a user. Accordingly,
identifying (e.g., determining) an intent may include identifying a task specified in the natural
language user input and/or inferring an intent corresponding to a requested task based on
language and/or context of the natural-language user input. Intents may correspond to any type
of tasks performed by a user device and, in particular, may correspond to tasks performed by one
or more applications of a user device, as described in further detail below.
[0216]       Because a device of a first type may perform different tasks than devices of a second
type, intents and/or parameters may be identified based on a type of a device. By way of
example, a device of a first type may perform tasks associated with intents for reserving a car
and a device of a second type may perform tasks associated with intents for providing a status of
a car reservation after the reservation has been made.
[0217]       In some examples, intents are associated with (e.g., included in) one or more domains
(e.g., intent categories, set of intents). Each domain may include a particular class of intents,
                                                  66

1002043087
allowing for intents to be intuitively grouped. For example, intents to reserve a car, cancel a car
reservation, and/or any other intents directed to tasks commonly associated with ride-booking
may be included in a ride-booking domain. In another example, intents to check-in to a flight,
cancel a flight, reschedule a flight, retrieve flight information, and/or any other intents directed to
tasks commonly associated with air travel may be included in an air travel domain. In another
example, intents to provide directions, retrieve traffic information, and/or any other intents
directed to tasks commonly associated with navigation may be included in a navigation domain.
In yet another example, intents to send payments, receive payments, and/or any other intents
directed to tasks commonly associated with financial transactions may be included in a financial
transactions domain.
[0218]      Identifying parameters may include identifying portions of the natural-language input
that specify a manner in which a task corresponding to the intent is to be performed. Parameters
may, for instance, specify locations (e.g., addresses or places of interest), times, dates, contacts,
types, text (e.g., to be inserted into an email or message), quantities (e.g., distance, money) and,
in some instances, names of software applications to perform the task. Parameters may further
specify other conditions for tasks, examples of which are described herein.
[0219]      Parameters may be identified, for instance, using one or more detectors. Each of the
detectors may be configured to parse the natural-language user input (e.g., a textual
representation of the natural-language user input) and identify one or more respective data types.
By way of example, a first detector may be configured to identify user contacts and a second
detector may be configured to identify addresses. Other detectors may identify data types
including, but not limited to, phone numbers, names, persons of interest, places of interest,
URLs, times, flight numbers, package tracking numbers, and dates.
[0220]      In some examples, words of a custom vocabulary may be identified in the natural
language user input, for instance, as parameters. In one example, one or more detectors may be
configured to identify user-specific terms. User-specific terms may include any terms associated
with and/or specified by a user of the electronic device, such as contact names, addresses, phone
numbers, and the like. As another example, one or more detectors may be configured to identify
custom vocabulary of one or more applications, respectively. Custom vocabulary of an
                                                    67

1002043087
application may include a name of the application (e.g., Uber, Lyft, Instagram, Flickr, WeChat,
WhatsApp, LINE, Viber) and/or may include other terms uniquely associated with the
application (e.g., UberX, DM, Lyftline, ZipCar). In some examples, custom vocabulary may be
included in the vocabulary index 744 (FIG. 7B).
[0221]       In some examples, one or more applications may register with an application
registration service. The service may be hosted by or otherwise accessible to the server 108
and/or the user device 104. Registering in this manner may include specifying one or more
custom vocabulary terms associated with the application and, optionally, one or more language
models for the custom vocabulary terms. The language models may, for instance, provide one or
more pronunciations for each of the custom vocabulary terms. Language models provided in this
manner may thereafter be used to help identify use of such custom terms during analysis of
natural-language user inputs.
[0222]       In some examples, one or more parameters may be inferred from the natural-language
user input. In the example "Get me a ride to the stadium," for instance, it may be inferred that
one parameter associated with the intent is a current location of the user. In another example,
"Pay John back for the meal," it may be inferred that one parameter associated with the intent is
an amount of money.
[0223]       In some examples, an intent is identified based on the natural-language user input,
and parameters associated with the intent are thereafter identified. Further, in some examples,
parameters not associated with the intent are not identified. By way of example, an intent
corresponding to directions (e.g., driving directions) may be associated with parameters
specifying one or more locations (e.g., an origin and/or a destination), and/or a mode of transit.
Consider, for instance, the example "Get me real-time driving directions to 1200 Main Street."
In this instance, the identified intent corresponds to a task for providing directions, "driving" is a
parameter specifying a mode of transit, and "1200 Main Street" is a parameter specifying a
location. The portion of the user input "real-time" is not a parameter associated with the
identified intent. Accordingly, while "real-time" may be a valid parameter for some intents,
"real-time" will not be identified as a parameter during operation.
                                                  68

1002043087
[0224]      In other examples, one or more parameters first may be identified and the intent may
be identified based on the identified one or more parameters. In yet other examples, the intent
and parameters associated with the intent may be identified concurrently.
[0225]      In some examples, intents and parameters of a natural-language user input are
identified by the user device, such as the user device 104 of FIG. 1. In other examples, the user
device provides the natural-language user input (or a representation thereof) to a server, such as
the server 108 of FIG. 1, and the server identifies (e.g., determines) intents and parameters of the
natural-language user input, as described. Thereafter the server provides (e.g., transmits) the
identified intents and parameters to the user device.
[0226]      Optionally, once an intent and any parameters have been identified, the user device
confirms identified intents and/or parameters with a user of the user device, and in some
instances, confirms inferred parameters with the user of the user device. Confirming in this
manner may include prompting a user to confirm the identified intent and all identified
parameters associated with the intent in response to a natural-language query. By way of
example, in response to the user input "Get me a ride to the airport," the user device may provide
a natural-language query "Do you want a ride to the airport from your current location?" The
natural-language query provided by the user device may be provided to a user as text, using a
touch-sensitive display of the user device, and/or may be provided to a user as speech using an
audio output component of the user device (e.g., speaker 211 of FIG. 2). The user may respond
to the natural-language query, for instance, by providing a natural-language user input to the user
device.
[0227]      Optionally, the user device confirms individual parameters. In some examples, this
may include prompting a user to confirm one or more parameters. By way of example, in
response to the user input "Get me a ride to the station," the user device may provide a natural
language query "Do you mean Penn Station?" As another example, in response to the user input
"Pay John $5.00," the user device may provide a natural language query "Do you mean John
Smith?" Natural-language queries provided by the user device may be provided to a user as text,
using a touch-sensitive display of the user device and/or may be provided to a user as speech
using an audio output component of the user device (e.g., speaker 211 of FIG. 2). The user may
                                                  69

1002043087
respond to the natural-language query, for instance, by providing a natural-language user input to
the user device.
[0228]       In some examples, one or more parameters are contextual. Accordingly, the user
device may determine (e.g., resolve) one or more parameters based on context information.
Context information may be context information of the user device (or any data stored therein)
and/or context information of a user of the user device. By way of example, a natural-language
user input may recite "Get me a car at my house." Because "my house" is a contextual
parameter and does not specify an actual location, the user device may determine a location of
the user device and identify the determined location as a parameter (i.e., in lieu of "my house").
As another example, a natural-language user input may recite "Call him back." Because "him"
is a contextual parameter and does not specify a specific contact, the user device may determine
a contact intended by "him" and pass the contact as a parameter (i.e., in lieu of "him").
[0229]       In some examples, identified intents and parameters are implemented as an intent
object. When implemented as such, each intent object is an object (e.g., data structure,
programming object) and corresponds to a respective intent. Each intent object may include one
or more fields (e.g., instance variables) corresponding to one or more parameters, respectively.
For example, an intent object corresponding to a ride-booking intent may be generated (e.g.,
instantiated) like the following pseudocode:
public final class RideBookingIntent {
         public final static String INTENTTYPE     = "RideBookingIntent";
         public final parameter<Location> pickupLocation;
         public final parameter<Location> dropOffLocation;
         public final parameter<dataString> vehicleType;
         public final parameter<Integer> partySize;
         public final parameter<dateTime> pickupTime;
         private RideBookingIntent(Location p, Location d, dataString v, Integer p, dateTime pt) {
                 pickupLocation    =  p;
                 dropOffLocation     = d;
                 vehicleType   =  v;
                 partySize  = p;
                                                 70

1002043087
                pickupTime   = pt; } }
As will be appreciated by one of ordinary skill, the pseudocode above is exemplary, and an intent
object may be implemented in other manners.
[0230]      By implementing an intent as an intent object, intents may be language agnostic. As
described, intents may be derived from natural-language user inputs. A same intent, therefore,
may be derived from natural-language inputs provided in any number of spoken languages. By
way of example, the English natural-language user input "Send an Uber to 1200 Park Avenue"
and the German natural-language user input "Senden Sie eine Uber auf 1200 Park Avenue"
would each result in a same intent being identified (and result in a same intent object).
[0231]      At block 815, a software application associated with the intent may be identified (e.g.,
selected). Generally, this may include identifying one or more software applications configured
to perform a task corresponding to the intent.
[0232]      In some examples, identifying software applications may include determining one or
more domains corresponding to an intent and identifying applications corresponding to the
domain(s). In some examples, one or more machine learning mechanisms (e.g., neural networks)
are used to identify one or more candidate domains. For instance, each of the candidate domains
is assigned a relevance score, and the candidate domains are ranked using the relevance scores.
Relevance scores may be determined by providing text of the natural-language user input and/or
context of the natural-language user input to a neural network. The top ranked one or more
candidate domains may be determined as the one or more domains corresponding to the intent.
In some instances, relevance scores of two or more top ranked candidate domains may be within
a threshold. The user device may differentiate between these candidate domains using an
ontology, such as the ontology 760.
[0233]      As described, one or more software applications may be registered with an
application registration service. Registering in this manner may include specifying which
domains (e.g., ride-booking domain, air travel domain, navigation domain) correspond to the
software application. An application corresponding to a domain may support each of the intents
specified by the domain or may support only some intents specified by the domain. In some
                                                 71

1002043087
examples, applications may be registered with individual intents, and identifying applications
may include identifying applications corresponding to the identified intent.
[0234]       In some examples, applications are identified according to the identified parameters.
By way of example, based on a user input "Get me a black car to the airport," an intent to reserve
a car using a ride-booking service and a parameter specifying a type of car (i.e. "black car") may
be identified. Although several available applications may be configured to reserve a car
generally, only those applications configured to reserve a "black car" may be identified. As
another example, based on a user input "Send a message to Sam saying 'Hello!'" Although
several applications may be configured to send a message, only those applications having contact
information for a contact Sam may be identified.
[0235]       In some examples, only applications installed on and/or accessible to the user device
are identified. For instance, although several available applications may be configured to
perform a task, only those accessible to the user device are identified. Accessible applications
include applications residing and/or installed on the user device and further include applications
that may be remotely accessed by the user device, for instance on one or more other devices.
[0236]       Thus, in at least some embodiments, identified applications are applications
configured to perform a task according to identified parameters and accessible to the user device.
In some examples, multiple applications may satisfy these criteria, yet the user device may wish
to identify fewer applications, or a single application. Accordingly, applications may further be
identified based on previous use of the applications by the user device. In some examples, for a
given intent, an application most recently used to perform a task corresponding to the intent is
identified. Consider the user input "Place a call to Rob" in which an intent (i.e., place a call) and
a parameter (i.e. "Rob") may be identified. In this example, the application last used to place a
call is identified. In other examples, an application most commonly used to perform tasks
corresponding to intent is identified. For the same example, an application most commonly used
to place calls is identified. In some examples, applications are further selected in accordance
with one or more parameters. For instance, an application recently used to place a call to the
contact Rob is identified, or an application most commonly used to place a call to the contact
Rob is identified. In some examples, a default application may be specified for one or more
                                                  72

1002043087
particular tasks and/or parameters, for instance, by a user or a digital assistant. A user may
specify, for instance, that a first application is to be used when calling a first contact and a
second application is to be used when calling a second contact.
[0237]      As described, a natural-language user input may include custom vocabulary that may
be identified as one or more parameters. In some examples, such custom vocabulary includes
application names, and accordingly an application may be identified based on presence of
custom vocabulary in the input. A natural-language user input may, for instance, recite "Call
Rob using Skype." In response, the software application Skype may be the identified software
application. In another example, a natural-language input may recite "Play The Beatles on
Spotify," and in response, the software application Spotify may be the identified software
application.
[0238]      Custom vocabulary may further include terms uniquely associated with an
application. Accordingly, such terms may be identified as parameters and, optionally, used to
identify an application. In the example "Get me an UberX," "UberX" is a term of a custom
vocabulary for the software application Uber and as a result Uber is identified as the software
application. In the example "Tweet I hope the Sharks win the cup," "Tweet" is a term of a
custom vocabulary for the software application Twitter, and as a result Twitter is identified as the
software application.
[0239]      Custom vocabulary may further include terms uniquely associated with a user.
Accordingly, such terms may be identified as parameters and, optionally, used to identify an
application. In the example "Call Boss", "Boss" is a user-specific term of a custom vocabulary
and may be identified as a parameter, for instance, for identifying a contact in a user contact list.
[0240]      In some examples, the user device may receive custom vocabulary from another
device. Accordingly, a user device may be configured to identify vocabulary otherwise not
known to the device. In some examples, the user device may receive custom vocabulary
periodically and/or in response to establishing connectivity with another device. In other
examples, a user device may retrieve custom vocabulary from another device in response to
determining that the user has provided an unrecognized term.
                                                     73

1002043087
[0241]       In some examples, no application configured to perform the task according to the
identified parameters may be accessible to the user device. As a result, the user device may
access (e.g., download and/or install) an application configured to perform the task according to
the identified parameters. In some examples, the user device may identify a plurality of software
applications and provide the user with a list of software applications. The user may select one or
more of the applications, and the user device may access the one or more selected applications.
[0242]       At block 820, the intent and parameters are provided to the identified software
application. In some examples, the intent and parameters are provided to the software
application as an intent object.
[0243]       In some examples, the intent and parameters may be selectively provided to the
software application based on a state of the user device. As an example, intents and parameters
may be selectively provided to the user device based on whether the user device is in a lock state.
In some examples, an application may be allowed to receive particular intents and parameters
when the device is in a lock state. In other examples, an application may be allowed to receive
particular intents and parameters when the user device is not in a lock state. Whether an
application can receive a particular intent given a particular state of the user device may be
specified by the software application, for instance during a registration process with an
application registration service.
[0244]       At block 825, the user device may receive one or more responses from the software
application. In some examples, the user device receives a response for each parameter provided
to the software application. Each of the responses may indicate, for instance, whether a
parameter is valid or whether additional user input is required. If a response indicates that a
parameter is valid, no further action is taken with respect to the parameter.
[0245]       If a response provided by the software application does not indicate that a parameter
is valid, the response may indicate that clarification of the parameter is required. For instance, a
parameter may be improper (i.e., invalid) and the software application may request additional
input from the user. As an example, consider the user input "Send a blue car to 1200 Main
Street." Although the user has requested a blue car, the ride-booking application (e.g., Uber,
Lyft) may not allow for the selection of a blue car (e.g., blue car may not be a supported
                                                  74

1002043087
parameter or the application may determine that no blue car is currently available). Accordingly,
in the event the parameter is improper (e.g., the user has specified an invalid type of car), the
application may request that a proper (e.g., valid) value for the parameter (e.g., type of car) be
provided. With reference to FIG. 10A, for instance, based on the response from the software
application indicating the parameter is improper, the user device may provide a natural-language
query 1002 prompting the user to select a valid parameter. In the instant example, the user
device provides a natural-language query asking the user to select a valid type of car. The
natural-language query 1002 may be provided to a user as text using a touch-sensitive display of
the user device and/or may be provided to a user as speech using an audio output component of
the user device. As illustrated, in some examples, the user device may provide (e.g., display) one
or more candidate parameters 1004 to the user for selection. In the instant example, candidate
parameters 1004 include "Budget," "Black Car," "SUV," and "Shared." Candidate parameters
1004 provided in this manner may be provided by the software application in some examples.
The user device may select one of the candidate parameters by providing a touch-input and/or by
providing a natural-language user input to the user device, and in response, the user device may
provide the selected candidate parameter to the software application.
[0246]       If a response provided by the software application does not indicate that a parameter
is valid, the response may indicate that disambiguation of the parameter is required. In the
example user input "Call Tom," for instance, a parameter for a contact Tom may be provided to
a software application configured to place calls. If, in determining contact information (e.g., a
phone number) for the contact Tom, the software application determines that multiple contacts
with the name "Tom" exist, the software application may request an indication as to which
"Tom" was intended.
[0247]       The software application may request that the user device disambiguate a parameter
based on user input . As part of the request, the software application optionally includes in the
response a disambiguation list including a plurality of candidate parameters. If the software
application requests disambiguation based on user input, the user device may provide a natural
language query asking the user to select a candidate parameter. Further, candidate parameters of
the disambiguation list may be displayed to allow for user selection. The user may select one of
the candidate parameters, for instance, by providing a touch-input and/or by providing a
                                                 75

1002043087
natural-language user input, and the user device may provide the selected candidate parameter to
the software application.
[0248]       The software application may request that the user device disambiguate a parameter
without user input. Accordingly, the user device may automatically disambiguate the parameter
based on context of the user device, software application, and/or parameter. By way of example,
the user device may select a contact "Tom" most recently contacted by the user.
[0249]       In some instances, a software application may not have access to information required
to resolve and/or disambiguate a parameter. A software application may not have access to a
contact list and cannot determine whether one, let alone, multiple entries for a name exist. As a
result, the software application may request that the user device disambiguate any parameters
that the software application cannot resolve. Additionally or alternatively, the software
application may request that the user device provide candidate parameters to the software
application such that the software application can perform the disambiguation. With reference to
the previous example, the software application may request that the device disambiguate "Tom"
or provide a list of all "Tom" contacts such that the software application may disambiguate
"Tom" itself.
[0250]       Performing a task may require that one or more specific types of parameters are
specified by a user. Yet in some examples, a natural-language user input may omit one or more
required parameters. Accordingly, the software application may optionally provide one or more
responses indicating which, if any, required parameters were not specified. Consider the user
input "Send a car to 1200 Main Street." Although a car is generally requested by way of the user
input, the ride-booking application identified based on the user input may require a selection of a
particular type of car. Accordingly, in the event the parameter is missing (e.g., the user has not
specified a type of car), the application may request that a recognized value for the parameter
(e.g., type of car) be provided. With reference once again to FIG. 1OA, the user device may
provide a natural-language query 1002 prompting the user to specify a valid parameter.
Thereafter the user may select a candidate parameter, for instance from a list of candidate
parameters, and the selected parameter may be provided to the software application as described.
                                                 76

1002043087
[0251]      Once the software application has indicated that each parameter is valid and no
additional information is required, at block 830, the user device may confirm intent with the
software application. In particular, the user device may request a notification that, given the
intent and the parameters associated with the intent, the software application can successfully
perform a task corresponding to the intent.
[0252]      Once the software application provides a notification indicating that the software
application can perform the task, optionally, the user device confirms intent with the user. For
example, the user device may provide the natural-language query "I can get an uberX at your
location. Shall I request it?" The user may confirm or reject the intent by way of either a touch
input or a natural-language input. In some examples, the notification provided by the software
application may include information to provide to the user. The information may, for instance,
allow the user to make a more informed decision when prompted for confirmation. For instance,
the user device may provide the natural-language query "I can get an uberX to your location in 9
minutes. Shall I request it?"
[0253]      Thereafter, the user device causes (e.g., instructs) the software application to perform
the task corresponding to the intent in accordance with the parameters.
[0254]      In other examples, once the software application provides a notification indicating
that the software application can perform the task, the user device causes the software
application to perform the task without user confirmation. For example, the user may provide
the natural language user input "Get me a Lyft to the airport" and once the identified application
Lyft indicates it can reserve a car for the user, the software application performs the task
automatically without user confirmation. In some examples, whether a task is performed without
user confirmation is based on a type of the user device. A device of a first type, such as a mobile
phone, may require user confirmation for one or more tasks, and a device of a second type, such
as a smart watch, may perform the one or more tasks without first receiving user confirmation.
[0255]      At block 835, the user device receives a result response from the software application
indicating whether the software application performed the task successfully.
                                                   77

1002043087
[0256]      A result response indicating failure to perform a task may further indicate one or
more reasons for the failure. In some examples, the user device may provide an output, such as a
natural-language output or a textual output, to the user indicating the one or more reasons for the
failure.
[0257]      A result response indicating success in performing a task may include one or more
response items. Each response item may be a result determined (e.g., received, generated) by the
software application when performing the task. By way of example, response items
corresponding to reserving a car with a ride-booking application may include car type, license
plate number, driver name, arrival time, current car location, pick-up location, destination,
estimated trip time, estimated cost, and estimated trip route, service type (e.g., Uber pool vs.
uberX). As another example, response items corresponding to initiating a workout session with a
fitness application may include confirmation that the session has been initiated, workout
duration, type of activity, and one or more goals.
[0258]      In some examples, one or more of the response items may be provided to a user.
With reference to FIG. 1OB, for example, one or more of the response items may be provided to
the user as a natural-language output 1012 as a text input and/or an audio output. Response
items may be provided visually as well. For example, a map 1014 of an estimated trip route may
be provided to the user. It will be appreciated that response items may be provided to users in
any desired manner.
[0259]      In some examples, the software application may specify the manner in which one or
more response items are provided to the user. That is, the software application may determine
the manner in which response items are displayed and/or spoken to the user and the digital
assistant may provide each of the response items accordingly.
[0260]      In some examples, the software application may specify how response items are
provided using a UI extension of the digital assistant. The user device may, for instance, provide
the software application with a set of view controller parameters (e.g., fields that can be supplied
to a view controller for display), and in response, the software application may provide a set of
view controller parameter values. The set of view controller parameter values may indicate
which response items are to be displayed in various fields of a view controller and/or the manner
                                                  78

1002043087
in which the response items are displayed in each field. In this manner, the digital assistant may
control (e.g., limit) the manner in which response items are displayed by the software
application.
[0261]      In other examples, the digital assistant may determine how response items are
provided. In yet other examples, the software application is invoked such that a user may
interact with the software application directly. Invoking the application in this manner may
terminate a session with the digital assistant in some examples.
[0262]      In some examples, once a task has been performed successfully, the user device (e.g.,
the digital assistant of the user device) may provide one or more notifications to the user
indicating a status of an operation associated with the task. As an example, once a car has been
reserved in response to a user input, the user device may provide a location, estimated time of
arrival, and/or route of the reserved car. Notifications may further indicate whether an error
associated with the operation has occurred. If, for instance, a reserved car is no longer available,
the user may be notified. Notifications provided in this manner may be provided periodically
and/or in real time in some examples.
[0263]      In some examples, once a task has been performed successfully, the user device may
adjust an operation associated with the task. Adjusting an operation associated with the task may
include adjusting (e.g., removing, adding, and/or modifying) a parameter associated with the
intent and providing the intent to the software application with the adjusted parameter. By way
of example, a software application may reserve a car and indicate to the user that the car has
been successfully reserved. Thereafter, the car reservation may be adjusted by specifying a new
destination for the ride. In other examples, adjusting the operation includes providing a different
intent to the software application. The intent may be an intent of a different domain, for
instance.
[0264]      In some examples, an operation is adjusted in response to selection of an affordance
displayed by the device. As an example, once a task has been successfully performed, the device
may display one or more affordances which a user may select to acknowledge successful
performance of the task and/or indicate the manner in which the user wishes to adjust an
operation associated with the task. Affordances may be displayed based on context in some
                                                  79

1002043087
examples. As an example, affordances for a car reservation may allow for the modification of a
destination address or cancellation of the car reservation (FIG. 13A). As another example,
affordances for dinner reservations may allow for the modification of a reservation time or
number of people. As yet another example, affordances for travel directions may allow for a
change of a destination address or mode of transit. As yet another example, affordances for
electronic payment may allow for cancellation of the payment or modification of a payment sum.
[0265]       In some examples, a software application may fail to perform a task. In response, the
device may display one or more affordances which a user may select to acknowledge failure of
the task and/or request performance of a task. As an example, selection of an affordance may
cause the user device to perform the same task that previously failed. This may include
providing a same intent to the software application. The intent may with the same or different
parameters and/or parameter values. As another example, selection of an affordance may cause
the device to perform a different task, such as a task associated with a different domain.
[0266]       As an example, during operation, a software application may fail to make a payment
in response to a user request (FIG. 13B). In response, the device may display a first affordance,
and in response to selection of the first affordance, the user device may provide an intent to the
software application. The intent may be the same intent (i.e., intent to make a payment)
previously provided to the software application. The user device may further display a second
affordance, and in response to selection of the second affordance, the user device may provide
the intent to a different software application. The user device may further display a third
affordance, and in response to selection of the third affordance, the user device may provide an
intent to message to another software application. The user may, for instance, wish to
communicate that payment failed.
[0267]       In some examples, permissions of a software application are verified, for instance,
prior to an intent and parameters being provided to the software application. The user device
may, for instance, determine whether a software application is permitted to access data
associated with a particular intent. The determination may be made based on permissions
configured on the user device. In the example "Get me a black car at my location," "location"
may be a contextual parameter requiring contextual information (e.g., location data) of the user
                                                  80

1002043087
device. Thus, prior to resolving the location of the user device and providing the location as a
parameter to the software application, the user device may first determine whether the software
application is permitted to access the information. If the software application is permitted to
access the data, operation proceeds as described. If the software application is not permitted to
access the data, the intent and parameters are not provided to the software application and the
task is not performed. In some instances, permissions of software applications may be
exchanged between devices. By way of example, a first device including a software application
may provide permissions of the software application to a second device of the user including the
same software application.
[0268]       In some examples, a natural-language input may include a plurality of task requests.
Thus, based on the natural-language input, a plurality of intents and/or a plurality of applications
may be identified. Parameters associated with each of the intents are optionally identified as
well. The natural-language input "Get me a ride to the airport and tell me my flight status," for
instance, may include both an intent to reserve a car and an intent to retrieve status of a user's
flight. In some examples, tasks corresponding to each of the intents may be performed
sequentially or concurrently.
[0269]       In some examples, a natural-language input may include a plurality of related task
requests. For instance, in some examples, a requested task of a natural-language user input may
depend on completion of another requested task of the natural-language input. In the example
"Email me directions to the airport," two tasks are requested: a first task to provide directions
and a second task to email. The parameter "me" specifies a particular contact and is a parameter
for the intent to email, and the parameter "airport" is a parameter specifying a destination for the
intent to provide directions. Because emailing the directions requires that the directions first be
provided, the second task (email) depends on the first task (provide directions). Accordingly, the
task to retrieve directions is performed first.
[0270]       In some examples, intents may be provided between applications. For example, an
application may provide an intent object to another application to cause the application to
perform a task. In the instant example, both intents (provide directions and email) may be
provided to a maps application to provide the requested directions. The second intent, or the
                                                 81

1002043087
intent to email, may be provided to the maps application as a parameter, for instance. In
accordance with the first intent, or the intent to provide directions, the maps application may
provide the requested directions. Subsequently, the maps application may provide the second
intent to the email application, for instance as an intent object including the directions as
parameters. In response, the email application may email the directions as requested.
[0271]       As another example, a user may provide a user input "Get me a ride to the Sharks
game" while viewing a sports application (e.g., ESPN application). In response, the sports
application, having information pertaining to the game, may pass an intent (e.g., reserve car) and
a parameter (e.g., address of game) to a ride-booking application. The intent and parameter may
be provided as an intent object in some examples.
[0272]       As yet another example, a user may provide a user input "Pay my brother $5.00,"
while using a ride-booking application. In response, the ride-booking application may pass an
intent (e.g., pay) and a parameter ($5.00) to a payment application (e.g., PayPal, Venmo, online
payment service). As described, the intent and parameter may be provided as an intent object in
some examples.
[0273]       In some examples, intents may be provided between devices. As described, devices
of different types may be configured to perform different respective tasks. In some instances, a
natural-language user input may be provided to a first device not configured to perform a task
corresponding to an intent of the natural-language user input. The first device may provide the
intent to a second device such that the task associated with the intent is performed. As an
example, a first device (e.g., mobile phone) may be configured to reserve a car and a second
device (e.g., smart watch) may be configured to provide a status of the reserved car. If, for
instance, the user requests the car reservation (e.g., "Get me an Uber to the airport") using the
second device, the second device may derive an intent from the user input and determine that the
second device cannot perform a task associated with the derived intent. The second device may
thereafter provide the derived intent to the first device such that the task can be performed by the
first device.
[0274]       As described, a device may provide natural-language outputs to a user during
operation. Natural-language queries, for instance, may be provided to a user to request
                                                   82

1002043087
confirmation of a parameter. In some examples, natural-language outputs may be provided to
the user in accordance with a task flow associated with one or more software applications. The
task flow may, for instance, specify the manner and type of natural-language outputs provided.
By way of example, a user may provide a natural-language input (e.g., "Get me a Lyft home.").
After receiving an intent and any identified parameters, the software application may indicate
that one or more parameters require clarification and/or additional parameters (e.g., location of
user, address of "home", type of vehicle, etc.) are required to perform a task associated with the
intent. Accordingly, the device may provide to a user one or more natural-language queries
specified by the task flow such that all required parameters may be provided to the software
application.
[0275]       In some examples, one or more task flows are stored on the device. Thus, the device
may provide natural-language outputs (e.g., natural-language queries) to a user without retrieving
individual queries of the task flow from an external device during operation. Storing task flows
in this manner may improve operational efficiency. In some examples, task flows are retrieved
and/or stored on the user device when corresponding software applications are stored on the
device.
[0276]       FIG. 9 illustrates a flow diagram of a process for operating a digital assistant in
accordance with some embodiments. The process 900 may, for instance, be used to implement
at least a portion of process 800 of FIG. 8, including, but not limited to, block 815 and/or block
820 of FIG. 8. Process 900 is performed, for example, using one or more electronic devices
(e.g., devices 104, 108, 200, 400, or 600) implementing a digital assistant. In some examples,
the process 900 is performed using a client-server system (e.g., system 100), and the blocks of
the process 900 can be divided up in any manner between the server (e.g., DA server 106) and a
client device. Thus, while portions of the process 900 are described herein as being performed
by particular devices of a client-server system, it will be appreciated that the process 900 is not
so limited. In other examples, the process 900 is performed using only a client device (e.g., user
device 104). In process 900, some blocks are, optionally, combined, the order of some blocks is,
optionally, changed, and some blocks are, optionally, omitted. In some examples, additional
steps may be performed in combination with the process 900.
                                                  83

1002043087
[0277]       At block 905, a natural-language user input is received by a user device, such as the
user device 104 of FIG. 1. As described, the natural-language input may include a request for
the user device, and/or another device, to perform a task, and may further specify one or more
parameters for the requested task.
[0278]       At block 910, an intent and, optionally, one or more parameters associated with the
intent, are identified. The intent and parameters may be derived from the natural-language user
input. As previously described, intents may correspond to any type of tasks performed by a user
device and, in particular, may correspond to tasks performed by one or more applications of a
user device. Parameters associated with the intent may identify portions of the natural-language
input that specify a manner in which a task corresponding to the intent is to be performed. In the
example, "Get me a ride to the airport," the intent corresponds to a task to reserve a car and
"airport" is a parameter specifying a destination. Given that the intent of the user is to reserve a
car, the location of the user may be a parameter (e.g., inferred parameter) as well.
[0279]       At block 915, a determination is made as to whether a task corresponding to the intent
can be fulfilled. In some examples, the determination may include determining whether an
application configured to perform the task in accordance with the parameters is accessible to the
user device. In the instant example, a determination is made as to whether the user device can
access an application configured to reserve a car at a location of the user device. As described,
accessible applications are those locally stored on the user device as well as those remotely
accessible by the user device.
[0280]       In accordance with a determination that the task corresponding to the intent can be
fulfilled, at block 920, the intent and the parameter are provided to a software application. For
example, if, at block 915, it is determined that the user device can access a software application
configured to perform the requested task according to any identified parameters, the intent and
parameters are provided to the application to perform the task. In the instant example, this
includes determining that a software application configured to reserve a car at a location of the
user device is accessible to the user device. For instance, the ride-booking application Lyft may
be installed on the user device and may be used to reserve a car in accordance with examples
described herein.
                                                  84

1002043087
[0281]        In accordance with a determination that the task corresponding to the intent cannot be
fulfilled, at block 925, a list of one or more software applications is provided. The list of one or
more software applications may, for instance, include one or more software applications
configured to perform the task associated with the intent according to any identified parameters.
In some examples, one or more software application of the list may be identified, for instance,
based on one or more domains associated with the intent (recall that applications may be
registered with one or more domains). With reference to FIG. 1OC, once the list of software
applications (e.g., ride-booking applications) has been determined, the user device may provide
the list to the user. As illustrated, providing the list may include providing a natural-language
input 1022 requesting the user select an application from the list of one or more software
applications. In some examples, the list is generated by the user device. In other examples, the
list of software applications is generated by a server and provided to the user device, which may
in turn provide the list to a user, as described.
[0282]        At block 930, the user device receives a user input indicative of a selection of one or
more software applications of the list of one or more software applications. The user input may
be a touch input on a touch-sensitive display of the user device and/or may be a natural-language
user input.
[0283]        At block 935, the intent and parameters are provided to the software application
selected by the user. In some examples, providing the intent and parameters includes
downloading and/or installing the software application such that the user device may access the
software application locally. In other examples, this includes remotely accessing the selected
application.
[0284]        As described, in response to the intent and parameters, the software application may
provide one or more responses. Once parameters have been validated, the user device may
confirm intent with the software application and cause the software application to perform the
task. The user device may thereafter receive result responses and, optionally, provide one or
more response items of the result response to the user.
[0285]        Reference is made herein to providing a user of a user device with natural-language
outputs and/or natural language queries. In some examples, the manner in which
                                                   85

1002043087
natural-language outputs and queries are provided to a user may depend on a type or state of the
user device. If, for instance, the user device is a mobile phone, the user device may provide a
query using both text and audio. If, on the other hand, the user device is a speaker, the user
device may provide the query using only audio. As another example, if the user device is a
mobile phone not paired with headphones, the user device may provide a query using text and/or
a relatively short natural-language query. If the user device is paired with headphones, the user
device may provide the query using only a relatively long natural-language query.
[0286]       FIGS. 10D-F illustrate exemplary data flows of digital assistant systems in
accordance with some embodiments. Data flows of FIGS. 10D-F may be implemented using one
or more of processes 800, 900 in some examples. FIG. 1OD illustrates an exemplary data flow of
a digital assistant system 1030 in accordance with some embodiments. In particular, FIG. 1OD
illustrates a data flow for an application registration process and a data flow for performance of a
task. Data flows 1031-1041 may be associated with the application registration process
(illustrated in FIG. 1OD as hashed lines) and data flows 1043-1051 may be associated with
performance of a task (illustrated in FIG. 1OD as solid lines).
[0287]       Generally, data flows associated with the application registration process are directed
to registration of an application with an application registration service (e.g., validation service)
by which applications, and custom vocabulary corresponding thereto, can be accessed and/or
employed by a digital assistant to perform tasks.
[0288]       In operation, at data flow 1031, an application is submitted to an application review
module 1032. Both a language model corresponding to the application and intents of the
application may be submitted as well. The language model may include custom vocabulary for
the application. In turn, at data flow 1033, the application review module 1032 may provide the
application, custom vocabulary, and/or intents of the application to the validation service 1034.
The validation service 1034 may determine whether to validate the application, for instance,
based on whether the application is operable with a digital assistant. This may include for
instance, ensuring that any intents of the application correspond to one or more domains of the
application. For instance, the validation service may reject a messaging application associated
with intents to reserve cars because the domain and intents mismatch. The validation service
                                                   86

1002043087
1034, at data flow 1035, may provide a validation response indicating whether the application is
valid.
[0289]       If the validation service 1034 indicates that the application is valid, the application
review module 1032 provides the application (as verified) to the application store 1036.
Generally, the application may be downloaded and/or accessed at the application store 1036 by
the user device 1040 via the DA server 1038, as indicated by the data flow 1039. The user
device 1040 may be the user device 104 of FIG. 1 and the DA server 1038 may be the DA server
106 of FIG. 1 in some examples. This may, for instance, result in an application list (e.g.,
info.plist) of the user device 1040 being updated and/or synchronized with the DA server 1038.
At data flow 1041, the validation service may provide custom vocabulary (e.g., runtime
vocabulary) of the application to the DA server 1038 to assist in parsing natural-language inputs,
as described.
[0290]       Generally, data flows associated with performance of a task are directed to providing
an intent and, optionally, one or more parameters to an application for performing a task
corresponding to the intent.
[0291]       In operation, at data flow 1043, the user device 1040 may provide a natural-language
input to the DA server 1038. The natural-language input may be provided by the digital assistant
1042 of the user device 1040 in some examples. Based on the natural-language input, the DA
server 1038 may identify one or more tasks requested in the natural-language input and one or
more parameters associated with the intent. Additionally, the DA server 1038 may identify an
application for performing a task with the intent. A name (or other form of identifier) of the
identified application 1044 may be a parameter of the intent in some examples. At data flow
1045, the DA server 1038 thereafter provides the intent, parameters, and an identification of the
identified application 1044 to the user device 1040 (e.g., the digital assistant 1042 of the user
device 1040). The intent and parameters may be provided to the user device 1040 as an intent
object in some examples.
[0292]       In response, the digital assistant determines whether the identified application 1044 is
permitted to access information associated with the identified parameters. For instance, if a
                                                    87

1002043087
parameter is a location of the user device 1040, the digital assistant queries data permissions
1046 to determine if the application 1044 is permitted to access location data.
[0293]       In the event that the application is permitted to access data for each of the parameters,
the user device (e.g., the digital assistant 1042 of the user device) provides the intent to the
application. As illustrated, the application may reside on the user device 1040. In other
examples, the application may reside on one or more other devices, and the intent may be
transmitted to the application over one or more networks. As described, the application 1044
may thereafter request input from a user of the user device 1040 if the application determines
that one or more parameters are missing, improper, and/or ambiguous. In some examples,
queries for user input may be provided as natural-language queries generated by the DA server
1038. Accordingly, at data flow 1051, the user device 1040 may request, and thereafter, receive,
one or more natural-language queries. Once all parameters have been resolved, the application
1044 may perform a task corresponding to the intent and provide a result response indicating
whether the task was successfully performed.
[0294]       One or more of the data flows of FIG. 1OD are implemented (e.g., generated), for
example, using one or more electronic devices (e.g., devices 104, 108, 200, 400, or 600)
implementing a digital assistant. In particular, data flows provided between DA server 1038 and
the digital assistant 1042 of the user device 1040 are illustrated as relying on a client-server
architecture. In other examples, the DA server 1038 may be implemented as a process and/or
service on the user device 1040. Accordingly, data flows exchanged between the DA server
1038 and the digital assistant 1042 may be exchanged solely on the user device 1040 in some
examples.
[0295]       FIG. 1OE illustrates an exemplary data flow of a digital assistant system 1060 in
accordance with some embodiments. In particular, FIG. 1OE illustrates an exemplary data flow
for an application registration process and may be used to implement the application registration
process as set forth in FIG. 1OD. Further, several elements of FIG. 1OE correspond to elements
of FIG. 1OD, respectively, and have been provided with the same reference numerals. In the
interest of brevity, an explanation of their function and operation will not be repeated.
                                                    88

1002043087
[0296]      At data flow 1065, validated vocabulary is provided from validation service 1034 to
global application vocabulary store 1060. Generally, the global application vocabulary store
may store language models and/or vocabulary for any number and/or versions of software
applications. At data flows 1061 and 1063, speech training module 1062 and natural-language
training module 1064 are trained to recognize and natural language process the application
specific vocabulary supplied with the validated application. Based on the data, the global
application vocabulary store may generate and/or train one or more language models that allow
the digital assistant to recognize and process utterances containing the application specific
vocabulary.
[0297]      During operation of a user device, such as the user device 1040 of FIG. 1OD, the
runtime-specific global application vocabulary store may receive vocabulary and/or language
models for one or more applications of the user device from the global application vocabulary
store 1060. The vocabulary may be specific to a user ID of a user of the user device, and/or may
be specific to versions of applications and/or operating systems of the user device. Based on the
vocabulary, one or more terms of natural-language inputs may be identified, for instance, as
parameters.
[0298]      FIG. 11 illustrates a flow diagram of a process 1100 for operating a digital assistant in
accordance with some embodiments. Process 1100 is performed, for example, using one or more
electronic devices (e.g., devices 104, 108, 200, 400, or 600) implementing a digital assistant. In
some examples, the process 1100 is performed using a client-server system (e.g., system 100),
and the blocks of the process 1100 can be divided up in any manner between the server (e.g., DA
server 106) and a client device. In other examples, the process 1100 can be divided up between
the server and multiple client devices (e.g., a mobile phone and a smart watch). Thus, while
portions of the process 1100 are described herein as being performed by particular devices of a
client-server system, it will be appreciated that the process 1100 is not so limited. In other
examples, the process 1100 is performed using only a client device (e.g., user device 104) or
multiple client devices. In process 1100, some blocks are, optionally, combined, the order of
some blocks is, optionally, changed, and some blocks are, optionally, omitted. In some
examples, additional steps may be performed in combination with the process 1100.
                                                   89

1002043087
[02991      At block 1105, the electronic device receives an audio input including a natural
language user input.
[0300]      At block 1110, the electronic device identifies an intent object of a set of intent
objects. The intent object is derived from the natural-language user input. In some examples,
identifying an intent object of a set of intent objects comprises identifying the intent object of the
set of intent objects based on a type of the electronic device.
[0301]      At block 1115, the electronic device identifies a software application associated with
the intent object of the set of intent objects. In some examples, identifying a software application
associated with the intent object of the set of intent objects comprises identifying a first
parameter associated with the intent object.
[0302]      In some examples, the electronic device receives a plurality of terms from another
electronic device; receiving a natural-language user input comprises receiving a natural-language
user input including a term of the plurality of terms; and identifying a software application
associated with the intent object of the set of intent objects comprises identifying the software
application based on the term of the plurality of terms.
[0303]      At block 1120, the electronic device provides the intent object to the software
application. Providing the intent object causes the software application to perform a task
associated with the intent object. In some examples, providing the intent object to the software
application to cause the software application to perform a task associated with the intent object
comprises providing the first parameter to the software application. In some examples,
providing the intent object to the software application includes, after identifying the software
application, determining whether a user input requesting cancellation or modification of the task
has been received during a period of time, and in accordance with a determination that the user
input requesting cancellation or modification of the task has not been received during the period
of time, providing the intent object to the software application. In some examples, providing the
intent object to the software application includes providing the intent object to the software
application without user confirmation of the intent object.
                                                   90

1002043087
[0304]      In some examples, the electronic device identifies a plurality of candidate parameters
associated with the intent and provides the plurality of candidate parameters to the software
application.
[0305]      In some examples, the electronic device receives a disambiguation request
corresponding to a parameter from the software application, identifies a candidate parameter
from a set of candidate parameters associated with the parameter, and provides the selected
candidate parameter to the software application.
[0306]      In some examples, the natural-language user input is a first natural-language user
input. The electronic device receives, from the software application, a request for a second
parameter associated with the intent object, provides a natural-language query based on the
request, receives a second natural-language user input, identifies the second parameter, the
second parameter derived from the second natural-language user input, and provides the second
parameter to the software application.
[0307]      In some examples, the electronic device receives, from the software application, a
request for a parameter associated with the intent object, identifies, using the electronic device, a
natural-language query based on the request, the natural-language query associated with the
software application and the parameter; provides the natural-language query, receives a fourth
user input, identifies the parameter based on the fourth user input, and provides the parameter to
the software application.
[0308]      At block 1125, the electronic device receives a result response indicating whether the
task was successfully performed. The result response may be received from the software
application.
[0309]      At block 1130, the electronic device provides an output indicating whether the task
was performed. In some examples, the output indicates that the software application
successfully performed the task. In some examples, the output indicates that the software
application failed to perform the task. In some examples, providing an output indicating whether
the task was performed comprises receiving, from the software application, a set of view
                                                 91

1002043087
controller parameter values and providing the output according to the set of view controller
parameter values.
[0310]      In some examples, after providing the output, the electronic device receives a second
input and, in response to the second input, adjusts an operation associated with the task. In some
examples, adjusting an operation associated with the task includes adjusting the intent object,
and providing the adjusted intent object to the software application. In some examples, adjusting
the intent object includes adjusting a parameter of the intent object. In some examples, receiving
a second input comprises detecting a selection of an affordance, and adjusting an operation
associated with the task comprises adjusting the operation associated with the task in response to
the selection of the affordance.
[0311]      In some examples, after providing the output, the electronic device receives a third
input, and in response to the third input, provides another intent object to the software
application to cause the software application to perform a task associated with the another intent
object. In some examples, receiving a third input comprises detecting a selection of an
affordance, and providing another intent object to the software application to cause the software
application to perform a task associated with the another intent object comprises providing the
another intent object to the software application in response to the selection of the affordance. In
some examples, the intent object and the another intent object are a same type of intent object
and a parameter associated with the intent object and a parameter associated with the another
intent object have a same value. In some examples, the intent object and the another intent
object are a same intent object.
[0312]      FIG. 12 illustrates a flow diagram of a process 1200 for operating a digital assistant in
accordance with some embodiments. Process 1200 is performed, for example, using one or more
electronic devices (e.g., devices 104, 108, 200, 400, or 600) implementing a digital assistant. In
some examples, the process 1200 is performed using a client-server system (e.g., system 100),
and the blocks of the process 1200 can be divided up in any manner between the server (e.g., DA
server 106) and a client device. In other examples, the process 1200 can be divided up between
the server and multiple client devices (e.g., a mobile phone and a smart watch). Thus, while
portions of the process 1200 are described herein as being performed by particular devices of a
                                                  92

1002043087
client-server system, it will be appreciated that the process 1200 is not so limited. In other
examples, the process 1200 is performed using only a client device (e.g., user device 104) or
multiple client devices. In process 1200, some blocks are, optionally, combined, the order of
some blocks is, optionally, changed, and some blocks are, optionally, omitted. In some
examples, additional steps may be performed in combination with the process 1200.
[0313]      At block 1205, the electronic device identifies an intent object of a set of intent
objects, wherein the intent object is derived from a natural-language user input.
[03141      At block 1210, the electronic device identifies a software application associated with
the intent object of the set of intent objects.
[0315]      At block 1215, the electronic device receives, from a second electronic device, a task
flow associated with the software application. In some examples, receiving a task flow
associated with the software application comprises receiving the task flow from another
electronic device and storing the task flow on the electronic device.
[0316]      At block 1220, the electronic device provides the intent object to the software
application to cause the software application to perform a task associated with the intent object.
[03171      At block 1225, the electronic device receives a request from the software application
[03181      At block 1230, the electronic device determines a query based on the request. The
query is determined in accordance with the task flow. In some examples, determining a query
based on the request comprises retrieving the query from the task flow stored on the electronic
device.
[0319]      At block 1235, the electronic device provides the query using the touch-sensitive
display.
[0320]      At block 1240, the electronic device receives a second user input indicative of a query
response. The second user input is received after providing the query in some examples. In
some examples, the query response is indicative of a parameter associated with the intent object.
                                                  93

1002043087
[03211      At block 1245, the electronic device provides the query response to the software
application. In some examples, providing the query response to the software application
comprises adjusting the intent object and providing the adjusted intent object to the software
application.
[0322]      In some examples, the electronic device receives, from the software application, a
result response indicating whether the task was successfully performed and provides an output
indicating whether the task was performed.
[03231      In accordance with some embodiments, FIG. 14 shows a functional block diagram of
an electronic device 1400 configured in accordance with the principles of the various described
embodiments, including those described with reference to FIG. 11. The functional blocks of the
device are, optionally, implemented by hardware, software, or a combination of hardware and
software to carry out the principles of the various described embodiments. It is understood by
persons of skill in the art that the functional blocks described in FIG. 14 are, optionally,
combined or separated into sub-blocks to implement the principles of the various described
embodiments. Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[0324]      As shown in FIG. 14, an electronic device 1400 includes a touch-sensitive display
unit 1402 and a processing unit 1408 optionally coupled to touch-sensitive display unit 1402. In
some embodiments, the processing unit 1108 includes a receiving unit 1410, an identifying unit
1412, a providing unit 1414, and optionally, an adjusting unit 1416, a detecting unit 1418, and a
determining unit 1420.
[0325]      In some examples, the processing unit 1408 is configured to receive (e.g., with the
receiving unit 1410) an audio input including a natural-language user input; identify (e.g., with
the identifying unit 1412) an intent object of a set of intent objects, wherein the intent object is
derived from the natural-language user input; identify (e.g., with the identifying unit 1412) a
software application associated with the intent object of the set of intent objects; provide (e.g.,
with the providing unit 1414) the intent object to the software application to cause the software
application to perform a task associated with the intent object; receive (e.g., with the receiving
unit 1410), from the software application, a result response indicating whether the task was
                                                   94

1002043087
successfully performed; and provide (e.g., with the providing unit 1414) an output indicating
whether the task was performed.
[0326]       In some examples, identifying a software application associated with the intent object
of the set of intent objects comprises identifying (e.g., with the identifying unit 1412) a first
parameter associated with the intent object, and providing the intent object to the software
application to cause the software application to perform a task associated with the intent object
comprises providing (e.g., with the providing unit 1414) the first parameter to the software
application.
[0327]       In some examples, the natural-language user input is a first natural-language input,
and the processing unit 1408 is further configured to: receive (e.g., with the receiving unit 1410),
from the software application, a request for a second parameter associated with the intent object;
provide (e.g., with the providing unit 1414) a natural-language query based on the request;
receive (e.g., with the receiving unit 1410) a second natural-language user input; and identify
(e.g., with the identifying unit 1412) the second parameter, the second parameter derived from
the second natural-language user input; and provide the second parameter to the software
application.
[0328]       In some examples, the output indicates that the software application successfully
performed the task.
[0329]       In some examples, the processing unit 1408 is further configured to, after providing
the output, receive (e.g., with the receiving unit 1410) a second input; and in response to the
second input, adjust (e.g., with the adjusting unit 1416) an operation associated with the task.
[0330]       In some examples, adjusting an operation associated with the task comprises
adjusting (e.g., with the adjusting unit 1416) the intent object and providing (e.g., with the
providing unit 1414) the adjusted intent object to the software application.
[0331]       In some examples, adjusting the intent object comprises adjusting (e.g., with the
adjusting unit 1416) a parameter of the intent object.
                                                  95

1002043087
[0332]      In some examples, receiving a second input comprises detecting (e.g., with the
detecting unit 1418) a selection of an affordance, and adjusting an operation associated with the
task comprises adjusting (e.g., with the adjusting unit 1416) the operation associated with the
task in response to the selection of the affordance.
[0333]      In some examples, the output indicates that the software application failed to perform
the task.
[0334]      In some examples, the processing unit 1408 is further configured to, after providing
the output, receive (e.g., with the receiving unit 1410) a third input; and in response to the third
input, provide (e.g., with the providing unit 1414) another intent object to the software
application to cause the software application to perform a task associated with the another intent
object.
[0335]      In some examples, receiving a third input comprises detecting (e.g., with the detecting
unit 1418) a selection of an affordance, and providing another intent object to the software
application to cause the software application to perform a task associated with the another intent
object comprises providing (e.g., with the providing unit 1414) the another intent object to the
software application in response to the selection of the affordance.
[0336]      In some examples, the intent object and the another intent object are a same type of
intent object and a parameter associated with the intent object and a parameter associated with
the another intent object have a same value.
[0337]      In some examples, the intent object and the another intent object are a same intent
object.
[0338]      In some examples, providing an output indicating whether the task was performed
comprises receiving (e.g., with the receiving unit 1410), from the software application, a set of
view controller parameter values; and providing (e.g., with the providing unit 1414) the output
according to the set of view controller parameter values.
[0339]      In some examples, the processing unit 1408 is further configured to receive (e.g., with
the receiving unit 1410) a plurality of terms from another electronic device, receiving a natural
                                                  96

1002043087
language user input comprises receiving (e.g., with the receiving unit 1410) a natural-language
user input including a term of the plurality of terms, and identifying a software application
associated with the intent object of the set of intent objects comprises identifying (e.g., with the
identifying unit 1412) the software application based on the term of the plurality of terms.
[0340]      In some examples, identifying an intent object of a set of intent objects comprises
identifying (e.g., with the identifying unit 1412) the intent object of the set of intent objects
based on a type of the electronic device.
[03411      In some examples, the processing unit 1408 is further configured to identify (e.g.,
with the identifying unit 1412) a plurality of candidate parameters associated with the intent; and
provide (e.g., with the providing unit 1414) the plurality of candidate parameters to the software
application.
[0342]      In some examples, the processing unit 1408 is further configured to receive (e.g., with
the receiving unit 1410) a disambiguation request corresponding to a parameter from the
software application, identify (e.g., with the identifying unit 1412) a candidate parameter from a
set of candidate parameters associated with the parameter, and provide (e.g., with the providing
unit 1414) the selected candidate parameter to the software application.
[0343]      In some examples, providing the intent object to the software application to cause the
software application to perform a task associated with the intent object comprises, after
identifying the software application, determining (e.g., with the determining unit 1420) whether a
user input requesting cancellation or modification of the task has been received during a period
of time; and in accordance with a determination that the user input requesting cancellation or
modification of the task has not been received during the period of time, providing (e.g., with the
providing unit 1414) the intent object to the software application.
[0344]      In some examples, in accordance with a determination that the user input requesting
cancellation or modification of the task has not been received during the period of time,
providing the intent object to the software application comprises providing (e.g., with the
providing unit 1414) the intent object to the software application without user confirmation of
the intent object.
                                                   97

1002043087
[0345]       In some examples, the processing unit 1408 is further configured to receive (e.g., with
the receiving unit 1410), from the software application, a request for a parameter associated with
the intent object; identify (e.g., with the identifying unit 1412), using the electronic device, a
natural-language query based on the request, the natural-language query associated with the
software application and the parameter; provide (e.g., with the providing unit 1414) the natural
language query; receive (e.g., with the receiving unit 1410) a fourth user input; identify (e.g.,
with the identifying unit 1412) the parameter based on the fourth user input; and provide (e.g.,
with the providing unit 1414) the parameter to the software application.
[0346]       The operation described above with respect to FIG. 11 is, optionally, implemented by
components depicted in FIGS. 1, 2A, 4, 6A-B, 7A, and 14. For example, receiving operations
1105 and 1125, identifying operations 1110 and 1115, and providing operations 1120 and 1130
are optionally implemented by processor(s) 120. It would be clear to a person of ordinary skill in
the art how other processes can be implemented based on the components depicted in FIGS. 1,
2A, 4, 6A-B, 7A, and 14.
[0347]       It is understood by persons of skill in the art that the functional blocks described in
FIG. 14 are, optionally, combined or separated into sub-blocks to implement the principles of the
various described embodiments. Therefore, the description herein optionally supports any
possible combination or separation or further definition of the functional blocks described herein.
For example, processing unit 1408 can have an associated "controller" unit that is operatively
coupled with processing unit 1408 to enable operation. This controller unit is not separately
illustrated in FIG. 14 but is understood to be within the grasp of one of ordinary skill in the art
who is designing a device having a processing unit 1408, such as device 1400. As another
example, one or more units, such as the receiving unit 1410, may be hardware units outside of
processing unit 1408 in some embodiments. The description herein thus optionally supports
combination, separation, and/or further definition of the functional blocks described herein.
[0348]       In accordance with some embodiments, FIG. 15 shows a functional block diagram of
an electronic device 1500 configured in accordance with the principles of the various described
embodiments, including those described with reference to FIG. 11. The functional blocks of the
device are, optionally, implemented by hardware, software, or a combination of hardware and
                                                    98

1002043087
software to carry out the principles of the various described embodiments. It is understood by
persons of skill in the art that the functional blocks described in FIG. 15 are, optionally,
combined or separated into sub-blocks to implement the principles of the various described
embodiments. Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[0349]       As shown in FIG. 15, one or more electronic devices 1500 include one or more
processing units 1508 and one or more touch-sensitive displays 1502. In some embodiments, the
one or more processing units 1508 include a receiving unit 1510, an obtaining unit 1512, a
determining unit 1514, a providing unit 1516, and optionally, a performing unit 1518
[0350]       In some examples, the one or more processing units 1508 is configured to receive
(e.g., with the receiving unit 1510) an audio input including a natural-language user input; obtain
(e.g., with the obtaining unit 1512) a text string from the natural-language user input; determine
(e.g., with the determining unit 1514) an intent object of a set of intent objects based on the text
string; determine (e.g., with the determining unit 1514) a software application associated with the
intent object of the set of intent objects; provide (e.g., with the providing unit 1516) the intent
object to the software application to cause the software application to perform a task associated
with the intent object; receive (e.g., with the receiving unit 1510), from the software application,
a result response indicating whether the task was successfully performed; and provide (e.g., with
the providing unit 1516) an output indicating whether the task was performed.
[0351]       In some examples, determining an intent object of a set of intent objects based on the
text string comprises performing (e.g., with the performing unit 1518) natural language
processing on the text string to determine an intent of the natural-language user input and
identifying (e.g., with the identifying unit 1520) an intent object associated with the intent.
[0352]       In some examples, providing an output indicating whether the task was performed
comprises providing (e.g., with the providing unit 1516) a natural-language output.
[0353]       In some examples, determining a software application associated with the intent
object of the set of intent objects comprises determining (e.g., with the determining unit 1514) a
parameter associated with the intent object, and providing the intent object to the software
                                                   99

1002043087
application to cause the software application to perform a task associated with the intent object
comprises providing (e.g., with the providing unit 1516) the parameter to the software
application.
[0354]      In some examples, determining an intent object of a set of intent objects comprises
determining (e.g., with the determining unit 1514) the intent object of the set of intent objects
based on a type of the electronic device.
[0355]      The operation described above with respect to FIG. 11 is, optionally, implemented by
components depicted in FIGS. 1, 2A, 4, 6A-B, 7A, and 15. For example, receiving operations
1105 and 1125, identifying operations 1110 and 1115, and providing operations 1120 and 1130
are optionally implemented by processor(s) 120. It would be clear to a person of ordinary skill in
the art how other processes can be implemented based on the components depicted in FIGS. 1,
2A, 4, 6A-B, 7A, and 15.
[0356]      It is understood by persons of skill in the art that the functional blocks described in
FIG. 15 are, optionally, combined or separated into sub-blocks to implement the principles of the
various described embodiments. Therefore, the description herein optionally supports any
possible combination or separation or further definition of the functional blocks described herein.
For example, the one or more processing units 1508 can have an associated "controller" unit that
is operatively coupled with at least one of the one or more processing units 1508 to enable
operation. This controller unit is not separately illustrated in FIG. 15 but is understood to be
within the grasp of one of ordinary skill in the art who is designing a device having one or more
processing units 1508, such as device 1500. As another example, one or more units, such as the
receiving unit 1510, may be hardware units outside of the one or more processing units 1208 in
some embodiments. The description herein thus optionally supports combination, separation,
and/or further definition of the functional blocks described herein.
[0357]      In accordance with some embodiments, FIG. 16 shows a functional block diagram of
an electronic device 1600 configured in accordance with the principles of the various described
embodiments, including those described with reference to FIG. 12. The functional blocks of the
device are, optionally, implemented by hardware, software, or a combination of hardware and
software to carry out the principles of the various described embodiments. It is understood by
                                                  100

1002043087
persons of skill in the art that the functional blocks described in FIG. 16 are, optionally,
combined or separated into sub-blocks to implement the principles of the various described
embodiments. Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[0358]      As shown in FIG. 16, one or more electronic devices 1600 include a touch-sensitive
display unit 1602 and a processing unit 1608 optionally coupled to the touch-sensitive display
unit. In some embodiments, the one or more processing units 1608 include an identifying unit
1610, a receiving unit 1612, a providing unit 1614, a determining unit 1616, and optionally, an
adjusting unit 1618 and a retrieving unit 1620.
[0359]      In some examples, the processing unit 1608 is configured to identify (e.g., with the
identifying unit 1610) an intent object of a set of intent objects, the intent object derived from a
natural-language user input; identify (e.g., with the identifying unit 1610) a software application
associated with the intent object of the set of intent objects; receive (e.g., with the receiving unit
1612), from a second electronic device, a task flow associated with the software application;
provide (e.g., with the providing unit 1614) the intent object to the software application to cause
the software application to perform a task associated with the intent object; receive a request
from the software application; determine (e.g., with the determining unit 1616) a query based on
the request, wherein the query is determined in accordance with the task flow; provide (e.g., with
the providing unit 1614) the query using the touch-sensitive display 1602; after providing the
query, receive (e.g., with the receiving unit 1612) a second user input indicative of a query
response; and provide (e.g., with the providing unit 1614) the query response to the software
application.
[03601      In some examples, the processing unit 1608 is further configured to receive (e.g., with
the receiving unit 1612), from the software application, a result response indicating whether the
task was successfully performed and provide (e.g., with the providing unit 1614) an output
indicating whether the task was performed.
[0361]      In some examples, providing the query response to the software application
comprises adjusting (e.g., with the adjusting unit 1618) the intent object and providing the
adjusted intent object to the software application.
                                                   101

1002043087
[0362]       In some examples, receiving a task flow associated with the software application
comprises receiving (e.g., with the receiving unit 1612) the task flow from another electronic
device and storing the task flow on the electronic device.
[0363]       In some examples, determining a query based on the request comprises retrieving
(e.g., with the retrieving unit 1620) the query from the task flow stored on the electronic device.
[0364]       In some examples, the query response is indicative of a parameter associated with the
intent object.
[0365]       The operation described above with respect to FIG. 12 is, optionally, implemented by
components depicted in FIGS. 1, 2A, 4, 6A-B, 7A, and 16. For example, identifying operations
1205 and 1210; receiving operations 1215, 1225, and 1240; providing operations 1220, 1235,
and 1245; and determining operation 1230, are optionally implemented by processor(s) 120. It
would be clear to a person of ordinary skill in the art how other processes can be implemented
based on the components depicted in FIGS. 1, 2A, 4, 6A-B, 7A, and 16.
[0366]       It is understood by persons of skill in the art that the functional blocks described in
FIG. 16 are, optionally, combined or separated into sub-blocks to implement the principles of the
various described embodiments. Therefore, the description herein optionally supports any
possible combination or separation or further definition of the functional blocks described herein.
For example, the one or more processing units 1608 can have an associated "controller" unit that
is operatively coupled with at least one of the one or more processing units 1608 to enable
operation. This controller unit is not separately illustrated in FIG. 16 but is understood to be
within the grasp of one of ordinary skill in the art who is designing a device having one or more
processing units 1608, such as device 1600. As another example, one or more units, such as the
identifying unit 1610, may be hardware units outside of the one or more processing units 1608 in
some embodiments. The description herein thus optionally supports combination, separation,
and/or further definition of the functional blocks described herein.
[0367]       In accordance with some embodiments, FIG. 17 shows a functional block diagram of
an electronic device 1400 configured in accordance with the principles of the various described
embodiments, including those described with reference to FIG. 12. The functional blocks of the
                                                   102

1002043087
device are, optionally, implemented by hardware, software, or a combination of hardware and
software to carry out the principles of the various described embodiments. It is understood by
persons of skill in the art that the functional blocks described in FIG. 17 are, optionally,
combined or separated into sub-blocks to implement the principles of the various described
embodiments. Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[03681       As shown in FIG. 17, an electronic device 1700 includes a touch-sensitive display
unit 1402 and one or more processing units 1708. In some embodiments, the one or more
processing units 1702 include a determining unit 1710, an identifying unit 1712, a providing unit
1714, a receiving unit 1716, and optionally, an obtaining unit 1718 and a storing unit 1720.
[0369]       In some examples, the one or more processing units 1708 are configured to determine
(e.g., with the determining unit 1710) intent object of a set of intent objects; identify (e.g., with
the identifying unit 1712) a software application associated with the intent object of the set of
intent objects; determine (e.g., with the determining unit 1710) a task flow associated with the
software application; provide (e.g., with the providing unit 1714) the intent object to the software
application to cause the software application to perform a task associated with the intent object;
receive (e.g., with the receiving unit 1716) a request from the software application; determine
(e.g., with the determining unit 1710) a query based on the request, the query determined in
accordance with the task flow; provide (e.g., with the providing unit 1714) the query using the
touch-sensitive display; after providing the query, receive (e.g., with the receiving unit 1716) a
second user input indicative of a query response; and provide (e.g., with the providing unit 1714)
the query response to the software application.
[03701       In some examples, the one or more processing units 1708 are further configured to
receive (e.g., with the receiving unit 1716) an audio input including a natural-language user input
and obtain (e.g., with the obtaining unit 1718) a text string from the natural-language user input,
and determining an intent object of a set of intent objects comprises determining (e.g., with the
determining unit 1710) an intent object of a set of intent objects based on the text string.
[0371]       In some examples, the one or more processing units 1708 are further configured to
receive (e.g., with the receiving unit 1716), from the software application, a result response
                                                   103

1002043087
indicating whether the task was successfully performed and provide (e.g., with the providing unit
1714) an output indicating whether the task was performed.
[0372]       In some examples, determining a task flow associated with the software application
comprises determining (e.g., with the determining unit 1710) the task flow at a first electronic
device, providing (e.g., with the providing unit 1714) the task flow to a second electronic device
and storing (e.g., with the storing unit 1720) the task flow on the first electronic device.
[0373]       In some examples, determining a query based on the request comprises determining
(e.g., with the determining unit 1710) the query with the first electronic device.
[0374]       The operation described above with respect to FIG. 12 is, optionally, implemented by
components depicted in FIGS. 1, 2A, 4, 6A-B, 7A, and 17. For example, identifying operations
1205 and 1210; receiving operations 1215, 1225, and 1240; providing operations 1220, 1235,
and 1245; and determining operation 1230, are optionally implemented by processor(s) 120. It
would be clear to a person of ordinary skill in the art how other processes can be implemented
based on the components depicted in FIGS. 1, 2A, 4, 6A-B, 7A, and 17.
[0375]       It is understood by persons of skill in the art that the functional blocks described in
FIG. 14 are, optionally, combined or separated into sub-blocks to implement the principles of the
various described embodiments. Therefore, the description herein optionally supports any
possible combination or separation or further definition of the functional blocks described herein.
For example, processing unit 1708 can have an associated "controller" unit that is operatively
coupled with processing unit 1708 to enable operation. This controller unit is not separately
illustrated in FIG. 17 but is understood to be within the grasp of one of ordinary skill in the art
who is designing a device having a processing unit 1708, such as device 1700. As another
example, one or more units, such as the determining unit 1710, may be hardware units outside of
processing unit 1708 in some embodiments. The description herein thus optionally supports
combination, separation, and/or further definition of the functional blocks described herein.
[0376]       Further examples of specific feature combinations taught within the present
disclosure are set out in the following numbered clauses:
         Clause 1.       A method, comprising:
                                                   104

1002043087
         at an electronic device having one or more processors and a touch-sensitive display:
         receiving an audio input including a natural-language user input;
         identifying an intent object of a set of intent objects, wherein the intent object is derived
from the natural-language user input;
         identifying a software application associated with the intent object of the set of intent
objects;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving, from the software application, a result response indicating whether the task
was successfully performed; and
         providing an output indicating whether the task was performed.
Clause 2.        The method of clause 1, wherein:
         identifying a software application associated with the intent object of the set of intent
objects comprises identifying a first parameter associated with the intent object, and
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object comprises providing the first parameter to the
software application.
Clause 3.        The method of any of clauses 1-2, wherein the natural-language user input is a
first natural-language input, the method further comprising:
         receiving, from the software application, a request for a second parameter associated with
the intent object;
         providing a natural-language query based on the request;
         receiving a second natural-language user input; and
         identifying the second parameter, wherein the second parameter is derived from the
second natural-language user input; and
         providing the second parameter to the software application.
Clause 4.        The method of clause 1, wherein the output indicates that the software application
successfully performed the task.
Clause 5.        The method of clause 4, further comprising:
         after providing the output, receiving a second input; and
                                                    105

1002043087
         in response to the second input, adjusting an operation associated with the task.
Clause 6.        The method of clause 5, wherein adjusting an operation associated with the task
comprises:
         adjusting the intent object; and
         providing the adjusted intent object to the software application.
Clause 7.        The method of clause 6, wherein adjusting the intent object comprises adjusting a
parameter of the intent object.
Clause 8.        The method of any of clauses 7, wherein receiving a second input comprises:
         detecting a selection of an affordance, and
         wherein adjusting an operation associated with the task comprises:
         adjusting the operation associated with the task in response to the selection of the
affordance.
Clause 9.        The method of clause 1, wherein the output indicates that the software application
failed to perform the task.
Clause 10.       The method of clause 9, further comprising:
         after providing the output, receiving a third input; and
         in response to the third input, providing another intent object to the software application
to cause the software application to perform a task associated with the another intent object.
Clause 11.       The method of clause 10, wherein receiving a third input comprises:
         detecting a selection of an affordance, and
         wherein providing another intent object to the software application to cause the software
application to perform a task associated with the another intent object comprises:
         providing the another intent object to the software application in response to the selection
of the affordance.
Clause 12.       The method of any of clauses 10-11, wherein the intent object and the another
intent object are a same type of intent object and wherein a parameter associated with the intent
object and a parameter associated with the another intent object have a same value.
Clause 13.       The method of any of clauses 10-11, wherein the intent object and the another
intent object are a same intent object.
                                                  106

1002043087
Clause 14.       The method of any of clauses 1-13, wherein providing an output indicating
whether the task was performed comprises:
         receiving, from the software application, a set of view controller parameter values; and
         providing the output according to the set of view controller parameter values.
Clause 15.       The method of any of clauses 1-14, further comprising:
         receiving a plurality of terms from another electronic device,
         wherein receiving a natural-language user input comprises:
         receiving a natural-language user input including a term of the plurality of terms, and
         wherein identifying a software application associated with the intent object of the set of
intent objects comprises:
         identifying the software application based on the term of the plurality of terms.
Clause 16.       The method of any of clauses 1-15, wherein identifying an intent object of a set of
intent objects comprises:
         identifying the intent object of the set of intent objects based on a type of the electronic
device.
Clause 17.       The method of any of clauses 1-16, further comprising:
         identifying a plurality of candidate parameters associated with the intent; and
         providing the plurality of candidate parameters to the software application.
Clause 18.       The method of any of clauses 1-17, further comprising:
         receiving a disambiguation request corresponding to a parameter from the software
application;
         identifying a candidate parameter from a set of candidate parameters associated with the
parameter; and
         providing the selected candidate parameter to the software application.
Clause 19.       The method of any of clauses 1-18, wherein providing the intent object to the
software application to cause the software application to perform a task associated with the intent
object comprises:
         after identifying the software application, determining whether a user input requesting
cancellation or modification of the task has been received during a period of time; and
                                                   107

1002043087
         in accordance with a determination that the user input requesting cancellation or
modification of the task has not been received during the period of time, providing the intent
object to the software application.
Clause 20.       The method of clause 19, wherein in accordance with a determination that the
user input requesting cancellation or modification of the task has not been received during the
period of time, providing the intent object to the software application comprises:
         providing the intent object to the software application without user confirmation of the
intent object.
Clause 21.       The method of any of clauses 1-20, further comprising:
         receiving, from the software application, a request for a parameter associated with the
intent object;
         identifying, using the electronic device, a natural-language query based on the request,
wherein the natural-language query is associated with the software application and the
parameter;
         providing the natural-language query;
         receiving a fourth user input;
         identifying the parameter based on the fourth user input; and
         providing the parameter to the software application.
Clause 22.       A method, comprising:
         at one or more electronic device, each having one or more processors and a touch
sensitive display:
         receiving an audio input including a natural-language user input;
         obtaining a text string from the natural-language user input;
         determining an intent object of a set of intent objects based on the text string;
         determining a software application associated with the intent object of the set of intent
objects;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving, from the software application, a result response indicating whether the task
was successfully performed; and
         providing an output indicating whether the task was performed.
                                                  108

1002043087
Clause 23.        The method of clause 22, wherein determining an intent object of a set of intent
objects based on the text string comprises:
         performing natural language processing on the text string to determine an intent of the
natural-language user input; and
         identifying an intent object associated with the intent.
Clause 24.        The method of any of clause 22-23, wherein providing an output indicating
whether the task was performed comprises providing a natural-language output.
Clause 25.        The method of any of clauses 22-24, wherein:
         determining a software application associated with the intent object of the set of intent
objects comprises determining a parameter associated with the intent object, and
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object comprises providing the parameter to the
software application.
Clause 26.        The method of any of clauses 22-25, wherein determining an intent object of a set
of intent objects comprises:
         determining the intent object of the set of intent objects based on a type of the electronic
device.
Clause 27.        A method, comprising:
         at a first electronic device having one or more processors and a touch-sensitive display:
         identifying an intent object of a set of intent objects, wherein the intent object is derived
from a natural-language user input;
         identifying a software application associated with the intent object of the set of intent
objects;
         receiving, from a second electronic device, a task flow associated with the software
application;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving a request from the software application;
         determining a query based on the request, wherein the query is determined in accordance
with the task flow;
         providing the query using the touch-sensitive display;
                                                    109

1002043087
         after providing the query, receiving a second user input indicative of a query response;
and
         providing the query response to the software application.
Clause 28.       The method of clause 27, further comprising:
         receiving, from the software application, a result response indicating whether the task
was successfully performed; and
         providing an output indicating whether the task was performed.
Clause 29.       The method of any of clauses 27-28, wherein providing the query response to the
software application comprises:
         adjusting the intent object; and
         providing the adjusted intent object to the software application.
Clause 30.       The method of any of clause 27-29, wherein receiving a task flow associated with
the software application comprises:
         receiving the task flow from another electronic device; and
         storing the task flow on the electronic device.
Clause 31.       The method of clause 30, wherein determining a query based on the request
comprises:
         retrieving the query from the task flow stored on the electronic device.
Clause 32.       The method of any of clauses 27-31, wherein the query response is indicative of a
parameter associated with the intent object.
Clause 33.       A method, comprising:
         at one or more electronic devices, each having one or more processors:
         determining an intent object of a set of intent objects;
         identifying a software application associated with the intent object of the set of intent
objects;
         determining a task flow associated with the software application;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving a request from the software application;
                                                  110

1002043087
         determining a query based on the request, wherein the query is determined in accordance
with the task flow;
         providing the query using the touch-sensitive display;
         after providing the query, receiving a second user input indicative of a query response;
and
         providing the query response to the software application.
Clause 34.       The method of clause 33, further comprising:
         receiving an audio input including a natural-language user input; and
         obtaining a text string from the natural-language user input,
         wherein determining an intent object of a set of intent objects comprises determining an
intent object of a set of intent objects based on the text string.
Clause 35.       The method of any of clauses 33-34, further comprising:
         receiving, from the software application, a result response indicating whether the task
was successfully performed; and
         providing an output indicating whether the task was performed.
Clause 36.       The method of any of clause 33-35, wherein determining a task flow associated
with the software application comprises:
         determining the task flow at a first electronic device;
         providing the task flow to a second electronic device; and
         storing the task flow on the first electronic device.
Clause 37.       The method of clause 36, wherein determining a query based on the request
comprises determining the query with the first electronic device.
Clause 38.       A non-transitory computer-readable storage medium storing one or more
programs, the one or more programs comprising instructions, which when executed by one or
more processors of an electronic device, cause the electronic device to:
         receive an audio input including a natural-language user input;
         identify an intent object of a set of intent objects, wherein the intent object is derived
from the natural-language user input;
         identify a software application associated with the intent object of the set of intent
objects;
                                                    111

1002043087
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive, from the software application, a result response indicating whether the task was
successfully performed; and
         provide an output indicating whether the task was performed.
Clause 39.       One or more non-transitory computer-readable storage media storing one or more
programs, the one or more programs comprising instructions, which when executed by one or
more processors of one or more electronic devices, cause the one or more electronic devices to:
         receive an audio input including a natural-language user input;
         obtain a text string from the natural-language user input;
         determine an intent object of a set of intent objects based on the text string;
         determine a software application associated with the intent object of the set of intent
objects;
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive, from the software application, a result response indicating whether the task was
successfully performed; and
         provide an output indicating whether the task was performed.
Clause 40.       A non-transitory computer-readable storage medium storing one or more
programs, the one or more programs comprising instructions, which when executed by one or
more processors of an electronic device, cause the electronic device to:
         identify an intent object of a set of intent objects, wherein the intent object is derived
from a natural-language user input;
         identify a software application associated with the intent object of the set of intent
objects;
         receive, from a second electronic device, a task flow associated with the software
application;
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive a request from the software application;
         determine a query based on the request, wherein the query is determined in accordance
with the task flow;
                                                    112

1002043087
         provide the query using the touch-sensitive display;
         after providing the query, receive a second user input indicative of a query response; and
         provide the query response to the software application.
Clause 41.       One or more non-transitory computer-readable storage media storing one or more
programs, the one or more programs comprising instructions, which when executed by one or
more processors of one or more electronic devices, cause the one or more electronic devices to:
         determine an intent object of a set of intent objects;
         identify a software application associated with the intent object of the set of intent
objects;
         determine a task flow associated with the software application;
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive a request from the software application;
         determine a query based on the request, wherein the query is determined in accordance
with the task flow;
         provide the query using the touch-sensitive display;
         after providing the query, receiving a second user input indicative of a query response;
and
         provide the query response to the software application.
Clause 42.       An electronic device, comprising:
         one or more processors;
         a memory; and
         one or more programs, wherein the one or more programs are stored in the memory and
configured to be executed by the one or more processors, the one or more programs including
instructions for:
         receiving an audio input including a natural-language user input;
         identifying an intent object of a set of intent objects, wherein the intent object is derived
from the natural-language user input;
         identifying a software application associated with the intent object of the set of intent
objects;
                                                    113

1002043087
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving, from the software application, a result response indicating whether the task
was successfully performed; and
         providing an output indicating whether the task was performed.
Clause 43.       A system, comprising:
         one or more processors of one or more electronic devices;
         one or more memories of the one or more electronic devices; and
         one or more programs, wherein the one or more programs are stored in the one or more
memories and configured to be executed by the one or more processors, the one or more
programs including instructions for:
         receiving an audio input including a natural-language user input;
         obtaining a text string from the natural-language user input;
         determining an intent object of a set of intent objects based on the text string;
         determining a software application associated with the intent object of the set of intent
objects;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving, from the software application, a result response indicating whether the task
was successfully performed; and
         providing an output indicating whether the task was performed.
Clause 44.       An electronic device, comprising:
         one or more processors;
         a memory; and
         one or more programs, wherein the one or more programs are stored in the memory and
configured to be executed by the one or more processors, the one or more programs including
instructions for:
         identifying an intent object of a set of intent objects, wherein the intent object is derived
from a natural-language user input;
                                                    114

1002043087
         identifying a software application associated with the intent object of the set of intent
objects;
         receiving, from a second electronic device, a task flow associated with the software
application;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving a request from the software application;
         determining a query based on the request, wherein the query is determined in accordance
with the task flow;
         providing the query using the touch-sensitive display;
         after providing the query, receiving a second user input indicative of a query response;
and
         providing the query response to the software application.
Clause 45.       A system, comprising:
         one or more processors of one or more electronic devices;
         one or more memories of the one or more electronic devices; and
         one or more programs, wherein the one or more programs are stored in the one or more
memories and configured to be executed by the one or more processors, the one or more
programs including instructions for:
         determining an intent object of a set of intent objects;
         identifying a software application associated with the intent object of the set of intent
objects;
         determining a task flow associated with the software application;
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receiving a request from the software application;
         determining a query based on the request, wherein the query is determined in accordance
with the task flow;
         providing the query using the touch-sensitive display;
                                                  115

1002043087
         after providing the query, receiving a second user input indicative of a query response;
and
         providing the query response to the software application.
Clause 46.       An electronic device, comprising:
         means for receiving an audio input including a natural-language user input;
         means for identifying an intent object of a set of intent objects, wherein the intent object
is derived from the natural-language user input;
         means for identifying a software application associated with the intent object of the set of
intent objects;
         means for providing the intent object to the software application to cause the software
application to perform a task associated with the intent object;
         means for receiving, from the software application, a result response indicating whether
the task was successfully performed; and
         means for providing an output indicating whether the task was performed.
Clause 47.       A system, comprising:
         means for receiving an audio input including a natural-language user input;
         means for obtaining a text string from the natural-language user input;
         means for determining an intent object of a set of intent objects based on the text string;
         means for determining a software application associated with the intent object of the set
of intent objects;
         means for providing the intent object to the software application to cause the software
application to perform a task associated with the intent object;
         means for receiving, from the software application, a result response indicating whether
the task was successfully performed; and
         means for providing an output indicating whether the task was performed.
Clause 48.       An electronic device, comprising:
         means for identifying an intent object of a set of intent objects, wherein the intent object
is derived from a natural-language user input;
         means for identifying a software application associated with the intent object of the set of
intent objects;
                                                  116

1002043087
         means for receiving, from a second electronic device, a task flow associated with the
software application;
         means for providing the intent object to the software application to cause the software
application to perform a task associated with the intent object;
         means for receiving a request from the software application;
         means for determining a query based on the request, wherein the query is determined in
accordance with the task flow;
         means for providing the query using the touch-sensitive display;
         means for, after providing the query, receiving a second user input indicative of a query
response; and
         means for providing the query response to the software application.
Clause 49.      A system, comprising:
         means for determining an intent object of a set of intent objects;
         means for identifying a software application associated with the intent object of the set of
intent objects;
         means for determining a task flow associated with the software application;
         means for providing the intent object to the software application to cause the software
application to perform a task associated with the intent object;
         means for receiving a request from the software application;
         means for determining a query based on the request, wherein the query is determined in
accordance with the task flow;
         means for providing the query using the touch-sensitive display;
         means for after providing the query, receiving a second user input indicative of a query
response; and
         means for providing the query response to the software application.
Clause 50.      An electronic device, comprising:
         one or more processors;
         a memory; and
                                                 117

1002043087
         one or more programs, wherein the one or more programs are stored in the memory and
configured to be executed by the one or more processors, the one or more programs including
instructions for performing the methods of any one of clauses 1-21 and 27-32.
Clause 51.       A system, comprising:
         one or more processors of one or more electronic devices;
         one or more memories of the one or more electronic devices; and
         one or more programs, wherein the one or more programs are stored in the one or more
memories and configured to be executed by the one or more processors, the one or more
programs including instructions for performing the methods of any one of clauses 22-26 and 33
37.
Clause 52.       A non-transitory computer-readable storage medium storing one or more
programs, the one or more programs comprising instructions, which when executed by one or
more processors of an electronic device, cause the electronic device to perform the methods of
any one of clauses 1-21 and 27-32.
Clause 53.       One or more non-transitory computer-readable storage medium storing one or
more programs, the one or more programs comprising instructions, which when executed by one
or more processors of one or more electronic devices, cause the one or more electronic devices to
perform the methods of any one of clauses 22-26 and 33-37.
Clause 54.       An electronic device, comprising:
         means for performing the methods of any one of clauses 1-21 and 27-32.
Clause 55.       A system, comprising:
         means for performing the methods of any one of clauses 22-26 and 33-37.
Clause 56.       An electronic device, comprising:
         one or more processors;
         a touch-sensitive display; and
         a processing unit configured to:
         receive an audio input including a natural-language user input;
         identify an intent object of a set of intent objects, wherein the intent object is derived
from the natural-language user input;
         identify a software application associated with the intent object of the set of intent
objects;
                                                    118

1002043087
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive, from the software application, a result response indicating whether the task was
successfully performed; and
         provide an output indicating whether the task was performed.
Clause 57.        The electronic device of clause 56, wherein:
         identifying a software application associated with the intent object of the set of intent
objects comprises identifying a first parameter associated with the intent object, and
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object comprises providing the first parameter to the
software application.
Clause 58.        The electronic device of any of clauses 56-57, wherein the natural-language user
input is a first natural-language input, wherein the processing unit is further configured to:
         receive, from the software application, a request for a second parameter associated with
the intent object;
         provide a natural-language query based on the request;
         receive a second natural-language user input; and
         identify the second parameter, wherein the second parameter is derived from the second
natural-language user input; and
         provide the second parameter to the software application.
Clause 59.        The electronic device of clause 56, wherein the output indicates that the software
application successfully performed the task.
Clause 60.        The electronic device of clause 59, wherein the processing unit is further
configured to:
         after providing the output, receive a second input; and
         in response to the second input, adjust an operation associated with the task.
Clause 61.        The electronic device of clause 60, wherein adjusting an operation associated with
the task comprises:
         adjusting the intent object; and
         providing the adjusted intent object to the software application.
                                                  119

1002043087
Clause 62.       The electronic device of clause 61, wherein adjusting the intent object comprises
adjusting a parameter of the intent object.
Clause 63.       The electronic device of any of clauses 62, wherein receiving a second input
comprises:
         detecting a selection of an affordance, and
         wherein adjusting an operation associated with the task comprises:
         adjusting the operation associated with the task in response to the selection of the
affordance.
Clause 64.       The electronic device of clause 63, wherein the output indicates that the software
application failed to perform the task.
Clause 65.       The electronic device of clause 64, wherein the processing unit is further
configured to:
         after providing the output, receive a third input; and
         in response to the third input, provide another intent object to the software application to
cause the software application to perform a task associated with the another intent object.
Clause 66.       The electronic device of clause 65, wherein receiving a third input comprises:
         detecting a selection of an affordance, and
         wherein providing another intent object to the software application to cause the software
application to perform a task associated with the another intent object comprises:
         providing the another intent object to the software application in response to the selection
of the affordance.
Clause 67.       The electronic device of any of clauses 65-66, wherein the intent object and the
another intent object are a same type of intent object and wherein a parameter associated with the
intent object and a parameter associated with the another intent object have a same value.
Clause 68.       The electronic device of any of clauses 65-66, wherein the intent object and the
another intent object are a same intent object.
Clause 69.       The electronic device of any of clauses 56-68, wherein providing an output
indicating whether the task was performed comprises:
         receiving, from the software application, a set of view controller parameter values; and
         providing the output according to the set of view controller parameter values.
                                                   120

1002043087
Clause 70.       The electronic device of any of clauses 56-69, wherein the processing unit is
further configured to:
         receive a plurality of terms from another electronic device,
         wherein receiving a natural-language user input comprises:
         receiving a natural-language user input including a term of the plurality of terms, and
         wherein identifying a software application associated with the intent object of the set of
intent objects comprises:
         identifying the software application based on the term of the plurality of terms.
Clause 71.       The electronic device of any of clauses 56-70, wherein identifying an intent object
of a set of intent objects comprises:
         identifying the intent object of the set of intent objects based on a type of the electronic
device.
Clause 72.       The electronic device of any of clauses 56-71, wherein the processing unit is
further configured to:
         identify a plurality of candidate parameters associated with the intent; and
         provide the plurality of candidate parameters to the software application.
Clause 73.       The electronic device of any of clauses 56-72, wherein the processing unit is
further configured to:
         receive a disambiguation request corresponding to a parameter from the software
application;
         identify a candidate parameter from a set of candidate parameters associated with the
parameter; and
         provide the selected candidate parameter to the software application.
Clause 74.       The electronic device of any of clauses 56-73, wherein providing the intent object
to the software application to cause the software application to perform a task associated with the
intent object comprises:
         after identifying the software application, determining whether a user input requesting
cancellation or modification of the task has been received during a period of time; and
         in accordance with a determination that the user input requesting cancellation or
modification of the task has not been received during the period of time, providing the intent
object to the software application.
                                                   121

1002043087
Clause 75.       The electronic device of clause 74, wherein in accordance with a determination
that the user input requesting cancellation or modification of the task has not been received
during the period of time, providing the intent object to the software application comprises:
         providing the intent object to the software application without user confirmation of the
intent object.
Clause 76.       The electronic device of any of clauses 56-75, wherein the processing unit is
further configured to:
         receive, from the software application, a request for a parameter associated with the
intent object;
         identify, using the electronic device, a natural-language query based on the request,
wherein the natural-language query is associated with the software application and the
parameter;
         provide the natural-language query;
         receive a fourth user input;
         identify the parameter based on the fourth user input; and
         provide the parameter to the software application.
Clause 77.       A system, comprising:
         one or more electronic devices comprising one or more processing units and one or more
touch-sensitive displays, the one or more processing units configured to:
         receive an audio input including a natural-language user input;
         obtain a text string from the natural-language user input;
         determine an intent object of a set of intent objects based on the text string;
         determine a software application associated with the intent object of the set of intent
objects;
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive, from the software application, a result response indicating whether the task was
successfully performed; and
         provide an output indicating whether the task was performed.
Clause 78.       The system of clause 77, wherein determining an intent object of a set of intent
objects based on the text string comprises:
                                                   122

1002043087
         performing natural language processing on the text string to determine an intent of the
natural-language user input; and
         identifying an intent object associated with the intent.
Clause 79.       The system of any of clauses 77-78, wherein providing an output indicating
whether the task was performed comprises providing a natural-language output.
Clause 80.       The system of any of clauses 77-79, wherein:
         determining a software application associated with the intent object of the set of intent
objects comprises determining a parameter associated with the intent object, and
         providing the intent object to the software application to cause the software application to
perform a task associated with the intent object comprises providing the parameter to the
software application.
Clause 81.       The system of any of clauses 77-80, wherein determining an intent object of a set
of intent objects comprises:
         determining the intent object of the set of intent objects based on a type of the electronic
device.
Clause 82.       An electronic device, comprising:
         a processing unit configured to:
         identify an intent object of a set of intent objects, wherein the intent object is derived
from a natural-language user input;
         identify a software application associated with the intent object of the set of intent
objects;
         receive, from a second electronic device, a task flow associated with the software
application;
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive a request from the software application;
         determine a query based on the request, wherein the query is determined in accordance
with the task flow;
         provide the query using the touch-sensitive display;
         after providing the query, receive a second user input indicative of a query response; and
         provide the query response to the software application.
                                                    123

1002043087
Clause 83.       The electronic device of clause 82, wherein the processing unit is further
configured to:
         receive, from the software application, a result response indicating whether the task was
successfully performed; and
         provide an output indicating whether the task was performed.
Clause 84.       The electronic device of any of clauses 82-83, wherein providing the query
response to the software application comprises:
         adjusting the intent object; and
         providing the adjusted intent object to the software application.
Clause 85.       The electronic device of any of clauses 82-84, wherein receiving a task flow
associated with the software application comprises:
         receiving the task flow from another electronic device; and
         storing the task flow on the electronic device.
Clause 86.       The electronic device of clause 85, wherein determining a query based on the
request comprises:
         retrieving the query from the task flow stored on the electronic device.
Clause 87.       The electronic device of any of clauses 82-86, wherein the query response is
indicative of a parameter associated with the intent object.
Clause 88.       A system, comprising:
         one or more electronic devices comprising one or more processing units, the one or more
processing units configured to:
         determine an intent object of a set of intent objects;
         identify a software application associated with the intent object of the set of intent
objects;
         determine a task flow associated with the software application;
         provide the intent object to the software application to cause the software application to
perform a task associated with the intent object;
         receive a request from the software application;
         determine a query based on the request, wherein the query is determined in accordance
with the task flow;
                                                   124

1002043087
         provide the query using the touch-sensitive display;
         after providing the query, receive a second user input indicative of a query response; and
         provide the query response to the software application.
Clause 89.       The system of clause 88, wherein the one or more processing units are further
configured to:
         receive an audio input including a natural-language user input; and
         obtain a text string from the natural-language user input,
         wherein determining an intent object of a set of intent objects comprises determining an
intent object of a set of intent objects based on the text string.
Clause 90.       The system of any of clauses 88-89, wherein the one or more processing units are
further configured to:
         receive, from the software application, a result response indicating whether the task was
successfully performed; and
         provide an output indicating whether the task was performed.
Clause 91.       The system of any of clauses 88-90, wherein determining a task flow associated
with the software application comprises:
         determining the task flow at a first electronic device;
         providing the task flow to a second electronic device; and
         storing the task flow on the first electronic device.
Clause 92.       The system of clause 91, wherein determining a query based on the request
comprises determining the query with the first electronic device.
[0377]       The foregoing description, for purpose of explanation, has been described with
reference to specific embodiments. However, the illustrative discussions above are not intended
to be exhaustive or to limit the invention to the precise forms disclosed. Many modifications and
variations are possible in view of the above teachings. The embodiments were chosen and
described in order to best explain the principles of the techniques and their practical applications.
Others skilled in the art are thereby enabled to best utilize the techniques and various
embodiments with various modifications as are suited to the particular use contemplated.
                                                   125

1002043087
[0378]     Although the disclosure and examples have been fully described with reference to the
accompanying drawings, it is to be noted that various changes and modifications will become
apparent to those skilled in the art. Such changes and modifications are to be understood as
being included within the scope of the disclosure and examples as defined by the clauses.
                                                126

1002043087
                                               CLAIMS
What is claimed is:
1.       A method, comprising:
         at an electronic device having one or more processors and a touch-sensitive display:
                 identifying an intent object of a set of intent objects, wherein the intent object is
derived from a natural-language user input;
                 identifying a software application associated with the intent object of the set of
intent objects;
                 receiving, from a second electronic device, a task flow associated with the
software application;
                 providing the intent object to the software application to cause the software
application to perform a task associated with the intent object;
                 receiving a request from the software application;
                 determining a query based on the request, wherein the query is determined in
accordance with the task flow;
                 providing the query using the touch-sensitive display;
                 after providing the query, receiving a second user input indicative of a query
response; and
                 providing the query response to the software application.
2.       The method of claim 1, further comprising:
                 receiving, from the software application, a result response indicating whether the
task was successfully performed; and
                 providing an output indicating whether the task was performed.
3.       The method of any of claims 1-2, wherein providing the query response to the software
application comprises:
         adjusting the intent object; and
         providing the adjusted intent object to the software application.
                                                   127

1002043087
4.       The method of any of claim 1-3, wherein receiving a task flow associated with the
software application comprises:
         storing the task flow on the electronic device.
5.       The method of claim 4, wherein determining a query based on the request comprises:
         retrieving the query from the task flow stored on the electronic device.
6.       The method of any of claims 1-5, wherein the query response is indicative of a parameter
associated with the intent object.
7.       A non-transitory computer-readable storage medium storing one or more programs, the
one or more programs comprising instructions, which when executed by one or more processors
of an electronic device having a touch-sensitive display, cause the electronic device to perform
the methods of any one of claims 1-6.
8.       An electronic device, comprising:
         one or more processors;
         a memory;
         a touch-sensitive display; and
         one or more programs, wherein the one or more programs are stored in the memory and
configured to be executed by the one or more processors, the one or more programs including
instructions for performing the methods of any one of claims 1-6.
                                                  128

                                                                               <removed-apn>                <removed-date>
                                                                                            108          System
                                    Server System                                    106                   100
                               Digital Assistant Server
                                                                               116
                             112                           114
                                      Processing
               I/O                     Modules                        Data &
           Interface                                                  Models
             to DA                                                             118
             Client
                                     I/O Interface to External Services
                                                                                                   120
                                                                      110
                                                                                                                         1 of 24
                                                                                                            Navigation
                                                                                                            Service(s)
                                                    Network(s)
104                    122                                                                                  Messaging
                                                                                                            Service(s)
              102
      DA                                                  Telephony                  Calendar              Information
                                                           Service                   Service                Service(s)
                                                                               External Services
                                           FIG. 1

                                                     2 of 24
<removed-date>
                                 Memory 202                    Portable Multifunction Device 200
                                                     226                                             236
              Operating System                              Applications (continued)
              Communication Module                   228                                             254
                                                               Map Module
                                                     230                                             247
              Contact/Motion Module                            Browser Module
                                                     232                                             248
              Graphics Module                                  Calendar Module
                                                     233                                             249
              Haptic Feedback Module                           Widget Modules
                                                      234                                            249-1
              Text Input Module                                    Weather Widget(s)
                                                      235                                            249-2
<removed-apn>
              GPS Module                              229          Stocks Widget
                                                                                                     249-3
              Digital Assistant Client Module         231          Calculator Widget
              User Data and Models                                                                   249-4
                                                      236          Alarm Clock Widget
              Applications                                                                           249-5
                                                      237          Dictionary Widget
                 Contacts Module
                                                      238                                          249-6
                 Telephone Module                                   User-Created Widget(s)
                                                      239
                 Video Conference Module                                                           250
                                                      240       Widget Creator Module
                 E-mail Client Module                                                              251
                                                      241       Search Module
                 Instant Messaging Module                                                          255
                                                      242       Online Video Module
                 Workout Support Module
                                                      243
                 Camera Module                                                                     257
                                                      244 Device/Global Internal State
                 Image Management Module              252                        262
                 Video & Music Player Module                  Power System
                                                      253                        224
                 Notes Module                                  External Port
                                                   218                           RF Circuitry
                                           203                   203 203                           Speaker
                                                                                     208
                  204                                                                               211
                                                                           203   Audio
                                   Controller                                   Circuitry
                 222
                                               203                                210
                                                        Peripherals        203                Microphone
                                                         Interface              Proximity         213
                                                                                 Sensor        266
                                                                          203
                 220              Processor(s)
                                                                                Accelerometer(s)
                                                                                        268
                  206                                            203
                                                    I/O Subsystem
                  Display             Optical         Intensity            Haptic          Other Input
                Controller 256      Sensor(s)        Sensor(s)           Feedback          Controller(s)
                                   Controller 258   Controller 259      Controller 261        260
                          203               203               203                 203               203
                   Touch-             Optical          Contact          Tactile Output     Other Input
                  Sensitive          Sensor(s)        Intensity         Generator(s)     Control Devices
               Display System          264            Sensor(s)               267             216
                     212                                 265
                                                           FIG. 2A

                                                                   <removed-apn>                    <removed-date>
                                                           Event Sorter
                                                              270
                                                                                         271
                                                 Event Monitor
                                                                                          272
                                                 Hit View Determination Module
                                                 Active Event Recognizer                  273
                                                 Determination Module
   Application 236-1
                                                                                          274
Application                                      Event Dispatcher Module
  Application View 291
                               Event Recognizer 280                  Event Recognizer           280
  Application View 291                                                 Event Receiver            282           3 of 24
  Event Handler        290                                             Event Comparator         284
                               Event Recognizer 280
     Data Updater      276                                                 Event Definitions     286
                               Event Data      279
     Object Updater 277                                                       Event 1           287-1
                                                                              Event 2           287-2
     GUI Updater       278
                                                                                 
                                                                       Metadata                 283
  Event Handler        290                                             Event Delivery           288
  Application Internal State
  292
                                              FIG. 2B

                                                     4 of 24
<removed-date>
                               Portable Multifunction Device 200
                    306                          310                                312
                                             Optical Sensor         Proximity
                          Speaker 211
                                                  264              Sensor 266
              308   300
              308
<removed-apn>
                                         310 is SIM card slot
                                         312 is headphone jack
                                                                 302
                                           Touch Screen 212
                                             Contact Intensity
                                              Sensor(s) 265
                                             Tactile Output
                                            Generator(s) 267
                                                                 303
                            Microphone         Home              Accelerometer(s)
                                213             304                    268
                                         External Port 224
                                            FIG. 3

                                                          5 of 24
<removed-date>
                                                                    Operating System                  226
                                                                    Communication Module              228
                                                 Memory 470                                           230
                                                                    Contact/Motion Module
                                                                                                      232
                                                                    Graphics Module
                                                                                                      233
                                                                    Haptic Feedback Module
                                                                                                      234
                                                                    Text Input Module
                                                                                                      229
                                                                    Digital Assistant Client Module
                                                                                                      231
<removed-apn>
                                                                    User Data and Models
                                                                                                      236
                                                                    Applications
                                                                                                      237
                                                                      Contacts Module
                             Device 400                                                               238
                                                                      Telephone Module
                                                                                                      239
                                                                      Video Conference Module
                                                                                                      240
                                                                      E-mail Client Module
                                                                                                      241
                                                                      Instant Messaging Module
                                                                                                      242
                      410                                             Workout Support Module
                                      CPU(s)                                                          243
                                                                      Camera Module
                                                                                                      244
                                                                      Image Management Module         247
                                                 420
                                                                      Browser Module
                                                                                                      248
                                                                      Calendar Module
              430                                                                                     249
                                                                      Widget Modules
                                                                                                      249-1
                     I/O Interface                                          Weather Widget
                                                                                                      249-2
                                                                            Stocks Widget
                                                                                                      249-3
                        Display                440                          Calculator Widget
                                                                                                      249-4
                                                                            Alarm Clock Widget
                                                                                                      249-5
                    Keyboard/Mouse             450                          Dictionary Widget
                                                                                                      249-6
                       Touchpad                455                         User-Created Widget(s)
                                                                                                      250
                                                                       Widget Creator Module
                     Tactile Output                                                                   251
                     Generator(s)              457                     Search Module
                                                                                                      252
                                                                       Video & Music Player Module
                                                                                                      480
                       Sensor(s)               459                     Drawing Module
                                                                                                      482
                                                                       Presentation Module
                                                                                                      484
                                          Network                      Word Processing Module
                                                                                                      486
                            460        Communications                  Website Creation Module
                                                                                                      488
                                          Interface                    Disk Authoring Module
                                                                                                      490
                                                                       Spreadsheet Module
                                                       FIG. 4                                         257
                                                                    Device/Global Internal State

                                                      6 of 24
<removed-date>
                                             Portable Multifunction Device
                      306                                 200
                                                         Optical Sensor             Proximity
                                   Speaker 211
                                                              264                  Sensor 266
                    500
                                                                                          505
              308
                             502                  Current Time             504                          506
<removed-apn>
                                                 Tuesday
              308
                                                 30
                          Messages            Calendar                  Photos              Camera
                               524                 526                      528                530
                      Online Video               Stocks                   Maps              Weather
                             532                     534                   536                  538
                            Clock                Workout                  Notes             Settings
                               540               Support 542                 544                 546
                          App Store               iTunes            Voice Memos             Utilities
                                            514                   510
                                        4                   6
                               Phone 516            Mail 518       Browser 520          iPod 522
                                                            508
                                                                             Touch Screen 212
                                      Microphone                             Accelerometer(s)
                                          213                                      268
                                                   304
                                                         FIG. 5A

                                          7 of 24
<removed-date>
                       550
                                                      568
<removed-apn>
                                                570
                                                            553
              551
                             560
                                  562
               Tactile Output
              Generator(s) 457          552
              Contact Intensity
               Sensor(s) 459
                             FIG. 5B

                             8 of 24
<removed-date>
<removed-apn>
              DEVICE
                 600                   608   602
                       604
                                       606
                                 FIG. 6A

                                                                <removed-apn>         <removed-date>
                                                                   622
600
                                            604     DISPLAY      TOUCH       INTENSITY         624
                                      606
                                                        614        616
                    608       INPUT
                                                      I/O     PROCESSOR(S)   MEMORY            618
              630         COMMUNICATION                           BUS                    612
      632
                                                                                                     9 of 24
                                              634
GPS SENSOR
DIRECTIONAL
                           GYROSCOPE
   SENSOR                                     636
      640                    MOTION
                             SENSOR           638
                                            FIG. 6B

                                                        10 of 24
<removed-date>
                                                                   Operating System                        718
              Digital Assistant System                                                                     720
                                                                   Communication Module
                         700                  Memory 702                                                   722
                                                                   User Interface Module
                                                                                                           724
                                                                   Applications
                                                                                                           726
                                                                   Digital Assistant Module
                                                                                                           728
                                                                      I/O Processing Module
                                                                                                           730
<removed-apn>
                                                                      STT Processing Module
                                                                                                           731
                                                                            ASR System(s)
                                                                                                           732
                                                                      Natural Language Processing Module
                                                                                                           760
                                                                            Ontology
                                                                                                           744
                                                                      Vocabulary
                                                                                                           748
                                                                      User Data
                                                                                                           734
                                                                      Dialogue Flow Processing Module      736
                                                                      Task Flow Processing Module
                                                                                                           754
                                                                            Task Flow Models
                                                                                                           738
                                                                      Service Processing Module
                                                                                                           756
                                                                            Service Models
                    704                                                                                    740
                                                                      Speech Synthesis Module
                               Processor(s)
                                              710
              706
                    I/O Interface
                    I/O Devices           716
                                    708         Network Communications
                                    712                Interface
                                                 Wired Communications
                                    714                   Port
                                                    Wireless Circuitry
                                                    FIG. 7A

                                                                                      <removed-apn>                 <removed-date>
                                                           Digital Assistant
                            728                                            730                                       731
Speech Input                  Speech
                                                  STT Processing                            Phonetic Alphabet
                            Text String              Module                                 Conversion Module
 Text String
                                                            Token Sequence                      Phonetic
                                                                        732                  Representation
        726
                                                 Natural Language                              744                         748
                             Context             Processing Module
                                                                      760
                                                     Ontology                       Vocabulary                User Data
                             Metadata
                   I/O
               Processing                                                                                                              11 of 24
                 Module
                                                                                                       736                       738
                                                           Structured Query
 Follow-Up                                                                              Task Flow                  Service
                                                   740                        734       Processing                Processing
                                                                                         Module                    Module
                                                                                                 754                       756
 Responses
                                      Speech                     Dialogue
                                     Synthesis                  Processing                 Task
  Delayed                                                                                                          Service
                                      Module                     Module                    Flow
 Responses                                                                                                         Models
                                                                                          Models
                                                  FIG. 7B

                                                                                     <removed-apn>          <removed-date>
            760
                                                                                                             764
762
                                          Restaurant Reservation                          Set Reminder
                Restaurant Reservation
                       Domain
                         Restaurant             Party Size               Date/Time           Subject
                                                                                                                       12 of 24
                                                                                          Reminder
                                                                                           Domain
      Cuisine               Price Range          Phone#            Location
                                                             FIG. 7C

                                                    13 of 24
<removed-date>
              800
                                                          805
                                         receive a natural-language user input
                                                            810
                    identify an intent of a set of intents and a parameter associated with the intent
<removed-apn>
                                                         815
                    identify a software application associated with the intent of the set of intents
                                                         820
                             provide the intent and parameter to the software application
                                                         825
                                   receive a response from the software application
                                                         830
                                     confirm intent with the software application
                                                         835
                                receive result response from the software application
                                                      FIG. 8

                                                           14 of 24
<removed-date>
              900
                                                                 905
                                                receive a natural-language user input
                                                                   910
                           identify an intent of a set of intents and a parameter associated with the intent
<removed-apn>
                                                              915
                               determine whether a task corresponding to the intent can be fulfilled
                                                                920
                    in accordance with a determination that the task corresponding to the intent can be fulfilled,
                                  provide the intent and the parameter to a software application
                                                                  925
                       in accordance with a determination that the task corresponding to the intent cannot be
                                   fulfilled, provide a list of one or more software applications
                                                                  930
                     receive a user input indicative of a selection of a software application of the list of one or
                                                     more software applications
                                                                 935
                                            provide the intent to the software application
                                                              FIG. 9

                                                                 <removed-apn>            <removed-date>
1000                          1000                                  1000
                 9:06                            9:06                                9:06
          Which type of car             Your black car is                     Please select an
           do you prefer?            expected to arrive at 123                  application:
                                      Main St. in 5 minutes
   1002                                                                1022
               Budget          1012                                               TaxiDojo
              Black Car                                                        AllTheRides
                SUV                                                                                  15 of 24
                                                                                   CabFair
               Shared                                                              Shuttle
                                          1014
       1004                                                                1024
          FIG. 10A                         FIG. 10B                           FIG. 10C

                                                               16 of 24
<removed-date>
              1030                                                                                             Application
<removed-apn>
                                                                                                               submitted
                                                                                                  1031
                                            1036                                                                      1032
                                                                   1037
                            Application                                                               Application
                              Store                                                                    Review
                                                                                                                       1035
                                   Updated Application
                                    Info.plist Synced                                    Vocabulary                 Validation
                                                                                           Data                     Response
                                          1039
                                                                                           1033
                                                     1038                                                                     1034
                                                            Validated Application Data
                               DA Server                                                       Validation Service
                                                                               1041
                                   1045            1051
                     1043
                                                                                                  1040
                                     1042
                                                     1047          Data Permissions
                                                                                             1046
                                  DA
                                                                      Application            1044
                                                   1049
                                                                   FIG. 10D

                                                                                                      <removed-apn>                 <removed-date>
                                                                                        Application
1060
                                                                                        submitted
                                                                           1031
                     1036                                                                     1032
                                                1037
       Application                                                            Application
         Store                         Validated                               Review
                                      Applications
                                                                                               1035
              Updated Application
               Info.plist Synced                                 Vocabulary                 Validation
                                                                   Data                     Response
                 1039
                                                                   1033
                                                                                                                                         1060
                               1038                                                                   1034                                                  17 of 24
                                                                                                             Validated
                                                                                                            vocabulary      Global App
           DA Server                                                      Validation Service                                Vocabulary
                                                                                                         1065
                                                                                                                              Store
                                                                                                                                             1063
                                      1067                                                                                1061
                         Runtime
                        Vocabulary                                                                                       1062                        1064
                                                          1066
                                                                               1069
                                                                                                                                          Natural
                                     Runtime Specific                                                        Speech
                                                                                                                                         Language
                                     Global Application                                                      Training
                                                                                                                                          Training
                                     Vocabulary Store
                                                                      FIG. 10E

                                                           18 of 24
<removed-date>
              1100
                                                                 1105
                                                        receive an audio input
<removed-apn>
                                                                 1110
                                          identify an intent object of a set of intent objects
                                                                1115
                     identify a software application associated with the intent object of the set of intent objects
                                                                1120
                                        provide the intent object to the software application
                                                               1125
                         receive a result response indicating whether the task was successfully performed
                                                                1130
                                   providing an output indicating whether the task was performed
                                                              FIG. 11

                                                           19 of 24
<removed-date>
              1200
                                                                 1205
                                          identify an intent object of a set of intent objects
                                                                1210
                     identify a software application associated with the intent object of the set of intent objects
<removed-apn>
                                                                1215
                                    receive a task flow associated with the software application
                                                                1220
                                        provide the intent object to the software application
                                                                1225
                                           receive a request from the software application;
                                                               1230
                                               determine a query based on the request
                                                               1235
                                         provide the query using the touch-sensitive display
                                                               1240
                                    receiving a second user input indicative of a query response
                                                               1245
                                       provide the query response to the software application
                                                             FIG. 12

                                                      <removed-apn>   <removed-date>
1300                        1300
                  9:06                         9:06
              Reservation
                                          Payment Failed
              Successful
   1302                            1312
           Change Dest.                       Retry
                Cancel                    New Payment
                                                                                 20 of 24
              Call Driver                 Message Payee
                 OK                            OK
       1304                           1314
          FIG. 13A                        FIG. 13B

                                           21 of 24
<removed-date>   1400
                                                            1408
                      1402
                                                               PROCESSING UNIT
<removed-apn>
                     TOUCH-SENSITIVE DISPLAY                       RECEIVING UNIT     1410
                              UNIT
                                                                   IDENTIFYING UNIT
                                                                                      1412
                                                                   PROVIDING UNIT     1414
                                                                   ADJUSTING UNIT
                                                                                      1416
                                                                   DETECTING UNIT
                                                                                      1418
                                                               DETERMINING UNIT
                                                                                      1420
                                                  FIG. 14

                                           22 of 24
<removed-date>
                          1500
<removed-apn>
                                                  1508
               1502
                                                      PROCESSING UNIT(S)
              TOUCH-SENSITIVE DISPLAY
                                                         RECEIVING UNIT     1510
                       UNIT
                                                         OBTAINING UNIT
                                                                            1512
                                                      DETERMINING UNIT      1514
                                                         PROVIDING UNIT
                                                                            1516
                                                       PERFORMING UNIT      1518
                                                         IDENTIFYING UNIT
                                                                            1520
                                        FIG. 15

                                               23 of 24
<removed-date>
              1600
<removed-apn>
                                                          1608
                      1602
                                                               PROCESSING UNIT
                     TOUCH-SENSITIVE DISPLAY
                                                                 IDENTIFYING UNIT   1610
                              UNIT
                                                                 RECEIVING UNIT
                                                                                    1612
                                                                 PROVIDING UNIT
                                                                                    1614
                                                               DETERMINING UNIT
                                                                                    1616
                                                                 ADJUSTING UNIT
                                                                                    1618
                                                                 RETRIEVING UNIT
                                                                                    1620
                                                     FIG. 16

                                  24 of 24
<removed-date>
                     1708
<removed-apn>
              1700
                       PROCESSING UNIT(S)
                        DETERMINING UNIT       1710
                            IDENTIFYING UNIT
                                               1712
                              PROVIDING        1714
                            RECEIVING UNIT
                                               1716
                               OBTAINING
                                               1718
                             STORING UNIT
                                               1720
                                FIG. 17

