                                         ABSTRACT
The present     invention        provides     a   method   for managing        the  wiring
and  growth    of    a   direct      interconnect        network    implemented       on    a
torus   or    higher       radix      interconnect        structure       based     on     an
architecture that        replaces the Network Interface Card                    (NIC) with
PCIe  switching      cards      housed    in   the   server.     Also    provided      is   a
passive   patch      panel       for    use     in   the    implementation         of     the
interconnect,      comprising:        a   passive     backplane     that     houses    node
to  node   connectivity          for    the    interconnect;      and     at    least     one
connector    board     plugged       into    the   passive    backplane        comprising
multiple    connectors.          The   multiple       connectors       are    capable      of
receiving an     interconnecting           plug to maintain        the    continuity       of
the  torus   or   higher       radix   topology      when   not  fully     enabled.       The
PCIe   card   for     use     in   the    implementation       of    the    interconnect
comprises:     at    least       4   electrical       or   optical      ports     for     the
interconnect;      a    local      switch;      a  processor      with     RAM    and     ROM
memory;  and a PCI interface.

                      9/16
              Top of the Rack Patch Panel
                 Server
   31
   336
       SERVER
       Front                              Back
                  FIGURE 14
33
                                               38
                  FIGURE 15

   METHOD AND APPARATUS TO MANAGE THE DIRECT INTERCONNECT SWITCH
   WIRING AND GROWTH IN COMPUTER NETWORKS
 5 FIELD OF THE INVENTION
   The  present     invention     relates      to  computer      network     topology       and
   architecture.      In   particular,      the present        invention     relates      to a
   method   and    apparatus     for    managing      the   wiring     and    growth      of   a
 0 direct   interconnect      switch implemented           on,   for   example,        a torus
   or higher radix wiring structure.
   BACKGROUND OF THE INVENTION
 5 Each document,       reference,      patent    application       or patent         cited in
   this text is      expressly     incorporated herein           in   their entirety by
   reference,     which means that        it    should be read and considered by
   the reader as part        of this text.          That the document, reference,
   patent  application       or patent       cited in    this text is         not repeated
 0 in this text is merely for reasons of conciseness.
   The  following      discussion     of the background           to the     invention       is
   intended to facilitate an understanding of the present invention
   only.     It   should be     appreciated       that    the    discussion        is   not an
25 acknowledgement       or admission        that any     of the      material        referred
   to was published,        known or part of the common               general knowledge
   of the person skilled in           the art      in   any    jurisdiction        as at    the
   priority date of the invention.
30
   The  term Data      Centers     (DC)   generally      refers     to  facilities         used
   to house     large    computer    systems      (often contained         on racks        that
   house   the     equipment)       and     their     associated       components,          all
                                            1

   connected         by   an    enormous          amount        of   structured             cabling.               Cloud
   Data      Centers      (CDC)      is     a   term     used     to   refer       to      large,         generally
   off-premise facilities that similarly store an entity's data.
 5 Network        switches        are       computer         networking           apparatus              that       link
   network       devices       for      communication/processing                    purposes.               In     other
   words, a        switch is        a telecommunication device that is                                  capable of
   receiving          a   message           from      any      device        connected              to       it,       and
   transmitting           the     message          to    a    specific          device         for       which         the
 0 message       was     to   be     relayed.          A   network         switch        is      also        commonly
   referred        to   as    a    multi-port           network       bridge        that         processes             and
   routes       data.       Here,        by    port,      we    are    referring            to      an     interface
    (outlet        for    a     cable         or     plug)       between         the        switch           and       the
   computer/server/CPU to which it is attached.
 5
   Today,       DCs    and   CDCs        generally         implement          data      center          networking
   using      a   set    of   layer         two     switches.        Layer       two       switches            process
   and     route     data     at    layer        2,    the    data      link      layer,          which         is     the
   protocol        layer    that       transfers         data between             nodes         (e.g.        servers)
 0 on the       same    local      area       network      or adjacent           nodes         in     a   wide area
   network.          A   key     problem         to    solve,       however,         is      how       to     build      a
   large      capacity       computer           network        that     is      able      to      carry         a   very
   large      aggregate         bandwidth            (hundreds        of      TB)     containing               a    very
   large        number      of      ports           (thousands),            that        requires              minimal
25 structure        and    space        (i.e.      minimizing         the      need      for      a     large       room
   to house numerous              cabinets          with     racks     of      cards),         that       is     easily
   scalable, and that may assist in minimizing power consumption.
   The      traditional          network          topology          implementation                is       based        on
   totally        independent           switches         organized          in    a     hierarchical                tree
30 structure         as   shown       in      Figure      1.    Core     switch        2     is      a   very       high
   speed, low count port with a very large switching capacity.                                                         The
   second layer is            implemented using Aggregation switch                                     4, a medium
                                                       2

   capacity          switch         with      a   larger        number        of ports,           while       the       third
   layer         is      implemented              using          lower       speed,          large         port         count
    (forty/forty-eight),                     low capacity            Edge switches               6.    Typically            the
   Edge       switches           are     layer      two,       whereas        the     Aggregation             ports         are
 5 layer        two     and/or         three,       and      the    Core      switch        is     typically            layer
   three.          This        implementation                provides          any       server         8    to       server
   connectivity                in      a   maximum          of     six     hop       links        in      the     example
   provided          (three hops              up    to    the     core     switch         2   and three           down        to
   the destination                  server 8).           Such a hierarchical                   structure is also
 0 usually           duplicated               for      redundancy-reliability                        purposes.              For
   example,          with       reference          to Figure          1,    without         duplication              if     the
   right-most Edge                  switch 6 fails, then there is no                                connectivity to
   the        right-most             servers         8.      In     the     least,          core        switch          2     is
   duplicated since the                       failure of the core switch 2 would generate
 5 a    total       data       center         connectivity           failure.           For     reasons         that        are
   apparent,           this       method has            significant            limitations            in     addressing
   the      challenges             of     the    future         DC   or    CDC.       For      instance,          because
   each       switch        is     completely           self-contained,                this      adds      complexity,
   significant             floor-space             utilization,            complex          cabling          and manual
 0 switches           configuration/provisioning                            that         is     prone         to        human
   error, and increased energy costs.
   Many        attempts           have       been       made,       however,           to     improve          switching
   scalability,               reliability,             capacity        and       latency        in    data       centers.
25 For      instance,            efforts        have      been      made      to    implement           more      complex
   switching           solutions            by    using       a   unified         control         plane       (e.g.         the
   QFabric          System         switch       from Juniper            Networks;           see,       for    instance,
   http://www.juniper.net/us/en/products
   services/switching/qfabric-system/),                                    but        such       a     system           still
30 uses       and maintains the traditional                            hierarchical architecture. In
   addition, given the exponential increase in the number of                                                          system
   users       and data to be                 stored, accessed, and processed, processing
                                                             3

   power      has become          the most         important           factor      when      determining          the
   performance         requirements              of    a     computer        network         system.           While
   server       performance            has    continually             improved,        one     server       is    not
   powerful        enough         to     meet     the       needs.         This    is      why     the     use      of
 5 parallel        processing            has     become         of     paramount         importance.           As     a
   result,       what      was       predominantly             north-south           traffic         flows,       has
   now      primarily       become         east-west         traffic        flows,       in    many     cases       up
   to      80%.    Despite           this      change        in      traffic        flows,         the     network
   architectures           haven't          evolved        to    be     optimal       for    this      model.       It
 0 is      therefore       still         the    topology           of     the    communication             network
    (which       interconnects                the      computing             nodes         (servers))           that
   determines          the        speed        of     interactions               between          CPUs       during
   parallel processing communication.
 5 The      need   for     increased          east-west           traffic        communications             led     to
   the       creation       of       newer,        flatter           network       architectures,               e.g.
   toroidal/torus              networks.             A      torus         interconnect            system       is     a
   network       topology           for     connecting           network         nodes       (servers)         in     a
   mesh-like manner in parallel computer                                  systems.         A torus topology
 0 can have nodes            arranged in           2,     3,    or more        (N)   dimensions         that      can
   be       visualized           as      an     array        wherein          processors/servers                  are
   connected        to      their          nearest         neighbor          processors/servers,                  and
   wherein       processors/servers                 on      opposite         edges      of     the     array      are
   connected.           In     this       way,    each       node      has    2N   connections           in     a   N
25 dimensional torus configuration                            (Figure 2 provides an example of
   a 3-D torus interconnect).                      Because each node in a torus topology
   is     connected       to      adjacent        ones       via     short      cabling,         there      is    low
   network        latency          during       parallel           processing.            Indeed,        a     torus
   topology        provides           access      to     any      node      (server)         with     a   minimum
30 number of hops.              For example, a four dimension torus implementing
   a   3    x  3  x  3    x    4    structure         (108      nodes)       requires         on    average       2.5
   hops      in order to provide any to any                            connectivity. Unfortunately,
                                                       4

   large   torus    network    implementations             have not      been   practical       for
   commercial        deployment          in       DCs       or     CDCs      because          large
   implementations       can take years           to build,       cabling      can   be    complex
   (2N   connections       for    each     node),       and    they     can    be    costly     and
 5 cumbersome     to   modify     if    expansion       is    necessary.       However,       where
   the   need   for     processing        power      has     outweighed       the     commercial
   drawbacks,        the     implementation               of     torus       topologies          in
   supercomputers       has  been     very      successful.       In   this    respect,       IBM's
   Blue   Gene    supercomputer          provides        an    example      of    a    3-D    torus
 0 interconnect       network      wherein        64    cabinets       house     65,536       nodes
   (131,072 CPUs)       to provide petaFLOPs processing power                        (see Figure
   3    for    an     illustration),             while       Fujitsu's        PRIMEHPC         FX10
   supercomputer       system    is    an   example       of   a  6-D    torus     interconnect
   housed   in  1,024     racks     comprising       98,304      nodes) .    While     the    above
 5 examples     dealt      with      a     torus       topology,         they     are      equally
   applicable to other flat network topologies.
   Embodiments of the present invention seek to overcome the
   deficiencies in such prior art network topologies by providing a
 0 system and architecture that may be beneficial and practical for
   commercial deployment in DCs and CDCs.
   SUMMARY OF THE INVENTION
25 According    to     a   first     principal         aspect,       there    is    provided        a
   passive patch      panel    for    use    in    the   implementation         of a      torus  or
   higher radix interconnect, comprising:
   a   passive     printed      circuit        board       that    houses      node       to   node
30 connectivity for the torus or higher radix interconnect;                               and
                                              5

   at     least     one    connector      board        plugged       into      the  passive     printed
   circuit board comprising multiple connectors,
   wherein         each   of    said    connectors            is   initially       populated       by   an
 5 interconnecting           plug to      initially           close      one    or more    connections
   of    the     torus    or  higher      radix       interconnect,            and wherein      each    of
   said plugs is          capable of being replaced by a cable attached to a
   Peripheral          Component       Interconnect              Express       (PCIe)   card     from     a
   server to build an interconnect network.
 0
   In      one     embodiment,        the      passive           patch       panel   is    electrical,
   optical, or a hybrid of electrical and optical.
   In a further embodiment, the passive patch panel is optical.
 5
   In      another      embodiment,         the       optical         passive      patch      panel     is
   capable         of   combining       multiple          optical         wavelengths       on   a    same
   fiber.
 0 In      one     embodiment,       the     passive          patch       panel    is   a    hybrid     of
   electrical         and   optical,      and      electrical          connectivity       is   provided
   at    the     rack    level     and   optical         connectivity           is  provided      in   all
   rack         to    rack      or    geographically                distributed         data       centre
   interconnects.
25
   In another embodiment, the                   interconnecting plug is electrical or
   optical.
   In      a    further      embodiment,           said       multiple         connectors      comprise
30 fields of multiple connectors, namely:
                                                    6

   a   main    field       of   connectors       for     implementing     a   2D   torus
   interconnect network;
   a   second    field      of  connectors      to    allow   for   expansion    of    the
 5 network to a 3D torus interconnect network;
   and a third       field of connectors         to allow for expansion         of     the
   network to a 4D torus interconnect network.
 0 In   one embodiment,        the main      field comprises      42  connectors    in   a
   7X6     torus     configuration,          the    second     field     comprises      12
   connectors     in    2   groups  of    6,   and   the third    field comprises       12
   connectors in 2 groups of 6.
 5 In    another     embodiment,        the    printed     circuit     board    includes
   unpowered       electronic        devices        using     a    passive     resistor
   combination       attached      to    every     connector,      and   when    a   plug
   populating     a    connector     is    replaced     by  a   cable   attached    to   a
   Peripheral     Component Interconnect           Express    (PCIe)   card the device
 0 attached to the connector is interrogated by software running on
   the PCIe card in order to obtain an ID of the connector.
   In    a  further       embodiment,      said    multiple     connectors    comprises
   fields of multiple connectors, namely:
25
   a main field of connectors for implementing a torus interconnect
   network in N dimensions;
   a second field of connectors              for expanding the network         to a N+1
30 dimension torus interconnect network;
                                             7

   and     a  third      field      of   connectors       for    expanding      the      network     to    a
   N+2     dimension         torus     interconnect       network,       wherein       N  is   at   least
   3.
 5 In    one    embodiment,          the    printed    circuit       board   includes         unpowered
   electronic         devices       using a     passive resistor           combination          attached
   to    every      connector,          and   when   a   plug      populating        a   connector      is
   replaced         by        a    cable     attached         to     a    Peripheral          Component
   Interconnect            Express        (PCIe)    card       the    device     attached         to   the
 0 connector        is     interrogated        by   software        running     on     the    PCIe   card
   in order to obtain an ID of the connector.
   In   another        embodiment,         an  additional         printed    circuit         board   with
   multiple connectors                is used to increase a number of servers that
 5 may     be    used      in    a   rack,    wherein      the      printed     circuit        board    is
   plugged via high capacity connectors                          to the backplane to provide
   connectivity           to    the     connector     board,       and   wherein        high    capacity
   connectors          on     the    board    may    be    used     to   patch      panels       rack   to
   rack.
 0
   According         to     a   second      principal      aspect,       there      is    provided      an
   optical       passive        patch     panel   for use        in    the  implementation           of    a
   torus or higher radix interconnect, comprising:
25 a    passive         printed        circuit     board        that     houses        node     to   node
   connectivity for the torus or higher radix interconnect and that
   comprises multiple optical connectors, and
   at      least       one      connector       board        comprising        multiple           optical
30 connectors interconnected using optical fiber,
                                                   8

   wherein      each    connector          is      initially         populated         by     an     optical
   interconnecting plug to initially close one or more connections,
   and wherein each of said plugs                      is capable of being replaced by a
 5 cable     attached     to    a     Peripheral           Component         Interconnect            Express
    (PCIe) card from a server to build an interconnect network.
   In  one     embodiment,      the       optical        passive        patch      further        comprises
   an  optical      mux-demux         to    employ       optical        wavelength         multiplexing
 0 and demultiplexing with fiber interconnect.
   In   one     aspect,     the      present          invention         provides         a    method      for
   managing      the wiring       and growth            of a     direct       interconnect           network
   implemented      on   a   torus        or    higher       radix      interconnect           structure,
 5 comprising:      populating         a passive patch panel                   comprising          at   least
   one     connector        board         having         multiple           connectors            with     an
   interconnect        plug     at      each        of     said      connectors;            removing       an
   interconnect       plug    from a        connector         and     replacing         said plug with
   a connecting cable attached to a PCIe card housed in a server to
 0 add   said      server      to      the      interconnect             structure;           discovering
   connectivity       of    the     server         to   the     interconnect           structure;         and
   discovering      topology        of the         interconnect          structure         based      on  the
   servers added to the interconnect structure.
25 In   another      aspect,       the      present         invention          provides         a    passive
   patch    panel    for   use     in    the      implementation            of    a   torus      or   higher
   radix    interconnect,         comprising:            a  passive        backplane         that     houses
   node     to    node     connectivity               for    the       torus        or    higher        radix
   interconnect;       and    at    least       one     connector        board plugged             into   the
30 passive      backplane      comprising             multiple         connectors.          The      passive
   patch      panel    may      be      electrical,              optical,          or    a     hybrid      of
   electrical       and    optical.           The      optical        passive         patch       panel    is
                                                    9

   capable   of   combining       multiple       optical       wavelengths         on  the    same
   fiber.   Each    of     the   multiple      connectors          of   the     at    least    one
   connector    board     is  capable    of   receiving          an interconnecting           plug
   that  may   be  electrical       or  optical,          as   appropriate,         to maintain
 5 the continuity of the torus or higher radix topology.
   In yet another aspect, the present invention provides a PCIe
   card for use in the implementation of a torus or higher radix
   interconnect, comprising:          at least 4 electrical or optical ports
 0 for the torus or higher radix interconnect;                      a local switch;         a
   processor with RAM and ROM memory;                 and a PCI interface. The
   local switch may be electrical or optical. The PCIe card is
   capable of supporting port to PCI traffic, hair pinning traffic,
   and transit with add/drop traffic. The PCIe card is                           further
 5 capable of combining multiple optical wavelengths on the same
   fiber.
   BRIEF DESCRIPTION OF THE DRAWINGS
 0 The embodiment of the          invention will now be described, by way of
   example, with reference to the accompanying drawings in which:
   FIGURE  1    displays       a  high   level        view     of   the   traditional         data
   center network implementation             (Prior art);
25
   FIGURE    2    displays        a    diagram           of    a     3-dimensional          torus
   interconnect having 8 nodes            (Prior Art);
   FIGURE  3   displays       a  diagram     showing         the   hierarchy        of  the    IBM
30 Blue Gene processing units           employing a torus architecture                     (Prior
   Art);
                                           10

   FIGURE  4   displays    a   high   level    diagram      of   a  3D  and     4D    torus
   structure according to an embodiment of the present invention;
   FIGURE 5 displays a diagram for a 36              node 2-D torus according to
 5 an  embodiment    of  the     present    invention       as   an   easy    to    follow
   example of the network interconnect;
   FIGURE  6  displays    a   three   dimensional         configuration     of    the    2-D
   configuration     shown     in    Fig.    5   replicated        three     times       and
 0 interconnected on the third dimension;
   FIGURE 7   displays   a   wiring    diagram of        the node   connectivity         for
   the 2-D torus shown in Fig. 5;
 5 FIGURE 8   displays   a   wiring    diagram of        the node   connectivity         for
   the 3-D torus shown in Fig. 6;
   FIGURE 9   displays   a   diagram of the passive            backplane    of the Top
   of the Rack Patch Panel         (TPP) that    implements the wiring for the
 0 direct  interconnect       network     of   an    embodiment      of   the     present
   invention;
   FIGURE   10   displays     the    TPP   and     interconnecting        plug      of     an
   embodiment of the present invention;
25
   FIGURE 11   displays the      rear view of the passive backplane of the
   TPP with   the unpowered      integrated     circuits       used  to  identify        the
   connector ID and the patch panel ID,             and the PCIe       card connected
   to the TPP;
30
   FIGURE  12   displays      an   alternative       embodiment      of   the     passive
   backplane of the TPP;
                                        11

   FIGURE    13   displays      a   high    level       view    of   an    optical    TPP
   implementation of an embodiment of the present invention;
 5 FIGURE   14   displays    a   high   level      view   of  a   data   center    server
   rack  with   a  TPP implementation        in     accordance    with   an   embodiment
   of the present invention;
   FIGURE 15    displays   a   high   level    view of a       hybrid implementation
 0 of  a  torus   toplogy     with   nodes    implemented       by   Top   of   the  Rack
   switches and PCIe cards housed in the server;
   FIGURE 16 displays a block diagram of a PCIe                   card implementation
   in accordance with an embodiment of the present invention;
 5
   FIGURE 17    displays   the packet      traffic       flow suported      by the   PCIe
   card shown in Figure 16;
   FIGURE   18  displays   a   block    diagram      of   a  PCIe  card   with    optical
 0 multiwavelengths     in  accordance      with an embodiment          of the present
   invention;
   FIGURE 19 displays a high level view of a TPP having a passive
   optical multiwavelengths implementation of an embodiment of the
25 present invention;
   FIGURES    20a   to  20c    displays      the     pseudocode      to   generate    the
   netlist for the wiring of a 4D torus structure;
30 FIGURE 21 displays the connectors installed on the TPP;                     and
                                         12

   FIGURE  22 is  the   rear view  of  the connector  board  of  the  TPP
   with unpowered integrated circuits used to     identify connector   ID
   and patch panel ID.
 5
   DETAILED DESCRIPTION OF THE INVENTION
   An embodiment of the present invention uses a torus mesh or
   higher radix wiring to implement direct interconnect switching
 0 for data center applications. Such architecture is capable of
   providing a high performance   flat layer 2/3 network to
   interconnect tens of thousands of servers in a single switching
   domain.
 5 With reference to Figure 4, the torus used is multidimensional
   (i.e. 3D, 4D,  etc.),  in order to promote efficiency of routing
   packets across the structure    (although even a single dimensional
   torus can be used in certain deployments).     In this respect,
   there is a minimum number of hops for any to any connectivity
 0 (e.g. a four dimension torus implementing a 3 x 3 x 3 x 4
   structure  (108 nodes) requires on average only 2.5 hops in order
   to provide any to any connectivity).    Each node 10  (server) can
   be visualized as being connected on each dimension in a ring
   connection (12, 14, 16, and 18) because the nodes 10     (servers)
25 are connected to their nearest neighbor nodes 10     (servers), as
   well as nodes 10   (servers) on opposite edges of the structure.
   Each node 10 thereby has 2N connections in the N-dimensional
   torus configuration. The ring connection itself can be
   implemented as an electrical interconnect or as an optical
30 interconnect, or a combination of both electrical and optical
   interconnect.
                                  13

   One problem to be addressed in such a topology, however, is how
   to reduce deployment complexity by promoting wiring
   simplification and simplicity when adding new nodes in the
   network without impacting the existing implementation. This          is
 5 one aspect of the present invention, and this disclosure
   addresses the wiring issues when implementing large torus or
   higher radix structures.
   Figure 5 displays a simple 2D torus wiring diagram for a 6 x 6
 0 thirty-six node configuration for ease of explanation.          As
   shown, the structure is a folded 2D torus wherein the length of
   each connection    (12, 13) is equivalent throughout. Each node 10
   in this diagram represents a server interconnected via a PCIe
   switch card 41   (shown in Figure 16 for instance) that is housed
 5 in the server.
   Figure 6 displays a three dimensional configuration build using
   the 2D configuration of Figure 5, but replicated three times and
   interconnected on the third dimension.
 0
   Figure 7 displays the wiring diagram for the two dimensional
   torus structure shown in Figure 5. In the implementation shown,
   each of the 36 nodes 10 has connectors 21      (which can,   for
   instance, be a Very High Density Cable Interconnect VHDCI
25 connector supplied by Molex or National Instruments, etc.)          with
   four connections    (north (N), south  (S), east  (E),  west   (W))  that
   provide the switch wiring when the cable from the PCIe card 41
   (not shown) is plugged in. In order to simplify the wiring, the
   connectors 21 are interconnected in a passive backplane 200           (as
30 shown in Figure 9) that is housed by a Top of the rack Patch
   Panel  (TPP)  31  (as shown in Figures 10 and 14).     The passive
   backplane 200    presented in Figure 9 shows three fields:       the
                                   14

   main field  (as shown in the middle of the diagram in dashed
   lines) populated with the 42 connectors 21 implementing a 2D 7 x
   6 torus configuration, the field on the left      (in dashed lines)
   populated with the 2 groups of 6 connectors 21 for expansion on
 5 the third dimension, and the field on the right       (in dashed
   lines) with 2 groups of 6 connectors 21 to allow for expansion
   on the fourth dimension. The 3D expansion is implemented by
   connecting the 6 cables  (same type as the cables connecting the
   PCIe card 41 to the TPP connector 21) from the TPP to the TPP on
 0 a different rack 33 of servers. The TPP patch panel backplane
   implementation can even be modified if desired, and with a
   simple printed circuit board replacement     (backplane 200)a person
   skilled in the art can change the wiring as required to
   implement different torus structures    (e.g. 5D,   6D, etc.).   In
 5 order to provide the ability to grow the structure without any
   restrictions or rules to follow when adding new servers in the
   rack 33, a small interconnecting plug 25 may be utilized. This
   plug 25 can be populated at TPP manufacture for every connector
   21. This way, every ring connection is initially closed and by
 0 replacing the plug 25 as needed with PCIe cable from the server
   the torus interconnect is built.
   Figure 8 presents the wiring diagram for a three dimensional
   torus structure. Note for instance the 6 connections       shown at
   the nodes at the top left of the diagram to attach the PCIe
25 cables to the 3D structure:  +X,  -X, +Y,  -Y,  +Z and -Z.   The TPP
   implementation to accommodate the 3D torus cabling is designed
   to connect any connector 21 to every other connector 21
   following the wiring diagram shown in Figure 8.
   The novel method of generating a netlist of the connectivity of
30 the TPP is explained with the aid of pseudocode as shown at
   Figures 20a to 20c for a 4D torus wiring implementation        (that
   can easily be modified for a 3D, 5D, etc. implementation or
                                  15

   otherwise). For the 3D torus   (Z, Y, X) each node 10 will be at
   the intersection of the three rings -    ringZ, ringY and ringX.
   If a person skilled in the art of network architecture desires
   to interconnect all the servers in a rack 33     (up to 42 servers;
 5 see the middle section of Figure 9 as discussed above) at once,
   there are no restrictions -  the servers can be wired in random
   fashion. This approach greatly simplifies the deployment -      you
   add the server, connect the cable to the TPP without any special
   connectivity rules, and the integrity of the torus structure is
 0 maintained. The network management    system that a person skilled
   in the art would know how to implement will maintain a complete
   image of the data center network including the TPP and all the
   interconnected servers, which provides connectivity status and
   all the information required for each node.
 5 As shown in Figure 11,  each PCIe card 41   (housed in a node
   server) has connectivity by cable 36 to the TPP. The cable 36
   connecting the PCIe card 41 to the TPP provides connectivity to
   the 8 ports 40  (see Figure 16) and also provides connectivity to
   the TPP for management purposes. The backplane 200 includes
 0 unpowered electronic devices / integrated circuit      (IC) 230
   attached to every connector 21. Devices 230 are interrogated by
   the software running on the PCIe card 41 in order to get the
   connector ID where it is connected. Every device 230 attached to
   the connector uses a passive resistor combination that uniquely
25 identifies every connector.
   The TPP identification mechanism    (patch panel ID) is also
   implemented using the electronic device 240 which may be
   programmed at installation. The local persistent memory of
   device 240 may also hold other information -    such as
30 manufacturing date, version, configuration and ID. The
   connectivity of device 240 to the PCIe cards permits the
   transfer of this information at software request.
                                  16

   At    the     card initialization              the     software       applies power            to     the   IC
   230      and     reads      the      connector      21     ID.    A  practical          implementation
   requires          wire     connectivity          -   two     for    power      and    ground       and     the
 5 third to read the connector 21 ID using "1-Wire" technology.
   In      a     similar         fashion,        the     patch        panel       ID,      programmed          at
   installation            with the management                software,       can be       read using the
   same       wiring       as   with      IC   230.    The     unpowered        device       240    has      non
   volatile            memory          with     the      ability         to       support        read/write
 0 transactions               under         software          control.         IC       240      may         hold
   manufacturing information, TPP version, and TPP ID.
   Figure         12    displays         another      passive       patch      panel       implementation
   option using a separate printed circuit board 26 as a backplane.
 5 This       implementation              can   increase          significantly           the    number        of
   servers           in      the        rack     and      also        provides          flexibility            in
   connector/wiring selection.
   The      printed        circuit        board     23    supporting         the      connectors          21   is
   plugged via high capacity connectors 22 to the backplane 26. The
 0 printed         circuit         board     24  also     has      high    capacity         connectors         22
   and        is      also       plugged        into      the       backplane           26    to       provide
   connectivity to the connector board 23.
   The high          capacity          connectors      21    on the     board        24  can    be    used     to
   interconnect the TPPs rack 33 to rack 33.
25 The     direct        interconnect          wiring      is     implemented         on    the   backplane
   26. Any time the wiring changes                          (for different reasons) the only
   device        to    change       is   the backplane          26.    For example,          where       a   very
   large        torus      implementation           needs      to    change        (e.g.     for    a    10,000
   server configuration the most efficient                              4D torus would be a 10 x
30 10 x 10 x 10 configuration as opposed to trying to use a 6 x 7 x
   16    x    15;    and    for a       160,000      server deployment              the most       efficient
   configuration would be a 20                       x 20 x 20 x 20),             you can accommodate
                                                      17

   these      configurations               by    simply        changing          the      backplane           26   while
   maintaining the connector boards 23 and 24 the same.
   Figure       13    displays           an   optical        patch        panel        implementation.              Such
 5 implementation                assumes       port     to     port       fiber        interconnect              as  per
   the wiring diagram presented in Figures 5 or 6                                            (2D or 3D torus).
   The     optical        connectors           on     boards       28      and     29     are      interconnected
   using       optical           fiber      27     (e.g.       high       density          FlexPlane            optical
   circuitry           from         Molex,       which         provides            high        density          optical
 0 routing         on    PCBs       or    backplanes).            The      optical         TPP      is     preferably
   fibered        at   manufacturing               time     and     the       optical        plugs         250    should
   populate         the      TPP      during      manufacturing.                The      connectors            and   the
   optical         plugs          250     are    preferably             low       loss.        The        connector's
   optical        loss      is     determined          by    the     connector            type       (e.g.      whether
 5 or    not     it    uses        micro      optical         lenses        for       collimation)             and   the
   wavelength            (e.g.       single       mod     fiber        in     C    band       introduces           lower
   optical loss than multimode fiber at 1340 nm).
   Another         implementation             option        for     the      optical         TPP       is    presented
   in Figure 19. This                   implementation drastically reduces the number
 0 of      physical            connections             (fibers)           using          optical           wavelength
   multiplexing.             The new        component          added to the               TPP     is      the passive
   optical       mux-demux           220 that         combines        multiple           optical          wavelengths
   on    the     same      fiber.         The   fibers         27    interconnects               the       outputs     of
   the     mux-demux           220     to   implement          the      optical         direct          interconnect
25 torus      structure.             To    connect       two      different            racks        (TPP      to   TPP),
   connector          222      is    used.     This      implementation                 requires           a  modified
   version        of   the PCIe           card 41       as     shown       in    Figure         18.      The    card 41
   includes         the    optical         mux-demux          220,      optical         transmitters             225   on
   different wavelengths, and optical receivers 224.
30
   The     TPP      can     also       be    deployed         as     an     electrical/optical                   hybrid
   implementation.                 In     such     a    case,        the       torus        nodes         would     have
                                                        18

   optical          ports        and       electrical           ports.        A    hybrid         implementation
   would usually be used to provide connectivity to very large data
   centers.          You      could      use     the     electrical          connectivity             at    the    rack
   level         and        optical          connectivity               in     all      rack        to      rack     or
 5 geographical                 distributed              data          center          interconnects.               The
   electrical            cables        are     frequently           used    for     low     rate     connectivity
    (e.g. 1Gbps or              lower rate 10/100Mbps).                      Special electrical cables
   can       be    used       at    higher        rate      connectivity              (e.g.      10     Gbps) .     The
   higher         rate      interconnect              network        may    use     optical        transmission,
 0 as     it     can     offer        longer       reach       and     can     support        very      high      rates
    (e.g. 100 Gbps or 400 Gbps).
   Figure         15    shows       a   combined         deployment           using      a    Top     of    the    Rack
    (ToR)       switch       38    and a PCIe           card 41         based      server       interconnect         in
 5 a   torus         structure          that       is    suited        to    implement           hybrid       compute
   servers         and       storage         server        configurations.               The     PCIe      41     based
   implementation has the advantage of increased add/drop bandwidth
   since        the      PCI     port       in    a    server        can    accommodate             substantially
   more       bandwidth          than      a    fixed      switch       port     bandwidth           (e.g.      1  Gbps
 0 or        10    Gbps).          The       PCIe       card        41     supporting            the      4D      torus
   implementation                can     accommodate            up     to   8    times       the     interconnect
   badwidth of the torus links.
   The       ToR    switch        38    is     an    ordinary         layer      2   Ethernet         switch.       The
   switch        provides          connectivity            to    the     servers        and     connectivity         to
25 other ToR switches in a torus configuration where the                                                 ToR switch
   is    a     torus      node.       According         to     this      embodiment          of    the    invention
   the       ToR    switches           38    and      the    PCIe       cards      41    are      interconnected
   further using a modified version of the TPP 31.
30 Figure          16       displays           the      block         diagram          of      the      PCIe       card
   implementation               for     the present            invention.          This      card can be           seen
   as     a    multiport          Network         Interface          Card      (NIC) .      The     PCIe      card   41
                                                          19

   includes        a    processor        46 with          RAM 47     and ROM       48 memory,            a   packet
   switch 44 and the Ethernet PHY interface devices 45. The card 41
   as     shown      has    a   PCIe       connection            42   and     8   interface          ports         40,
   meaning       the     card as       shown        can provide         for the         implementation               of
 5 up to a four dimension torus direct interconnect network.
   Figure 17 displays the packet traffic                               flows suported by the card
   41.     Each     port    40    has      access          to  the    PCI    port     42.       Therefore,           in
   the      case     of   port    to      PCI      traffic        (as   shown      by      400),      the      total
 0 bandwidth         is   eight     times         the      port   capacity       given that           the total
   number       of     ports    40      is      8.     The    number      of    ports        determines            the
   torus      mesh      connectivity.             An eight        port    PCIe     Card       implementation
   enables      up to a        four dimension torus                   (x+,    x-,    y+, y-,        z+,      z-    and
   w+, w-).
 5 A   second       type     of   traffic            suported       by   the     card       41   is     the      hair
   pinning       traffic       (as     shown by            410).    This   occurs        where      traffic          is
   switched         from    one    port        to     another       port;      the    traffic         is     simply
   transiting           the   node.       A    third        type    of  traffic          supported          by     the
   card 41 is transit with add/drop traffic                                  (as shown at 420).                  This
 0 occurs when incomming traffic                            from one port         is partially dropped
   to     the   PCI      port    and       partially           redirected        to     another         port,        or
   where      the     incoming       traffic           is    merged with        the      traffic         from      the
   PCI port and redirected to another port.
   The       transit       and     add/drop              traffic      capability            implements             the
25 direct      interconnect           network,            whereby     each node          can be       a    traffic
   add/drop node.
   Throughout            the     specification,                  unless      the       context           requires
   otherwise,          the word "comprise"                   or variations          such as        "comprises"
30 or     "comprising",         will       be understood             to   imply      the      inclusion          of a
   stated integer or group of integers but not the exclusion of any
   other integer or group of integers.
                                                         20

  Furthermore,    throughout        the   specification,      unless       the  context
  requires   otherwise,        the   word   "include"    or   variations       such    as
  "includes"    or   "including",        will   be   understood         to   imply    the
5 inclusion   of  a   stated     integer    or group    of  integers       but  not   the
  exclusion of any other integer or group of integers.
  Modifications     and      variations    such   as   would    be     apparent     to   a
  skilled   addressee        are   deemed   to  be   within     the      scope   of   the
0 present invention.
  The  present      application       is    divided     from   Australian         patent
  application    2014311217,        the   content    of   which      is    incorporated
  herein in its entirety by reference.
5
                                         21

   THE CLAIMS DEFINING THE       INVENTION ARE AS FOLLOWS:
      1. A passive    patch    panel      for   use   in     the       implementation       of  a
         torus or higher radix interconnect, comprising:
 5
         a  passive   printed     circuit       board     that        houses     node   to  node
         connectivity     for   the     torus     or   higher           radix    interconnect;
         and
 0       at  least    one    connector        board     plugged            into    the   passive
         printed circuit board comprising multiple connectors,
         wherein  each    of   said     connectors       is      initially        populated    by
         an  interconnecting        plug      to   initially             close    one   or  more
 5       connections    of the torus          or higher        radix       interconnect,     and
         wherein each of said plugs             is   capable of being replaced by
         a  cable   attached     to     a    Peripheral         Component          Interconnect
         Express   (PCIe)   card from a          server to build an                interconnect
         network.
 0
      2. The  passive    patch    panel       of   claim       1,     wherein      the   passive
         patch   panel     is    electrical,          optical,             or   a    hybrid    of
         electrical and optical.
25    3. The  passive    patch    panel       of   claim       2,     wherein      the   passive
         patch panel is optical.
      4. The  passive    patch    panel       of   claim       3,     wherein      the   optical
         passive    patch     panel       is    capable        of        combining     multiple
30       optical wavelengths on a same fiber.
                                           22

   5.   The  passive        patch     panel    of   claim       2,    wherein      the     passive
      patch    panel       is    a   hybrid     of   electrical           and    optical,       and
      wherein      electrical         connectivity          is     provided      at      the   rack
      level   and     optical       connectivity        is    provided       in   all      rack  to
 5    rack       or        geographically             distributed               data         centre
      interconnects.
   6.   The passive patch panel of any one of the preceding claims
      ,   wherein        the       interconnecting           plug      is      electrical        or
 0    optical.
   7.   The   passive         patch     panel     of    any      one     of    the      preceding
      claims, wherein said multiple connectors comprise fields of
      multiple connectors, namely:
 5
            a main      field      of connectors        for implementing              a   2D torus
            interconnect network;
            a second field of connectors                    to allow for expansion of
 0          the network to a 3D torus interconnect network;
            and a third field of connectors                       to allow for expansion
            of     the network to a 4D torus interconnect network.
25 8.   The passive patch panel of claim 7, wherein the main field
      comprises       42    connectors      in    a  7X6     torus      configuration,          the
      second    field      comprises      12   connectors          in  2   groups       of   6, and
      the third field comprises 12 connectors in 2 groups of 6.
30 9.   The  passive          patch    panel     of   claim         7  or   8,    wherein       the
      printed circuit board includes unpowered electronic devices
      using    a     passive        resistor      combination          attached         to    every
                                          23

       connector,         and wherein         when    a  plug     populating       a   connector
       is   replaced        by    a  cable     attached      to   a  Peripheral        Component
       Interconnect Express               (PCIe) card the device attached to the
       connector       is     interrogated         by   software      running      on   the     PCIe
 5     card in order to obtain an ID of the connector.
   10.The     passive         patch     panel     of    any    one    of     claims     1    to    6,
       wherein        said        multiple        connectors         comprise        fields        of
       multiple connectors, namely:
 0
              a   main      field     of    connectors        for   implementing          a    torus
              interconnect network in N dimensions;
              a second field of              connectors       for expanding the network
 5            to a N+1 dimension torus interconnect network;
              and    a     third      field     of    connectors        for     expanding         the
              network       to a     N+2   dimension       torus    interconnect        network,
              wherein N is at least 3.
 0
   11.    The   passive       patch     panel    of   claim     10,   wherein      the     printed
       circuit board includes unpowered electronic devices using a
       passive      resistor         combination        attached      to    every     connector,
       and wherein when             a  plug populating          a   connector      is    replaced
25     by   a   cable     attached       to   a  Peripheral        Component      Interconnect
       Express      (PCIe) card the device attached to the connector is
       interrogated by             software     running      on the PCIe         card in       order
       to obtain an ID of the connector.
30 12. The       passive        patch     panel      of    any    one     of    the    preceding
       claims,        wherein        an   additional       printed      circuit      board      with
       multiple connectors              is used to increase a number of servers
                                              24

      that     may    be    used   in    a     rack,   wherein      the  printed    circuit
      board       is    plugged      via       high    capacity      connectors     to      the
      backplane        to   provide      connectivity         to  the   connector     board,
      and     wherein      high   capacity        connectors       on  the   board   may     be
 5    used to patch panels rack to rack.
   13. An       optical       passive          patch     panel       for    use    in       the
      implementation          of    a    torus      or   higher     radix   interconnect,
      comprising:
 0
      a    passive     printed      circuit       board    that    houses    node  to    node
      connectivity for the torus or higher radix interconnect and
      that comprises multiple optical connectors, and
 5    at    least     one    connector         board    comprising      multiple    optical
      connectors interconnected using optical fiber,
      wherein each connector is                  initially populated by an optical
      interconnecting            plug       to    initially        close    one   or     more
 0    connections,
      and wherein each of said plugs is capable of being replaced
      by    a  cable     attached      to    a   Peripheral      Component    Interconnect
      Express       (PCIe)    card from a          server to build an         interconnect
25    network.
   14. The      optical      passive        patch     panel     of    claim   13,   further
      comprising           an    optical          mux-demux        to    employ     optical
      wavelength          multiplexing           and    demultiplexing         with     fiber
30    interconnect.
                                            25

<removed-apn> <removed-date>
<removed-apn> <removed-date>
               3/16
<removed-date>
              PRIOR ART
<removed-apn>
              FIGURE 3

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
               16/16
<removed-date>
<removed-apn>
              FIGURE 21
              FIGURE 22

