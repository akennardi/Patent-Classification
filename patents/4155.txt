            SYSTEM AND METHOD FOR FITNESS BASED REWARD DISCOUNTS
                                 ABSTRACT OF THE DISCLOSURE
        A method for facilitating a transaction may receiving, at a server computer, an
authorization request for the transaction, the authorization request comprising a first amount
and a device identification (ID) for a user device. The method may also include obtaining, by
the server computer and from a third-party computer, a fitness metric associated with a user of
the user device based at least in part on the device ID. The method may further include
determining, by the server computer, whether the transaction is eligible for a discount based at
least in part on the obtained fitness metric. The method may additionally include, if the
transaction is eligible for the discount, applying, by the server computer, the discount to the
transaction.

115
 CL
Ow  L

                                                   1
            SYSTEM AND METHOD FOR FITNESS BASED REWARD DISCOUNTS
                                            BACKGROUND
[0001]          Offer and loyalty programs are widely used in the market. These programs are
structured marketing strategies designed by merchants to encourage customers to continue to
shop at or use the services of businesses associated with each program. With these programs,
purchasers typically earn the right either to a discount on the current purchase, or to an
allotment of points that they can use for future purchases.
[0002]          While traditional offer and loyalty programs are useful, improvements can be
made. For example, many people live a sedentary lifestyle with no or irregular physical activity.
A sedentary lifestyle can contribute to many preventable causes of death. It would be useful if
an individual could be rewarded for improving their lifestyle with physical activity by offering a
reward or discount toward a purchase to encourage such physical activity.
[0003]          It is an object of the present invention to substantially overcome, or at least
ameliorate, at least one disadvantage of present arrangements.
                                          BRIEF SUMMARY
[0004]          In some embodiments of the invention, systems and methods use hash functions
to trace and track the distribution of token credentials as they pass from the token requestor,
through the entities involved in transaction, to the token "consumer," e.g. a merchant sending
the token credentials received for authorization. Embodiments of the invention support
tokenized transactions in more complex scenarios, where tokens are passed between multiple
entities. Embodiments of the invention also increase security and decrease the risk of fraud
associated with the token.
[0005]          Some embodiments of the invention are directed to a method for facilitating a
transaction. The method may include receiving, at a server computer, an authorization request
for the transaction, the authorization request comprising a first amount and a

                                                   2
device identification (ID) for a user device. The method may also include obtaining, by the
server computer and from a third-party computer, a fitness metric associated with a user of the
user device based at least in part on the device ID. The method may further include
determining, by the server computer, whether the transaction is eligible for a discount based at
least in part on the obtained fitness metric. The method may additionally include, if the
transaction is eligible for the discount, applying, by the server computer, the discount to the
transaction.
[0006]           In some embodiments, the device ID is indicative of a manufacturer of the user
device.
[0007]           In some embodiments, applying the discount to the transaction further includes
generating, by the server computer, a first clearing request message comprising a second
amount, wherein the second amount is the first amount less the discount; transmitting, by the
server computer and to an issuer computer for further processing; generating, by the server
computer, a second clearing request message comprising the discount; and transmitting, by the
server computer, the second clearing request message to an offer-provider computer for further
processing.
[0008]           In some embodiments, applying the discount to the transaction further includes
transmitting, by the server computer, the authorization request message to an issuer computer
for further processing, and applying a credit in an amount of the discount to a user account
associated with the user device.
[0009]           In some embodiments, the user device is a wearable fitness device.
In some embodiments, the third-party computer is associated with a manufacturer of the user
device.
[0010]          In some embodiments, the obtaining step is performed via an application
programming interface (API) call to the third-party computer.
[0011]          In some embodiments, the fitness metric comprises a number of calories burned
by the user within a specified time period.

                                                    3
[0012]           In some embodiments, the discount is based at least in part on the number of
calories burned by the user within the specified time period.
[0013]           In some embodiments, prior to the receiving step, the user device interacts with a
terminal.
[0014]          Other embodiments of the invention are directed to servers and systems that are
configured to perform the above-described methods.
[0015]          These and other embodiments of the invention are described in further detail
below.
                             BRIEF DESCRIPTION OF THE DRAWINGS
[0016]           FIG. 1 shows a block diagram of multiple entities within a fitness-based offer
system, in accordance with some embodiments of the invention.
[0017]           FIG. 2 shows a block diagram of a server computer, in accordance with some
embodiments of the invention.
[0018]           FIG. 3 illustrates a flow between multiple entities in the fitness-based offer
system, in accordance with embodiments of the invention.
[0019]           FIG. 4 illustrates an alternate flow between a token server computer and multiple
entities, in accordance with some embodiments of the invention.
[0020]           FIG. 5 shows exemplary computer apparatus, in accordance with some
embodiments of the invention.
                                        DETAILED DESCRIPTION
[0021]           Prior to discussing embodiments of the invention, descriptions of some terms
may be helpful in understanding embodiments of the invention.

                                                 4
[0022]           A "mobile device" may comprise any suitable electronic device that may be
transported and operated by a user, which may also provide remote communication capabilities
to a network. Examples of remote communication capabilities include using a mobile phone
(wireless) network, wireless data network (e.g. 3G, 4G or similar networks), Wi-Fi, Wi-Max, or
any other communication medium that may provide access to a network such as the Internet or
a private network. Examples of mobile devices include mobile phones (e.g. cellular phones),
PDAs, tablet computers, net books, laptop computers, personal music players, hand-held
specialized readers, etc. Further examples of mobile devices include wearable devices, such
as smart watches, fitness bands, ankle bracelets, rings, earrings, etc., as well as automobiles
with remote communication capabilities. A mobile device may comprise any suitable hardware
and software for performing such functions, and may also include multiple devices or
components (e.g. when a device has remote access to a network by tethering to another device
- i.e. using the other device as a modem - both devices taken together may be considered a
single mobile device).
[0023]           A "payment device" may include any suitable device that may be used to conduct
a financial transaction, such as to provide payment credentials to a merchant. The payment
device may be a software object, a hardware object, or a physical object. As examples of
physical objects, the payment device may comprise a substrate such as a paper or plastic card,
and information that is printed, embossed, encoded, or otherwise included at or near a surface
of an object. A hardware object can relate to circuitry (e.g., permanent voltage values), and a
software object can relate to non-permanent data stored on a device. A payment device may
be associated with a value such as a monetary value, a discount, or store credit, and a payment
device may be associated with an entity such as a bank, a merchant, a payment processing
network, or a person. A payment device may be used to make a payment transaction. Suitable
payment devices can be hand-held and compact so that they can fit into a user's wallet and/or
pocket (e.g., pocket-sized). Example payment devices may include smart cards, magnetic
stripe cards, keychain devices (such as the SpeedpassTM commercially available from Exxon
Mobil Corp.), etc. Other examples of mobile devices include pagers, payment cards, security
cards, access cards, smart media, transponders, and the like. If the payment device is in the
form of a debit, credit, or smartcard, the payment device may also optionally have features such
as magnetic stripes. Such devices can operate in either a contact or contactless mode. In
some embodiments, a mobile device can function as a payment device (e.g., a mobile device
can store and transmit payment credentials for a transaction).

                                                  5
[0024]           A "credential" may be any suitable information that serves as reliable evidence of
worth, ownership, identity, or authority. A credential may be a string of numbers, letters, or any
other suitable characters, as well as any object or document that can serve as confirmation.
Examples of credentials include value credentials, identification cards, certified documents,
access cards, passcodes and other login information, etc.
[0025]           A "value credential" may be information associated with worth. Examples of
value credentials include payment credentials, coupon identifiers, information needed to obtain
a promotional offer, etc.
[0026]           A "token" may be a substitute value for a credential. A token may be a string of
numbers, letters, or any other suitable characters. Examples of tokens include payment tokens,
access tokens, personal identification tokens, etc.
[0027]           A "payment token" may include an identifier for a payment account that is a
substitute for an account identifier, such as a primary account number (PAN). For example, a
token may include a series of alphanumeric characters that may be used as a substitute for an
original account identifier. For example, a token "4900 0000 0000 0001" may be used in place
of a PAN "4147 0900 0000 1234." In some embodiments, a token may be "format preserving"
and may have a numeric format that conforms to the account identifiers used in existing
transaction processing networks (e.g., ISO 8583 financial transaction message format). In
some embodiments, a token may be used in place of a PAN to initiate, authorize, settle or
resolve a payment transaction or represent the original credential in other systems where the
original credential would typically be provided. In some embodiments, a token value may be
generated such that the recovery of the original PAN or other account identifier from the token
value may not be computationally derived. Further, in some embodiments, the token format
may be configured to allow the entity receiving the token to identify it as a token and recognize
the entity that issued the token.
[0028]           "Token ization" is a process by which data is replaced with substitute data. For
example, a payment account identifier (e.g., a primary account number (PAN)) may be
tokenized by replacing the primary account identifier with a substitute number (e.g. a token) that
may be associated with the payment account identifier. Further, tokenization may be applied to
any other information that may be replaced with a substitute value (i.e., token). Tokenization
may be used to enhance transaction efficiency, improve transaction security, increase service
transparency, or to provide a method for third-party enablement.

                                                 6
[0029]          A "user" may include an individual. In some embodiments, a user may be
associated with one or more personal accounts and/or mobile devices. The user may also be
referred to as a cardholder, account holder, or consumer.
[0030]          A "resource provider" may be an entity that can provide a resource such as
goods, services, information, and/or access. Examples of a resource provider includes
merchants, access devices, secure data access points, etc. A "merchant" may typically be an
entity that engages in transactions and can sell goods or services, or provide access to goods
or services.
[0031]          An "acquirer" may typically be a business entity (e.g., a commercial bank) that
has a business relationship with a particular merchant or other entity. Some entities can
perform both issuer and acquirer functions. Some embodiments may encompass such single
entity issuer-acquirers. An acquirer may operate an acquirer computer, which can also be
generically referred to as a "transport computer".
[0032]          An "authorizing entity" may be an entity that authorizes a request. Examples of
an authorizing entity may be an issuer, a governmental agency, a document repository, an
access administrator, etc. An "issuer" may typically refer to a business entity (e.g., a bank) that
maintains an account for a user. An issuer may also issue payment credentials stored on a
user device, such as a cellular telephone, smart card, tablet, or laptop to the consumer.
[0033]          An "access device" may be any suitable device that provides access to a remote
system. An access device may also be used for communicating with a merchant computer, a
transaction processing computer, an authentication computer, or any other suitable system. An
access device may generally be located in any suitable location, such as at the location of a
merchant. An access device may be in any suitable form. Some examples of access devices
include POS or point of sale devices (e.g., POS terminals), cellular phones, PDAs, personal
computers (PCs), tablet PCs, hand-held specialized readers, set-top boxes, electronic cash
registers (ECRs), automated teller machines (ATMs), virtual cash registers (VCRs), kiosks,
security systems, access systems, and the like. An access device may use any suitable contact
or contactless mode of operation to send or receive data from, or associated with, a user mobile
device. In some embodiments, where an access device may comprise a POS terminal, any
suitable POS terminal may be used and may include a reader, a processor, and a computer
readable medium. A reader may include any suitable contact or contactless mode of operation.
For example, exemplary card readers can include radio frequency (RF) antennas, optical

                                                 7
scanners, bar code readers, or magnetic stripe readers to interact with a payment device and/or
mobile device. In some embodiments, a cellular phone, tablet, or other dedicated wireless
device used as a POS terminal may be referred to as a mobile point of sale or an "mPOS"
terminal.
[0034]          An "authorization request message" may be an electronic message that requests
authorization for a transaction. In some embodiments, it is sent to a transaction processing
computer and/or an issuer of a payment card to request authorization for a transaction. An
authorization request message according to some embodiments may comply with ISO 8583,
which is a standard for systems that exchange electronic transaction information associated
with a payment made by a user using a payment device or payment account. The authorization
request message may include an issuer account identifier that may be associated with a
payment device or payment account. An authorization request message may also comprise
additional data elements corresponding to "identification information" including, by way of
example only: a service code, a CVV (card verification value), a dCVV (dynamic card
verification value), a PAN (primary account number or "account number"), a payment token, a
user name, an expiration date, etc. An authorization request message may also comprise
"transaction information," such as any information associated with a current transaction, such as
the transaction amount, merchant identifier, merchant location, acquirer bank identification
number (BIN), card acceptor ID, information identifying items being purchased, etc., as well as
any other information that may be utilized in determining whether to identify and/or authorize a
transaction.
[0035]          An "authorization response message" may be a message that responds to an
authorization request. In some cases, it may be an electronic message reply to an authorization
request message generated by an issuing financial institution or a transaction processing
computer. The authorization response message may include, by way of example only, one or
more of the following status indicators: Approval -- transaction was approved; Decline -
transaction was not approved; or Call Center -- response pending more information, merchant
must call the toll-free authorization phone number. The authorization response message may
also include an authorization code, which may be a code that a credit card issuing bank returns
in response to an authorization request message in an electronic message (either directly or
through the transaction processing computer) to the merchant's access device (e.g. POS
equipment) that indicates approval of the transaction. The code may serve as proof of
authorization. As noted above, in some embodiments, a transaction processing computer may
generate or forward the authorization response message to the merchant.

                                                    8
[0036]           A "server computer" may include a powerful computer or cluster of computers.
For example, the server computer can be a large mainframe, a minicomputer cluster, or a group
of servers functioning as a unit. In one example, the server computer may be a database server
coupled to a Web server. The server computer may be coupled to a database and may include
any hardware, software, other logic, or combination of the preceding for servicing the requests
from one or more client computers. The server computer may comprise one or more
computational apparatuses and may use any of a variety of computing structures,
arrangements, and compilations for servicing the requests from one or more client computers.
[0037]           A "wearable device" may be any smart electronic device that can be worn on a
user's body as implant or accessories.
[0038]           A "fitness metric" may be a quantitative metric associated with a user's physical
activity. Common fitness metrics may include, but is not limited to, calories burned, sleep
quality, heart rate, and activity level.
[0039]           FIG. 1 shows a block diagram of multiple entities within a fitness-based offer
system 100, in accordance with some embodiments of the invention. The fitness-based offer
system 100 may include a user device 110, terminal 120, server computer 130, third-party
computer 140, issuer computer 150, and offer-provider computer 160. The user device 110,
terminal 120, server computer 130, third-party computer 140, issuer computer 150, and offer
provider computer 160 may all be in operative communication with each other through any
suitable communication channel or communications network. Suitable communications
networks may be any one and/or the combination of the following: a direct interconnection; the
Internet; a Local Area Network (LAN); a Metropolitan Area Network (MAN); an Operating
Missions as Nodes on the Internet (OMNI); a secured custom connection; a Wide Area Network
(WAN); a wireless network (e.g., employing protocols such as, but not limited to a Wireless
Application Protocol (WAP), I-mode, and/or the like); and/or the like.
[0040]           The user device 110 may include any device associated with a user and capable
of providing transaction credentials to the terminal 120. In some embodiments, the transaction
credentials may be provided to the terminal 120 by the user device 110 using a third-party
application (e.g., a digital wallet application). The user device 110 may include, but is not
limited to, a payment card, mobile device (e.g., smartphone or tablet), or a wearable device
(e.g., a fitness band or smartwatch). The terminal 120 may be associated with a resource
provider (e.g., merchant) and may reside within a physical resource provider location or within a

                                                  9
resource provider's network for online transactions. The server computer 130 may be
associated with a payment processor network and may be operable to process transactions
within the fitness-based offer system. In some embodiments, the user device 110 may be able
to track one or more fitness metrics associated with the user of the user device 110 via one or
more hardware components within the user device 110.
[0041]          The flow of the transaction including the elements described with respect to FIG.
1 can be further understood in the description and the following figures.
[0042]          FIG. 2 shows a block diagram of a server computer 130, in accordance with
some embodiments of the invention. The server computer 130 includes an input/output
interface 210, a memory 220, a processor 230, and a computer-readable medium 240. In some
embodiments, server computer 120 may reside within a payment processor network cloud.
[0043]          The input/output (1/O) interface 210 is configured to receive and transmit data.
For example, the 1/O interface 210 may receive an authorization request and may obtain fitness
related data associated with a user over a communication channel. The 1/O interface 210 may
also be used for direct interaction with the server computer 130. The server computer 130 may
accept input from an input device such as, but not limited to, a keyboard, keypad, or mouse.
Further, the 1/O interface 210 may display output on a display device.
[0044]          Memory 220 may be any magnetic, electronic, or optical memory. It can be
appreciated that memory 220 may include any number of memory modules. An example of
memory 220 may be dynamic random access memory (DRAM).
[0045]          Processor 230 may be any general-purpose processor operable to carry out
instructions on the server computer 130. The processor 230 is coupled to other units of the
server computer 130 including input/output interface 210, memory 220, and computer-readable
medium 240.

                                                  10
[0046]           Computer-readable medium 340 may be any magnetic, electronic, optical, or
other computer-readable storage medium. Computer-readable storage medium 340 includes
device determination module 242, fitness metric retrieval module 244, and clearing and
settlement module 246.
[0047]           The device determination module 242 may be configured to, when executed by
processor 230, determine a device identification (ID) of the user device 110 during the course of
the transaction. For example, the server computer 130 may receive an authorization request
message from the terminal 120 after the user initiates the transaction using his/her user device
110. Upon receiving the authorization request, the server computer 130 may determine a
device ID associated with the user device 110 based on information contained within the
authorization request message. For example, the authorization request message may include a
primary account number (PAN) or token. Based on the PAN or token, the device determination
module 242 may determine the device ID registered to use that PAN or token. The device
determination module 244 may then use elements within the device ID to determine whether the
user device 110 is enrolled in a fitness tracking program. For example, the device ID may
indicate that the manufacturer of the user device 110 provides fitness tracking functionalities.
This determination may be made by querying a database within the server computer 130 (not
shown) or by querying a database residing within the third-party computer 140.
[0048]           In some embodiments, the authorization request message may include an
indicator that the user device 110 is enrolled in a fitness tracking program. If it is determined
that the user device 110 is enrolled in a fitness tracking program, the device determination
module 242 may interact with the fitness metric retrieval module 244, as described below.
[0049]           The fitness metric retrieval module 244 may be configured to, when executed by
processor 330, obtain or retrieve one or more fitness metrics associated with the user of the
user device 110. For example, once the device determination module 242 determines the
device ID of the user device 110 and that the user device 110 is enrolled in a fitness tracking
program, the fitness metric retrieval module 242 may obtain or retrieve one or more fitness
metrics associated with the user of the user device 110. The fitness metric retrieval module 244
may, for example, retrieve the one or more fitness metrics associated with the user of the user
device 110 from the third-party computer 140. In some embodiments, the third-party computer
140 may be associated with a manufacturer of the user device 110 or with a third-party fitness
tracking entity. For example, the fitness metric retrieval module 244 may obtain a number of
calories burned by the user of the user device 110 within a predefined time period. For

                                                      11
example, the fitness retrieval module 244 may obtain or retrieve data from the third-party
computer 140 indicating that the user of the user device 110 burned 1,750 active calories in the
last seven days. Upon retrieving the one or more fitness metrics associated with the user of the
user device 110, the fitness metric retrieval module 244 may interface with the offer-provider
computer 160 to determine whether the user associated with the user device 110 qualifies for a
transaction discount based on the obtained or more fitness metrics.
[0050]            The clearing and settlement module 246 may be configured to, when executed
by processor 230, clear and settle a transaction that may incorporate a discount based on the
one or more fitness metrics associated with the user obtained by the fitness metric retrieval
module 244. For example, if the offer-provider computer 160 indicates that the transaction is
eligible for a discount by virtue of the user fulfilling a certain fitness metric criteria, the clearing
and settlement module 246 may incorporate the discount during the transaction flow. In some
embodiments, the clearing and settlement module 246 may replace the original transaction
amount in the authorization request message with an updated transaction amount that reflects
the discount (e.g., the original transaction amount less the discount). The clearing and
settlement module 246 may then clear and settle the updated transaction amount with the
issuer computer 150 and clear and settle the discount amount with the offer-provider computer
160. In some embodiments, the clearing and settlement module 246 may clear and settle the
full original transaction amount with the issuer computer 150 and then facilitate a "cash back"
credit to the account associated with the user of the user device 110 in the amount of the
discount.
[0051]            FIG. 3 illustrates a flow 300 between multiple entities in the fitness-based offer
system, in accordance with embodiments of the invention. At step S302, a user may initiate a
transaction using his/her user device 110. For example, the user may interact with a digital
wallet application or third-party application executing on the user device 110 in order to initiate
the transaction process. The digital wallet application or third-party application may be
associated with a user account associated with the user. The user may open the digital wallet
application or third-party application on the user device 110 and enter his/her credentials into
the application. Then, for example, the user may select an option to begin a transaction.

                                                    12
[0052]           At step S304, after the user initiates the transaction with his/her user device 110,
the user may interact with the terminal 120 using his/her user device 110. In some
embodiments, the terminal 120 may be located within a merchant location. For example, the
terminal 120 may be a point-of-sale (POS) device located near the checkout area at the
merchant location. For example, this step may occur when the user is ready to checkout and
pay for merchandise obtained from the merchant location. For example, the user may interact
with the terminal 120 by "tapping" his/her user device 110 against the terminal 120 to initiate a
near-field connection (NFC). In some embodiments, the user device 110 may also connect to
the terminal 120 using Bluetooth, Wi-Fi, or any other wireless communication link. Upon
creating the connection between the user device 110 and the terminal 120, the user device 110,
via the digital wallet application or other third-party application, may transmit the user's account
information to the terminal 120.
[0053]           At step S306, after user device 110 interacts with the terminal 120 and transmits
the user's account information to the terminal 120, the terminal 120 may send an authorization
request message to the server computer 130. The authorization request message 130 may
include the user's account information, a device identification (ID) associated with the user
device 110, and other relevant information pertinent to the transaction. The server computer
130 may be associated with a payment processor network (PPN).
[0054]           At step S308, after the terminal 120 sends the authorization request message to
the server computer 130, the server computer 130 may determine whether the user device 110
is enrolled in a fitness tracking program. For example, the server computer 130 may be able to
determine a manufacturer of the user device 110 based at least in part on the received device
ID in the authorization request message. Based on the determined manufacturer, the server
computer 130 may be able to determine that the manufacturer manufactures fitness tracking
devices and that the user device 110 may be enrolled in a fitness tracking program. The server
computer 130 may make the determination from a local database having this information and
residing within the server computer 130, or may query another server computer to obtain the
information. In some embodiments, the authorization request message may include an
indicator that the user device 110 is enrolled in a fitness tracking program.

                                                   13
[0055]           At step S31 0, after the server computer 130 determines whether the user device
110 is enrolled in a fitness tracking program, the server computer 130 may query the third-party
computer 140 to obtain one or more fitness metrics associated with the user and the user
device 110. For example, if the server computer 130 determines that the user device 110 is
enrolled in a fitness tracking program, the server computer 130 may query the third-party
computer which may be associated with the manufacturer of the user device 110 or with a
fitness tracking service associated with the user device 110 to obtain the one or more fitness
metrics.
[0056]           At step S312, after the server computer obtains the one or more fitness metrics
associated with the user and the user device 110, the server computer 130 may query an offer
provider computer 160 to determine whether the user of the user device 110 qualifies for a
discount in the present transaction based on the obtained one or more fitness metrics. The
offer provider-computer 160 may be associated with an offer providing entity that may offer
discounts for the transaction based on the fitness metrics associated with the user. For
example, if the user has burned a certain number of calories in a predefined time period, the
offer-provider computer 160 may offer a discount in the present transaction. For example, if the
server computer 130 obtained information from the third-party computer 140 indicating that the
user burned 1,750 active calories in the present week, the server computer 130 may query the
offer-provider computer 160 with this information. The offer-provider computer 160 may be
offering a $5 transaction discount to any user who has burned at least 1,500 calories in the
present week. Accordingly, the offer-provider computer 160 may indicate to the server
computer 130 that the user is eligible for a $5 discount in the present transaction since he/she
has burned the requisite number of calories to qualify for the discount.
[0057]           At step S314, after the server computer queries the offer-provider computer 160
and determines that the user of the user device 110 qualifies for a discount, the server
computer 130 may forward the authorization request message received from the terminal 120 in
step S306 to the issuer computer 150. The authorization request message may be a standard
authorization request message.
[0058]           At step S316, the issuer computer 150 may approve or deny the transaction
based on the received authorization request message. The approval or denial of the
transaction may be based on a number of factors traditionally used to authorize or deny a
transaction. If the transaction is approved, the issuer computer 150 may transmit an
authorization response message to the server computer 130. At step S318, the server

                                                    14
computer 130 may forward the authorization response message to the terminal 120. At step
S320, the terminal 120 may complete the transaction initiated by the user device 110 and
transmit data to the user device 110 indicating that the transaction was successful. At this
point, the transaction may be considered complete and a clearing and settlement process may
take place at a later time.
[0059]          At step S322, when the clearing and settlement process begins, the server
computer 130 may generate and send a first clearing request message to the issuer computer
150. The first clearing request message may include an adjusted transaction amount that may
be the original transaction amount less the discount offered by the offer-provider computer 160.
For example, if the original transaction amount was $100 and the offer-provider computer 160
offered a $5 discount based on the one or more fitness metrics associated with the user of the
user device 110 (step S312), the adjusted transaction amount may be for $95. Accordingly, the
server computer 130 may request that the issuer computer 150 settle $95 in the clearing
request message, instead of the full $100 transaction amount. Upon receiving the clearing
request message, the issuer computer 150 may settle for the adjusted transaction amount,
either immediately or at some later point in time.
[0060]          At step S324, the server computer 130 may generate and send a second
clearing request message to the offer-provider computer 160. The second clearing request
message may include the discount amount offered by the offer-provider computer 160. For
example, if the original transaction amount was $100 and the offer-provider computer 160
offered a $5 discount based on the one or more fitness metrics associated with the user of the
user device 110 (step S314), the server computer may request that the offer-provider computer
160 settle $5 in the clearing request message. Upon receiving the clearing request message,
the offer-provider computer 160 may settle for the discount amount, either immediately or at
some point later in time.
[0061]          As illustrated, two different entities may be responsible for settling different
transaction amounts that add up to the original transaction amount. In such a way, a real-time
"discount" may be applied to the transaction, such that the user of the user device 110 may only
be charged for the original transaction amount less the discount, rather than the full transaction
amount where the discount is credited back to the user account at some point later in time.

                                                    15
[0062]           While the above example illustrates a $5 discount based on a prerequisite
number of calories expended by the user of the user device 110, other types of discounts may
also be available. For example, a tiered discount can be offered for a number of calories
expended by the user, where the user may receive a $5 discount for the first 2,000 calories
expended, and another $2.50 discount for every additional 1,00 calories expended. Many
different types of discount schemes may be employed with respect to the embodiments
described herein.
[0063]           FIG. 4 illustrates an alternate flow 400 between a token server computer and
multiple entities, in accordance with some embodiments of the invention. At step S402, a user
may initiate a transaction using his/her user device 110. For example, the user may interact
with a digital wallet application or third-party application executing on the user device 110 in
order to initiate the transaction process. The digital wallet application or third-party application
may be associated with a user account associated with the user. The user may open the digital
wallet application or third-party application on the user device 110 and enter his/her credentials
into the application. Then, for example, the user may select an option to begin a transaction.
[0064]           At step S404, after the user initiates the transaction with his/her user device 110,
the user may interact with the terminal 120 using his/her user device 110. In some
embodiments, the terminal 120 may be located within a merchant location. For example, the
terminal 120 may be a point-of-sale (POS) device located near the checkout area at the
merchant location. For example, this step may occur when the user is ready to checkout and
pay for merchandise obtained from the merchant location. For example, the user may interact
with the terminal 120 by "tapping" his/her user device 110 against the terminal 120 to initiate a
near-field connection (NFC). In some embodiments, the user device 110 may also connect to
the terminal 120 using Bluetooth, Wi-Fi, or any other wireless communication link. Upon
creating the connection between the user device 110 and the terminal 120, the user device 110,
via the digital wallet application or other third-party application, may transmit the user's account
information to the terminal 120.
[0065]           At step S406, after user device 110 interacts with the terminal 120 and transmits
the user's account information to the terminal 120, the terminal 120 may send an authorization
request message to the server computer 130. The authorization request message 130 may
include the user's account information, a device identification (ID) associated with the user
device 110, and other relevant information pertinent to the transaction. The server computer
130 may be associated with a payment processor network (PPN).

                                                   16
[0066]           At step S408, after the terminal 120 sends the authorization request message to
the server computer 130, the server computer 130 may determine whether the user device 110
is enrolled in a fitness tracking program. For example, the server computer 130 may be able to
determine a manufacturer of the user device 110 based at least in part on the received device
ID in the authorization request message. Based on the determined manufacturer, the server
computer 130 may be able to determine that the manufacturer manufactures fitness tracking
devices and that the user device 110 may be enrolled in a fitness tracking program. The server
computer 130 may make the determination from a local database having this information and
residing within the server computer 130, or may query another server computer to obtain the
information. In some embodiments, the authorization request message may include an
indicator that the user device 110 is enrolled in a fitness tracking program.
[0067]           At step S41 0, after the server computer 130 determines whether the user device
110 is enrolled in a fitness tracking program, the server computer 130 may query the third-party
computer 140 to obtain one or more fitness metrics associated with the user and the user
device 110. For example, if the server computer 130 determines that the user device 110 is
enrolled in a fitness tracking program, the server computer 130 may query the third-party
computer which may be associated with the manufacturer of the user device 110 or with a
fitness tracking service associated with the user device 110 to obtain the one or more fitness
metrics.
[0068]           At step S412, after the server computer obtains the one or more fitness metrics
associated with the user and the user device 110, the server computer 130 may query an offer
provider computer 160 to determine whether the user of the user device 110 qualifies for a
discount in the present transaction based on the obtained one or more fitness metrics. The
offer provider-computer 160 may be associated with an offer providing entity that may offer
discounts for the transaction based on the fitness metrics associated with the user. For
example, if the user has burned a certain number of calories in a predefined time period, the
offer-provider computer 160 may offer a discount in the present transaction. For example, if the
server computer 130 obtained information from the third-party computer 140 indicating that the
user burned 1,750 active calories in the present week, the server computer 130 may query the
offer-provider computer 160 with this information. The offer-provider computer 160 may be
offering a $5 transaction discount to any user who has burned at least 1,500 calories in the
present week. Accordingly, the offer-provider computer 160 may indicate to the server
computer 130 that the user is eligible for a $5 discount in the present transaction since he/she
has burned the requisite number of calories to qualify for the discount.

                                                 17
[0069]          At step S414, after the server computer queries the offer-provider computer 160
and determines that the user of the user device 110 qualifies for a discount, the server
computer 130 may forward the authorization request message received from the terminal 120 in
step S406 to the issuer computer 150. The authorization request message may be a standard
authorization request message.
[0070]          At step S416, the issuer computer 150 may approve or deny the transaction
based on the received authorization request message. The approval or denial of the
transaction may be based on a number of factors traditionally used to authorize or deny a
transaction. If the transaction is approved, the issuer computer 150 may transmit an
authorization response message to the server computer 130. At step S418, the server
computer 130 may forward the authorization response message to the terminal 120. At step
S420, the terminal 120 may complete the transaction initiated by the user device 110 and
transmit data to the user device 110 indicating that the transaction was successful. At this
point, the transaction may be considered complete and a clearing and settlement process may
take place at a later time.
[0071]          At step S422, when the clearing and settlement process begins, the server
computer 130 may generate and send a clearing request message to the issuer computer 150.
The clearing request message may include the original transaction amount prior to applying any
discount offered by the offer-provider computer 160. For example, if the original transaction
amount was $100 and the offer-provider computer 160 offered a $5 discount based on the one
or more fitness metrics associated with the user of the user device 110 (step S412), the clearing
request message may still include the original transaction amount for $100. Upon receiving the
clearing request message, the issuer computer 150 may settle for the original transaction
amount, either immediately or at some later point in time.
[0072]          At step S424, the server computer 130 may instruct the issuer to issue a credit to
the user account associated with the user in the amount of the discount offered by the offer
provider computer 160 at some point after the issuer computer 150 has settled the original
transaction amount (step S422). At some point later, the server computer 130 may separately
settle the discount amount with the offer-provider computer 160.

                                                  18
[0073]          The various participants and elements described herein with reference to FIGs.
1-4 may operate one or more computer apparatuses to facilitate the functions described herein.
Any of the elements in FIGs. 1-4, including any servers or databases, may use any suitable
number of subsystems to facilitate the functions described herein.
[0074]          Examples of such subsystems or components are shown in FIG. 5. The
subsystems shown in FIG. 5 are interconnected via a system bus 575. Additional subsystems
such as a printer 503, keyboard 506, fixed disk 507 (or other memory comprising computer
readable media), monitor 509, which is coupled to display adapter 504, and others are shown.
Peripherals and input/output (1/O) devices, which couple to 1/O controller 500 (which can be a
processor or other suitable controller), can be connected to the computer system by any
number of means known in the art, such as serial port 505. For example, serial port 505 or
external interface 508 can be used to connect the computer apparatus to a wide area network
such as the Internet, a mouse input device, or a scanner. The interconnection via system bus
allows the central processor 502 to communicate with each subsystem and to control the
execution of instructions from system memory 501 or the fixed disk 507, as well as the
exchange of information between subsystems. The system memory 501 and/or the fixed disk
507 may embody a computer readable medium.
[0075]          Any of the software components or functions described in this application, may
be implemented as software code to be executed by a processor using any suitable computer
language such as, for example, Java, C++ or Perl using, for example, conventional or object
oriented techniques. The software code may be stored as a series of instructions, or
commands on a computer readable medium, such as a random access memory (RAM), a read
only memory (ROM), a magnetic medium such as a hard-drive or a floppy disk, or an optical
medium such as a CD-ROM. Any such computer readable medium may reside on or within a
single computational apparatus, and may be present on or within different computational
apparatuses within a system or network.
[0076]          The above description is illustrative and is not restrictive. The process flow may
be extended beyond the number of components shown. Many variations of the invention will
become apparent to those skilled in the art upon review of the disclosure. The scope of the
invention should, therefore, be determined not with reference to the above description, but
instead should be determined with reference to the pending claims along with their full scope or
equivalents.

                                                    19
[0077]          One or more features from any embodiment may be combined with one or more
features of any other embodiment without departing from the scope of the invention.
[0078]          A recitation of "a", "an" or "the" is intended to mean "one or more" unless
specifically indicated to the contrary.
[0079]          All patents, patent applications, publications, and descriptions mentioned above
are herein incorporated by reference in their entirety for all purposes. None is admitted to be
prior art.

                                                    20
CLAIMS:
1.      A method for facilitating a transaction, comprising:
        receiving, at a server computer, an authorization request for the transaction, the
        authorization request comprising a first amount and a device identification (ID) for a user
        device;
obtaining, by the server computer and from a third-party computer, a fitness metric associated
with a user of the user device based at least in part on the device ID;
        determining, by the server computer, whether the transaction is eligible for a discount
based at least in part on the obtained fitness metric; and
        if the transaction is eligible for the discount, applying, by the server computer, the
discount to the transaction.
2.      The method of claim 1, wherein the device ID is indicative of a manufacturer of the user
device.
3.      The method of claim 1, wherein applying the discount to the transaction further
comprises:
        generating, by the server computer, a first clearing request message comprising a
second amount, wherein the second amount is the first amount less the discount;
        transmitting, by the server computer and to an issuer computer for further processing;
generating, by the server computer, a second clearing request message comprising the
discount; and
        transmitting, by the server computer, the second clearing request message to an offer
provider computer for further processing.
4.      The method of claim 1, wherein applying the discount to the transaction further
comprises:

                                                  21
        transmitting, by the server computer, the authorization request message to an issuer
computer for further processing; and
        applying a credit in an amount of the discount to a user account associated with the user
device.
5.      The method of claim 1, wherein the user device is a wearable fitness device.
6.      The method of claim 1, wherein the third-party computer is associated with a
manufacturer of the user device.
7.      The method of claim 1, wherein the obtaining step is performed via an application
programming interface (API) call to the third-party computer.
8.      The method of claim 1, wherein the fitness metric comprises a number of calories
burned by the user within a specified time period.
9.      The method of claim 8, wherein the discount is based at least in part on the number of
calories burned by the user within the specified time period.
10.     The method of claim 1, wherein prior to the receiving step, the user device interacts with
a terminal.
11.     A server computer for facilitating a transaction, comprising:
        a processor; and
        a computer readable medium coupled the processor, the computer readable medium
comprising code, executable by the processor, for implementing a method comprising:

                                                    22
        receiving, at the server computer, an authorization request for the transaction, the
authorization request comprising a first amount and a device identification (ID) for a user device;
        obtaining, by the server computer and from a third-party computer, a fitness metric
associated with a user of the user device based at least in part on the device ID;
        determining, by the server computer, whether the transaction is eligible for a discount
based at least in part on the obtained fitness metric; and
        if the transaction is eligible for the discount, applying, by the server computer, the
discount to the transaction.
12.     The server computer of claim 11, wherein the device ID is indicative of a manufacturer of
the user device.
13.     The server computer of claim 11, wherein applying the discount to the transaction further
comprises:
        generating, by the server computer, a first clearing request message comprising a
second amount, wherein the second amount is the first amount less the discount;
        transmitting, by the server computer and to an issuer computer for further processing;
        generating, by the server computer, a second clearing request message comprising the
discount; and
        transmitting, by the server computer, the second clearing request message to an offer
provider computer for further processing.
14.     The server computer of claim 11, wherein applying the discount to the transaction further
comprises:
        transmitting, by the server computer, the authorization request message to an issuer
computer for further processing; and
        applying a credit in an amount of the discount to a user account associated with the user
device.

                                                 23
15.     The server computer of claim 11, wherein the user device is a wearable fitness device.
16.     The server computer of claim 11, wherein the third-party computer is associated with a
manufacturer of the user device.
17.     The server computer of claim 11, wherein the obtaining step is performed via an
application programming interface (API) call to the third-party computer.
18.     The server computer of claim 11, wherein the fitness metric comprises a number of
calories burned by the user within a specified time period.
19.     The server computer of claim 18, wherein the discount is based at least in part on the
number of calories burned by the user within the specified time period.
20.     The server computer of claim 11, wherein prior to the receiving step, the user device
interacts with a terminal.
                           Visa International Service Association
                                Patent Attorneys for the Applicant
                                   SPRUSON & FERGUSON

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
