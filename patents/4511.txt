ABSTRACT
A tap timer system, method and apparatus capable of detecting solenoid valve malfunction and
notifying user immediately comprise a power supply module, a solenoid valve (or a motor), a
conduit, a wireless module, a timer control module, a water flow measurement module, a wireless
gateway (also known as the base station or access point) and cloud server. By utilising the solenoid
valve control signal state and the water flow measurement value, the system can determine
whether the solenoid valve has failed to close or open. If an abnormal situation is detected, the
tap control module sends a warn ing message to the wireless gateway and the cloud server, and
then the cloud server notifies the user immediately through various means such as push
notification, email, automated phone call and short message.

                                                     1
    A TAP TIMER SYSTEM, METHOD AND APPARATUS CAPABLE OF DETECTING SOLENOID VALVE
                         MALFUNCTION AND NOTIFYING USER IMMEDIATELY
BACKGROUND OF THE INVENTION
[0001] More and more households are starting to use tap timers to automatically water plants in
their home. There are a wide range of tap timer products available on the market, including
traditional mechanical / electronic tap timers and the latest wireless tap timers that can be
remotely controlled from the phone. All these tap timer products contain a core component:
solenoid valve or motor. When the preset time arrives, the control circuit inside the timer turns
the solenoid valve on or off to start or stop watering.
[0002] In real life scenario, many users have a concern that the solenoid valve inside of a tap timer
fails to shut down properly without any warning after the product has been used for a while. The
worse thing is that the user has no way of knowing it in time when the accident occurs. When the
user finally realised what has happened, in many cases it was already too late for remedy. All
current tap timer products on the market cannot solve this issue which has led many families to
stay away from all the tap timer products.
[0003] In real life scenario, there is also a chance that the solenoid valve inside of the tap timer
fails to open when it is instructed to open. If the user has not been aware the abnormal situation
for a long time, it could lead to withered plants.
[0004] Apart from the scenarios described above, there may be another situation: for some
reason, the main water pipe is shut down, but the user is not notified. The user thinks his/her tap
timer is still supplying water to his/her plants according to the preset watering schedule, but the
fact is that there is no water flowing out even though the solenoid valve inside of the tap timer has
been opened. If the water is cut off for a long time and the user is not aware of it, it could cause
the plant to wilt too.

                                                       2
[0005] In real life scenario, it is inevitable that the solenoid valve could malfunction over time.
Although the overall probability of failure is not high, once the failure occurs and the user is not
notified in time, the damage caused by such failure could be disastrous.
SUMMARY OF THE INVENTION
[0006] The purpose of the present invention is to provide a tap timer system, method and
apparatus that can detect the solenoid valve malfunction and notify the user immediately through
various means if the abnormal situation occurs.
[0007] According to the present invention, a tap timer system, method and apparatus capable of
detecting the solenoid valve malfunction and notifying the user in time comprise a power supply
module, a solenoid valve (or a motor), a conduit, a wireless module, a timer control module, a
water flow measurement module, a wireless gateway (also known as the base station or access
point) and a cloud server.
[0008] The timer control module generates a control signal to open or close the solenoid valve at
the specified time according to the watering on or watering off command. The watering on and off
commands can be sent to the tap timer by the user from the APP through the wireless gateway
and the cloud server or can be automatically generated by the system according to some kind of
external triggering conditions (such as soil moisture sensor measurement, rainfall observations
and forecast values, etc.).
[0009] The timer control module generates control signals to open and close the solenoid valve.
However, if the solenoid valve does not operate accordingly due to some kind of mechanical or
electrical malfunction, currently there is no way for the timer control module to know that. The
common malfunction phenomena of the solenoid valve include:
[0010] 1) The timer control module has issued a close command, but the solenoid valve is only
partially closed or not closed at all;

                                                    3
[0011] 2) The timer control module has issued an open command, but the solenoid valve is only
partially opened or not opened at all;
[0012] In the present invention, the water flow measurement module is installed at the outlet or
inlet of the conduit. When water flows through the tap timer, the water flow measurement
module can measure the water flow value. This value is passed to the timer control module via a
data channel.
[0013] At any moment, the control signal state (open or close) of the solenoid valve is known to
the timer control module. Then the real working state of the solenoid valve can be derived based
on the control signal state and water flow value:
[0014] 1) If the current control signal state of the solenoid valve is open and the water flow value
isgreater than a preset threshold, then it means the solenoid valve isworking normally;
[0015] 2) If the current control signal state of the solenoid valve is open, the water flow value is
greater than zero, but less than the preset threshold, then it indicates a malfunction has occurred.
The reasons of this type of malfunction include a) the solenoid valve has not fully opened, or b)
the main water pipe has been shut off partially, resulting in a small water flow;
[0016] 3) If the current control signal state of the solenoid valve is open, but the water flow
measurement is zero, then it indicates a water interruption problem has occurred. The reasons of
the water interruption include a) the main water pipe has been shut off completely, or b) the
solenoid valve has failed to open completely, or c) the tap timer has been dis-attached from the
tap.
[0017] 4) If the current control signal state of the solenoid valve is close, and the water flow value
is equal to zero, then it means the solenoid valve isworking normally;
[0018] 5) If the current control signal state of the solenoid valve is close, but the water flow value
isgreater than zero, then it indicates that the solenoid valve has failed to close. Based on the value

                                                   4
of the water flow measurement, the user can further determine whether the solenoid valve is
partially closed or not closed at all.
[0019] When the timer control module detects an abnormal situation, a warning message is sent
to the cloud server through the wireless gateway immediately from the tap timer. Then the cloud
server can notify the user immediately through various methods, such as push notification, email,
automated phone call and short message.
[0020] It should be noted that the logical function of detecting the real working state of the
solenoid valve may also be implemented in the wireless gateway or the cloud server because the
control signal states of the solenoid valve and the water flow value can also be known to the
wireless gateway or cloud server. Therefore, any one of the above implementations is within the
protection scope of the present invention.
BRIEF DESCRIPTION OF THE DRAWINGS
[0021] The above and other aspects, features and advantages of several embodiments of the
present invention will be more apparent from the following more particular description thereof,
presented in conjunction with the following drawings: The novel features believed characteristic
of the present invention are set forth in the appended claims. The invention itself, however, as
well as a preferred mode of use, further objectives and advantages thereof, will be best
understood by reference to the following detailed description of an illustrative embodiment when
read in conjunction with the accompanying drawings wherein:
[0022] Figure 1 is a block diagram of one embodiment of the present invention.
[0023] Figure 2 is a flowchart depicting the logical function for determining the real working state
of the solenoid valve.
[0024] Figure 3 is a block diagram of another embodiment of the present invention.

                                                   5
[0025] Figure 4 is a block diagram of another embodiment of the present invention.
[0026] Figure 5 is a block diagram of another embodiment of the present invention.
DETAILED DESCRIPTION OF THE ILLUSTRATED EMBODIMENTS
[0027] Figure 1 shows one exemplary embodiment of the present invention. The solenoid valve
101, the power supply module 102, the conduit 103, the wireless module 104, the timer control
module 105 and the water flow measurement module 106 are all contained in a housing 107.
Connection lines between the modules are omitted for brevity. The power supply module 102
supplies power for the solenoid valve 101, the wireless module 104, the timer control module 105
and the water flow measurement module 106. The wireless module 104 is responsible for
receiving the watering commands from the wireless gateway 108 and passing the commands to
the timer control module 105. The wireless module 104 also sends the data generated by the
timer control module 105 to the wireless gateway 108. The wireless technology used between the
wireless module 104 and wireless gateway 108 can be WiFi, Zigbee, NB-loT and so on. The water
flow measurement module 106 is connected to the conduit 103, preferably to the outlet of the
conduit 103, but may also be connected to the inlet of the conduit 103. The measurement result
of the water flow measurement module 106 is passed to the timer control module 105.
[0028] The timer control module 105 consists of three main functions: First, control the solenoid
valve 101 on and off; second is to receive water flow value (or a value can be converted to the
water flow value) generated by the water flow measurement module 106; Third, detect real
working state of the solenoid valve based on the control signal state of the solenoid valve and the
water flow value.
[0029] Figure 2 shows a process flow for detecting the real working state of the solenoid valve
101. If the timer control module 105 detects any abnormal situation, a warning message will be
sent to the wireless gateway 108 by the wireless module 104 and then sent to the cloud server
109 by the wireless gateway 108. When the cloud server 109 receives the warning message, the

                                                  6
user 110 will be notified immediately via various means such as push notification, email,
automated phone call and short message.
[0030] Figure 3 shows another exemplary embodiment of the present invention. In this
embodiment, a solenoid valve 301, a power supply module 302, a conduit 303, a wireless module
304 and a timer control module 305 are contained within a housing 306 while a water flow
measurement module 307, a power supply module 308 and a conduit 309 are contained within
another housing 310, which isthen connected to the outlet of the conduit 303. The water flow
value generated by the water flow measurement module 307 is sent to the timer control module
305 through a data line 311. The logical function of detecting the real working state of the
solenoid valve remains in the timer control module 305. Same as the procedure described for
Figure 1, a warning message will be sent to the cloud server 313 by the wireless module 304
through the wireless gateway 312 if an abnormal situation in the tap timer isdetected.
[0031] Figure 4 shows another exemplary embodiment of the present invention. In this
embodiment, a solenoid valve 401, a power supply module 402, a conduit 403, a wireless module
404 and a timer control module 405 are contained in a housing 406 while a water flow
measurement module 407 and a conduit 408 is contained in another housing 409, which is then
connected to the outlet of the conduit 403. The power supply of the water flow measurement
module 407 is obtained from the power supply module 402 via a power supply line 410; the water
flow value generated by the water flow measurement module 407 is sent to the timer control
module 405 through a data line 411. The logical function of detecting the real working state of the
solenoid valve remains in the timer control module 405. Same as the procedure described for
Figure 1, a warning message will be sent to the cloud server 413 by the wireless module 404
through the wireless gateway 412 if an abnormal situation in the tap timer isdetected.
[0032] Figure 5 shows another exemplary embodiment of the present invention. In this
embodiment, a solenoid valve 501, a power supply module 502, a conduit 503, a wireless module
504 and a timer control module 505 are contained in a housing 506. A water flow measurement
module 507, a conduit 508, a power supply module 509 and a wireless module 510 are contained
in the other housing 511 which is connected to the outlet of the conduit 503. The power of the

                                                     7
water flow measurement module 507 and the wireless module 510 is provided by the power
supply module 509. The water flow value is sent to the wireless gateway 512 through the wireless
module 510. The control signal state of the solenoid valve 501 is sent to the wireless gateway 512
via the wireless module 504. Detecting the real working state of the solenoid valve 501 is
performed in the wireless gateway 512. The detection process can also be further moved to the
cloud server 513 if needed. Same as the procedure described for Figure 1, the user 514 will be
notified immediately if an abnormal situation is detected.
[0033] Although the exemplary embodiments of the present invention have been disclosed as
above, it is not intended to be limited to the details set forth in the specification and the
examples. It can perfectly be adapted to various fields suitable for the present invention.
Additional modifications may easily be made to those skilled in the art. The invention is thus not
limited to the specific details and illustrations shown and described herein, without departing
from the general concept of the claims and their equivalents.

CLAIMS
1.     A method of detecting solenoid valve malfunction and notifying user immediately for a tap
timer system and apparatus, the tap timer system and apparatus comprising a power supply
module, a solenoid valve (or a motor), a conduit, a wireless module, a timer control module, a
water flow measurement module, a wireless gateway (also known as the base station or access
point) and a cloud server, the method comprising:
        storing state of control signal opening and closing the solenoid valve in the timer control
        module;
        generating water flow value by the water flow measurement module;
        receiving the water flow value in the timer control module;
        determining real working state of the solenoid valve in the timer control module based on
        the solenoid valve control signal state and the water flow value;
        sending a warning message to the cloud server immediately via the wireless gateway from
        the tap timer if an abnormal situation is detected in the timer control module; and
        notifying the user immediately from the cloud server through various methods, such as
        push notification, email, automated phone call and short message.
2.    The method of claim 1, wherein the logical function of determining of the real working state
of the solenoid valve can also be placed in the wireless gateway or the cloud server.
3.    The tap timer system and apparatus of claim 1, wherein the water flow measurement
module can be contained in the same housing as the power supply module, the solenoid valve (or
the motor), the conduit, the wireless module and the timer control module.
4.    The tap timer system and apparatus of claim 1, wherein the water flow measurement
module can be contained in the different housing from the power supply module, the solenoid
valve (or the motor), the conduit, the wireless module and the timer control module.
5.    The tap timer system and apparatus of claim 1, wherein the water flow measurement
module can be placed on the outlet or inlet of the conduit.

                      1/3
         DRAWINGS
<removed-date>
<removed-apn>
                    Figure 1
                    Figure 2

                      <removed-apn>   <removed-date>
Figure 4   Figure 3                              2/3

           <removed-apn>   <removed-date>
Figure 5                              3/3

