                                              - 10
                                             Abstract
         Control arrangement for an engine and a hydrostatic transmission of a vehicle
A control arrangement for use in a hydrostatic transmission (14) of a vehicle, and a method of
controlling an engine (12) and the hydrostatic transmission (14) are designed such, that
depending on sensed load in a drive arrangement (10) the engine speed is selected to achieve
fuel economy, whereas the maximum pressure in the hydrostatic transmission (14) is kept at a
level, which does not stall the engine (12).
Fig. 1

             1/2
     10
                 14 30 16 32
 12
3461
        Fig. 1

                            Australian Patents Act 1990
              ORIGINAL COMPLETE SPECIFICATION
                             STANDARD PATENT
                                      Invention Title
     Control arrangement for an engine and a hydrostatic transmission of a vehicle
The following statement is a full description of this invention, including the best method
                           of performing it known to me/us:-

                                                   - I d
This invention relates to a control arrangement for use in a hydrostatic transmission of a vehicle,
and a method of controlling an engine and a hydrostatic transmission of a vehicle.
DE 10 2007 003 956 Al discloses a speed control of an engine and a hydrostatic transmission,
whereas a vehicle drive speed request is set by an accelerator pedal and an inching percent,
i.e. the maximum vehicle speed is reduced, as the fully pressed pedal produces vehicle speed
below maximum speed. There is a fixed and parametrized relation from vehicle speed request
to both the engine rpm and hydrostatic transmission gear ratio.
EP 2 949 533 Al teaches the control of an engine depending on the predicted operation of a
vehicle, in order to reduce fuel consumption.
The problem this invention is based on is seen in the need of a control of a drive assembly of a
vehicle, which provides for fuel efficiency, but also keeps the engine powerful and running at a
requested speed in spite of the load generated by a hydrostatic transmission propelling the
vehicle.
This problem is solved in an innovative way by means of the teaching of claims 1 and 8,
whereas advantageous features further developing the invention are given in the claims related
to them.
By means of this teaching the engine speed is not controlled in isolation, but together with the
hydrostatic transmission, which allows to consider the engine characteristic by adjusting the
maximum pressure and/or displacement of the pump and motor in the hydrostatic transmission.
The maximum pressure is selected considering the torque and the speed (rpm) of the engine at
the given point on the engine characteristics curve, such that the load torque generated by the
hydrostatic transmission does not exceed the engine's capability to produce torque, i.e the
hydrostatic transmission does not overload the engine.
Stalling the engine is definitely avoided, if the signal generated by a drive controller to a
pressure control means provides for a pressure in the hydrostatic transmission lower than the
pressure needed to overload or even stall the engine at the engine rpm requested by the drive
controller. While normally said maximum pressure is maintained by controlling the position of
the swash plates, it would also be possible to operate, e.g. open a pressure relief valve in the
case of a load peak.

                                                 -2
Load sensing may happen at any suitable place and component like at the engine itself, in a
drive component or indirectly from data about the movement itself, like acceleration. In particular
the load at or of the engine is based on data of the engine injection system and/or of the engine
exhaust system and/or of vibrations of the engine and/or of driveline torque measurements
and/or of transmission pressure measurements and/or of vehicle speed and acceleration and/or
of vehicle inclination and/or of steering inputs and/or of operator control inputs and/or of at least
one vehicle component driven by the engine. I.e. the value may be derived directly at the engine
or its auxiliaries or where the load comes from. Either combination of data may be useful,
depending on the given circumstance.
In order to make the estimation of required engine power more sophisticated and less ad hog,
the calculation by the drive controller may be based on current as well as on upcoming, i.e.
predicted driving circumstances using a combination of past and present values of driving load
to the engine detected by the load sensing means. Values may be collected over a period of
e.g. 5 secs or more.
Smart control, even considering changes in the engine characteristics is achieved by the use of
a database containing data about engine speed/rpm, pump displacement, engine power
requirement estimation, engine fuel efficiency and hydrostatic pressure required to overload/stall
the engine. This database can be part of the drive controller.
Since gains in fuel consumption and/or engine power output may be minimal if at all in upper
and/or lower rpm regions, the control may be limited to a user defined range of engine rpm, in
which the engine speed request controller is allowed to operate. Depending on the engine type
a suitable rpm range may be between 1200 and 1800 rpm.
Information from past driving cycles of the vehicle may be used in a learning algorithm, which is
designed to automatically adjust the range of engine rpm based on it.
A method, which detects the current load, which selects an engine rpm accordingly such, that a
low amount of fuel is needed and which adjusts the load, a hydrostatic transmission is allowed
to generate at max will help to avoid, that the engine rpm drops too far and/or too fast or even
stalls - in any way gets overloaded.

                                                  -3
The signal generated by the drive controller to adjust the engine speed and rpm preferably is
not based on an instant review of the load situation, but on data considering situations over a
certain time window, which allows also to predict the development of the load.
Offroad vehicles in forestry, construction and agriculture are most suitable for this control
arrangement, as they often are driven via hydrostatic transmissions at a fixed rpm and are
exposed to sudden load peaks.
In the following one embodiment of the invention is described in more detail and in relation to
the drawing. It is shown in:
         Fig. 1 a drive arrangement in schematic depiction,
         Fig. 2 an engine speed vs. hydrostatic pressure diagram, and
         Fig. 3 an engine power vs. engine speed diagram.
A drive arrangement 10 shown in figure 1 comprises an engine 12, a hydrostatic transmission
14, a mechanical driveline 16, a motion controller 18, a drive controller 20 and an engine speed
controller 22 as this is known in principle in the prior art.
The drive arrangement 10 is designed for use in an off-road vehicle, like a crawler, an
excavator, a loader, a forest harvester, a forwarder, a forage harvester, a combine or any similar
kind of construction, forestry or agricultural machine.
The engine 12 normally is a Diesel engine with or without a turbocharger, but could be a
gasoline engine as well. In this application the engine 12 is normally driven at a constant speed
depending on the circumstances, rather than at constantly varying speeds as this isthe case
with cars, for example. The engine rpm is controlled by means of the engine speed controller 22
acting on the injection system (not shown).
The hydrostatic transmission 14 comprises a pump 24 and a motor 26 connected via hoses or
pipes. However, more than one couple of pump 24 and motor 26 could be used and one pump
24 may feed more than one motor 26. Both - the pump 24 and the motor 26 - are of the
variable displacement type, whereas the variation normally is achieved by means of not shown,
but well known internal swash plates. The maximum hydrostatic work pressure in the
hydrostatic transmission 14 is controlled by manipulating the delivering and receiving volume

                                                   -4
(displacements) in the pump 24 and the motor 26 through changing the inclination of their
swash plates electronically or hydraulically. The pressure in the hydrostatic transmission 14
determines the potential of the vehicle equipped with this drive arrangement 10 to overcome an
obstacle, like a rock, a ditch, an inclination, etc.
The mechanical driveline 16 in this case comprises a mechanical transmission 30 and final
drives 32, connected to each other by ordinary means, like clutches, universal shafts, drive
shafts, etc. The transmission 30 may be a shift transmission with certain gears as well as a
variable transmission like a planetary transmission; in certain applications the transmission 30
may not provide for a different speed range at all, but just transmits the torque. Said
transmission 30 may allow the vehicle to drive in different speed modes, like a slow mode off
road and a fast mode on-road, yet inside the respective speed mode the speed will be varied by
means of the hydrostatic transmission 14. The control of the transmission 30 may happen
manually and isolated from the drive controller 20 or actuated by it. The final drives 32 may
comprise a differential, step down transmissions per wheel and drive shafts as this is customary
in the art and drive ground support wheels or tracks.
The motion controller 18 is shown in the kind of a pedal, but is representative of all kinds of
actuators needed to control the movement of the vehicle, like speed, direction, acceleration,
halt, etc. It could be in the form of a hand operated lever at a driver station, an electric or
electronic switch, a mouse pad, etc. moved or actuated by an operator or an autonomous
system. Depending on the physical or virtual position of the motion controller 18 the drive
arrangement 10 is supposed to move the vehicle faster, slower, at a given speed, backwards,
forwards, etc. over terrain. Accordingly the motion controller 18 gives a signal to the drive
controller 20 indicative of the intended speed and direction. The signals emitted by the motion
controller 18 can be for example the operator accelerating the vehicle, stopping the vehicle,
changing driving direction, steering, or using other engine powered vehicle equipment.
The drive controller 20 is connected to load sensing means 34 shown in figure 1 as being
related to the engine 12, but this is just an exemplary place for any other location like at the
mechanical driveline 16, or the hydrostatic transmission 14. Actually the load sensing means 34
may comprise sensors placed all over the vehicle. The drive controller 20 also communicates
with the motion controller 18 and the engine controller 22 as this is indicated by the arrows
shown in figure 1. The drive controller 20 receives signals about the engine and/or driving load
related to driving operation. Engine and driving load is monitored using multiple vehicle and
engine signals. The engine and driving load related data can be taken from either or several of
in any combination the engine injection system, engine air system, engine exhaust system,

                                                 -5
vibration of the engine, driveline torque measurements, transmission pressure measurements,
vehicle speed and acceleration, vehicle inclination, vehicle steering inputs, vehicle operation
control inputs or at least one vehicle component driven by the engine 12. Based on the
measured signals, specific measures describing driving circumstances are calculated based on
past and present values of the measured signals. The calculated measures are for example
variance of a signal, maximum/minimum/median/average of a signal within a certain time
window. Based on the combination of these signals and calculated measures the drive
controller 20 has a model to calculate an estimate of required engine power demand in the
present and upcoming driving situation.
The engine controller 22 contains an ECU for the non-shown injection system working on
signals received from the drive controller 20. Drive control happens on the basis of an individual
engine characteristic map/database about engine torque and engine speed (rpm) relations with
lines of optimal fuel consumption. It is the goal to operate the engine 12 with an rpm, at which its
torque/power producing capability is sufficient for the duty, but fuel consumption is as low as
possible.
The pressure control means 28 comprises components needed to change the displacement in
the pump 24 and the motor 26 and thereby the system pressure. Such components usually are
electro-hydraulic valves, swash plates, solenoids, etc.
The load sensing means 34, the engine speed controller 22, the pressure control means 28 and
the drive controller 20 form a control arrangement 36. While the arrows between the engine
speed controller 22 and the pressure control means 28 and the drive controller 20 point in both
directions, meaning a closed loop control, it is possible applying an open loop control as well.
Based on above description of the drive arrangement 10 its function is described as follows.
The required engine power estimation can be modeled as a neural network model, statistical or
probabilistic model comparing the measures to pre-collected statistics of engine and vehicle
driving data from various operating conditions, a rule based control pattern or any combination
of these above mentioned methods.
The drive controller 20 has a database containing the relation of engine power and optimal
engine speed which optimizes fuel efficiency at different engine power requirement levels. The
power to optimal engine specific relation is engine specific taking into account the engine torque
curves, engine air and injection system difference or exhaust after treatment system difference.

                                                 -6
Therefore for a single type of a vehicle multiple different engine variants can be used for
example to satisfy different emission regulations.
The drive controller 20 calculates and sends signals to adapt the engine speed request to the
fuel-power optimized engine speed. The gear ratio in the hydrostatic transmission 14 is
calculated according to the adjusted engine speed such that the engine speed adaptation does
not change the vehicle driving speed and a respective signal is sent to the pressure control
means 28. The related signal for adjusting the engine speed/rpm is sent to the engine speed
controller 22. The rate of change in the engine speed request adaptation is limited to be slow
enough such that the engine air system and injection system are able to respond and deliver the
newly requested engine speed and that the change in engine speed does not result in
unwanted disturbance such as oscillation in vehicle driving speed.
To prevent the engine 12 from overloading or stalling at any point of the engine speed operation
range, in case the driving load suddenly increases for example if the vehicle is driven onto a
sudden obstacle such as large rock, tree or a tree stump, the torque the hydrostatic
transmission 14 provides to the engine 12 must be limited. The torque is limited by limiting the
pressure and displacement of the pump 24 via the pressure control means 28. The engine
torque is limited by primarily allowing the displacement of the motor 26 to return to its maximum
value and secondarily allowing the displacement of the pump 24 to return towards zero. This
maximizes the hydrostatic motor torque and tractive force when driving over the terrain
obstacle.
The maximum dynamical engine torque output is typically not constant over the engine speed
operating range, and therefore the maximum allowable pressure is different depending on the
engine speed. The drive controller 20 has a database containing the relation of engine operating
speed to maximum allowed pressure in the hydrostatic transmission 14. Figure 2 shows the
maximum allowable pressure based on engine maximum power. The individual pressure curves
D1, D2, Dmax in figure 2 stand for different displacements. The rpm/pressure relation takes into
account the displacement of the pump 24 such that a small displacement correlates to a higher
pressure. Instead of engine speed, the maximum allowable pressure can be calculated from
any other engine air system or injection system value, such as turbocharged air pressure, that
describes the engines capability to produce output torque/power. If needed, the maximum
pressure line of the hydrostatic transmission 14 may include reserved engine power for other
functions than driving that are powered by the engine 12 while driving. Pmax indicated in the left
upper corner of the charter means the maximum allowed system pressure in the hydrostatic
transmission 14.

                                                 -7
Drive controller 18 calculates the maximum pressure for the adjusted engine speed. In case the
pressure exceeds the maximum pressure, the drive controller 20 reduces the gear ratio in the
hydrostatic transmission 14 by primarily increasing the displacement of the motor 26 and
secondarily reducing the displacement of the pump 24. The varying limitation of maximum
allowed pressure can alternatively be controlled by using separate valve(s) that manipulate the
displacements of motor 26 and/or the pump 24 of the hydrostatic transmission 14.
Depending on the vehicle operation or worksite circumstances, it may not be feasible to operate
the engine 12 throughout the entire engine speed range. Therefore the drive controller 20
includes upper and lower limits to define the engine speed operation range. The range of engine
speed operation is shown in Figure 3, where nlow may stand for 1200 rpm (more or less) and
nhigh for 1800 rpm (more or less). Given that the vehicle typically operates at a defined worksite
and the vehicle operation may be cyclic by nature, it may be possible to estimate the operating
conditions of the work site based on the driving cycles or on input coming from the use of
certain equipment on the vehicle, like a crane. The control system includes a learning algorithm
which determines the upper and lower limits for the engine speed, using the calculated engine
power requirements and engine speed requests of the previous driving cycles. Instead of
automatically adapting engine speed range, the vehicle operator may have an option to
manually define the engine speed operating range.
Throughout this specification and the claims which follow, unless the context requires otherwise,
the word "comprise", and variations such as "comprises" and "comprising", will be understood to
imply the inclusion of a stated integer or step or group of integers or steps but not the exclusion
of any other integer or step or group of integers or steps.
The reference in this specification to any prior publication (or information derived from it), or to
any matter which is known, is not, and should not be taken as an acknowledgment or admission
or any form of suggestion that that prior publication (or information derived from it) or known
matter forms part of the common general knowledge in the field of endeavor to which this
specification relates.
The reference numerals in the following claims do not in any way limit the scope of the
respective claims.

                                             -8
            THE CLAIMS DEFINING THE INVENTION ARE AS FOLLOWS:
1. Control arrangement (36) for use in a drive arrangement (10) of a vehicle, including load
   sensing means (34) detecting the load on an engine (12), an engine speed controller
   (22), pressure control means (28) acting on a pressure in a hydrostatic transmission
   (14), and a drive controller (20), characterized in that based on a signal generated by the
   load sensing means (34) a signal is generated by the drive controller (20) for the engine
   speed controller (22) and for the pressure control means (28).
2. Control arrangement according to claim 1, characterized in that the signal generated by
   the drive controller (20) to the pressure control means (28) provides for a maximum
   allowed pressure in the hydrostatic transmission (14) lower than the pressure needed to
   stall the engine (14) at an selected engine rpm.
3. Control arrangement according to claim 1 or 2, characterized in that the load at the
   engine (12) sensed by the load sensing means (34) is based on data of one or more of
   the engine injection system, engine exhaust system, vibration of the engine, driveline
   torque measurements, transmission pressure measurements, vehicle speed and
   acceleration, vehicle inclination, steering inputs, operator control inputs or at least one
   vehicle component driven by the engine (12).
4. Control arrangement according to one or more of the preceding claims, characterized in
   that the estimation of required engine power calculated by the drive controller (20) is
   based on current and upcoming driving circumstances using a combination of past and
   present values of driving load to the engine detected by the load sensing means (34).
5. Control arrangement according to one or more of the preceding claims characterized by
   a database containing data about engine speed/rpm, pump displacement, engine power
   requirement estimation, engine fuel efficiency and pressure required to stall the engine.
6. Control arrangement according to one or more of the preceding claims characterized in
   that the drive controller (20) contains a user defined range of engine rpm, that the engine
   speed controller (22) is allowed to operate.
7. Control arrangement to one or more of the preceding claims characterized in that the
   drive controller (20) contains a learning algorithm, which is designed to automatically
   adjust the operating range of engine rpm based on past driving cycles of the vehicle.

                                              -9
8.  Method of controlling an engine (12) and a hydrostatic transmission (14) of a vehicle,
    including following steps:
    a)      the driving load on the engine (12) is sensed by load sensing means (34) and
            delivered to a drive controller (20),
    b)      the drive controller (20) calculates an estimate of required engine power,
    c)      the drive controller (20) generates a signal aligning the engine rpm request to the
            estimate of required engine power,
    d)      the drive controller (20) generates a signal aligning the gear ratio of the
            hydrostatic transmission with the vehicle drive speed request at the given engine
            rpm value, and
    e)      the drive controller (20) generates a signal aligning the maximum allowed
            pressure in the hydrostatic transmission (14) with the given engine rpm value.
9.  Method according to claim 8, characterized in that the required engine power is
    estimated based on data collected over a period of time and indicative of the current and
    upcoming driving circumstances.
10. Use of a control arrangement according to claims 1 to 7 and/or a method according to
    claims 8 or 9 in an offroad vehicle in forestry, agriculture or construction.

<removed-apn> <removed-date>
<removed-apn> <removed-date>
