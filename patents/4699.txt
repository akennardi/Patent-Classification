1002106286
                                      ABSTRACT
         This relates to systems and processes for using a virtual assistant to control
electronic devices. In one example process, a user can speak an input in natural
language form to a user device to control one or more electronic devices. The user
device can transmit the user speech to a server to be converted into a textual
representation. The server can identify the one or more electronic devices and
appropriate commands to be performed by the one or more electronic devices based
on the textual representation. The identified one or more devices and commands to be
performed can be transmitted back to the user device, which can forward the
commands to the appropriate one or more electronic devices for execution. In
response to receiving the commands, the one or more electronic devices can perform
the commands and transmit their current states to the user device.

1002106286
    INTELLIGENT ASSISTANT FOR HOME AUTOMATION
                 CROSS-REFERENCE TO RELATED APPLICATION
[0001]      This application claims priority from U.S. Provisional Serial No.
62/005,893, filed on May 30, 2014, entitled INTELLIGENT ASSISTANT FOR
HOME AUTOMATION, and U.S. Non-Provisional Serial No. 14/503,105, filed on
September 30, 2014, entitled INTELLIGENT ASSISTANT FOR HOME
AUTOMATION, which are hereby incorporated by reference in their entirety for all
purposes.
[0001a]     Incorporated herein by reference, in its entirety, is PCT/US2015/023593
(published as WO 2015/183401), filed on 31 March 2015.
                                            FIELD
[0002]      This relates generally to natural language processing and, more
specifically, to the use of a virtual assistant with natural language processing to
control electronic devices.
                                      BACKGROUND
[0003]      Home electronic devices that can be controlled remotely using software
applications running on a computing device, such as a mobile phone, tablet computer,
laptop computer, desktop computer, or the like, have become increasingly popular.
For example, numerous manufacturers create light bulbs that can be controlled by a
software application running on a mobile phone to adjust the brightness and/or color
of the bulb. Other devices, such as door locks, thermostats, and the like, having
similar controls are also available.
[0004]      While these devices can provide users with a greater level of control and
convenience, it can become exceedingly difficult to manage these devices as the
number of remotely controlled devices and the number of types of remotely controlled
devices in the home increase. For example, a typical home can include 40-50 light
bulbs placed throughout the various rooms of the home. Using conventional software
applications, each light bulb is given a unique identifier, and a user attempting to
control one of these devices must select the appropriate identifier from a list of
                                               1

1002106286
available devices within a graphical user interface. Remembering the correct
identifier for a particular light bulb and finding that identifier from a list of 40-50
identifiers can be a difficult and time-consuming process. To add to the difficulty of
managing and controlling a large number of remotely controlled devices, different
manufactures typically provide different software applications that must be used to
control their respective devices. As a result, a user must locate and open one software
application to turn on/off their light bulbs, and must then locate and open another
software application to set the temperature of their thermostat.
                                        SUMMARY
[0004a]      As used herein, except where the context requires otherwise, the term
"comprise" and variations of the term, such as "comprising", "comprises" and
"comprised", are not intended to exclude further additives, components, integers or
steps.
[0004b]      According to a first aspect of the invention there is provided a method for
controlling electronic devices using a virtual assistant on a user device, the method
comprising: receiving, by the user device, an audio input comprising a user speech;
transmitting data corresponding to the audio input to one or more servers; receiving,
from the one or more servers, a plurality of commands to set a state of each of a
plurality of electronic devices determined by the one or more servers based on a
stored configuration; and transmitting the plurality of commands to the plurality of
electronic devices.
[0004c]      According to a second aspect of the invention there is provided a method
for controlling electronic devices using a virtual assistant on a user device, the method
comprising: receiving, by one or more servers, data corresponding to an audio input
comprising a user speech; performing speech to text conversion on the data
corresponding to the audio input to generate a textual representation of the user
speech; determining that the textual representation of the user speech represents a user
intent to change the state of each of a plurality of electronic devices based on a
configuration; and transmitting a plurality of commands to set the state of each of the
plurality of electronic devices based on the configuration.
                                              2

1002106286
[0005]      Systems and processes for using a virtual assistant to control electronic
devices are provided. In one example process, a user can speak an input in natural
language form to a user device to control one or more electronic devices. The user
device can transmit the user speech to a server to be converted into a textual
representation. The server can identify the one or more electronic devices and
appropriate commands to be performed by the one or more electronic devices based
on the textual representation. The identified one or more devices and commands to be
performed can be transmitted back to the user device, which can forward the
commands to the appropriate one or more electronic devices for execution. In
response to receiving the commands, the one or more electronic devices can perform
the commands and transmit their current states to the user device.
                     BRIEF DESCRIPTION OF THE DRAWINGS
[0006]      FIG. 1 illustrates an exemplary environment in which a virtual assistant
can be used to control electronic devices according to various examples.
[0007]      FIG. 2 illustrates an exemplary environment in which a virtual assistant
can be used to remotely control electronic devices according to various examples.
[0008]      FIG. 3 illustrates an exemplary user device according to various examples.
[0009]      FIG. 4 shows a visual representation of multiple entries used to store
information associated with electronic devices according to various examples.
[0010]      FIG. 5 illustrates an exemplary process for controlling electronic devices
using a virtual assistant implemented using a client-server model according to various
examples.
                                           2a

WO 2015/183401                                                          PCT/US2015/023593
[0011]      FIG. 6 illustrates an exemplary process for remotely controlling electronic
devices using a virtual assistant implemented using a client-server model according to
various examples.
[0012]      FIG. 7 illustrates an exemplary process for controlling electronic devices
using a virtual assistant on a standalone user device according to various examples.
[0013]      FIG. 8 illustrates an exemplary process for storing the states of electronic
devices as a configuration according to various examples.
[0014]      FIG. 9 illustrates an exemplary process for setting the states of electronic
devices using a previously stored configuration according to various examples.
[0015]      FIG. 10 illustrates a functional block diagram of an electronic device
configured to control electronic devices according to various examples.
[0016]      FIG. 11 illustrates a functional block diagram of an electronic device
configured to store the states of electronic devices as a configuration according to
various examples.
[0017]      FIG. 12 illustrates a functional block diagram of an electronic device
configured to set the states of electronic devices based on a stored configuration
according to various examples.
[0018]      FIG. 13 illustrates a functional block diagram of an electronic device
configured to control electronic devices according to various examples.
[0019]      FIG. 14 illustrates a functional block diagram of an electronic device
configured to store the states of electronic devices as a configuration according to
various examples.
[0020]      FIG. 15 illustrates a functional block diagram of an electronic device
configured to set the states of electronic devices based on a stored configuration
according to various examples.
                               DETAILED DESCRIPTION
[0021]      In the following description of examples, reference is made to the
accompanying drawings in which it is shown by way of illustration specific examples
that can be practiced. It is to be understood that other examples can be used and

WO 2015/183401                                                            PCT/US2015/023593
structural changes can be made without departing from the scope of the various
examples.
[0022]       Intelligent automated assistants (or virtual assistants) provide an intuitive
interface between users and electronic devices. These assistants can allow users to
interact with devices or systems using natural language in spoken and/or text forms.
For example, a user can access the services of an electronic device by providing a
spoken user input in natural language form to a virtual assistant associated with the
electronic device. The virtual assistant can perform natural language processing on
the spoken user input to infer the user's intent and operationalize the user's intent into
tasks. The tasks can then be performed by executing one or more functions of the
electronic device and a relevant output can be returned to the user in natural language
form.
[0023]       This relates to systems and processes for using a virtual assistant to control
electronic devices. In one example process, a user can speak an input in natural
language form to a user device to control one or more electronic devices. The user
device can transmit the user speech to a server to be converted into a textual
representation. The server can identify the one or more electronic devices and
appropriate commands to be performed by the one or more electronic devices based
on the textual representation. The identified one or more devices and commands to be
performed can be transmitted back to the user device, which can forward the
commands to the appropriate one or more electronic devices for execution. In
response to receiving the commands, the one or more electronic devices can perform
the commands and transmit their current states to the user device.
SYSTEM OVERVIEW
[0024]       FIG. 1 illustrates exemplary system 100 for implementing a virtual
assistant to control electronic devices according to various examples. The terms
"virtual assistant," "digital assistant," "intelligent automated assistant," or "automatic
digital assistant" can refer to any information processing system that interprets natural
language input in spoken and/or textual form to infer user intent, and performs actions
based on the inferred user intent. For example, to act on an inferred user intent, the
system can perform one or more of the following: identifying a task flow with steps
and parameters designed to accomplish the inferred user intent; inputting specific

WO 2015/183401                                                           PCT/US2015/023593
requirements from the inferred user intent into the task flow; executing the task flow
by invoking programs, methods, services, APIs, or the like; and generating output
responses to the user in an audible (e.g., speech) and/or visual form.
[0025]       A virtual assistant can be capable of accepting a user request at least
partially in the form of a natural language command, request, statement, narrative,
and/or inquiry. Typically, the user request seeks either an informational answer or
performance of a task by the virtual assistant. A satisfactory response to the user
request can include provision of the requested informational answer, performance of
the requested task, or a combination of the two. For example, a user can ask the
virtual assistant a question, such as "Where am I right now?" Based on the user's
current location, the virtual assistant can answer, "You are in Central Park." The user
can also request the performance of a task, for example, "Please remind me to call
Mom at 4 p.m. today." In response, the virtual assistant can acknowledge the request
and then create an appropriate reminder item in the user's electronic schedule. During
the performance of a requested task, the virtual assistant can sometimes interact with
the user in a continuous dialogue involving multiple exchanges of information over an
extended period of time. There are numerous other ways of interacting with a virtual
assistant to request information or performance of various tasks. In addition to
providing verbal responses and taking programmed actions, the virtual assistant can
also provide responses in other visual or audio forms (e.g., as text, alerts, music,
videos, animations, etc.).
[0026]       An example of a virtual assistant is described in Applicants' U.S. Utility
Application Serial No. 12/987,982 for "Intelligent Automated Assistant," filed
January 10, 2011, the entire disclosure of which is incorporated herein by reference.
[0027]       As shown in FIG. 1, in some examples, a virtual assistant can be
implemented according to a client-server model. The virtual assistant can include a
client-side portion executed on a user device 102, and a server-side portion executed
on a server system 110. User device 102 can include any electronic device, such as a
mobile phone, tablet computer, portable media player, desktop computer, laptop
computer, PDA, television, television set-top box, wearable electronic device, or the
like, and can communicate with server system 110 through one or more networks 108,
which can include the Internet, an intranet, or any other wired or wireless public or
private network. The client-side portion executed on user device 102 can provide

WO 2015/183401                                                           PCT/US2015/023593
client-side functionalities, such as user-facing input and output processing and
communications with server system 110. Server system 110 can provide server-side
functionalities for any number of clients residing on a respective user device 102.
[0028]      Server system 110 can include one or more virtual assistant servers 114
that can include a client-facing I/O interface 122, one or more processing modules
118, data and model storage 120, and an I/O interface to external services 116. The
client-facing I/O interface 122 can facilitate the client-facing input and output
processing for virtual assistant server 114. The one or more processing modules 118
can utilize data and model storage 120 to determine the user's intent based on natural
language input, and perform task execution based on inferred user intent.
Additionally, data and model storage 120 can store a unique identifier, a state, a type,
a location, and any other relevant information associated with one or more of
electronic devices (e.g., electronic devices 128, 130, and 132) capable of being
controlled by user device 102 and/or server system 110. In some examples, virtual
assistant server 114 can communicate with external services 124, such as telephony
services, calendar services, information services, messaging services, navigation
services, and the like, through network(s) 108 for task completion or information
acquisition. The 1/0 interface to external services 116 can facilitate such
communications.
[0029]      Server system 110 can be implemented on one or more standalone data
processing devices or a distributed network of computers. In some examples, server
system 110 can employ various virtual devices and/or services of third party service
providers (e.g., third-party cloud service providers) to provide the underlying
computing resources and/or infrastructure resources of server system 110.
[0030]      User device 102 can be further coupled to electronic devices 128, 130, and
132 via one or more networks 126. Electronic devices 128, 130, and 132 can include
any type of remotely controlled electronic device, such as a light bulb (e.g., having a
binary ON/OFF state, numerical dimmable state, color state, etc.), garage door (e.g.,
having a binary OPEN/CLOSED state), door lock (e.g., having binary
LOCKED/UNLOCKED state), thermostat (e.g., having one or more numerical
temperature states, such as a high temperature, low temperature, time-based
temperatures, etc.), electrical outlet (e.g., having a binary ON/OFF state), switch (e.g.,
having a binary ON/OFF state), or the like. Network(s) 126 can include a WiFi

WO 2015/183401                                                          PCT/US2015/023593
network or any other wired or wireless public or private local network. Additionally
or alternatively, user device 102 can be coupled to communicate directly with
electronic devices 128, 130, or 132 using, for example, Bluetooth, BTLE, line of
sight, peer-to-peer, or another radio-based or other wireless communication. Thus, in
the illustrated example, user device 102 can be located near electronic devices 128,
130, and 132, such that it can communicate with them directly or over the same local
network. For example, user device 102 and electronic devices 128, 130, and 132 can
be located within the same home or building, and network(s) 126 can include the
home or building's WiFi network. As discussed in greater detail below with respect
to FIGs. 5, 8, and 9, user device 102 can issue commands to control any of electronic
devices 128, 130, and 132 in response to a natural language spoken input provided by
a user to user device 102.
[0031]       While only three electronic devices 128, 130, and 132 are shown, it should
be appreciated that system 100 can include any number of electronic devices.
Additionally, although the functionality of the virtual assistant is shown in FIG. 1 as
including both a client-side portion and a server-side portion, in some examples, the
functions of the assistant can be implemented as a standalone application installed on
a user device. Moreover, the division of functionalities between the client and server
portions of the virtual assistant can vary in different examples. For instance, in some
examples, the client executed on user device 102 can be a thin-client that provides
only user-facing input and output processing functions, and delegates all other
functionalities of the virtual assistant to a backend server.
[0032]       FIG. 2 illustrates another exemplary system 200 for implementing a virtual
assistant to remotely control electronic devices according to various examples.
Similar to system 100, system 200 can include user device 102, server system 110,
and external services 124 communicatively coupled together by network(s) 108.
However, in contrast to system 100, user device 102 may not be coupled to electronic
devices 128, 130, and 132. Instead, system 200 can include a second user device 134
coupled to communicate with user device 102 and/or server system 110 via
network(s) 108 and coupled to communicate with electronic devices 128, 130, and
132 via network(s) 126. This configuration can represent a situation in which the user
and user device 102 are located remotely from electronic devices 128, 130, and 132

WO 2015/183401                                                            PCT/US2015/023593
(e.g., the user and user device 102 are at the user's office, while electronic devices
128, 130, and 132 are at the user's home).
[0033]       Second user device 134 can include any type of electronic device, such as
a mobile phone, tablet computer, portable media player, desktop computer, laptop
computer, PDA, television, television set-top box, wearable electronic device, or the
like, and can be configured to receive commands from user device 102 and/or server
system 110 and to issue commands to electronic devices 128, 130, and 132. As
discussed in greater detail below with respect to FIG. 6, second user device 134 can
issue commands to control any of electronic devices 128, 130, and 132 in response to
a natural language spoken input provided by a user to user device 102.
USER DEVICE
[0034]       FIG. 3 is a block diagram of a user-device 102 (or second user device 134)
according to various examples. As shown, user device 102 can include a memory
interface 302, one or more processors 304, and a peripherals interface 306. The
various components in user device 102 can be coupled together by one or more
communication buses or signal lines. User device 102 can further include various
sensors, subsystems, and peripheral devices that are coupled to the peripherals
interface 306. The sensors, subsystems, and peripheral devices gather information
and/or facilitate various functionalities of user device 102.
[0035]       For example, user device 102 can include a motion sensor 310, a light
sensor 312, and a proximity sensor 314 coupled to peripherals interface 306 to
facilitate orientation, light, and proximity sensing functions. One or more other
sensors 316, such as a positioning system (e.g., a GPS receiver), a temperature sensor,
a biometric sensor, a gyroscope, a compass, an accelerometer, and the like, are also
connected to peripherals interface 306, to facilitate related functionalities.
[0036]       In some examples, a camera subsystem 320 and an optical sensor 322 can
be utilized to facilitate camera functions, such as taking photographs and recording
video clips. Communication functions can be facilitated through one or more wired
and/or wireless communication subsystems 324, which can include various
communication ports, radio frequency receivers and transmitters, and/or optical (e.g.,
infrared) receivers and transmitters. An audio subsystem 326 can be coupled to

WO 2015/183401                                                          PCT/US2015/023593
speakers 328 and a microphone 330 to facilitate voice-enabled functions, such as
voice recognition, voice replication, digital recording, and telephony functions.
[0037]       In some examples, user device 102 can further include an I/O subsystem
340 coupled to peripherals interface 306. 1/0 subsystem 340 can include a touch
screen controller 342 and/or other input controller(s) 344. Touch-screen controller
342 can be coupled to a touch screen 346. Touch screen 346 and the touch screen
controller 342 can, for example, detect contact and movement or break thereof using
any of a plurality of touch sensitivity technologies, such as capacitive, resistive,
infrared, and surface acoustic wave technologies, proximity sensor arrays, and the
like. Other input controller(s) 344 can be coupled to other input/control devices 348,
such as one or more buttons, rocker switches, a thumb-wheel, an infrared port, a USB
port, and/or a pointer device such as a stylus.
[0038]       In some examples, user device 102 can further include a memory interface
302 coupled to memory 350. Memory 350 can include any electronic, magnetic,
optical, electromagnetic, infrared, or semiconductor system, apparatus, or device, a
portable computer diskette (magnetic), a random access memory (RAM) (magnetic), a
read-only memory (ROM) (magnetic), an erasable programmable read-only memory
(EPROM) (magnetic), a portable optical disc such as CD, CD-R, CD-RW, DVD,
DVD-R, or DVD-RW, or flash memory such as compact flash cards, secured digital
cards, USB memory devices, memory sticks, and the like. In some examples, a non
transitory computer-readable storage medium of memory 350 can be used to store
instructions (e.g., for performing some or all of processes 500, 600, 700, 800, or 900,
described below) for use by or in connection with an instruction execution system,
apparatus, or device, such as a computer-based system, processor-containing system,
or other system that can fetch the instructions from the instruction execution system,
apparatus, or device, and execute the instructions. In other examples, the instructions
(e.g., for performing processes 500, 600, 700, 800, or 900, described below) can be
stored on a non-transitory computer-readable storage medium of server system 110, or
can be divided between the non-transitory computer-readable storage medium of
memory 350 and the non-transitory computer-readable storage medium of server
system 110. In the context of this document, a "non-transitory computer readable
storage medium" can be any medium that can contain or store the program for use by
or in connection with the instruction execution system, apparatus, or device.

WO 2015/183401                                                            PCT/US2015/023593
[0039]      In some examples, the memory 350 can store an operating system 352, a
communication module 354, a graphical user interface module 356, a sensor
processing module 358, a phone module 360, and applications 362. Operating system
352 can include instructions for handling basic system services and for performing
hardware dependent tasks. Communication module 354 can facilitate communicating
with one or more additional devices, one or more computers, and/or one or more
servers. Graphical user interface module 356 can facilitate graphic user interface
processing. Sensor processing module 358 can facilitate sensor related processing
and functions. Phone module 360 can facilitate phone-related processes and
functions. Application module 362 can facilitate various functionalities of user
applications, such as electronic-messaging, web browsing, media processing,
navigation, imaging, and/or other processes and functions.
[0040]      Memory 350 can also store client-side virtual assistant instructions (e.g., in
a virtual assistant client module 364) and various user data 366 (e.g., user-specific
vocabulary data, preference data, and/or other data, such as the user's electronic
address book, to-do lists, shopping lists, etc.) to provide the client-side functionalities
of the virtual assistant.
[0041]      In various examples, virtual assistant client module 364 can be capable of
accepting voice input (e.g., speech input), text input, touch input, and/or gestural input
through various user interfaces (e.g., I/O subsystem 340, audio subsystem 326, or the
like) of user device 102. Virtual assistant client module 364 can also be capable of
providing output in audio (e.g., speech output), visual, and/or tactile forms. For
example, output can be provided as voice, sound, alerts, text messages, menus,
graphics, videos, animations, vibrations, and/or combinations of two or more of the
above. During operation, virtual assistant client module 364 can communicate with
the virtual assistant server using communication subsystem324.
[0042]      In some examples, virtual assistant client module 364 can utilize the
various sensors, subsystems, and peripheral devices to gather additional information
from the surrounding environment of user device 102 to establish a context associated
with a user, the current user interaction, and/or the current user input. In some
examples, virtual assistant client module 364 can provide the contextual information
or a subset thereof with the user input to the virtual assistant server to help infer the

WO 2015/183401                                                            PCT/US2015/023593
user's intent. The virtual assistant can also use the contextual information to
determine how to prepare and deliver outputs to the user.
[0043]       In some examples, the contextual information that accompanies the user
input can include sensor information, such as lighting, ambient noise, ambient
temperature, images or videos of the surrounding environment, distance to another
object, and the like. The contextual information can further include information
associated with the physical state of user device 102 (e.g., device orientation, device
location, device temperature, power level, speed, acceleration, motion patterns,
cellular signal strength, etc.) or the software state of user device 102 (e.g., running
processes, installed programs, past and present network activities, background
services, error logs, resources usage, etc.). Any of these types of contextual
information can be provided to the virtual assistant server 114 as contextual
information associated with a user input.
[0044]       In some examples, virtual assistant client module 364 can selectively
provide information (e.g., user data 366) stored on user device 102 in response to
requests from the virtual assistant server 114. Virtual assistant client module 364 can
also elicit additional input from the user via a natural language dialogue or other user
interfaces upon request by virtual assistant server 114. Virtual assistant client module
364 can pass the additional input to virtual assistant server 114 to help virtual assistant
server 114 in intent inference and/or fulfillment of the user's intent expressed in the
user request.
[0045]       Memory 350 can further store electronic device data 370 that can include a
unique identifier, a state, a type, a location, and any other relevant information
associated with one or more of the electronic devices capable of being controlled by
user device 102 and/or server system 110 (e.g., electronic devices 128, 130, and 132).
FIG. 4 shows a visual representation of entries that can be stored in electronic device
data 370 for seven different electronic devices. As shown, each entry includes a
unique name, type, and state of the electronic device. Data and model storage 120 of
virtual assistant server 114 can include similar or identical entries for the electronic
devices that can be maintained separately from that of electronic device data 370 of
memory 350.

WO 2015/183401                                                           PCT/US2015/023593
[0046]       Referring back to FIG. 3, memory 350 can further include instructions
(e.g., in daemon module 368) for creating and updating entries for electronic devices
in electronic device data 370, communicating with the electronic devices of system
100, and for communicating with server system 110. For example, to add an
electronic device to system 100, a software application associated with the electronic
device can communicate with processor(s) 304 executing daemon module 368 to
provide user device 102 with a unique name, type, state, location, and the like, of the
electronic device. The software application can allow the user to enter the unique
name in any desired manner. For example, a dropdown box with common names
and/or a freeform text field can be provided in the application to allow a user to name
a particular device. The type, state, and/or location of the electronic device can be
predetermined or determined by the software application through communication with
the electronic device. Processor(s) 304 executing daemon module 368 can store this
information as an entry in electronic device data 370 and can also transmit this
information to server system 110 to be stored in data and models storage 120.
Additionally, when executed by processor(s) 304, daemon module 368 can receive
commands that are to be provided to electronic devices 128, 130, and 132 from server
system 110 via network(s), and can transmit those commands to the appropriate
electronic devices. Processor(s) 304 executing daemon module 368 can further
receive state updates from electronic devices 128, 130, and 132, update the
corresponding entries in electronic device data 370 to reflect the updated states of the
devices, and transmit the state updates to server system 110 to allow server system
110 to update the corresponding entries in data and models storage 120 to reflect the
updated states of the devices.
[0047]       Additionally, daemon module 368 can include instructions to manage
access to electronic device data 370 by other devices and software applications. For
example, when executed by processor(s) 304, daemon module 368 can grant access to
all of electronic device data 370 by server system 110, but can restrict access to only a
portion of electronic device data 370 by other devices or software applications. This
can be useful when user device 102 is used to control electronic devices made by
different manufacturers. In these situations, devices or software applications from
each manufacturer can communicate with daemon module 368 using an API, and
daemon module 368 can limit their access to only the portions of electronic device

WO 2015/183401                                                          PCT/US2015/023593
data 370 that correspond to their respective electronic devices. For example,
company X can manufacture a light bulb capable of being controlled by user device
102, and company Y can manufacture a thermostat capable of being controlled by
user device 102. Daemon module 368 can facilitate communication between user
device 102 and each of the light bulb and the thermostat to allow user device 102 to
issue commands to the electronic devices and to receive state information associated
with the electronic devices for updating electronic device data 370. However,
daemon module 368 can limit the access that the light bulb (and an associated
software application running on user device 102) has to information in electronic
device data 370 to only the information associated with the light bulb (and possibly
any other electronic devices manufactured by company X). Similarly, daemon
module 368 can limit the access that the thermostat (and an associated software
application running on user device 102) has to information in electronic device data
370 to only the information associated with the thermostat (and possibly any other
electronic devices manufactured by company Y). However, daemon module 368 can
grant access to all of the information in electronic device data 370 to server system
110.
[0048]      In various examples, memory 350 can include additional instructions or
fewer instructions. Furthermore, various functions of user device 102 can be
implemented in hardware and/or in firmware, including in one or more signal
processing and/or application specific integrated circuits.
LOCAL CONTROL OF ELECTRONIC DEVICES
[0049]      FIG. 5 illustrates an exemplary process 500 for controlling electronic
devices using a virtual assistant. In some examples, process 500 can be performed
using a system similar or identical to system 100, shown in FIG. 1. In these
examples, the blocks of process 500 can be performed by both user device 102 and
server system 110. Specifically, the blocks on the left side of FIG. 5 can be
performed by user device 102, while the blocks on the right side of FIG. 5 can be
performed by server system 110.
[0050]      At block 502, an audio input including user speech can be received at a
user device. In some examples, a user device (e.g., user device 102) can receive audio
input that includes a user's speech via a microphone (e.g., microphone 330). The

WO 2015/183401                                                            PCT/US2015/023593
microphone can convert the audio input into an analog or digital representation, and
provide the audio data to one or more processors (e.g., processor(s) 304).
[0051]       At block 504, data corresponding to the audio input received at block 502
can be transmitted to one or more servers for processing. For example, user device
102 can transmit data corresponding to the audio input to virtual assistant server 114
of server system 110 via network(s) 108.
[0052]       At block 506, data corresponding to the audio input transmitted by the user
device at block 504 can be received by one or more servers. For example, virtual
assistant server 114 of server system 110 can receive the data corresponding to the
audio input transmitted by user device 102 via network(s) 108.
[0053]       At block 508, speech-to-text conversion can be performed on the data
corresponding to the audio input to convert the user speech into a textual
representation of the user speech. The user speech can be converted using any known
speech-to-text conversion process.
[0054]       At block 510, one or more electronic devices can be identified based at
least in part on the textual representation generated at block 508. In some examples,
block 510 can include processing the textual representation of the user input to
determine a user intent to issue a command to one or more electronic devices. As
discussed above, server system 110 can include one or more data and model storages
120 that can store a unique identifier, a state, a type, a location, and any other relevant
information associated with the electronic devices that can be controlled using system
100. Thus, block 510 can include identifying one or more of the electronic devices
having associated information stored in data models and storages 120.
[0055]       The one or more electronic devices can be identified in any number of
ways. In some examples, the one or more electronic devices can be identified by
parsing the textual representation to identify any of a set of nouns that correspond to
the electronic devices supported by system 100. For example, the set of nouns can
include the unique names of the electronic devices stored in electronic device data
370 and data and models storage 120, the possible types of electronic devices and
their synonyms (e.g., garage door, thermostat, light, dimmable light, switch, color
changeable light, bulb, lamp, lock, outlet, socket, etc.), categories of possible device
states (e.g., volume, temperature, brightness, color, etc.), and the like.

WO 2015/183401                                                            PCT/US2015/023593
[0056]       To illustrate, using the example electronic device entries of FIG. 4, the set
of nouns can include the unique names of the seven electronic devices (e.g., "Garage
Door," "Upstairs Thermostat," "Downstairs Thermostat," "Living Room Lamp 1,"
"Living Room Lamp 2," "Front Door," and "Toaster Outlet"), the possible types of
electronic devices and their synonyms (e.g., "Garage Door," "Thermostat," "Light,"
"Bulb," "Lamp," "Lock," "Outlet," "Socket," etc.), and categories of possible device
states (e.g., temperature). Thus, if the textual representation of user speech generated
at block 508 includes "Lock the front door," the textual representation can be
processed using processing modules 118 and data and models storage 120 to search
for any of the set of nouns. As a result of the search, it can be determined that the
textual representation includes the unique name "Front Door," and the electronic
device identified at block 510 can include this device. It should be appreciated that
more than one electronic device can be identified at block 510 depending on the
textual representation of user speech. For example, if the textual representation of
user speech generated at block 508 instead includes "Turn off all the bulbs," the
textual representation can be processed using processing modules 118 and data and
models storage 120 to search for any of the set of nouns. As a result of the search, it
can be determined that the textual representation includes the synonym "bulb" of the
possible device type "light," and that the instruction from the user was to turn off all
of those types of devices. As a result, the electronic devices identified at block 510
can include both "Living Room Lamp 1" and "Living Room Lamp 2."
[0057]       In some examples, it can be difficult to identify the appropriate electronic
device using only the set of nouns described above. For example, a textual
representation that includes "Turn on the light" can produce a type match with both
"Living Room Lamp 1" and "Living Room Lamp 2." In these examples, block 510
can further include the use of contextual information received from user device 102
(e.g., received as part of the data corresponding to the audio input at block 506) to
disambiguate between potential matching electronic devices. Any type of contextual
information can be used, such as sensor information (e.g., lighting, ambient noise,
ambient temperature, images or videos of the surrounding environment, distance to
another object, and the like), information associated with the physical state of user
device 102 (e.g., device orientation, device location, device temperature, power level,
speed, acceleration, motion patterns, cellular signal strength, etc.), the software state

WO 2015/183401                                                               PCT/US2015/023593
of user device 102 (e.g., running processes, installed programs, past and present
network activities, background services, error logs, resources usage, etc.), or the like.
For example, continuing with the "Turn on the light" example provided above, the
location and orientation of user device 102 when user device 102 received the audio
input at block 502 can be provided to server system 110 at blocks 504 and 506. This
contextual information can be used to determine a location of user device 102 and/or a
direction at which user device 102 was pointed when receiving the user speech.
When compared with the known locations of "Living Room Lamp 1" and "Living
Room Lamp 2" stored in data and models storage 120, the closest light or the light at
which user device 102 was pointing can be selected as the electronic device at block
510. Other types of contextual information can be used in similar ways to
disambiguate between potential matching electronic devices at block 510 by
identifying contextual information that makes one or more of the potential matching
electronic devices more or less likely to have been referenced by the textual
representation of user speech.
[0058]      In yet other examples, words associated with a state in the textual
representation of user input can additionally or alternatively be used to disambiguate
between potential matching electronic devices or to identify the appropriate electronic
device. For example, a textual representation that includes "Turn it to 68" may not
produce any matches using the set of nouns described above. Thus, in these
examples, block 510 can further include parsing the textual representation to identify
any of a set of words associated with a state that corresponds to the electronic devices
supported by system 100. For example, the set of words associated with a state can
include the possible states of the electronic devices and their synonyms (e.g., open,
closed, close, shut, on, off, active, inactive, lock, locked, a color, etc.), the types of
values of the states (e.g., binary, float, etc.), a query for the state of the device,
adjectives associated with a specific type of state (e.g., warmer, cooler, brighter,
dimmer, a color, etc.), or the like. When used to parse "Turn it to 68," it can be
determined that the textual representation includes the float value "68." When
compared to the entries shown in FIG. 4, it can be determined that only "Upstairs
Thermostat" and "Downstairs Thermostat" accept state float values. To disambiguate
between the two thermostats, contextual information, such as a location of user device
102 can be used to select the thermostat that is closer to user device 102 as the

WO 2015/183401                                                            PCT/US2015/023593
electronic device identified at block 510. Similarly, if the textual representation
instead included "Make it brighter," the set of words associated with a state can be
used to determine that the textual representation includes the word "brighter," which
is an adjective that describes the state of devices having the type "light." To
disambiguate between the two lights, contextual information, such as a location of
user device 102 can be used to select the light that is closer to user device 102 as the
electronic device identified at block 510.
[0059]      At block 512, a command to be performed by each of the one or more
electronic devices identified at block 510 can be identified. The command(s) to be
performed can be identified in any number of ways. In some examples, the
command(s) to be performed can be identified by parsing the textual representation of
user speech to identify any of the set of words associated with a state (e.g., the
possible states of the electronic devices and their synonyms, the types of values of the
states, a query for the state of the device, adjectives associated with a specific type of
state). The identified state or operation can then be used to identify a command to be
performed by each of the one or more electronic devices identified at block 510. For
example, if the textual representation of user speech includes "Lock the front door," it
can be determined that the textual representation includes the state "lock" from the set
of states. Thus, a command to transition to the "lock" state can be generated and
identified at block 512 as being the command to be performed by the electronic
device "Front Door" that was identified at block 510. While a single command for a
single electronic device is identified in the example above, it should be appreciated
that multiple commands can be identified if multiple electronic devices were
identified at block 510. For example, the textual representation "Turn on all of the
lights" can result in the identification a command to transition to the "on" state for
each of "Living Room Lamp 1" and "Living Room Lamp 2" at block 512.
[0060]      In some examples, when the textual representation of user speech includes
one of the adjectives associated with a specific type of state (e.g., warmer, cooler,
brighter, dimmer, etc.), block 512 can include identifying a command to set a state of
the electronic device identified at block 510 to a value relative to its current value.
For example, if the textual representation includes "make it warmer," the command
identified at block 514 can be a command to increase the temperature of the
thermostat identified at block 510 by a predetermined amount. The command can be

WO 2015/183401                                                         PCT/US2015/023593
a command to change the state value by an amount relative to the electronic device's
current value rather than a command to transition the state value to a specific value
(e.g., determined using the state of the thermostat stored in data and models storage
120) since the actual state of the electronic device may differ from the state stored in
data and models storage 120.
[0061]      In some examples, when the textual representation of user speech includes
a query for the state of the device, block 512 can include identifying an instruction to
cause user device 102 to query the identified electronic device(s). For example, if the
textual representation includes "Is the garage door closed?", the command identified
at block 514 can be a command to query the state of electronic device "Garage Door."
[0062]      At block 514, an identification of each of the one or more electronic
devices identified at block 510 and the command(s) to be performed by the one or
more electronic devices identified at block 512 can be transmitted to the user device.
For example, server system 110 can transmit the unique identifier associated with
each of the electronic devices identified at block 510 and the command(s) to be
performed by the one or more electronic devices to user device 102 via network(s)
108.
[0063]      In some examples, the textual representation of the user speech generated
at block 508 can also be transmitted to the user device at block 514. In these
examples, blocks 510 and 514 can also be performed on the user device. The
transmitted textual representation can be used by the user device to identify one or
more electronic devices and/or identify a command or commands to be performed by
the one or more electronic devices in electronic device data 370. This can be
desirable, for example, when the electronic device data 370 in the user device is more
up-to-date than the data on the one or more servers. In such instances, the user device
can identify an electronic devices and/or a command that is not included in the data of
the one or more servers.
[0064]      In other examples, the textual representation can be parsed at blocks 510
and/or 512 at the one or more servers to determine key words or terms that can be
suitable for identifying one or more of electronic devices and/or identifying a
command or commands to be performed by the one or more electronic devices. In
these examples, the parsed key words or terms can also be transmitted to the user

WO 2015/183401                                                           PCT/US2015/023593
device at block 514. The transmitted key words or terms can be used by the user
device to identify one or more electronic devices and/or identify a command or
commands to be performed by the one or more electronic devices in electronic device
data 370. This can be desirable, for example, when the electronic device data 370 in
the user device is more up-to-date than the data on the one or more servers. In such
instances, the user device can identify an electronic devices and/or a command that is
not included in the data of the one or more servers.
[0065]      At block 516, the identification of each of the one or more the electronic
devices and command(s) transmitted by the one or more servers can be received by
the user device. For example, user device 102 can receive the unique identifier(s) and
the command(s) transmitted by server system 110 at block 514 via network(s) 108.
[0066]      At block 518, the user device can transmit the command(s) received at
block 516 to the electronic device(s) associated with the identifier(s) received at block
516. For example, if user device 102 received an identifier associated with electronic
device 128 (e.g., "Front Door") and a command to transition the electronic device to a
"locked" state at block 516, user device 102 can transmit the command to electronic
device 128 to transition to the "locked" state via network(s) 126. If user device 102
received additional identifiers and commands at block 516, user device 102 can
further transmit those commands to the identified electronic devices at block 518.
[0067]      In some examples, the actual state of an electronic device may not be the
same as the state of the electronic device as stored in user device 102 (e.g., in memory
350) and/or server system 110 (e.g., in data and models storage 120). For example, a
door lock could have been manually opened or closed without using the virtual
assistant of system 100. Thus, in some examples, block 518 can be performed
regardless of the state of the electronic device as stored in user device 102 and/or
server system 110. For example, a command to set a door lock's state to "locked" can
be transmitted to the door lock even if the corresponding entry in user device 102
and/or server system 110 indicates that they door is already locked. Moreover, block
518 can be performed without first querying the electronic device (e.g., between
blocks 516 and 518) to determine its actual state in order to reduce the amount of time
required to issue a command to the electronic device. For example, the command to
set the door lock's state to "locked" can be transmitted to the door lock without first
querying its state, thereby reducing the time required to transmit the command to the

WO 2015/183401                                                           PCT/US2015/023593
door lock by an amount corresponding to the time required to send a query to the door
lock and to receive the state from the door lock.
[0068]       At block 520, the user device can receive a current state of each electronic
device (that was sent a command at block 518) after each electronic device executes
their respective command. For example, user device 102 can receive an updated
status of electronic device 128 after it performed the command to set its state to
"locked." In this example, the current state returned to user device 102 can be the
state "locked." If commands were sent to more than one electronic device at block
518, block 520 can further include receiving current states from those electronic
devices. In some examples, block 520 can further include updating the state of the
electronic device in electronic device data 370 based on the received current state.
For example, user device 102 can update the state of electronic device 128 in
electronic device data 370 to "locked." In some examples, block 520 can further
include outputting an audio or visual indication of a result of the command(s)
transmitted to the electronic device(s) at block 518 based on the transmitted
command(s) and the received current state(s) of the electronic device(s). For
example, if the command transmitted to electronic device 128 was a command to
transition the device's state to "locked" and the current state of electronic device 128
received at block 520 was "locked," an indication of the result can be that electronic
device 128 was successfully transitioned to the "locked" state. Alternatively, if the
received current state of the electronic device (e.g., "unlocked") differs from the
desired state indicated in the command (e.g., "locked"), an indication of a failure to
transition to the "locked" state can be presented to the user. The current state can
further include an error state, such as an undetermined or unavailable state of the
device.
[0069]       At block 522, the user device can transmit the current state(s) of the
electronic device(s) received at block 520 to the one or more servers. For example,
user device 102 can transmit the current state of the electronic device received at
block 520 to server system 110. If the current state of more than one electronic
device was received at block 520, block 522 can further include transmitting those
current states to server system 110.
[0070]       At block 524, the one or more servers can receive the current state(s) of
the electronic device(s) transmitted by the user device at block 522. For example,

WO 2015/183401                                                          PCT/US2015/023593
server system 110 can receive the current state of the electronic device transmitted by
user device 102 at block 522. If user device 102 transmitted more than one current
state, block 524 can further include receiving those current states as well. In some
examples, block 524 can further include updating the state(s) of the electronic
device(s) in data and models storage 120 based on the received current state(s). For
example, server system 110 can update the state of electronic device 128 in data and
models storage 120 to "locked."
[0071]       In some examples, process 500 can further include generating a
notification associated with the current state of one or more of the electronic devices
in response to determining that a predetermined condition has been satisfied. For
example, in response to the location of user device 102 exiting a predetermined area
(e.g., an area corresponding to the user's home) while one or more of the electronic
devices are in a predetermined state (e.g., the "Front Door" is unlocked), a
notification can be presented to the user via user device 102 indicating that the user
forgot to lock their door. Other similar notifications can be generated in response to
other predetermined conditions.
[0072]       Using process 500, a virtual assistant implemented by a user device can
receive natural language commands to set the state or query any number of electronic
devices. The natural language commands can refer to the electronic devices in any
desired manner and need not include unique identifiers of the electronic devices or a
type of the electronic device.
REMOTE CONTROL OF ELECTRONIC DEVICES
[0073]       FIG. 6 illustrates an exemplary process 600 for remotely controlling
electronic devices using a virtual assistant. In some examples, process 600 can be
similar to process 500, except that process 600 can be performed using a system
similar or identical to system 200, shown in FIG. 2. For example, process 600 can be
performed by a user device (e.g., user device 102) that is located remotely from the
electronic devices being controlled (e.g., electronic devices 128, 130, and 132), and a
second user device (e.g., second user device 134) can instead be used to control the
electronic devices. Thus, portions of process 600 can be performed by each of user
device 102, server system 110, and second user device 134. Specifically, the blocks
on the left side of FIG. 6 can be performed by user device 102, the blocks in the

WO 2015/183401                                                           PCT/US2015/023593
middle of FIG. 6 can be performed by server system 110, and the blocks on the right
side of FIG. 6 can be performed by second user device 134.
[0074]       The blocks of process 600 can be similar or identical to the identically
numbered blocks of process 500, except that blocks 516, 518, 520, and 522 of process
600 can instead be performed by a second user device (e.g., second user device 134).
Additionally, as a result, the identification of each of the one or more electronic
devices and command(s) to be performed by the electronic device(s) can instead be
transmitted to the second user device at block 514, and the current state(s) of the
electronic device(s) can instead be received from the second user device at block 524.
[0075]       In some examples, process 600 can further include transmitting, by the one
or more servers, the current state(s) of the electronic device(s) received at block 524
to the user device that received the audio input at block 502. Additionally or
alternatively, the process can include transmitting an indication of success of the
command transmitted to the electronic device at block 518. For example, a visual or
audio output can be generated that notifies the user of the success, partial success, or
failure to execute the command by the electronic device. The success determination
can depend on the command transmitted to the electronic device and the current state
of the device received at block 524.
STANDALONE CONTROL OF ELECTRONIC DEVICES
[0076]       FIG. 7 illustrates an exemplary process 700 for controlling electronic
devices using a virtual assistant. In some examples, process 700 can be similar to
process 500, except that process 700 can be performed using a standalone user device
that can perform the functions of both user device 102 and server system 110. As a
result, all blocks of process 700 can be performed by the user device (e.g., user device
102).
[0077]       The blocks of process 700 can be similar or identical to the identically
numbered blocks of process 500, except that blocks 508, 510, and 512 can instead be
performed by the user device (e.g., user device 102). Additionally, as a result, the
blocks corresponding to functions for communicating between user device 102 and
server system 110 (e.g., blocks 504, 506, 514, 516, 522, and 524) need not be
performed.

WO 2015/183401                                                              PCT/US2015/023593
STORING A CONFIGURATION OF ELECTRONIC DEVICES
[0078]       FIG. 8 illustrates an exemplary process 800 for storing the states of
multiple electronic devices as a configuration using a virtual assistant. The
configuration can represent a stored set of states of the multiple electronic devices that
can be referenced in a spoken user input to cause the multiple electronic devices to
transition to the states defined in the configuration. For example, a user may create a
"sleep" configuration in which the states of all lights are set to off, the states of the
thermostats are set to 72 0 F, the state of all doors are set to locked, and the state of the
garage door is set to closed. Thus, when the user is about to go to sleep, the user can
provide user device 102 with a command that references the stored configuration,
such as "I'm going to sleep," and system 100 can set the states of the electronic
devices based on the stored states in the sleep configuration. In some examples,
process 800 can be performed using a system similar or identical to system 100,
shown in FIG. 1. In these examples, the blocks of process 800 can be performed by
both user device 102 and server system 110. Specifically, the blocks on the left side
of FIG. 8 can be performed by user device 102, while the blocks on the right can be
performed by server system 110.
[0079]       At block 802, an audio input including user speech can be received at a
user device in a manner similar or identical to block 502 of process 500. At block
804, data corresponding to the audio input received at block 802 can be transmitted to
one or more servers for processing in a manner similar or identical to block 504 of
process 500.
[0080]       At block 806, the data corresponding to the audio input transmitted by the
user device at block 804 can be received by one or more servers in a manner similar
or identical to block 506 of process 500. At block 808, speech to text conversion can
be performed on the data corresponding to the audio input to convert the user speech
into a textual representation of the user speech in a manner similar or identical to
block 508 of process 500.
[0081]       At block 810, it can be determined that the textual representation of the
user speech represents a user intent to store the states of the electronic devices of
system 100 as a configuration. For example, one or more processing modules 118 of
server system 110 can utilize data and model storage 120 to determine the user's

WO 2015/183401                                                            PCT/US2015/023593
intent based on natural language input. In some examples, this can include parsing the
textual representation for words likely to be related to storing a configuration, such as
"save," "store," "name," "keep," "configuration," "scene," their synonyms, and the
like. For example, if the textual representation includes "Store this configuration as
sleep," it can be determined at block 810 that the user intends to store the state of the
electronic devices as a configuration named "sleep." Other textual representations,
such as "Save this scene as work," can similarly result in a determination at block 810
that the user intends to store the state of the electronic devices as a configuration
named "work."
[0082]       At block 812, in response to determining that the textual representation of
the user speech represents a user intent to store the state of the electronic devices of
system 100 as a configuration, the one or more servers can transmit an instruction to
the user device to query the state of the electronic devices. For example, server
system 110 can transmit an instruction to user device 102 to query the state of
electronic devices 128, 130, and 132 via network(s) 108.
[0083]       At block 814, the instruction to query the state of the electronic devices
transmitted by the one or more servers can be received by the user device. For
example, user device 102 can receive the instruction to query the state of electronic
devices 128, 130, and 132 from server system 110 via network(s) 108.
[0084]       At block 816, the user device can transmit a query to each of the electronic
devices for their current state. For example, user device 102 can transmit a command
to each of electronic devices 128, 130, and 132 instructing them to return their current
state via network(s) 126.
[0085]       At block 818, the user device can receive a current state of each of the
electronic device(s) in response to the query transmitted at block 516 (or a current
state of all electronic devices capable of transmitting their current state). For
example, user device 102 can receive a current state of electronic devices 128, 130,
and 132 via network(s) 126 in response to the query sent to each of the devices at
block 816. In some examples, block 818 can further include updating the state of the
electronic device in electronic device data 370 based on the received current state.
The current state can further include an error state, such as an undetermined or
unavailable state of the device.

WO 2015/183401                                                          PCT/US2015/023593
[0086]       At block 820, the user device can transmit the current states of the
electronic devices received at block 818 to the one or more servers. For example,
user device 102 can transmit the current states of the electronic devices received at
block 818 to server system 110.
[0087]       At block 822, the one or more servers can receive the current states of the
electronic devices transmitted by the user device at block 820. For example, server
system 110 can receive the current state of electronic devices 128, 130, and 132 from
user device 102 via network(s) 126.
[0088]       At block 824, the one or more servers can store the current states of the
electronic devices received at block 822 as a configuration. In some examples, the
configuration can be assigned a unique identifier, such as "sleep," "morning," "work,"
or the like, based on the name provided in the textual representation and identified at
block 810. For example, server system 110 can store the current states of electronic
devices 128, 130, and 132 as a "sleep" configuration in model and data storage 120 in
response to a user speech received at block 802 that included "name this configuration
sleep."
CONTROLLING ELECTRONIC DEVICES USING A STORED
CONFIGURATION
[0089]       FIG. 9 illustrates an exemplary process 900 for setting the states of
multiple electronic devices using a previously stored configuration (e.g., created using
process 800) using a virtual assistant. In some examples, process 900 can be
performed using a system similar or identical to system 100, shown in FIG. 1. In
these examples, the blocks of process 900 can be performed by both user device 102
and server system 110. Specifically, the blocks on the left side of FIG. 9 can be
performed by user device 102, while the blocks on the right can be performed by
server system 110.
[0090]       At block 902, an audio input including user speech can be received at a
user device in a manner similar or identical to block 502 of process 500. At block
904, data corresponding to the audio input received at block 902 can be transmitted to
one or more servers for processing in a manner similar or identical to block 504 of
process 500.

WO 2015/183401                                                            PCT/US2015/023593
[0091]      At block 906, data corresponding to the audio input transmitted by the user
device at block 904 can be received by one or more servers in a manner similar or
identical to block 506 of process 500. At block 908, speech to text conversion can be
performed on the user speech of the audio input to convert the user speech into a
textual representation of the user speech in a manner similar or identical to block 508
of process 500.
[0092]      At block 910, it can be determined that the textual representation of the
user speech represents a user intent to set the states of the electronic devices of system
100 based on a stored configuration. For example, one or more processing modules
118 of server system 110 can utilize data and model storage 120 to determine the
user's intent based on natural language input. In some examples, this can include
parsing the textual representation for words likely to be related to using a stored
configuration, such as the unique identifiers associated with the stored configurations,
"set," "configuration," "scene," their synonyms, or the like. For example, if the
textual representation includes "I'm going to sleep," it can be determined at block 910
that the user intends to set the state of the electronic devices based on the "sleep"
configuration. Other textual representations, such as "night mode," "set to sleep," or
the like, can similarly result in a determination at block 910 that the user intends set
the state of the electronic devices based on the "sleep" configuration.
[0093]      At block 912, commands to set the states of the electronic devices of
system 100 based on the configuration identified at block 910 can be transmitted by
the one or more servers to the user device. Identifications associated with the
commands can also be transmitted to identify which devices are to perform each
command. For example, server system 110 can transmit the unique identifiers
associated with the electronic devices and the commands that are to be performed by
those electronic devices to cause the electronic devices to be in the states specified by
the stored configuration.
[0094]      At block 914, commands to set the states of the electronic devices of
system 100 transmitted by the server(s) can be received by the user device. For
example, user device 102 can receive the commands transmitted by server system 110
at block 912 via network(s) 108.

WO 2015/183401                                                           PCT/US2015/023593
[0095]       At block 916, the user device can transmit the commands received at block
914 to the electronic devices associated with the commands. For example, user
device 102 can transmit commands to electronic devices 128, 130, and 132 via
network(s) 126 to cause the electronic devices to be in the states specified by the
stored configuration.
[0096]       In some examples, the actual state of an electronic device may not be the
same as the state of the electronic device as stored in user device 102 (e.g., in memory
350) and/or server system 110 (e.g., in data and models storage 120). Thus, in some
examples and similar to process 500, block 916 can be performed regardless of the
state of the electronic device as stored in user device 102 and/or server system 110,
and without first querying the electronic devices (e.g., between blocks 914 and 916) to
determine their actual states in order to reduce the amount of time required to issue a
command to the electronic devices.
[0097]       At block 918, the user device can receive an updated state of the electronic
devices after the electronic devices perform the commands transmitted by the user
device at block 916. For example, user device 102 can receive updated statuses of
electronic devices 128, 130, and 132 after they performed the commands to set their
states to the states specified by the stored configuration. In some examples, block 920
can further include updating the state of the electronic device in electronic device data
370 based on the received current state. For example, user device 102 can update the
state of electronic device 128 in electronic device data 370 to "locked." In some
examples, similar to block 520, block 918 can further include outputting an audio or
visual indication of a result of the command(s) transmitted to the electronic device(s)
at block 916 based on the transmitted command(s) and the received current state(s) of
the electronic device(s). The updated state can further include an error state, such as
an undetermined or unavailable state of the device.
[0098]       At block 920, the user device can transmit the updated states of the
electronic device received at block 918 to the one or more servers. For example, user
device 102 can transmit the updated states of the electronic devices received at block
918 to server system 110.
[0099]       At block 922, the one or more servers can receive the updated states of the
electronic devices transmitted by the user device at block 920. For example, server

WO 2015/183401                                                           PCT/US2015/023593
system 110 can receive the updated states of the electronic devices transmitted by user
device 102 at block 920. In some examples, block 922 can further include updating
the states of the electronic devices in data and models storage 120 based on the
received updated states.
[0100]       In some examples, additionally or alternatively, the states of the electronic
devices can be configured using a stored configuration in response to determining that
a predetermined condition has been satisfied. For example, in response to the location
of user device 102 entering a predetermined area (e.g., an area corresponding to the
user's home), commands can be sent to the electronic devices to transition to states
specified by a stored configuration (e.g., a "home" configuration).    Similarly,
commands can be sent to the electronic devices to transition to states specified by
another stored configuration (e.g., a "work" configuration) in response to the location
of user device 102 exiting a predetermined area (e.g., an area corresponding to the
user's home) during a predetermined window of time (e.g., between 8-9 a.m. on a
weekday). Other similar predetermined conditions can be created to cause system
100 to configure the electronic devices based on stored configurations.
ELECTRONIC DEVICE
[0101] In accordance with some examples, FIG. 10 shows a functional block diagram
of an electronic device 1000 configured in accordance with the principles of the
various described examples. The functional blocks of the device can be implemented
by hardware, software, or a combination of hardware and software to carry out the
principles of the various described examples. It is understood by persons of skill in
the art that the functional blocks described in FIG. 10 can be combined or separated
into sub-blocks to implement the principles of the various described examples.
Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[0102] As shown in FIG. 10, electronic device 1000 can include a touch screen
display unit 1002 configured to display a user interface and to receive touch input,
and a sound receiving unit 1004 configured to receive sound input. In some
examples, electronic device 1000 can include a speaker unit 1006 configured to
generate sound. Electronic device 1000 can further include a processing unit 1008
coupled to touch screen display unit 1002 and sound receiving unit 1004 (and,

WO 2015/183401                                                            PCT/US2015/023593
optionally, coupled to speaker unit 1006). In some examples, processing unit 1008
can include an audio input receiving unit 1010, an audio input transmitting unit 1012,
an identification and command receiving unit 1014, an identification and command
transmitting unit 1016, a state receiving unit 1018, a state transmitting unit 1020, a
state updating unit 1022, an indication outputting unit 1024, a second identification
and command receiving unit 1026, a second identification and command transmitting
unit 1028, and a second state receiving unit 1030, a second state transmitting unit
1032, and a notification transmitting unit 1034.
[0103] Processing unit 1008 can be configured to receive an audio input (e.g., using
audio input receiving unit 1010) containing user speech. Processing unit 1008 can be
further configured to transmit (e.g., using audio input transmitting unit 1012) data
corresponding to the audio input to one or more servers. Processing unit 1008 can be
further configured to receive (e.g., using identification and command receiving unit
1014), from the one or more servers, an identification of a first electronic device
determined by the one or more servers based on the data corresponding to the audio
input and a first command to be performed by the first electronic device determined
by the one or more servers based on the data corresponding to the audio input. The
first command can be transmitted to the first electronic device (e.g., using
identification and command transmitting unit 1016). A current state of the first
electronic device can be received (e.g., using state receiving unit 1018) from the first
electronic device after transmitting the first command to the first electronic device.
The current state of the first electronic device can be transmitted (e.g., using state
transmitting unit 1020) to the one or more servers.
[0104] In some examples, first electronic device includes a light bulb. In other
examples, the first command includes a command to set an ON/OFF state, dimmable
state, or color state of the light. In yet other examples, the current state of the first
electronic device includes the ON/OFF state, dimmable state, or color state of the
light bulb after transmitting the first command to set the ON/OFF state, dimmable
state, or color state of the light bulb.
[0105] In some examples, first electronic device includes a switch. In other
examples, the first command includes a command to set an ON/OFF state of the
switch. In yet other examples, the current state of the first electronic device includes

WO 2015/183401                                                           PCT/US2015/023593
the ON/OFF state of the switch after transmitting the first command to set the
ON/OFF state of the switch.
[0106] In some examples, the first electronic device includes an electrical outlet. In
other examples, the first command includes a command to set an
ACTIVE/INACTIVE state of the electrical outlet. In yet other examples, the current
state of the first electronic device includes the ACTIVE/INACTIVE state of the
electrical outlet after transmitting the command to set the ACTIVE/INACTIVE state
of the electrical outlet.
[0107] In some examples, the first electronic device includes a door lock. In other
examples, the first command includes a command to set a LOCKED/UNLOCKED
state of the door lock. In yet other examples, the current state of the first electronic
device includes the LOCKED/UNLOCKED state of the door lock after transmitting
the command to set the LOCKED/UNLOCKED state of the door lock.
[0108] In some examples, the first electronic device includes a garage door. In other
examples, the first command includes a command to set an OPEN/CLOSED state of
the garage door. In yet other examples, the current state of the first electronic device
includes the OPEN/CLOSED state of the garage door after transmitting the command
to set the OPEN/CLOSED state of the garage door.
[0109] In some examples, the first electronic device includes a thermostat. In other
examples, the first command includes a command to set a numerical value of a
temperature setting of the thermostat. In yet other examples, the current state of the
first electronic device includes the numerical value of the temperature setting of the
thermostat after transmitting the first command to set the numerical value of the
temperature setting of the thermostat.
[0110] In some examples, the first command includes a query for the current state of
the first electronic device.
[0111] In some examples, the first command can be transmitted (e.g., using
identification and command transmitting unit 1016) to first electronic device over a
local wireless network.
[0112] In some examples, the first command can be transmitted to the first electronic
device directly through Bluetooth, line of sight, peer-to-peer, or WiFi communication.

WO 2015/183401                                                             PCT/US2015/023593
[0113] In some examples, processing unit 1008 can be configured to exclude
querying the first electronic device for the state of the first electronic device between
receiving the first command from the one or more servers and transmitting the first
command to the first electronic device.
[0114] In some examples, electronic device 1000 can further include a database unit
1034 for storing a state of each of a plurality of electronic devices, the plurality of
electronic devices including the first electronic device. In other examples, processing
unit 1008 can be further configured to update (e.g., using state updating unit 1022) a
state of the first electronic device stored in database unit 1034 based at least in part on
the current state of the first electronic device received from the first electronic device.
[0115] In some examples, processing unit 1008 can be further configured to output
(e.g., using indication outputting unit 1024) an indication of a result of the first
command based on the first command and the current state of the first electronic
device received from the first electronic device.
[0116] In some examples, electronic device 1000 can include a mobile phone,
desktop computer, laptop computer, tablet computer, portable media player,
television, television set-top box, or wearable electronic device.
[0117] In some examples, processing unit 1008 can be further configured to receive
(e.g., using second identification and command receiving unit 1026), from the one or
more servers, an identification of a second electronic device determined by the one or
more servers based on the data corresponding to the audio input and a second
command to be performed by the second electronic device determined by the one or
more servers based on the data corresponding to the audio input. Processing unit
1008 can be further configured to transmit (e.g., using second identification and
command transmitting unit 1028) the second command to the second electronic
device and to receive (e.g., using second state receiving unit 1030), after transmitting
the second command to the second electronic device, a current state of the second
electronic device from the second electronic device. Processing unit 1008 can be
further configured to transmit (e.g., using second state transmitting unit 1032) the
current state of the second electronic device to the one or more servers.
[0118] In some examples, processing unit 1008 can be further configured to transmit
(e.g., using notification transmitting unit 1036) a notification associated with the

WO 2015/183401                                                           PCT/US2015/023593
current state of the first electronic device in response to determining that a
predetermined condition has been satisfied.
[0119] In accordance with some examples, FIG. 11 shows a functional block diagram
of an electronic device 1100 configured in accordance with the principles of the
various described examples. The functional blocks of the device can be implemented
by hardware, software, or a combination of hardware and software to carry out the
principles of the various described examples. It is understood by persons of skill in
the art that the functional blocks described in FIG. 11 can be combined or separated
into sub-blocks to implement the principles of the various described examples.
Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[0120] As shown in FIG. 11, electronic device 1100 can include a touch screen
display unit 1102 configured to display a user interface and to receive touch input,
and a sound receiving unit 1104 configured to receive sound input. In some
examples, electronic device 1100 can include a speaker unit 1106 configured to
generate sound. Electronic device 1100 can further include a processing unit 1108
coupled to touch screen display unit 1102 and sound receiving unit 1104 (and,
optionally, coupled to speaker unit 1106). In some examples, processing unit 1108
can include an audio input receiving unit 1110, an audio input transmitting unit 1112,
an instruction receiving unit 1114, a query transmitting unit 1116, a state receiving
unit 1118, and a state transmitting unit 1120.
[0121] Processing unit 1108 can be configured to receive an audio input (e.g., using
audio input receiving unit 1110) containing user speech. Processing unit 1108 can be
further configured to transmit (e.g., using audio input transmitting unit 1112) data
corresponding to the audio input to one or more servers. Processing unit 1108 can be
further configured to receive (e.g., using instruction receiving unit 1114), from the
one or more servers, an instruction to query a state of each of a plurality of electronic
devices determined by the one or more servers based on the data corresponding to the
audio input. A state query can be transmitted (e.g., using query transmitting unit
1116) to each of the plurality of electronic devices, and a current state of each of the
plurality of electronic devices can be received (e.g., using state receiving unit 1118)
from the plurality of electronic devices. The current state of each of the plurality of

WO 2015/183401                                                          PCT/US2015/023593
electronic devices can be transmitted (e.g., using state transmitting unit 1120) to the
one or more servers to be stored as a configuration.
[0122] In accordance with some examples, FIG. 12 shows a functional block diagram
of an electronic device 1200 configured in accordance with the principles of the
various described examples. The functional blocks of the device can be implemented
by hardware, software, or a combination of hardware and software to carry out the
principles of the various described examples. It is understood by persons of skill in
the art that the functional blocks described in FIG. 12 can be combined or separated
into sub-blocks to implement the principles of the various described examples.
Therefore, the description herein optionally supports any possible combination or
separation or further definition of the functional blocks described herein.
[0123] As shown in FIG. 12, electronic device 1200 can include a touch screen
display unit 1202 configured to display a user interface and to receive touch input,
and a sound receiving unit 1204 configured to receive sound input. In some
examples, electronic device 1200 can include a speaker unit 1206 configured to
generate sound. Electronic device 1200 can further include a processing unit 1208
coupled to touch screen display unit 1202 and sound receiving unit 1204 (and,
optionally, coupled to speaker unit 1206). In some examples, processing unit 1208
can include an audio input receiving unit 1210, an audio input transmitting unit 1212,
an instruction receiving unit 1214, a query transmitting unit 1216, a state receiving
unit 1218, and a state transmitting unit 1220.
[0124] In some examples, processing unit 1208 can be further configured to receive
(e.g., using audio input receiving unit 1210) an audio input including a user speech,
transmit (e.g., using audio input transmitting unit 1212) data corresponding to the
audio input to the one or more servers, and receive (e.g., using command receiving
unit 1214), from the one or more servers, a plurality of commands to set the state of
each of the plurality of electronic devices determined by the one or more servers
based on a stored configuration. Processing unit 1208 can be further configured to
transmit (e.g., using command transmitting unit 1216) the plurality of commands to
the plurality of electronic devices. Processing unit 1208 can be further configured to
receive (e.g., using state receiving unit 1218) an updated state of each of the plurality
of electronic devices from the plurality of electronic devices and to transmit (e.g.,

WO 2015/183401                                                            PCT/US2015/023593
using state transmitting unit 1220) the updated state of each of the plurality of
electronic devices to the one or more servers.
[0125] As shown in FIG. 13, electronic device 1300 can include a touch screen
display unit 1302 configured to display a user interface and to receive touch input,
and a sound receiving unit 1304 configured to receive sound input. In some
examples, electronic device 1300 can include a speaker unit 1306 configured to
generate sound. Electronic device 1300 can further include a processing unit 1308
coupled to touch screen display unit 1302 and sound receiving unit 1304 (and,
optionally, coupled to speaker unit 1306). In some examples, processing unit 1308
can include an audio input receiving unit 1310, speech-to-text converting unit 1312,
an electronic device identifying unit 1314, a command identifying unit 1316, an
identification and command transmitting unit 1318, a state receiving unit 1320, a state
updating unit 1322, a contextual information receiving unit 1324, an indication
transmitting unit 1326, a second electronic device identifying unit 1328, a second
command identifying unit 1330, a second identification and command transmitting
unit 1332, and a second state receiving unit 1336.
[0126] Processing unit 1308 can be configured to receive data corresponding to an
audio input (e.g., using audio input receiving unit 1310) containing user speech.
Processing unit 1308 can be further configured perform (e.g., using speech to text
converting unit 1312) speech-to-text conversion on the data corresponding to the
audio input to generate a textual representation of the user speech. Processing unit
1308 can be further configured to identify (e.g., using electronic device identifying
unit 1314) a first electronic device based on the textual representation of the user
speech. Processing unit 1308 can be further configured to identify (e.g., using
command identifying unit 1316) a first command to be performed by the first
electronic device based on the textual representation of user speech. Processing unit
1308 can be further configured to transmit (e.g., using identification and command
transmitting unit 1318) an identification of the first electronic device and the first
command to the user device. Processing unit 1308 can be further configured to
receive (e.g., using state receiving unit 1320) a current state of the first electronic
device.
[0127] In some examples, first electronic device includes a light bulb. In other
examples, the first command includes a command to set an ON/OFF state, dimmable

WO 2015/183401                                                            PCT/US2015/023593
state, or color state of the light. In yet other examples, the current state of the first
electronic device includes the ON/OFF state, dimmable state, or color state of the
light bulb after transmitting the first command to set the ON/OFF state, dimmable
state, or color state of the light bulb.
[0128] In some examples, the first electronic device includes an electrical outlet. In
other examples, the first command includes a command to set an
ACTIVE/INACTIVE state of the electrical outlet. In yet other examples, the current
state of the first electronic device includes the ACTIVE/INACTIVE state of the
electrical outlet after transmitting the command to set the ACTIVE/INACTIVE state
of the electrical outlet.
[0129] In some examples, the first electronic device includes a switch. In other
examples, the first command includes a command to set an ON/OFF state of the
switch. In yet other examples, the current state of the first electronic device includes
the ON/OFF state of the electrical outlet after transmitting the command to set the
ON/OFF state of the switch.
[0130] In some examples, the first electronic device includes a door lock. In other
examples, the first command includes a command to set a LOCKED/UNLOCKED
state of the door lock. In yet other examples, the current state of the first electronic
device includes the LOCKED/UNLOCKED state of the door lock after transmitting
the command to set the LOCKED/UNLOCKED state of the door lock.
[0131] In some examples, the first electronic device includes a garage door. In other
examples, the first command includes a command to set an OPEN/CLOSED state of
the garage door. In yet other examples, the current state of the first electronic device
includes the OPEN/CLOSED state of the garage door after transmitting the command
to set the OPEN/CLOSED state of the garage door.
[0132] In some examples, the first electronic device includes a thermostat. In other
examples, the first command includes a command to set a numerical value of a
temperature setting of the thermostat. In yet other examples, the current state of the
first electronic device includes the numerical value of the temperature setting of the
thermostat after transmitting the first command to set the numerical value of the
temperature setting of the thermostat.

WO 2015/183401                                                             PCT/US2015/023593
[0133] In some examples, the first command includes a query for the current state of
the first electronic device.
[0134] In some examples, electronic device 1300 further includes a database unit
1334 for storing a name, a type, and a state of each of a plurality of electronic devices,
the plurality of electronic devices comprising the first electronic device. In other
examples, processing unit 1308 can be further configured to update (e.g., using state
updating unit 1322) the state of the first electronic device stored in database unit 1334
based on the current state of the first electronic device.
[0135] In some examples, processing unit 1308 can be further configured to receive
(e.g., using contextual information receiving unit 1324) contextual information within
the data corresponding to the audio input from the user device. In other examples,
processing unit 1308 can be further configured to identify (e.g., using electronic
device identifying unit 1314) the first electronic device based on the contextual
information. In yet other examples, processing unit 1308 can be further configured to
identify (e.g., using command identifying unit 1316) the first command based on the
contextual information. In some examples, the contextual information includes an
orientation of the user device when the user device received the audio input or a
location of the user device when the user device received the audio input.
[0136] In some examples, the textual representation of the user speech excludes the
name of the first electronic device. In other examples, the textual representation of
the user speech excludes the type of the first electronic device.
[0137] In some examples, electronic device 1300 includes a mobile phone, desktop
computer, laptop computer, tablet computer, portable media player, television,
television set-top box, or wearable electronic device.
[0138] In some examples, processing unit 1308 can be further configured to transmit
(e.g., using identification and command transmitting unit 1318) the identification of
the first electronic device and the first command to the user device, and to receive
(e.g., using state receiving unit 1320) the current state of the first electronic device
from the user device.
[0139] In other examples, processing unit 1308 can be further configured to transmit
(e.g., using identification and command transmitting unit 1318) the identification of
the first electronic device and the first command to a second user device, and to

WO 2015/183401                                                            PCT/US2015/023593
receive (e.g., using state receiving unit 1320) the current state of the first electronic
device from the second user device.
[0140] In other examples, processing unit 1308 can be further configured to transmit
(e.g., using indication transmitting unit 1326) an indication to the second user device
of a result of the first command based on the first command and the current state of
the first electronic device.
[0141] In other examples, processing unit 1308 can be further configured to identify
(e.g., using second electronic device identifying unit 1328) a second electronic device
based on the textual representation of the user speech, identify (e.g., using second
command identifying unit 1330) a second command to be performed by the second
electronic device based on the textual representation of the user speech, transmit (e.g.,
using second identification and command transmitting unit 1332) an identification of
the second electronic device and the second command, and receive (e.g., using second
state receiving unit 1336) a current state of the second electronic device.
[0142] As shown in FIG. 14, electronic device 1400 can include a touch screen
display unit 1402 configured to display a user interface and to receive touch input,
and a sound receiving unit 1404 configured to receive sound input. In some
examples, electronic device 1400 can include a speaker unit 1406 configured to
generate sound. Electronic device 1400 can further include a processing unit 1408
coupled to touch screen display unit 1402 and sound receiving unit 1404 (and,
optionally, coupled to speaker unit 1406). In some examples, processing unit 1408
can include an audio input receiving unit 1410, speech-to-text converting unit 1412, a
determining unit 1414, an instruction transmitting unit 1416, a state receiving unit
1416, a configuration storing unit 1420, a second audio input receiving unit 1422, a
second speech to text converting unit 1424, a second determining unit 1426, a
command transmitting unit 1428, and a second state receiving unit 1430.
[0143] Processing unit 1408 can be configured to receive (e.g., using audio input
receiving unit 1410) data corresponding to an audio input comprising a user speech
from a user device. Processing unit 1408 can be further configured perform (e.g.,
using speech to text converting unit 1412) speech-to-text conversion on the data
corresponding to the audio input to generate a textual representation of the user
speech. Processing unit 1408 can be further configured to determine (e.g., using

WO 2015/183401                                                            PCT/US2015/023593
determining unit 1414) that the textual representation of the user speech represents a
user intent to store a state of each of a plurality of electronic devices as a
configuration. Processing unit 1408 can be further configured to transmit (e.g., using
instruction transmitting unit 1416) an instruction to query the state of each of the
plurality of electronic devices. Processing unit 1408 can be further configured to
receive (e.g., using state receiving unit 1418) a current state of each of the plurality of
electronic devices. Processing unit 1408 can be further configured to store (e.g.,
using configuration storing unit 1420) the received current state of each of the
plurality of electronic devices as the configuration.
[0144] As shown in FIG. 15, electronic device 1500 can include a touch screen
display unit 1502 configured to display a user interface and to receive touch input,
and a sound receiving unit 1504 configured to receive sound input. In some
examples, electronic device 1500 can include a speaker unit 1506 configured to
generate sound. Electronic device 1500 can further include a processing unit 1508
coupled to touch screen display unit 1502 and sound receiving unit 1504 (and,
optionally, coupled to speaker unit 1506). In some examples, processing unit 1408
can include an audio input receiving unit 1510, speech-to-text converting unit 1512, a
determining unit 1514, an instruction transmitting unit 1516, a state receiving unit
1516, a configuration storing unit 1520, a second audio input receiving unit 1522, a
second speech to text converting unit 1524, a second determining unit 1526, a
command transmitting unit 1528, and a second state receiving unit 1530.
[0145] In some examples, processing unit 1508 can be further configured to receive
(e.g., using audio input receiving unit 1510) data corresponding to an audio input
comprising a user speech, perform (e.g., using speech to text converting unit 1512)
speech-to-text conversion on the data corresponding to the audio input to generate a
textual representation of the user speech, determine (e.g., using determining unit
1514) that the textual representation of the user speech represents a user intent to
change the state of each of the plurality of electronic devices based on the
configuration, transmit (e.g., using command transmitting unit 1516) a plurality of
commands to set the state of each of the plurality of electronic devices based on the
configuration, and receive (e.g., using state receiving unit 1518) an updated state of
each of the plurality of electronic devices.

WO 2015/183401                                                            PCT/US2015/023593
[0146] As described above, one aspect of the present technology is the gathering and
use of data available from various sources to improve the delivery to users of
invitational content or any other content that may be of interest to them. The
present disclosure contemplates that in some instances, this gathered data can include
personal information data that uniquely identifies or can be used to contact or locate a
specific person. Such personal information data can include demographic data,
location-based data, telephone numbers, email addresses, home addresses, or any
other identifying information.
[0147] The present disclosure recognizes that the use of such personal information
data, in the present technology, can be used to the benefit of users. For example, the
personal information data can be used to deliver targeted content that is of
greater interest to the user. Accordingly, use of such personal information data
enables calculated control of the delivered content. Further, other uses for personal
information data that benefit the user are also contemplated by the present disclosure.
[0148] The present disclosure further contemplates that the entities responsible for
the collection, analysis, disclosure, transfer, storage, or other use of such
personal information data will comply with well-established privacy policies
and/or privacy practices. In particular, such entities should implement and
consistently use privacy policies and practices that are generally recognized as
meeting or exceeding industry or governmental requirements for maintaining personal
information data private and secure. For example, personal information from users
should be collected for legitimate and reasonable uses of the entity and not shared
or sold outside of those legitimate uses. Further, such collection should occur only
after receiving the informed consent of the users. Additionally, such entities would
take any needed steps for safeguarding and securing access to such personal
information data and ensuring that others with access to the personal information data
adhere to their privacy policies and procedures. Further, such entities can subject
themselves to evaluation by third parties to certify their adherence to
widely accepted privacy policies and practices.
[0149] Despite the foregoing, the present disclosure also contemplates examples in
which users selectively block the use of, or access to, personal information data. That
is, the present disclosure contemplates that hardware and/or software elements can be
provided to prevent or block access to such personal information data. For example,

WO 2015/183401                                                           PCT/US2015/023593
in the case of advertisement delivery services, the present technology can be
configured to allow users to select to "opt in" or "opt out" of participation in
the collection of personal information data during registration for services. In another
example, users can select not to provide location information for targeted content
delivery services. In yet another example, users can select to not provide
precise location information, but permit the transfer of location zone information.
[0150] Therefore, although the present disclosure broadly covers use of personal
information data to implement one or more various disclosed examples, the present
disclosure also contemplates that the various examples can also be
implemented without the need for accessing such personal information data. That is,
the various examples of the present technology are not rendered inoperable due to the
lack of all or a portion of such personal information data. For example, content can
be selected and delivered to users by inferring preferences based on non-personal
information data or a bare minimum amount of personal information, such as the
content being requested by the device associated with a user, other non-personal
information available to the content delivery services, or publicly available
information.
[0151] Although examples have been fully described with reference to the
accompanying drawings, it is to be noted that various changes and modifications will
become apparent to those skilled in the art. Such changes and modifications are to be
understood as being included within the scope of the various examples as defined by
the appended claims.

1002106286
WHAT IS CLAIMED IS:
1.       A method for controlling electronic devices using a virtual assistant on a user
device, the method comprising:
         receiving, by the user device, an audio input comprising a user speech;
         transmitting data corresponding to the audio input to one or more servers;
         receiving, from the one or more servers, a plurality of commands to set a state
of each of a plurality of electronic devices determined by the one or more servers
based on a stored configuration; and
         transmitting the plurality of commands to the plurality of electronic devices.
2.       The method of claim 1, further comprising:
         receiving an updated state of each of the plurality of electronic devices from
the plurality of electronic devices; and
         transmitting the updated state of each of the plurality of electronic devices to
the one or more servers.
3.       The method of claim 1, wherein the user device comprises a mobile phone,
desktop computer, laptop computer, tablet computer, portable media player,
television, television set-top box, or wearable electronic device.
4.       The method of claim 1, wherein the plurality of electronic devices comprises
at least one light bulb, electrical outlet, switch, door lock, garage door, or thermostat.
5.       The method of claim 1, wherein the user device further receives, from the one
or more servers, identifications associated with one or more commands of the
plurality of commands, and
         wherein the identifications identify which electronic devices of the plurality of
electronic devices are to perform the one or more commands.
6.       The method of claim 1, wherein transmitting the plurality of commands to the
plurality of electronic devices comprises:
                                              41

1002106286
         transmitting the plurality of commands without first querying the plurality of
electronic devices to determine their current states.
7.       The method of claim 1, wherein current states of the plurality of electronic
devices are stored on the user device.
8.       The method of claim 7, wherein transmitting the plurality of commands to the
plurality of electronic devices comprises:
         transmitting the plurality of commands to the plurality of electronic devices
regardless of the stored current states.
9.       The method of claim 7, wherein transmitting the plurality of commands to the
plurality of electronic devices comprises:
         transmitting the plurality of commands to the plurality of electronic devices
based on the stored current states.
10.      The method of claim 2, further comprising:
         outputting an audio or visual indication of a result of the transmitted plurality
of commands, wherein the result is based on the transmitted plurality of commands
and the received updated state of each of the plurality of electronic devices.
11.      The method of claim 2, wherein at least one of the updated states of each of
the plurality of electronic devices is an error state, and
         wherein the error state represents an unavailable or undetermined state of an
electronic device.
12.      The method of claim 1, wherein transmitting data corresponding to the audio
input to the one or more servers further comprises:
         transmitting data corresponding to a location of the user device.
13.      The method of claim 12, wherein the one or more servers determine the
plurality of commands further based on the data corresponding to the location of the
user device.
                                             42

1002106286
14.      The method of claim 1, wherein transmitting data corresponding to the audio
input to the one or more servers further comprises:
         transmitting data corresponding to a current date and time.
15.      The method of claim 14, wherein the one or more servers determine the
plurality of commands further based on the data corresponding to the current date and
time.
16.      The method of claim 2, wherein the updated state of each of the plurality of
electronic devices comprises at least one ON/OFF state, dimmable state, color state,
ACTIVE/INACTIVE state, LOCKED/UNLOCKED state, OPEN/CLOSED state, or
temperature state.
17.      A method for controlling electronic devices using a virtual assistant on a user
device, the method comprising:
         receiving, by one or more servers, data corresponding to an audio input
comprising a user speech;
         performing speech to text conversion on the data corresponding to the audio
input to generate a textual representation of the user speech;
         determining that the textual representation of the user speech represents a user
intent to change the state of each of a plurality of electronic devices based on a
configuration; and
         transmitting a plurality of commands to set the state of each of the plurality of
electronic devices based on the configuration.
18.      The method of claim 17, further comprising:
         receiving an updated state of each of the plurality of electronic devices.
19.      A non-transitory computer-readable storage medium storing one or more
programs, the one or more programs comprising instructions, which when executed
by one or more processors of an electronic device, cause the electronic device to
perform the method of any one of claims 1-16.
                                            43

1002106286
20.      A system comprising:
         one or more processors;
         memory; and
         one or more programs, wherein the one or more programs are stored in the
memory and configured to be executed by the one or more processors, the one or
more programs including instructions for performing the method of any one of claims
1-16.
                                          44

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
