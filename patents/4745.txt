                                          23
                                      ABSTRACT
                           AUTOMATIC DATA TRANSFER
 5 Disclosed herein is a computer-implemented method for requesting a transfer of
   data, the method comprising: transmitting a first request for a transfer of data in
   response to the use of a user device; determining that the first request for the
   transfer of data has been declined; detecting an event that indicates that the
   transfer of data in response to the use of the user device can be accepted; and
10 transmitting a second request for the transfer of data in dependence on
   detecting that the event has occurred.
   [Fig 2]

                       2/3
                          Start        201
       Transmit a first request for a transfer of     203
         data in response to the use of a user
                         device
        Determine that the first request for the      205
          transfer of data has been declined
        Detect an event that indicates that the       207
      transfer of data in response to the use of
           the user device can be accepted
          Transmit a second request for the           209
          transfer of data in dependence on
         detecting that the event has occurred
                           End         211
                      FIG. 2
101     TA1
                                    10310
301T
        aData                 transfer--Ise
                            system                Ise
     302-
  302 TA3
303     TA4
                      FIG. 3

                                           1
                           AUTOMATIC DATA TRANSFER
   Cross-Reference to Related Applications
 5
   The disclosure of the complete specification of Australian Patent Application No.
   2015233169, as originally filed and as amended, is incorporated herein by
   reference.
10 Field of the Invention
   The present invention relates generally, but not exclusively, to automatic data
   transfer.   The present invention relates to a computer-implemented method
   performed in a payment network by one or both of a data transfer system server
15 or an issuer server for requesting a transfer of data in a payment processing
   system.
   According to an embodiment of the invention, a request for a transfer of data is
   only made when an event has occurred that indicates that the request is likely to
20 be accepted. Applications include the fast updating of a status list of devices
   that are denied use of a system. In another embodiment, data is automatically
   transferred between systems in order to update the status lists of each system.
   Background of the Invention
25
   The transport systems of many large cities, including London, Paris and
   Singapore, require users to have a proprietary transit card in order to pay for
   their journey. It would be a lot more convenient for users of a transport system
   to not be required to own such transit cards. The transport systems of some
30 transit agencies are therefore being adapted to accept standard bank issued
   cards, with the payment for a user's journey made as an online transaction. A
   problem experienced when allowing users to use a bank card to validly enter
   and exit a transport system is that the time required to perform an on-line

                                             2
   transaction with the user's bank card is longer than an acceptable length of time
   for delaying a user on entry and exit of the transport system.
   Known implementations of transport systems that allow users to pay for their
 5 journey with bank cards do not therefore typically perform an on-line transaction
   with the cards on entry and/or exit of the user from the transport system. The
   transport system only securely authenticates that each user's card is a suitable
   card for payment and that the card is not on a list of cards that are denied
   access to the transport system, i.e. a status list. The status list, that may be
10 considered to be a black list, includes details of cards that have balances to be
   settled and also details of cards that are denied travel for other reasons, such as
   the card being reported stolen or the user of the card being banned from travel
   on the transport system.
15 In order for the journey to be paid for, the transaction is made by the acquirer of
   the transport system sending a request for payment to the issuer of the bank
   card of the user. The request is sent either when the user is travelling on the
   transport system or when the user has already exited the transport system. If
   the payment request is denied by the issuer, the user is in debt to the transit
20 agency that provides the transport system as they have already consumed travel
   services.   In order ensure that the debt is recovered, the transport system
   typically adds the details of the bank card of the user to the transport system's
   status list of cards.   The user is therefore prevented from travelling on the
   transport system until the outstanding balance has been settled.
25
   A problem with the above technique of status listing a user is that the user may
   not be aware that their card has been added to status list and therefore has a
   very poor experience when their next attempt to enter the transport system is
   denied. Moreover, even if a user is aware that their card has been status listed,
30 the user is required to perform the inconvenient process of manually performing
   a task before being able to travel again.
   In order to solve the above problems, automatic debt recovery may be
   performed.      To perform automatic debt recovery, the transport system

                                               3
   automatically sends one or more further requests for payment to the issuer of
   the card (via their acquirer). If one of these requests is approved by the issuer,
   and payment is therefore made, the transit agency will typically automatically
   remove the card details of the user from the status list. A user may therefore be
 5 both added and removed from the status list without the user manually
   performing a task, or the user even knowing that their card was entered on the
   status list.  However, a problem experienced by the known automatic debt
   recovery techniques is that whether or not it will work is highly speculative. The
   number of allowed requests the technique is typically limited and the acquirer
10 can only guess a time for transmitting each request with no way of knowing
   whether the request is likely to work.          Moreover, automatic debt recovery
   requests typically may not start until 4 days after a declined authorisation of a
   transaction and a user may well attempt to travel on the transport system before
   an automatic debt recovery request has been sent.
15
   In addition, with regard to effective updating of the status list, the mechanism for
   updating the status list is slow and inherently restricted by the way that the
   transport system obtains transaction data.
20 There is therefore a need to improve the automatic transfer of data in general. It
   is generally desirable to overcome or ameliorate one or more of the above
   described difficulties, or to at least provide a useful alternative.
   Summary of the Invention
25
   In accordance with the present invention, there is provided a computer
   implemented method performed in a payment network by one or both of a data
   transfer system server or an issuer server for requesting a transfer of data in a
   payment processing system, the method comprising:
30         processing a first message requesting a transfer of data in relation to a
   transaction in response to the use of a contactless payment device, the
   transaction being for transfer of funds from the issuer server to an acquirer
   server via the data transfer system server;

                                              4
           subsequently determining that the requested transfer of data in relation to
   the transaction has been declined;
           subsequent to determining, detecting an event that indicates that the
   transfer of data in relation to the transaction may now be approved; and
 5         in response to said detecting, triggering the transmission of data
   comprising a second message requesting transfer of data in relation to the
   transaction,
          wherein determining that the transfer of data in relation to the transaction
   may now be approved comprises one of:
10         determining that a transfer of data in relation to a second transaction in
   response to the use of the contactless payment device has been approved, or
           determining that a transfer of data in relation to a transaction to an
   account associated with the contactless payment device has been approved.
15 Preferably, the method further comprises:
           generating the first request by a service provider;
           transmitting the first request from the service provider to the data transfer
   system via the acquirer;
           the data transfer system is configured to transfer messages and data
20 between the acquirer and issuer; and
           the issuer is configured to provide data relating to the payment that is
   transferred to the first acquirer in response to the acceptance of the first and/or
   second request.
25 Preferably, the event comprises detecting a data transfer to the issuer; wherein
   the data transfer is identified as corresponding to the used user device.
   Preferably, the method further comprises transmitting an indication that the
   event has occurred from the issuer to the data transfer system.
30
   Preferably, determining that the first request for a transfer of data has been
   declined comprises detecting, by the data transfer system, a message,
   transmitted from the issuer to the acquirer, declining a request for the transfer of
   data relating to the payment.

                                              5
   Preferably, the event comprises the detection of a message, transmitted from
   the issuer to the acquirer, accepting a further request for data transfer.
 5 Preferably, the method further comprises transmitting, by the data transfer
   system and/or issuer, in response to detecting an event has occurred, a
   message to the acquirer indicating that a further request should be made.
   Preferably, the method further comprises automatically transmitting the second
10 request, by the acquirer to the issuer, in response to receiving the message
   indicating that a further request should be made.
   Preferably the method further comprises:
           receiving, by the acquirer, a message indicating that a request for a
15 transfer of data in response to the use of a user device has been declined;
           transmitting, by the acquirer to a second service provider, a message
   indicating that the request for the transfer of data was declined; and
           adding, by the second service provider, identification information of the
   user to a list of user devices for having their use denied by the second service
20 provider.
   Preferably the method further comprises:
           receiving, by the acquirer, a message indicating that a request for a
   transfer of data in response to the use of a user device has been accepted;
25         transmitting, by the acquirer to a second service provider, a message
   indicating that the request for the transfer of data was accepted; and
           removing, by the second service provider, identification information of the
   use device from the list of user devices for having their use denied by the
   second service provider.
30
   Preferably, the second service provider is a transport system.

                                             6
   Preferably, the user device is at least one of a standard issue credit card, debit
   card, prepaid card, commercial card, charge card, mobile telephone, sticker,
   watch or key fob.
 5 Preferably, the user device is any device capable of making contactless
   payments.
   Preferably, said step of transmitting a second request for the transfer of data is
   also dependent on a determination that the transfer of data is desired.
10
   Preferably, the method further comprises:
           determining that said second request for the transfer of data has been
   declined; and
           repeating, until a request for the transfer of data has been accepted, the
15 steps of:
                   detecting an event that indicates that the transfer of data in
           response to the use of the user device can be accepted; and
                   transmitting a request for the transfer of data in dependence on
           detecting that the event has occurred.
20
   In accordance with the present invention, there is also provided one or more
   systems configured to perform the method described above.
   Brief Description of Drawings
25
   Preferred embodiments of the invention are hereafter described, by way of non
   limiting example only, with reference to the accompanying drawings, in which:
30 Figure 1 shows a system according to a first embodiment of the invention;
   Figure 2 is a flowchart of the first embodiment of the invention;
   Figure 3 shows a system according to a second embodiment of the invention;
   and
   Figure 4 is a flowchart of the second embodiment of the invention;
35

                                              7
   Detailed Description of Embodiments of the Invention
   A first embodiment of the invention provides an automatic data transfer
   operation that is performed soon after an event has been detected that indicates
 5 that the automatic data transfer is likely to be successful.
   The first embodiment is particularly advantageous for the application of
   automatic debt recovery, such as may be required by a transit agency that
   provides a transport system that users pay to use with a standard issue bank
10 card.    However, embodiments are in no way restricted to automatic debt
   recovery and are applicable to automatic data transfer in general.      Moreover,
   embodiments are not restricted to applications with transit agencies and are
   applicable in a wide variety of applications, such as people paying for entry to a
   venue or stadium.
15
   In addition, a second embodiment provides a technique for improving the speed
   and accuracy with which the status lists of more than one transit agency are
   updated.
20 The first embodiment is described below with reference to automatic debt
   recovery by a transit agency.      Users of a transport system supported by the
   transit agency pay for their journeys with a standard issue bank card.
   Figure 1 shows a system according to a first embodiment.              The system
25 comprises a transit agency 101, an acquirer 102 of the transit agency 101, a
   data transfer system 103 and an issuer 104.
   The transit agency 101 provides a transport system, such as a city's train or bus
   system. The transit agency 101 is shown as comprising a status list. The status
30 list comprises details of bank cards that are denied use of the transport system.
   The details of the bank cards are stored securely and may be tokenised. The
   status list may alternatively be provided by a separate system from the transit
   agency 101.

                                             8
   The acquirer 102 of the transit agency 101 is in communication with the transit
   agency 101 and the data transfer system 103. The acquirer 102 is responsible
   for obtaining the payments of users of the transit agency 101 and may be
   provided by the systems of the bank of the transit agency 101.
 5
   The data transfer system 103 is in communication with the acquirer 102 and the
   issuer 104 of each user's bank card. Although only one issuer 104 is shown, the
   data transfer system 103 would be in communication with many issuers of bank
   cards of schemes accepted by the transit agency 101 to pay for journeys. In
10 addition, the data transfer system 103 is also in communication with other
   acquirers than that of the transit agency 101 and is able to support other types of
   transaction between an acquirer 102 and an issuer 104, in addition to those from
   the transit agency 101.       The data transfer system 103 transfers messages,
   payment and any other transaction data between issuer 104 and acquirer 102
15 systems. The data transfer system 103 may be provided, for example, by a card
   scheme such as the systems of MasterCard@.
   The issuer 104 is in communication with the data transfer system 103.             The
   issuer 104 holds the account of the card that a user has used to attempt to pay
20 for their journey. The issuer 104 may be provided by the systems of a bank.
   A user uses their bank card on entry to the transit agency 101. The card details
   are read and compared with the card details on a status list. A plurality of
   versions of the status list may exist, with each status list stored locally in each of
25 a respective plurality of card readers, or a single status list may be stored at a
   central location that is in communication with the plurality of card readers. If the
   card details are not on the status list, and the card is determined to be suitable
   for paying for the card user's journey, then the user's card is accepted and the
   user is allowed to use the transit agency 101.        Due to the time required to
30 perform an on-line transaction being longer than would be acceptable to delay
   the passage of a user on entry to the transit agency 101, which will especially by
   the case if real time communication with the issuer 104 of the bank card is
   unavailable, the user is allowed to travel on the transport system 101 prior to a
   on-line transaction for obtaining payment for their journey has been completed.

                                             9
   The transit agency 101 may only require users to present a bank card at the
   start of their journey and generate a transaction based on the read card data on
   entry to the transit agency 101 alone. Alternatively, the transit agency 101 may
 5 also require users to present their bank card on exit from the transit agency 101
   and then generate a transaction in dependence on the read card data when a
   user exits the transit agency 101.
   The card details of the user are transmitted to the acquirer 102 with payment for
10 the user's journey.     In addition to the card details, other transaction data or
   payment data may be transmitted to the acquirer 102.             The acquirer 102
   receives the card details and sends a transaction request for the payment to the
   issuer 104 of the card.
15 If the request is accepted, a response message approving the transaction is sent
   from the issuer 104 to the acquirer 102 and the payment for the user's journey is
   made.
   If the transaction request is refused, as would be the case if the user had
20 insufficient funds to pay for their journey in their bank account, a response
   message is sent from the issuer 104 to the acquirer 102 informing the acquirer
   102 that the transaction request has been declined.
   After receiving a message that a transaction has been declined, the acquirer 102
25 sends a message to the transit agency 101 informing the transit agency 101 that
   it was not possible to pay for a user's journey with the user's card. The transit
   agency 101 then adds the user's card details to a status list of cards prevented
   from using the transit agency 101.
30 Once a user is blocked from travel, they are required to remedy the situation
   both with their issuer 104 and the transit agency 101.     There are a number of
   ways that this may happen. A non exhaustive list is below:

                                               10
       "    User Initiated via a web site - in this instance the transit agency 101
            provides a web site allowing the user to view their debt, and make
            attempts to pay it and re-start travel
       "    User Initiated via a call centre - in this instance the transit agency 101
 5          provides a telephone call centre allowing the user to hear their debt, and
            make attempts to pay it and re-start travel
       "    User Initiated via a ticket vending machine - in this instance the transit
            agency 101 provides an automated ticket vending machine allowing the
            user to view their debt, and make attempts to pay it and re-start travel
10     *    User Initiated via a ticket office/kiosk - in this instance the transit agency
            101 provides a manned ticket office or booth, allowing the user to view
           their debt, and make attempts to pay it and re-start travel
       "    User Initiated via a tap on a reader - in this instance the transit agency
            101 detects that the cardholder wishes to travel, and whilst they are
15          denied entry as their details are on the status list, the transit agency 101
            may take this as a sign that the user wishes to travel, and as such
            initiates an attempt to recover the money owed and allow the user to re
            start travel
20 In addition to these, a transit agency 101 may attempt debt recovery
   transactions automatically. Typically this may involve multiple attempts during
   an agreed time period, and may not start until a few days after the debt was
   incurred.
25 All of these mechanisms have problems - either they require the user to perform
   a set of actions (which may be complex, or hard to understand, particularly for
   overseas visitors to a city), or the transit agency 101 is attempting to recover the
   debt in a purely speculative basis, and potentially incurring transactional fees
   from their acquirer 102.
30
   Embodiments improve on known techniques by the issuer 104 automatically
   performing a debt recovery operation, at time that has a likely chance of
   success, so that a user's card details are automatically, and quickly, removed
   from the status list.

                                              11
   The inventors have realised that a common reason for a user's account having
   insufficient funds to pay for a journey is due to account funds running low in the
   days prior to the user being paid their salary, typically at the end of a month.
 5 The user can therefore be expected to have sufficient funds to pay for their
   journey in the near future, when their salary is paid into their account.
   According to the first embodiment, an event is monitored for that indicates that a
   user has sufficient funds in their account to make a payment that was previously
10 declined. In response to detecting such an event, an automatic debt recovery
   operation is preformed which, since the event has occurred, can be expected to
   succeed. A user's card can therefore be automatically and quickly removed
   from a status list in response to the payment.
15 In a first implementation of the first embodiment, the data transfer system 103
   monitors messages transmitted from the issuer 104 to the acquirer 102 via the
   data transfer system 103. When the data transfer system 103 detects that a
   message declining a transaction request is transmitted by the issuer 104, the
   data transfer system 103 both transmits the message to the acquirer 102 and
20 also logs that a transaction request by the acquirer 102 was declined. The data
   transfer system 103 therefore generates a log, or list, of card details such as
   Primary Account Numbers (the number embossed or printed on a payment card,
   also referred to as a PAN), and/or any other identification data, of cards that
   have had a transaction request declined.
25
   The data transfer system 103 monitors all of the transaction request messages
   that are transmitted over the data transfer system 103 between acquirers and
   issuers.      If the data transfer system 103 detects one or more transaction
   requests comprising card details of a card that is in the log, the data transfer
30 system 103 monitors the response to the request sent from the issuer 104 of the
   card. If the response approves a requested transaction, this is detected as an
   event that indicates that a user's account is once more in good standing and that
   it is likely that the user has sufficient funds in their account to make a payment
   that was previously declined.

                                             12
   An approved transaction may result due to the user using their card to make any
   type of purchase.      Since the transaction was successful, it is reasonable to
   assume that the account of the user has had funds transferred into it, for
 5 example due to the user receiving their salary payment, hence this is detected
   as an event.
   Alternatively, a user may have a salary payment, or other source of income
   (including for example a transfer from another bank account from the same
10 individual (e.g. a savings account), or including a transfer from another
   individual), transferred into their account as a load to their card.       The data
   transfer system 103 monitors for such a data transfer for card details that are in
   the log and detects this as an event that indicates that a user has sufficient funds
   in their account to make a payment that was previously denied.
15
   After detecting any of the above-described events, the data transfer system 103
   sends a message to the acquirer 102 of the transit agency 101 informing the
   acquirer 102 that it may be an appropriate time for performing an automatic debt
   recovery process.      In response to receiving this message, the acquirer 102
20 automatically sends one or more transaction requests to the issuer 104 for
   recovering the payment of the user's journey.         If one of these transaction
   requests is approved, the acquirer 102 automatically sends a message to the
   transit agency 101 informing the transit agency 101 that the user can be
   removed from the status list.
25
   In an alternative to the present embodiment, the acquirer 102 sends the
   determination that the user's account is once more in good standing to the
   transit agency 101, and the transit agency then determines whether or not it
   wishes to attempt to recover the debt. The acquirer 102 only sends one or more
30 transaction requests to the issuer 104 for recovering the payment on receipt of
   an instruction to do so from the transit agency 101.
   A second implementation        of the first embodiment is similar to the first
   implementation except that the issuer 104 that declined a transaction request

                                            13
   from the acquirer 102 of the transit agency 101 maintains such a log comprising
   details of cards that have had a transaction request refused. The issuer 104
   then monitors the account of each card in the log and detects events that
   indicate that a user has sufficient funds in their account to make a payment that
 5 was previously denied due to lack of funds. For example, the issuer 104 detects
   as events a salary payment, or any other payment of funds, into the
   corresponding account of a card with its details in the log. After detecting such
   an event, the issuer 104 sends a message to the data transfer system 103 who
   in turn sends the message to the acquirer 102 of the transit agency 101
10 informing the acquirer 102 that it is an appropriate time for performing an
   automatic debt recovery process and the process proceeds as already described
   for the first implementation.
   Advantageously, the second implementation can result in the acquirer 102 being
15 informed that it is an appropriate time to perform debt recovery faster than the
   first implementation as it is not necessary to wait for a user to perform a
   successful transaction, or for a user to receive a payment as a load to their card,
   in order for a event to be detected.
20 A third implementation is a combination of both of the above-described first and
   second implementations. Both the issuer 104 and the data transfer system 103
   are able to detect an event and send a message to the acquirer 102 of the
   transit agency 101 informing the acquirer 102 and the transit agency 101 that it
   is an appropriate time for attempting an automatic debt recovery process.
25
   Advantageously, embodiments quickly and automatically remove a user from a
   status list without the requirement of the user having to perform any steps.
   Furthermore the embodiments provide a higher degree of certainty and are less
   speculative than existing automatic debt recovery techniques. By waiting for an
30 event that indicates that a user has sufficient funds in their account, the
   automatic debt recovery process is performed with a high likelihood of success.
   Moreover, the automatic debt recovery is initiated when the data transfer system
   103 and/or issuer 104 informs the acquirer 102 that it is an appropriate time to
   perform the process. When such a data transfer system 103 and/or issuer 104

                                             14
   initiated automatic debt recovery process is performed, the acquirer 102 is not
   restricted by the operational constraints of acquirers that act autonomously when
   they perform an automatic debt recovery process and are not provided with an
   indication that it is an appropriate time to perform an automatic debt recovery
 5 process.
   A flowchart of a computer-implemented             process according to the first
   embodiment is shown in Figure 2.
10 In step 201, the process begins.
   In step 203, a first request is transmitted for a transfer of data in response to the
   use of a user device. This may be initiated by a user tapping their card in a
   transit agency 101, thus indicating that they wish to travel.
15
   In step 205, the process determines that the first request for the transfer of data
   has been declined.
   In step 207, the process detects an event that indicates that the transfer of data
20 in response to the use of the user device can be accepted.
   In step 209, the process transmits a second request in order to recover the debt
   for the transfer of data in dependence on detecting that the event has occurred.
   If this is also declined, the process may repeat steps 207 and 209 until the
25 second request is accepted.
   In step 211, the process ends.
   A second embodiment is described below that improves how quickly status lists
30 are updated and thereby their accuracy.
   According to the second embodiment, a data transfer system 103, that may be
   the data transfer system 103 as shown and described with reference to Figure 1,
   is used to update a plurality of status lists of a respective plurality of systems.

                                           15
   For example, the data transfer system 103 updates the status lists of the transit
   agency 101, as shown in Figure 1, as well as status lists of other transit
   agencies, or any other systems that have their own status lists.         The data
   transfer system 103 may be provided by, for example, a MasterCard@ system.
 5
   The second embodiment is described below with reference to the data transfer
   system 103 updating a plurality of status lists of a respective plurality of transit
   agencies. However, this is purely exemplary and the status lists may be of any
   type of system.
10
   Figure 3 shows a data transfer system 103, and a plurality of further systems,
   according to the second embodiment.
   TA1, TA2, TA3 and TA4 are all transit agencies and each transit agency may be
15 the transit agency 101 as described for the first embodiment.          The transit
   agencies 101, 301, 302 and 303 may provide different modes of transport, such
   as train or tram, and/or operate over different regions.     Although four transit
   agencies are shown in Figure 3, any number of transit agencies may be
   supported. Each of the transit agencies TA1, TA2, TA3 and TA4 comprises an
20 acquirer 102 and transport system as described for the first embodiment.
   Further, each of the transit agencies TA1, TA2, TA3 and TA4 may employ the
   services of the same acquirer 102, or may use a different acquirer, or some may
   use one acquirer and some may use another. All of the acquirers are connected
   to the data transfer system 103.
25
   Each transit agency is in communication with the data transfer system 103 via
   their respective acquirer. The data transfer system 103 is also in communication
   with one or more or all of the issuers that support transactions by the cards of
   users of each transit agency.
30
   Each transit agency maintains its own version of a status list comprising details
   of cards denied from using the transit agency.       Each status list may be as
   described for the first embodiment. The stored data within each status list may
   be any card details, such as a primary account number, PAN, that may be stored

                                            16
   in a tokenised form and may also include card details such as the expiry date
   and card sequence number within such a token.
   As described for the first embodiment, a transit agency TA1 sends a payment
 5 request to an issuer 104 via their acquirer and the data transfer system 103.
   The issuer 104 sends a message back to TA1, via the data transfer system 103
   and the relevant acquirer, informing TA1 that the requested payment is declined.
   TA1 then adds the card to a status list of TA1.
10 According to the second embodiment, the data transfer system 103 detects the
   message declining the payment that is sent from the issuer 104 and
   automatically sends a message to TA2, TA3 and TA4 that informs these other
   transit agencies that a payment request made with the card was declined. In
   response to receiving the message from the data transfer system 103, TA2, TA3
15 and TA4 may then decide to add the card to their status lists as well. A user's
   card may therefore be added to a status list of a transit agency even though the
   user has not failed to pay for a journey with that specific transit agency.
   Advantageously, each transit agency is able to quickly update their status list to
   prevent a user who is unable to pay for their journey from travelling.
20
   The data transfer system 103 also generates a log comprising details of cards
   that have had a transaction refused.        The data transfer system 103 then
   monitors messages sent over the data transfer system 103. If the data transfer
   system 103 detects a message from an issuer 104 that is an approval of a
25 payment for one of the logged cards, the data transfer system 103 then sends a
   message to all of the transit agencies that informs them that that a transaction
   has been approved for the card. In response to receiving the message, each of
   the transit agencies    may then     remove the card from        their status list.
   Advantageously, a user's card may be automatically removed from all of the
30 status lists.
   In an alternative implementation, before a card is removed from a status list, a
   transit agency may also determine if there is any payment due to them from the
   issuer 104 of the card. Only transit agencies for which there is no payment due

                                             17
   would then automatically remove the card details from their status list whereas
   transit agencies that still require payment would maintain the card on their status
   list.   Each transit agency may also perform an automatic debt recovery
   operation, if required, in response to receiving the message.
 5
   Advantageously, status lists of a plurality of separate systems are quickly and
   automatically updated.
   A flowchart of a computer-implemented process according to the second
10 embodiment is shown in Figure 4.
   In step 401, the process begins.
   In step 403, the process sends, by a first system 101 in response to the use of a
15 user device, a request for a transfer of data to the first system 101. This may be
   initiated by a user tapping their card in a transit agency 101, thus indicating that
   they wish to travel.
   In step 405, the process sends, in response to receiving the request, a message
20 declining the requested transfer of data to the first system 101.
   In step 407, the process detects the message declining the requested transfer of
   data.
25 In step 409, the process sends, in response to the detection, a message to a
   second system 301, 302, 303 that indicates to the second system 301, 302, 303
   that the requested transfer of data to the first system 101 was refused.
   In step 411, the process adds identification data of the user device to a list of
30 user devices that are denied use in the second system 301, 302, 303.
   In step 413, the process ends.

                                            18
   Many modifications and variations can be made to the above described
   embodiments without departing from the scope of the invention.
   For example, the second embodiment has been described with messages being
 5 sent to and from transit agencies. The skilled person would understand that the
   payment request messages and response messages would be sent and
   received by an acquirer of each the transit agencies.       The acquirer of each
   transit agency may be provided within the transit agency, as shown in Figure 5.
   Alternatively, each acquirer may be provided separately from the transit agency,
10 as shown in Figure 1.
   In both the first and second embodiments, the messages communicated through
   the data transfer system 103 may be standard Authorisation Request, Approve
   Response and Decline Response messages as known in data transfer systems.
15
   In the above-described embodiments, one or more status lists of respective
   systems are maintained. Each system may also have a white list that comprises
   details of cards that are never to be denied use by the system. In addition, when
   a payment is received corresponding to details of a card on the status list, so
20 that the card is prevented from being used by a transit agency, the details of the
   card may only have their status changed to allow the card to be used be the
   transit agency rather than actually removing the card details from the list
   Throughout the above-described embodiments, users are described as making
25 payments using cards. The card may be any standard issue bank card, such as
   a credit card, debit card, prepaid card, commercial card or charge card.
   Embodiments are not restricted to the use of cards and more generally include
   the use of any user device that can pay for the use of a system. The user device
   may be, for example, a mobile telephone, sticker, watch, key fob or any other
30 non-card form factor that is capable of making a contactless payment.
   The flow charts and descriptions thereof herein should not be understood to
   prescribe a fixed order of performing the method steps described therein.
   Rather, the method steps may be performed in any order that is practicable.

                                            19
   Although the present invention has been described in connection with specific
   exemplary embodiments, it should be understood that various changes,
   substitutions, and alterations apparent to those skilled in the art can be made to
   the disclosed embodiments without departing from the spirit and scope of the
 5 invention as set forth in the appended claims.
   Throughout this specification, unless the context requires otherwise, the word
   "comprise", and variations such as "comprises" and "comprising", will be
   understood to imply the inclusion of a stated integer or step or group of integers
10 or steps but not the exclusion of any other integer or step or group of integers or
   steps.
   The reference to any prior art in this specification is not, and should not be taken
   as, an acknowledgment or any form of suggestion that the prior art forms part of
15 the common general knowledge.

                                              20
   CLAIMS DEFINING THE INVENTION
   1.     A computer-implemented method performed in a payment network by
   one or both of a data transfer system server or an issuer server for requesting a
 5 transfer of data in a payment processing system, the method comprising:
           processing a first message requesting a transfer of data in relation to a
   transaction in response to the use of a contactless payment device, the
   transaction being for transfer of funds from the issuer server to an acquirer
   server via the data transfer system server;
10         subsequently determining that the requested transfer of data in relation to
   the transaction has been declined;
           subsequent to determining, detecting an event that indicates that the
   transfer of data in relation to the transaction may now be approved; and
           in response to said detecting, triggering the transmission of data
15 comprising a second message requesting transfer of data in relation to the
   transaction,
          wherein determining that the transfer of data in relation to the transaction
   may now be approved comprises one of:
           determining that a transfer of data in relation to a second transaction in
20 response to the use of the contactless payment device has been approved, or
           determining that a transfer of data in relation to a transaction to an
   account associated with the contactless payment device has been approved.
   2.      The method according to claim 1, performed by the data transfer system
25 server, wherein:
           processing the first message comprises receiving the first message from
   the acquirer server;
           determining that the requested transfer of data in relation to the
   transaction has been declined comprises receiving a transaction declined
30 message from the issuer server;
           detecting the event comprises either:
                   receiving a transaction approval message from the issuer server,
          wherein the transaction approval message identifies a funding account
          which was identified as a funding account in the first message, or

                                              21
                    receiving a load request message identifying a recipient account
           which was identified as a funding account in the first message; and
            triggering the transmission of the second message comprises transmitting
   the second message to the issuer server.
 5
   3.       The method according to claim 1, performed by the issuer server,
   wherein:
            processing the first message comprises receiving the first message from
   the data transfer system server;
10          determining that the requested transfer of data in relation to the
   transaction has been declined comprises determining that a funding account
   identified in the first message does not have sufficient funds to complete the
   requested transfer of data in relation to the transaction;
            detecting the event comprises receiving a payment into the funding
15 account identified in the first message; and
            triggering the transmission of a second message requesting the transfer
   of data in relation to the transaction comprises sending a message to the
   acquirer server via the data transfer system server to inform the acquirer that it is
   an appropriate time for performing an automatic debt recovery process.
20
   4.       The method according to any one of claims 1 to 3, further comprising, in
   response to determining that the requested transfer of data in relation to the
   transaction has been declined, entering an identifier of a funding account
   identified in the first message into a log.
25
   5.       The method according to claim 4, further comprising:
            subsequent to triggering the transmission of the second message,
   determining that the transfer of data in relation to the transaction has been
   approved; and
30          responsive thereto, removing the identifier from the log.
   6.       The method according to claim 5, further comprising informing a server of
   a transit agency whose account is identified as a recipient account in the first
   message whenever changes are made to the log.

                                         22
  7.     The method according to any preceding claim, wherein the contactless
  payment device is one of a credit card, debit card, prepaid card, commercial
5 card, charge card, mobile telephone, sticker, watch or key fob.
  8.     One or more computer systems configured to perform the method of any
  preceding claim.

<removed-apn> <removed-date>
<removed-apn> <removed-date>
<removed-apn> <removed-date>
